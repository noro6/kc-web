(self["webpackChunkkc_web"]=self["webpackChunkkc_web"]||[]).push([[144],{7424:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return Oe}});var s=a(7359),i=a(4562),l=a(9582),o=a(4886),n=a(4061),r=a(9223),c=a(4324),d=a(5495),p=a(9592),h=a(8419),u=a(6379),m=a(626),v=a(2165),g=a(7771),f=a(5085),b=a(9780),x=a(2648),k=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"ma-sm-4"},[e("div",{staticClass:"mb-3"},[e(c.Z,{attrs:{"x-large":""}},[t._v("mdi-database-cog")]),e("span",{staticClass:"ml-1"},[t._v(t._s(t.$t("Home.艦娘 / 装備管理")))])],1),e(g.Z,{staticClass:"feature-tab",attrs:{"show-arrows":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(m.Z,[t._v(t._s(t.$t("Fleet.艦娘")))]),e(m.Z,{attrs:{disabled:t.loading}},[t._v(t._s(t.$t("Fleet.装備")))]),e(m.Z,{attrs:{disabled:t.readOnlyMode||t.loading}},[t._v(t._s(t.$t("Database.反映")))]),e(m.Z,{attrs:{disabled:t.loading}},[t._v(t._s(t.$t("Common.共有")))]),e(m.Z,{attrs:{disabled:t.loading}},[t._v(t._s(t.$t("Database.統計")))])],1),e(r.Z),e(f.Z,{attrs:{touchless:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(v.Z,[e("ships")],1),e(v.Z,[e("items")],1),e(v.Z,[e("div",{staticClass:"general-container px-1 px-sm-4 my-2"},[e("div",{staticClass:"tutorial_box pa-0"},["ja"===t.$i18n.locale?e(l.Z,{attrs:{elevation:"0"}},[e(s.Z,{attrs:{border:"left",dense:"",outlined:"",type:"warning"}},[e("div",[t._v("以下の手順は、艦これサーバーから正常に送られてきた情報を、通常のブラウザの機能を使って閲覧しているだけのものであり、")]),e("div",{staticClass:"font-weight-bold"},[t._v("艦これサーバーへの不正なアクセスや、通常プレイ以外の方法でサーバーへの接続を試みるものではありません。")])])],1):t._e(),"ja"===t.$i18n.locale?e(l.Z,{attrs:{elevation:"0"}},[e(s.Z,{attrs:{border:"left",dense:"",outlined:"",type:"info"}},[e("div",[t._v("2023/06/22")]),e("div",[t._v("反映方法を簡略化しました。また、Firefoxでの反映に対応しました。")])])],1):t._e(),e(i.Z,{staticClass:"mt-3",class:{secondary:t.showHowToDoIt,primary:!t.showHowToDoIt},on:{click:function(e){t.showHowToDoIt=!t.showHowToDoIt}}},[t.showHowToDoIt?[e(c.Z,[t._v("mdi-close")]),t._v(t._s(t.$t("Database.反映手順を隠す")))]:[e(c.Z,[t._v("mdi-plus")]),t._v(t._s(t.$t("Database.反映手順を表示")))]],2)],1),t.showHowToDoIt?e(l.Z,{staticClass:"tutorial_box"},[e("div",[t._v(" 1. "+t._s(t.$t("Database.手順1"))+" ")]),e("div",{staticClass:"tutorial_img"},[e("a",{attrs:{href:"./img/tutorial/step1.webp",target:"_blank"}},[e("span",{staticClass:"d-none"},[t._v("step1")]),e(d.Z,{attrs:{src:"./img/tutorial/step1.webp","max-height":"900","max-width":"1300"}})],1)]),e("div",{staticClass:"mt-10"},[t._v("※ "+t._s(t.$t("Database.下記はGoogle Chromeの場合です。")))]),e("div",{staticClass:"tutorial_img"},[e("a",{attrs:{href:"./img/tutorial/step1-2.webp",target:"_blank"}},[e("span",{staticClass:"d-none"},[t._v("step1-2")]),e(d.Z,{attrs:{src:"./img/tutorial/step1-2.webp","max-height":"900","max-width":"1300"}})],1)])]):t._e(),t.showHowToDoIt?e(l.Z,{staticClass:"tutorial_box"},[e("div",[t._v("2. "+t._s(t.$t("Database.手順2")))]),e("div",{staticClass:"tutorial_img"},[e("a",{attrs:{href:"./img/tutorial/step2.webp",target:"_blank"}},[e("span",{staticClass:"d-none"},[t._v("step2")]),e(d.Z,{attrs:{src:"./img/tutorial/step2.webp","max-height":"900","max-width":"1300"}})],1)])]):t._e(),t.showHowToDoIt?e(l.Z,{staticClass:"tutorial_box"},[e("div",[t._v("3. "+t._s(t.$t("Database.手順3")))]),e("div",[t._v("※ "+t._s(t.$t("Database.注意事項")))]),e("div",{staticClass:"tutorial_img"},[e("a",{attrs:{href:"./img/tutorial/step3.webp",target:"_blank"}},[e("span",{staticClass:"d-none"},[t._v("step3")]),e(d.Z,{attrs:{src:"./img/tutorial/step3.webp","max-height":"900","max-width":"1300"}})],1)]),e("div",{staticClass:"mt-10"},[t._v("※ "+t._s(t.$t("Database.ブラウザによって一部表記が変わります。")))]),e("div",{staticClass:"tutorial_img"},[e("a",{attrs:{href:"./img/tutorial/step3-1.webp",target:"_blank"}},[e("span",{staticClass:"d-none"},[t._v("step3-1")]),e(d.Z,{attrs:{src:"./img/tutorial/step3-1.webp","max-height":"570","max-width":"1250"}})],1)])]):t._e(),t.showHowToDoIt?e(l.Z,{staticClass:"tutorial_box"},[e("div",[t._v("4. "+t._s(t.$t("Database.手順4")))]),e("div",{staticClass:"d-flex align-center mt-3"},[e(u.Z,{staticClass:"mt-0",attrs:{row:"","hide-details":""},on:{change:function(e){return t.toggleUnLocked()}},model:{value:t.includeUnLockedShip,callback:function(e){t.includeUnLockedShip=e},expression:"includeUnLockedShip"}},[e(h.Z,{attrs:{label:t.$t("Database.未ロックの艦娘も含める"),value:!0}}),e(h.Z,{attrs:{label:t.$t("Database.ロック済みの艦娘のみ"),value:!1}})],1),e("div",{staticClass:"min-level-input mt-3 mt-sm-0"},[e(b.Z,{attrs:{type:"number",max:t.maxLevel,min:"1",label:t.$t("Database.取込Lv下限"),"hide-details":"",outlined:"",dense:""},on:{change:function(e){return t.changeMinLevel()}},model:{value:t.importMinLevel,callback:function(e){t.importMinLevel=t._n(e)},expression:"importMinLevel"}})],1)],1),e(x.Z,{staticClass:"mt-4",attrs:{outlined:"",dense:"","hide-details":"","no-resize":"",label:t.$t("Database.反映エリア")},model:{value:t.inputText,callback:function(e){t.inputText="string"===typeof e?e.trim():e},expression:"inputText"}}),e(i.Z,{staticClass:"mt-4",attrs:{color:"primary",block:""},on:{click:function(e){return t.readJson()}}},[t._v(t._s(t.$t("Database.反映")))])],1):t._e(),t.showHowToDoIt?e(l.Z,{staticClass:"tutorial_box"},[e("div",[t._v("5. "+t._s(t.$t("Database.手順5")))]),e("div",[t._v("※ "+t._s(t.$t("Database.注意事項")))]),e("div",{staticClass:"tutorial_img"},[e("a",{attrs:{href:"./img/tutorial/step5.webp",target:"_blank"}},[e("span",{staticClass:"d-none"},[t._v("step3")]),e(d.Z,{attrs:{src:"./img/tutorial/step5.webp","max-height":"900","max-width":"1300"}})],1)])]):t._e(),e(l.Z,{staticClass:"tutorial_box"},[t.showHowToDoIt?e("div",[t._v("6. "+t._s(t.$t("Database.手順4")))]):t._e(),e("div",{staticClass:"d-flex flex-wrap align-center"},[t.showHowToDoIt?t._e():e(u.Z,{staticClass:"mt-0",attrs:{row:"","hide-details":""},on:{change:function(e){return t.toggleUnLocked()}},model:{value:t.includeUnLockedShip,callback:function(e){t.includeUnLockedShip=e},expression:"includeUnLockedShip"}},[e(h.Z,{attrs:{label:t.$t("Database.未ロックの艦娘も含める"),value:!0}}),e(h.Z,{attrs:{label:t.$t("Database.ロック済みの艦娘のみ"),value:!1}})],1),t.showHowToDoIt?t._e():e("div",{staticClass:"min-level-input mt-3 mt-sm-0"},[e(b.Z,{attrs:{type:"number",max:t.maxLevel,min:"1",label:t.$t("Database.取込Lv下限"),"hide-details":"",outlined:"",dense:""},on:{change:function(e){return t.changeMinLevel()}},model:{value:t.importMinLevel,callback:function(e){t.importMinLevel=t._n(e)},expression:"importMinLevel"}})],1)],1),e(u.Z,{attrs:{row:"","hide-details":""},on:{change:function(e){return t.toggleUnLocked()}},model:{value:t.includeUnLockedItem,callback:function(e){t.includeUnLockedItem=e},expression:"includeUnLockedItem"}},[e(h.Z,{attrs:{label:t.$t("Database.未ロックの装備も含める"),value:!0}}),e(h.Z,{attrs:{label:t.$t("Database.ロック済みの装備のみ"),value:!1}})],1),e(x.Z,{staticClass:"mt-4",attrs:{outlined:"",dense:"","hide-details":"","no-resize":"",label:t.$t("Database.反映エリア")},model:{value:t.inputText,callback:function(e){t.inputText="string"===typeof e?e.trim():e},expression:"inputText"}}),e(i.Z,{staticClass:"mt-4",attrs:{color:"primary",block:""},on:{click:function(e){return t.readJson()}}},[t._v(t._s(t.$t("Database.反映")))])],1)],1)]),e(v.Z,[e(l.Z,{staticClass:"my-3 pa-2"},[e("div",{staticClass:"d-flex pt-3 pb-4"},[e("div",{staticClass:"align-self-center ml-3"},[t._v(t._s(t.$t("Database.共有URL発行機能")))])]),e(r.Z),e("div",{staticClass:"pa-4"},[e("div",{staticClass:"mb-2"},[t._v(t._s(t.$t("Database.共有URL発行機能")))]),e("div",{staticClass:"body-2"},[t._v(t._s(t.$t("Database.自分の艦隊、装備情報を他の人に見てもらうためのURLを発行します。")))]),e("div",{staticClass:"body-2"},[t._v(" "+t._s(t.$t("Database.発行された情報は閲覧専用です。発行されたURLを他人に公開しても、自分の艦娘や装備情報が書き換えられてしまうことはありません。"))+" ")]),e("div",{staticClass:"body-2 mb-3"},[t._v(t._s(t.$t("Database.閲覧する側は、共有された艦娘や装備情報を元に編成を作成することができます。")))]),e("div",{staticClass:"shared-url-container"},[e("div",{staticClass:"d-flex align-center"},[e(i.Z,{directives:[{name:"show",rawName:"v-show",value:!t.createdURL,expression:"!createdURL"}],attrs:{color:"primary",loading:t.loadingURL,disabled:t.loadingURL||t.readOnlyMode},on:{click:function(e){return t.requestURLKey()}}},[t._v(t._s(t.$t("Database.共有URL作成")))])],1),e(b.Z,{directives:[{name:"show",rawName:"v-show",value:t.createdURL,expression:"createdURL"}],attrs:{id:"created-url",readonly:"","append-icon":"mdi-content-copy",hint:t.copiedURLHint?t.$t(`Common.${t.copiedURLHint}`):""},on:{"click:append":t.copyURL,blur:t.clearURLHint},model:{value:t.createdURL,callback:function(e){t.createdURL=e},expression:"createdURL"}})],1)]),e(r.Z),e("div",{staticClass:"pa-4"},[e("div",{staticClass:"mb-2"},[t._v(t._s(t.$t("Database.URL発行履歴")))]),e(g.Z,{model:{value:t.yearTab,callback:function(e){t.yearTab=e},expression:"yearTab"}},[e(m.Z,[t._v("ALL")]),t._l(t.years,(function(a){return e(m.Z,{key:`year${a}`},[t._v(t._s(a))])}))],2),e(r.Z),e("div",{staticClass:"d-flex flex-column-reverse"},[t._l(t.outputHistories,(function(a,s){return[!t.yearTab||a.createdAt&&a.createdAt.startsWith&&a.createdAt.startsWith(`${t.years[t.yearTab-1]}`)?e(l.Z,{key:`history_${s}`,staticClass:"mt-3 pa-2 d-flex"},[e("div",{staticClass:"mr-2 align-self-center caption"},[e("div",[t._v(t._s(t.$t("Database.発行日"))+":")]),e("div",[t._v(t._s(a.createdAt))])]),e("div",{staticClass:"mr-2 align-self-center"},[e(i.Z,{attrs:{color:"primary",disabled:t.expandBtnClicked||t.readOnlyMode},on:{click:function(e){return t.expandHistory(a.id)}}},[t._v(t._s(t.$t("Database.展開")))])],1),e("div",{staticClass:"mr-2 align-self-center"},[e(i.Z,{attrs:{color:"error"},on:{click:function(e){return t.clickedDeleteHistory(a.id)}}},[t._v(t._s(t.$t("Common.削除")))])],1),e("div",{staticClass:"mr-2 align-self-center"},[e(i.Z,{attrs:{color:"success",disabled:!a.remarks||!a.remarks.length},on:{click:function(e){return t.updateHistory(a.id)}}},[t._v(t._s(t.$t("Common.更新")))])],1),e("div",{staticClass:"align-self-center flex-grow-1"},[e(b.Z,{attrs:{dense:"",outlined:"","hide-details":"",label:"memo"},model:{value:a.remarks,callback:function(e){t.$set(a,"remarks",e)},expression:"data.remarks"}})],1)]):t._e()]}))],2)],1)],1),e(l.Z,{staticClass:"my-3 pa-2"},[e("div",{staticClass:"d-flex pt-3 pb-4"},[e("div",{staticClass:"align-self-center ml-3"},[t._v(t._s(t.$t("Database.他サイト連携")))])]),e(r.Z),e("div",{staticClass:"pa-4"},[e("div",{staticClass:"mb-2"},[t._v(t._s(t.$t("Database.艦隊分析コード")))]),e("div",{staticClass:"body-2"},[t._v(" "+t._s(t.$t("Database.艦隊分析コードが出力されています。この文字列を別の端末で反映することで、艦隊情報を復元することができます。"))+" ")]),e("div",{staticClass:"mt-4"},[e(b.Z,{attrs:{id:"analytics-ship-code",outlined:"",readonly:"",dense:"",label:t.$t("Database.艦隊コード"),"append-icon":"mdi-content-copy",hint:t.copiedShipCodeHint?t.$t(`Common.${t.copiedShipCodeHint}`):""},on:{"click:append":t.copyShipCode,blur:t.clearShipCodeHint},model:{value:t.kantaiAnalyticsShipsCode,callback:function(e){t.kantaiAnalyticsShipsCode=e},expression:"kantaiAnalyticsShipsCode"}})],1),e("div",[e(b.Z,{attrs:{id:"analytics-item-code",outlined:"",readonly:"",dense:"",label:t.$t("Database.装備コード"),"append-icon":"mdi-content-copy",hint:t.copiedItemCodeHint?t.$t(`Common.${t.copiedItemCodeHint}`):t.copiedItemCodeHint},on:{"click:append":t.copyItemCode,blur:t.clearItemCodeHint},model:{value:t.kantaiAnalyticsItemsCode,callback:function(e){t.kantaiAnalyticsItemsCode=e},expression:"kantaiAnalyticsItemsCode"}})],1)]),e(r.Z),e("div",{staticClass:"pa-4"},[e("div",{staticClass:"mb-2"},[t._v("艦隊晒しページ(仮)")]),e("div",{staticClass:"body-2"},[e("a",{attrs:{href:t.kantaiSarashiURL,target:"_blank"}},[t._v(t._s(t.$t("Database.艦隊晒しページ(仮)で展開する場合はこちらから")))])])])],1)],1),e(v.Z,[e("fleet-statics")],1)],1),e("div",{staticClass:"info-area"},[e(r.Z,{staticClass:"mb-2"}),e("div",{staticClass:"caption"},[t._v(" "+t._s(t.$t("Home.著作権法第32条に基づき画像を引用し、著作権は権利者様へ帰属します。権利者様側からの画像等の削除の依頼や警告には速やかに対処いたします。"))+" ")]),e("div",{staticClass:"caption"},[t._v(" "+t._s(t.$t("Home.また、本サイトの情報、計算結果によって受けた利益・損害その他あらゆる事象については一切の責任を負いません。"))+" ")])],1),e(n.Z,{attrs:{transition:"scroll-x-transition",width:"400"},model:{value:t.confirmDialog,callback:function(e){t.confirmDialog=e},expression:"confirmDialog"}},[e(l.Z,{staticClass:"pa-3"},[e("div",{staticClass:"ma-4"},[e("div",[t._v(t._s(t.$t("Common.本当に削除しますか？")))])]),e(r.Z,{staticClass:"my-2"}),e("div",{staticClass:"d-flex"},[e(i.Z,{staticClass:"ml-auto",attrs:{color:"primary",dark:"",disabled:!t.confirmDialog},on:{click:function(e){return e.stopPropagation(),t.deleteHistory()}}},[t._v(t._s(t.$t("Common.削除")))]),e(i.Z,{staticClass:"ml-4",attrs:{color:"secondary"},on:{click:function(e){e.stopPropagation(),t.confirmDialog=!1}}},[t._v(t._s(t.$t("Common.戻る")))])],1)],1)],1),e(n.Z,{attrs:{persistent:"",width:"300"},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[e(l.Z,{attrs:{dark:""}},[e(o.ZB,[e("div",{staticClass:"pt-2"},[t._v(t._s(t.$t("Database.在籍艦娘 / 所持装備データ読込中"))+"...")]),e(p.Z,{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e(n.Z,{attrs:{transition:"scroll-x-transition",width:"700"},model:{value:t.areaOverwriteConfirmDialog,callback:function(e){t.areaOverwriteConfirmDialog=e},expression:"areaOverwriteConfirmDialog"}},[e(l.Z,{staticClass:"pa-3"},[e("div",{staticClass:"ma-4"},[e("div",{staticClass:"body-2"},[t._v(t._s(t.$t("Database.札上書き注意")))]),e("div",{staticClass:"body-2 mt-1"},[t._v(t._s(t.$t("Database.このまま取り込むと")))]),e("div",{staticClass:"d-flex flex-wrap justify-space-around"},[e(i.Z,{staticClass:"mt-3",attrs:{color:"primary"},on:{click:function(e){return t.overwriteAreaImport()}}},[t._v(t._s(t.$t("Database.札データを上書きして取り込む")))]),e(i.Z,{staticClass:"mt-3",attrs:{color:"success"},on:{click:function(e){return t.importWithoutArea()}}},[t._v(t._s(t.$t("Database.札データを上書きせず取り込む")))])],1)]),e(r.Z,{staticClass:"my-2"}),e("div",{staticClass:"d-flex"},[e(i.Z,{staticClass:"ml-auto",attrs:{color:"secondary"},on:{click:function(e){e.stopPropagation(),t.areaOverwriteConfirmDialog=!1}}},[t._v(t._s(t.$t("Common.戻る")))])],1)],1)],1)],1)},_=[],C=a(144),y=a(6162),S=a.n(y),$=a(2016),w=a(3486),Z=a(5151),D=a(2240),L=a(6746),R=a(6878),I=a(7756),T=a(6669),P=a(7678),M=(0,P.Z)(R.Z,(0,I.Z)({onVisible:["init"]}),T.Z).extend({name:"v-pagination",directives:{Resize:L.Z},props:{circle:Boolean,disabled:Boolean,length:{type:Number,default:0,validator:t=>t%1===0},nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},totalVisible:[Number,String],value:{type:Number,default:0},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},wrapperAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.wrapper"}},data(){return{maxButtons:0,selected:null}},computed:{classes(){return{"v-pagination":!0,"v-pagination--circle":this.circle,"v-pagination--disabled":this.disabled,...this.themeClasses}},items(){const t=parseInt(this.totalVisible,10);if(0===t||isNaN(this.length)||this.length>Number.MAX_SAFE_INTEGER)return[];const e=Math.min(Math.max(0,t)||this.length,Math.max(0,this.maxButtons)||this.length,this.length);if(this.length<=e)return this.range(1,this.length);const a=e%2===0?1:0,s=Math.floor(e/2),i=this.length-s+1+a;if(this.value>s&&this.value<i){const t=1,e=this.length,i=this.value-s+2,l=this.value+s-2-a,o=i-1===t+1?2:"...",n=l+1===e-1?l+1:"...";return[1,o,...this.range(i,l),n,this.length]}if(this.value===s){const t=this.value+s-1-a;return[...this.range(1,t),"...",this.length]}if(this.value===i){const t=this.value-s+1;return[1,"...",...this.range(t,this.length)]}return[...this.range(1,s),"...",...this.range(i,this.length)]}},watch:{value(){this.init()}},beforeMount(){this.init()},methods:{init(){this.selected=null,this.onResize(),this.$nextTick(this.onResize),setTimeout((()=>this.selected=this.value),100)},onResize(){const t=this.$el&&this.$el.parentElement?this.$el.parentElement.clientWidth:window.innerWidth;this.maxButtons=Math.floor((t-96)/42)},next(t){t.preventDefault(),this.$emit("input",this.value+1),this.$emit("next")},previous(t){t.preventDefault(),this.$emit("input",this.value-1),this.$emit("previous")},range(t,e){const a=[];t=t>0?t:1;for(let s=t;s<=e;s++)a.push(s);return a},genIcon(t,e,a,s,i){return t("li",[t("button",{staticClass:"v-pagination__navigation",class:{"v-pagination__navigation--disabled":a},attrs:{disabled:a,type:"button","aria-label":i},on:a?{}:{click:s}},[t(D.Z,[e])])])},genItem(t,e){const a=e===this.value&&(this.color||"primary"),s=e===this.value,i=s?this.currentPageAriaLabel:this.pageAriaLabel;return t("button",this.setBackgroundColor(a,{staticClass:"v-pagination__item",class:{"v-pagination__item--active":e===this.value},attrs:{type:"button","aria-current":s,"aria-label":this.$vuetify.lang.t(i,e)},on:{click:()=>this.$emit("input",e)}}),[e.toString()])},genItems(t){return this.items.map(((e,a)=>t("li",{key:a},[isNaN(Number(e))?t("span",{class:"v-pagination__more"},[e.toString()]):this.genItem(t,e)])))},genList(t,e){return t("ul",{directives:[{modifiers:{quiet:!0},name:"resize",value:this.onResize}],class:this.classes},e)}},render(t){const e=[this.genIcon(t,this.$vuetify.rtl?this.nextIcon:this.prevIcon,this.value<=1,this.previous,this.$vuetify.lang.t(this.previousAriaLabel)),this.genItems(t),this.genIcon(t,this.$vuetify.rtl?this.prevIcon:this.nextIcon,this.value>=this.length,this.next,this.$vuetify.lang.t(this.nextAriaLabel))];return t("nav",{attrs:{role:"navigation","aria-label":this.$vuetify.lang.t(this.wrapperAriaLabel)}},[this.genList(t,e)])}}),A=a(2199),E=a(9481),H=a(9670),F=a(3687),N=a(2082),B=a(7069),U=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"mt-3"},[e(g.Z,{staticClass:"ship-analytics-tab",attrs:{"show-arrows":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(m.Z,{attrs:{href:"#list"}},[t._v(t._s(t.$t("Database.一覧")))]),e(m.Z,{attrs:{href:"#analytics"}},[t._v(t._s(t.$t("Database.分析")))]),e(m.Z,{attrs:{href:"#status_up"}},[t._v(t._s(t.$t("Database.ステータス上昇")))]),t.readOnly?e(m.Z,{attrs:{href:"#compare"}},[t._v(t._s(t.$t("Database.比較")))]):t._e(),t.shipStock.length?e(m.Z,{attrs:{href:"#group"}},[t._v(t._s(t.$t("Database.札管理")))]):t._e()],1),e(r.Z,{staticClass:"mb-2"}),e(f.Z,{attrs:{touchless:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(v.Z,{attrs:{value:"list"}},[e("div",{staticClass:"d-flex align-center flex-wrap mt-2"},[e(i.Z,{staticClass:"mb-3",attrs:{color:"info"},on:{click:function(e){t.filterDialog=!0}}},[e(c.Z,[t._v("mdi-filter")]),t._v(" "+t._s(t.$t("Common.絞り込み"))+" "),e("span",{staticClass:"caption"},[t._v("("+t._s(t.viewShips.length)+t._s(t.isNotJapanese?"":"隻")+" / "+t._s(t.allCount)+t._s(t.isNotJapanese?"":"隻")+")")])],1),t.viewShips.length!==t.allCount?e(i.Z,{staticClass:"ml-1 d-none d-sm-block mb-3",attrs:{text:""},on:{click:function(e){return t.resetFilterCondition()}}},[t._v(" "+t._s(t.$t("Common.リセット"))+" ")]):t._e(),e(w.Z,{staticClass:"mt-0 mb-3 pt-0 ml-3",attrs:{dense:"","hide-details":"",label:t.$t("Database.ネタバレ防止")},on:{change:function(e){return t.changeAvoidSpoiler()}},model:{value:t.isAvoidSpoiler,callback:function(e){t.isAvoidSpoiler=e},expression:"isAvoidSpoiler"}}),t.isMobile?t._e():e($.Z,{staticClass:"ml-auto mb-3",attrs:{dense:"",borderless:"",mandatory:""},model:{value:t.modeTable,callback:function(e){t.modeTable=e},expression:"modeTable"}},[e(i.Z,{class:{"blue darken-2 white--text":t.modeTable},attrs:{value:!0},on:{click:function(e){return e.stopPropagation(),t.changeViewMode(!0)}}},[e(c.Z,[t._v("mdi-view-headline")]),e("span",[t._v(t._s(t.$t("Database.一覧表示")))])],1),e(i.Z,{class:{"blue darken-2 white--text":!t.modeTable},attrs:{value:!1},on:{click:function(e){return e.stopPropagation(),t.changeViewMode(!1)}}},[e(c.Z,[t._v("mdi-view-comfy")]),e("span",[t._v(t._s(t.$t("Database.艦隊分析表示")))])],1)],1)],1),e(n.Z,{attrs:{transition:"scroll-x-transition",width:"800",fullscreen:t.isMobile},on:{input:t.toggleFilterDialog},model:{value:t.filterDialog,callback:function(e){t.filterDialog=e},expression:"filterDialog"}},[e(l.Z,{staticClass:"filter-dialog-card"},[e("div",{staticClass:"d-flex pt-2 pb-1 px-2"},[e("div",{staticClass:"align-self-center ml-3 body-2"},[t._v(t._s(t.$t("Common.絞り込み")))]),e(F.Z),e(i.Z,{staticClass:"mr-3 align-self-center",attrs:{small:"",text:""},on:{click:function(e){return e.stopPropagation(),t.resetFilterCondition()}}},[t._v(" "+t._s(t.$t("Common.リセット"))+" ")]),e(i.Z,{attrs:{icon:""},on:{click:function(e){return t.closeFilterDialog()}}},[e(c.Z,[t._v("mdi-close")])],1)],1),e(r.Z,{staticClass:"mx-2"}),e("div",{staticClass:"filter-dialog-body pr-1"},[e("div",{staticClass:"d-flex"},[e("div",{staticClass:"caption"},[t._v(t._s(t.$t("Database.基本条件")))]),e("div",{staticClass:"header-divider"})]),e("div",{staticClass:"px-sm-3 pt-2 d-flex justify-space-between align-center flex-wrap"},[e("div",{staticClass:"keyword-input"},[e(b.Z,{attrs:{dense:"","hide-details":"",clearable:"","prepend-inner-icon":"mdi-magnify",label:t.$t("Database.名称検索")},model:{value:t.searchWord,callback:function(e){t.searchWord="string"===typeof e?e.trim():e},expression:"searchWord"}})],1),e("div",{staticClass:"stock-checkbox ml-sm-5"},[e(w.Z,{attrs:{dense:"","hide-details":"",label:t.$t("Database.未着任艦非表示"),disabled:t.onlyNoStock},model:{value:t.onlyStock,callback:function(e){t.onlyStock=e},expression:"onlyStock"}}),e(w.Z,{attrs:{dense:"","hide-details":"",label:t.$t("Database.未着任艦のみ"),disabled:t.onlyStock},model:{value:t.onlyNoStock,callback:function(e){t.onlyNoStock=e},expression:"onlyNoStock"}}),e(w.Z,{attrs:{dense:"","hide-details":"",label:t.$t("Fleet.お気に入り")},model:{value:t.onlyBookmarked,callback:function(e){t.onlyBookmarked=e},expression:"onlyBookmarked"}}),e(w.Z,{attrs:{dense:"","hide-details":"",label:t.$t("Fleet.ケッコン艦")},model:{value:t.onlyMarriage,callback:function(e){t.onlyMarriage=e},expression:"onlyMarriage"}}),e("manual-checkbox",{attrs:{ok:t.onlyReleaseExSlot,ng:t.withoutReleaseExSlot,toggle:t.toggleExSlotFilter}},[t._v(t._s(t.$t("Fleet.補強増設")))])],1)]),e("div",{staticClass:"d-flex mt-6"},[e("div",{staticClass:"caption"},[t._v(t._s(t.$t("Fleet.改造状態")))]),e("div",{staticClass:"header-divider"})]),e("div",{staticClass:"filter-input-container"},[e(w.Z,{attrs:{dense:"","hide-details":"",label:t.$t("Fleet.未改造"),error:!t.includeInitial&&!t.includeIntermediate&&!t.includeFinal},model:{value:t.includeInitial,callback:function(e){t.includeInitial=e},expression:"includeInitial"}}),e(w.Z,{attrs:{dense:"","hide-details":"",label:t.$t("Fleet.中間改造"),error:!t.includeInitial&&!t.includeIntermediate&&!t.includeFinal},model:{value:t.includeIntermediate,callback:function(e){t.includeIntermediate=e},expression:"includeIntermediate"}}),e(w.Z,{attrs:{dense:"","hide-details":"",label:t.$t("Fleet.最終改造"),error:!t.includeInitial&&!t.includeIntermediate&&!t.includeFinal},model:{value:t.includeFinal,callback:function(e){t.includeFinal=e},expression:"includeFinal"}})],1),e("div",{staticClass:"d-flex mt-6"},[e("div",{staticClass:"caption"},[t._v(t._s(t.$t("Fleet.ステータス")))]),e("div",{staticClass:"header-divider"})]),e("div",[e(A.Z,{staticClass:"mt-4 px-sm-3",attrs:{dense:"","thumb-label":"",min:"1",max:t.maxLevel,"hide-details":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(b.Z,{staticClass:"range-input",class:{english:t.isNotJapanese},attrs:{label:t.$t("Database.Lv下限"),type:"number",max:t.levelRange[1],min:"1","hide-details":""},model:{value:t.levelRange[0],callback:function(e){t.$set(t.levelRange,0,e)},expression:"levelRange[0]"}})]},proxy:!0},{key:"append",fn:function(){return[e(b.Z,{staticClass:"range-input",class:{english:t.isNotJapanese},attrs:{label:t.$t("Database.Lv上限"),type:"number",max:t.maxLevel,min:t.levelRange[0],"hide-details":""},model:{value:t.levelRange[1],callback:function(e){t.$set(t.levelRange,1,e)},expression:"levelRange[1]"}})]},proxy:!0}]),model:{value:t.levelRange,callback:function(e){t.levelRange=e},expression:"levelRange"}}),e(A.Z,{staticClass:"mt-4 px-sm-3",attrs:{dense:"","thumb-label":"",min:"1",max:"200","hide-details":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(b.Z,{staticClass:"range-input",class:{english:t.isNotJapanese},attrs:{label:t.$t("Database.運下限"),type:"number",max:t.luckRange[1],min:"1","hide-details":""},model:{value:t.luckRange[0],callback:function(e){t.$set(t.luckRange,0,e)},expression:"luckRange[0]"}})]},proxy:!0},{key:"append",fn:function(){return[e(b.Z,{staticClass:"range-input",class:{english:t.isNotJapanese},attrs:{label:t.$t("Database.運上限"),type:"number",max:"200",min:t.luckRange[0],"hide-details":""},model:{value:t.luckRange[1],callback:function(e){t.$set(t.luckRange,1,e)},expression:"luckRange[1]"}})]},proxy:!0}]),model:{value:t.luckRange,callback:function(e){t.luckRange=e},expression:"luckRange"}}),e(A.Z,{staticClass:"mt-4 px-sm-3",attrs:{dense:"","thumb-label":"",min:"0",max:"150","hide-details":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(b.Z,{staticClass:"range-input",class:{english:t.isNotJapanese},attrs:{label:t.$t("Database.対潜下限"),type:"number",max:t.aswRange[1],min:"0","hide-details":""},model:{value:t.aswRange[0],callback:function(e){t.$set(t.aswRange,0,e)},expression:"aswRange[0]"}})]},proxy:!0},{key:"append",fn:function(){return[e(b.Z,{staticClass:"range-input",class:{english:t.isNotJapanese},attrs:{label:t.$t("Database.対潜上限"),type:"number",max:"150",min:t.aswRange[0],"hide-details":""},model:{value:t.aswRange[1],callback:function(e){t.$set(t.aswRange,1,e)},expression:"aswRange[1]"}})]},proxy:!0}]),model:{value:t.aswRange,callback:function(e){t.aswRange=e},expression:"aswRange"}}),e(A.Z,{staticClass:"mt-4 px-sm-3",attrs:{dense:"","thumb-label":"",min:"0",max:"100","hide-details":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(b.Z,{staticClass:"range-input",class:{english:t.isNotJapanese},attrs:{label:t.$t("Database.運改修下限"),type:"number",max:t.luckImpRange[1],min:"0","hide-details":""},model:{value:t.luckImpRange[0],callback:function(e){t.$set(t.luckImpRange,0,e)},expression:"luckImpRange[0]"}})]},proxy:!0},{key:"append",fn:function(){return[e(b.Z,{staticClass:"range-input",class:{english:t.isNotJapanese},attrs:{label:t.$t("Database.運改修上限"),type:"number",max:"100",min:t.luckImpRange[0],"hide-details":""},model:{value:t.luckImpRange[1],callback:function(e){t.$set(t.luckImpRange,1,e)},expression:"luckImpRange[1]"}})]},proxy:!0}]),model:{value:t.luckImpRange,callback:function(e){t.luckImpRange=e},expression:"luckImpRange"}}),e(A.Z,{staticClass:"mt-4 px-sm-3",attrs:{dense:"","thumb-label":"",min:"0",max:"9","hide-details":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(b.Z,{staticClass:"range-input",class:{english:t.isNotJapanese},attrs:{label:t.$t("Database.対潜改修下限"),type:"number",max:t.aswImpRange[1],min:"0","hide-details":""},model:{value:t.aswImpRange[0],callback:function(e){t.$set(t.aswImpRange,0,e)},expression:"aswImpRange[0]"}})]},proxy:!0},{key:"append",fn:function(){return[e(b.Z,{staticClass:"range-input",class:{english:t.isNotJapanese},attrs:{label:t.$t("Database.対潜改修上限"),type:"number",max:"9",min:t.aswImpRange[0],"hide-details":""},model:{value:t.aswImpRange[1],callback:function(e){t.$set(t.aswImpRange,1,e)},expression:"aswImpRange[1]"}})]},proxy:!0}]),model:{value:t.aswImpRange,callback:function(e){t.aswImpRange=e},expression:"aswImpRange"}})],1),e("div",{staticClass:"d-flex mt-6"},[e("div",{staticClass:"caption"},[t._v(t._s(t.$t("Common.耐久")))]),e("div",{staticClass:"header-divider"})]),e("div",{staticClass:"filter-input-container"},[e(w.Z,{attrs:{dense:"","hide-details":"",label:"4n - 1",error:!t.HPIs4n1&&!t.HPIs4n2&&!t.HPIs4n3&&!t.HPIs4n},model:{value:t.HPIs4n1,callback:function(e){t.HPIs4n1=e},expression:"HPIs4n1"}}),e(w.Z,{attrs:{dense:"","hide-details":"",label:"4n - 2",error:!t.HPIs4n1&&!t.HPIs4n2&&!t.HPIs4n3&&!t.HPIs4n},model:{value:t.HPIs4n2,callback:function(e){t.HPIs4n2=e},expression:"HPIs4n2"}}),e(w.Z,{attrs:{dense:"","hide-details":"",label:"4n - 3",error:!t.HPIs4n1&&!t.HPIs4n2&&!t.HPIs4n3&&!t.HPIs4n},model:{value:t.HPIs4n3,callback:function(e){t.HPIs4n3=e},expression:"HPIs4n3"}}),e(w.Z,{attrs:{dense:"","hide-details":"",label:"4n",error:!t.HPIs4n1&&!t.HPIs4n2&&!t.HPIs4n3&&!t.HPIs4n},model:{value:t.HPIs4n,callback:function(e){t.HPIs4n=e},expression:"HPIs4n"}})],1),e("div",{staticClass:"filter-input-container"},[e(w.Z,{attrs:{dense:"","hide-details":"",label:`${t.$t("Database.耐久改修2")} +0`,error:!t.addHP0&&!t.addHP1&&!t.addHP2},model:{value:t.addHP0,callback:function(e){t.addHP0=e},expression:"addHP0"}}),e(w.Z,{attrs:{dense:"","hide-details":"",label:`${t.$t("Database.耐久改修2")} +1`,error:!t.addHP0&&!t.addHP1&&!t.addHP2},model:{value:t.addHP1,callback:function(e){t.addHP1=e},expression:"addHP1"}}),e(w.Z,{attrs:{dense:"","hide-details":"",label:`${t.$t("Database.耐久改修2")} +2`,error:!t.addHP0&&!t.addHP1&&!t.addHP2},model:{value:t.addHP2,callback:function(e){t.addHP2=e},expression:"addHP2"}})],1),e("div",{staticClass:"d-flex mt-4"},[e("div",{staticClass:"caption"},[t._v(t._s(t.$t("Common.速力")))]),e("div",{staticClass:"header-divider"})]),e("div",{staticClass:"filter-input-container"},[e(w.Z,{attrs:{dense:"","hide-details":"",label:t.$t("Fleet.高速"),error:!t.includeFast&&!t.includeSlow},model:{value:t.includeFast,callback:function(e){t.includeFast=e},expression:"includeFast"}}),e(w.Z,{attrs:{dense:"","hide-details":"",label:t.$t("Fleet.低速"),error:!t.includeFast&&!t.includeSlow},model:{value:t.includeSlow,callback:function(e){t.includeSlow=e},expression:"includeSlow"}})],1),e("div",{staticClass:"d-flex mt-4"},[e("div",{staticClass:"caption"},[t._v(t._s(t.$t("Fleet.装備搭載可否")))]),e("div",{staticClass:"header-divider"})]),e("div",{staticClass:"filter-input-container"},[e("manual-checkbox",{attrs:{mode:"img",ok:t.isDaihatsu,ng:t.isNotDaihatsu,toggle:t.toggleDaihatsuFilter,imgPath:"./img/type/type24.png"}}),e("manual-checkbox",{attrs:{mode:"img",ok:t.isKamisha,ng:t.isNotKamisha,toggle:t.toggleTankFilter,imgPath:"./img/type/type46.png"}})],1),e("div",{staticClass:"d-flex mt-4 align-center"},[e("div",{staticClass:"caption"},[t._v(t._s(t.$t("Database.艦種")))]),e("div",{staticClass:"header-divider"}),e("div",{staticClass:"pr-1 pl-3"},[e(i.Z,{attrs:{small:"",outlined:"",color:"primary"},on:{click:function(e){return t.toggleAllType()}}},[e(c.Z,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-check-all")]),t._v(" "+t._s(t.$t("Database.一括チェック"))+" ")],1)],1)]),e("div",{staticClass:"filter-input-container"},t._l(t.types,(function(a,s){return e(w.Z,{key:`item${s}`,attrs:{dense:"",label:t.$t(`SType.${a.text}`),"hide-details":""},model:{value:a.isChecked,callback:function(e){t.$set(a,"isChecked",e)},expression:"item.isChecked"}})})),1),e("div",{staticClass:"d-flex mt-4 align-center"},[e("div",{staticClass:"caption"},[t._v(t._s(t.$t("Database.国籍")))]),e("div",{staticClass:"header-divider"}),e("div",{staticClass:"pr-1 pl-3"},[e(i.Z,{attrs:{small:"",outlined:"",color:"primary"},on:{click:function(e){return t.toggleAllNationality()}}},[e(c.Z,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-check-all")]),t._v(" "+t._s(t.$t("Database.一括チェック"))+" ")],1)],1)]),e("div",{staticClass:"filter-input-container"},t._l(t.nationalities,(function(a,s){return e(w.Z,{key:`item${s}`,attrs:{dense:"",label:t.$t(`Database.${a.text}`),"hide-details":""},model:{value:a.isChecked,callback:function(e){t.$set(a,"isChecked",e)},expression:"item.isChecked"}})})),1),e("div",{staticClass:"d-flex mt-4 align-center"},[e("div",{staticClass:"caption"},[t._v(t._s(t.$t("Database.お札")))]),e("div",{staticClass:"header-divider"}),e("div",{staticClass:"pr-1 pl-3"},[e(i.Z,{attrs:{small:"",outlined:"",color:"primary"},on:{click:function(e){return t.toggleAllArea()}}},[e(c.Z,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-check-all")]),t._v(" "+t._s(t.$t("Database.一括チェック"))+" ")],1)],1)]),e("div",{staticClass:"d-flex flex-wrap align-center pa-3"},[t._l(t.maxAreas,(function(a){return e("div",{key:`area${a}`,staticClass:"selected-area-btn align-self-center",class:{selected:t.selectedArea.includes(a)},on:{click:function(e){return t.clickedArea(a)},keypress:function(e){return t.clickedArea(a)}}},[e(d.Z,{attrs:{src:`./img/tags/area${a}.webp`,height:"68",width:"50"}})],1)})),e("div",{staticClass:"selected-area-btn no-area align-self-center",class:{selected:t.visibleNoArea},on:{click:function(e){return t.clickedArea(-1)},keypress:function(e){return t.clickedArea(-1)}}},[t._v(" "+t._s(t.$t("Database.札なし"))+" ")])],2)])],1)],1),e("div",[t.viewShips.length?e("div",{staticClass:"d-flex align-center flex-wrap"},[t.modeTable?e(M,{attrs:{length:t.pageLength},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e(),e(F.Z),t.modeTable?e("div",{staticClass:"manual-column-select d-none d-sm-block"},[e(E.Z,{attrs:{outlined:"",dense:"",label:t.$t("Database.任意表示列"),"hide-details":"",items:t.manualValues,"item-value":"value","item-text":e=>t.$t("Common."+e.text),"prepend-inner-icon":"mdi-eye","background-color":t.$vuetify.theme.dark?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.6)"},on:{input:function(e){return t.filter()}},model:{value:t.manualValue,callback:function(e){t.manualValue=e},expression:"manualValue"}})],1):t._e()],1):e(l.Z,{staticClass:"text-center my-10 py-10"},[e("div",[t._v(t._s(t.$t("Common.探したけど見つからなかったよ"))+"😢")])]),t.modeTable&&t.viewShips.length?e(l.Z,{staticClass:"ship-table mt-3 pa-2"},[e(r.Z),e(Z.Z,{attrs:{"fixed-header":"",height:"72vh","multi-sort":"",page:t.page,headers:t.headers,items:t.viewShips,"hide-default-footer":"","footer-props":{showFirstLastPage:!0,"items-per-page-options":[100]},"mobile-breakpoint":"0"},on:{"update:page":function(e){t.page=e}},scopedSlots:t._u([{key:"header.name",fn:function(){},proxy:!0},{key:"header.hp",fn:function({header:e}){return[t._v(t._s(t.$t(`Common.${e.text}`)))]}},{key:"header.luck",fn:function({header:e}){return[t._v(t._s(t.$t(`Common.${e.text}`)))]}},{key:"header.impLuck",fn:function({header:e}){return[t._v(t._s(t.$t(`Common.${e.text}`)))]}},{key:"header.asw",fn:function({header:e}){return[t._v(t._s(t.$t(`Common.${e.text}`)))]}},{key:"header.impAsw",fn:function({header:e}){return[t._v(t._s(t.$t(`Database.${e.text}`)))]}},{key:"header.manualValue",fn:function(){return[t._v(t._s(t.manualColumnText))]},proxy:!0},{key:"header.accuracy",fn:function({header:e}){return[t._v(t._s(t.$t(`Common.${e.text}`)))]}},{key:"header.avoid",fn:function({header:e}){return[t._v(t._s(t.$t(`Common.${e.text}`)))]}},{key:"header.ci",fn:function({header:e}){return[t._v(t._s(t.$t(`Common.${e.text}`)))]}},{key:"item",fn:function({item:a}){return[e("tr",{directives:[{def:B.Z,name:"ripple",rawName:"v-ripple"}],class:{no_ship:0===a.count,lvMax:a.stockData.level===t.maxLevel,lv100:a.stockData.level!==t.maxLevel&&a.stockData.level>99,lv99:99===a.stockData.level},on:{click:function(e){return e.stopPropagation(),t.showEditDialog(a)},keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.showEditDialog(a)}}},[e("td",{staticClass:"px-0"},[e("div",{staticClass:"d-none d-md-flex align-center"},[e("div",{staticClass:"edit-stock-img",on:{mouseenter:function(e){return t.bootTooltip(a,e)},mouseleave:t.clearTooltip,focus:t.clearTooltip,blur:t.clearTooltip}},[e("div",{staticClass:"ship-table-img-container",class:{no_ship:0===a.count,"avoid-spoiler":t.isAvoidSpoiler}},[e("img",{attrs:{src:`./img/ship/${a.ship.id}.png`,alt:`ship-${a.ship.id}`,height:"40",width:"160"}})]),a.stockData.area>0&&a.stockData.area<=t.maxAreas?e("div",{staticClass:"area-banner mt-1"},[e(d.Z,{attrs:{src:`./img/tags/area${a.stockData.area}.webp`,height:"52",width:"38"}})],1):t._e(),a.stockData.releaseExpand?e("div",{staticClass:"slot-ex-img"},[e(d.Z,{attrs:{src:"./img/util/slot_ex.png",height:"30",width:"30"}})],1):t._e(),a.stockData.spEffectItems&&a.stockData.spEffectItems.length?e("div",{staticClass:"sp-item-img"},[a.stockData.spEffectItems.some((t=>1===t.kind))?e(d.Z,{attrs:{src:"./img/util/miiro.png",height:"40",width:"16"}}):e(d.Z,{attrs:{src:"./img/util/tasuki.png",height:"40",width:"16"}})],1):t._e()]),e("div",{staticClass:"ship-name text-truncate",attrs:{title:a.ship.name}},[t._v(t._s(t.getShipName(a.ship)))])]),e("div",{staticClass:"d-flex d-md-none align-center"},[e("div",{staticClass:"edit-stock-img"},[e("div",{staticClass:"ship-table-img-container dense",class:{no_ship:0===a.count,"avoid-spoiler":t.isAvoidSpoiler}},[e("img",{attrs:{src:`./img/ship/${a.ship.id}.png`,alt:`ship-${a.ship.id}`,height:"30",width:"120"}})]),a.stockData.area>0&&a.stockData.area<=t.maxAreas?e("div",{staticClass:"area-banner min"},[e(d.Z,{attrs:{src:`./img/tags/area${a.stockData.area}.webp`,height:"44",width:"32"}})],1):t._e(),a.stockData.releaseExpand?e("div",{staticClass:"slot-ex-img min"},[e(d.Z,{attrs:{src:"./img/util/slot_ex.png",height:"25",width:"25"}})],1):t._e(),a.stockData.spEffectItems&&a.stockData.spEffectItems.length?e("div",{staticClass:"sp-item-img min"},[a.stockData.spEffectItems.some((t=>1===t.kind))?e(d.Z,{attrs:{src:"./img/util/miiro_min.png",height:"30",width:"18"}}):e(d.Z,{attrs:{src:"./img/util/tasuki_min.png",height:"30",width:"18"}})],1):t._e()])])]),e("td",{staticClass:"text-right"},[t._v(t._s(a.level?a.level:"-"))]),e("td",{staticClass:"text-right"},[e("div",{staticClass:"td-relative"},[e("div",[t._v(t._s(a.hp))]),a.impHP?e("div",{staticClass:"improve-value"},[e(c.Z,{attrs:{small:"",color:"teal lighten-1"}},[t._v("mdi-chevron-double-up")]),t._v(t._s(a.impHP))],1):t._e()])]),e("td",{staticClass:"text-right"},[e("div",{staticClass:"td-relative"},[e("div",[t._v(t._s(a.luck))]),a.impLuck?e("div",{staticClass:"improve-value"},[e(c.Z,{attrs:{small:"",color:"teal lighten-1"}},[t._v("mdi-chevron-double-up")]),t._v(t._s(a.impLuck))],1):t._e()])]),e("td",{staticClass:"text-right"},[a.count?e("span",{class:{"text--secondary":!a.impLuck}},[t._v(t._s(a.impLuck))]):e("span",[t._v("-")])]),e("td",{staticClass:"text-right"},[e("div",{staticClass:"td-relative"},[e("div",[t._v(t._s(a.asw))]),a.impAsw?e("div",{staticClass:"improve-value"},[e(c.Z,{attrs:{small:"",color:"teal lighten-1"}},[t._v("mdi-chevron-double-up")]),t._v(t._s(a.impAsw))],1):t._e()])]),e("td",{staticClass:"text-right"},[e("span",[t._v(t._s(a.manualValue))])]),e("td",{staticClass:"text-right"},[a.count?e("span",[t._v(t._s(a.accuracy))]):e("span",[t._v("-")])]),e("td",{staticClass:"text-right"},[a.count?e("span",[t._v(t._s(a.avoid))]):e("span",[t._v("-")])]),e("td",{staticClass:"text-right"},[a.count?e("span",[t._v(t._s(a.ci))]):e("span",[t._v("-")])])])]}}],null,!0)})],1):t.viewShips.length?e("div",[e("div",{staticClass:"d-flex flex-wrap"},t._l(t.altViewShips,(function(a,s){return e("div",{key:`type_row${s}`,staticClass:"type-container pa-1 pa-sm-2 mb-2 mr-sm-2"},[e("div",{staticClass:"mx-2 mt-1"},[t._v(t._s(t.getShipTypeName(a.typeName)))]),e("div",{staticClass:"type-divider"}),e("div",{staticClass:"ship-cards"},t._l(a.rows,(function(a,s){return e("div",{key:`outer_row_${s}`,staticClass:"ship-card ma-sm-1 px-1 px-sm-2 pt-1"},t._l(a,(function(a,s){return e("div",{key:`row_${s}`,staticClass:"mt-1 mb-2"},[e("div",{staticClass:"d-flex"},[e("div",{staticClass:"ship-name text-truncate"},[t._v(t._s(t.getShipName(a.master)))]),e(F.Z),a.count?e("div",{staticClass:"caption align-self-end text-no-wrap"},[t._v(t._s(t.$t("Database.在籍"))+" "+t._s(a.count))]):t._e()],1),e("div",{staticClass:"status-img",class:{no_ship:0===a.count,"avoid-spoiler":t.isAvoidSpoiler}},[e("img",{staticClass:"status-img",attrs:{src:`./img/ship/${a.master.id}.png`,alt:`ship-${a.master.id}`}})]),t._l(a.detail,(function(a,s){return e("div",{directives:[{def:B.Z,name:"ripple",rawName:"v-ripple"}],key:`detail_${s}`,staticClass:"detail-row ship-tr",class:{no_ship:0===a.count,lvMax:a.stockData.level===t.maxLevel,lv100:a.stockData.level!==t.maxLevel&&a.stockData.level>99,lv99:99===a.stockData.level},on:{click:function(e){return e.stopPropagation(),t.showEditDialog(a)},keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.showEditDialog(a)},mouseenter:function(e){return t.bootTooltip(a,e)},mouseleave:t.clearTooltip,focus:t.clearTooltip,blur:t.clearTooltip}},[a.count?[e("div",{staticClass:"basic-status-cols"},[e("div",{staticClass:"status-col sm"},[e("div",{staticClass:"d-sm-none"},[t._v("Lv.")]),e("div",[t._v(t._s(a.level))])]),e("div",{staticClass:"status-col"},[e("img",{staticClass:"align-self-center",attrs:{src:"./img/util/status_hp.png",height:"16",alt:"hp"}}),e("div",{staticClass:"align-self-center",class:{bold:a.impHP}},[t._v(t._s(a.hp))])]),e("div",{staticClass:"status-col"},[e("img",{staticClass:"align-self-center",attrs:{src:"./img/util/status_asw.png",height:"16",alt:"asw"}}),e("div",{staticClass:"align-self-center",class:{bold:a.impAsw}},[t._v(t._s(a.asw))])]),e("div",{staticClass:"status-col"},[e("img",{staticClass:"align-self-center",attrs:{src:"./img/util/status_luck.png",height:"16",alt:"luck"}}),e("div",{staticClass:"align-self-center",class:{bold:a.impLuck}},[t._v(t._s(a.luck))])])]),e("div",{staticClass:"status-area-img",class:{"exist-img":a.stockData.area>0}},[a.stockData.area>0?e("img",{staticClass:"status-area-img",attrs:{src:`./img/tags/area${a.stockData.area}_min.webp`,alt:`area-${a.stockData.area}`}}):t._e()]),e("div",{staticClass:"status-ex-img"},[a.stockData.releaseExpand?e("img",{staticClass:"status-ex-img",attrs:{src:"./img/util/slot_ex.png",height:"24",width:"24",alt:"ex-slot"}}):t._e()]),a.stockData.spEffectItems&&a.stockData.spEffectItems.length?e("div",{staticClass:"status-item-img",class:{min:a.stockData.area<=0}},[a.stockData.area>0?[a.stockData.spEffectItems.some((t=>1===t.kind))?e(d.Z,{attrs:{src:"./img/util/miiro.png",height:"40",width:"16"}}):e(d.Z,{attrs:{src:"./img/util/tasuki.png",height:"40",width:"16"}})]:[a.stockData.spEffectItems.some((t=>1===t.kind))?e(d.Z,{attrs:{src:"./img/util/miiro_min.png",height:"24",width:"14"}}):e(d.Z,{attrs:{src:"./img/util/tasuki_min.png",height:"24",width:"14"}})]],2):t._e()]:[e("div",{staticClass:"mx-auto text-center no_ship caption py-1"},[t._v(t._s(t.$t("Database.新規登録")))])]],2)}))],2)})),0)})),0)])})),0)]):t._e(),t.modeTable&&t.viewShips.length?e("div",{staticClass:"mt-2"},[e(M,{attrs:{length:t.pageLength},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1):t._e(),t.isMobile?e("div",{staticClass:"mt-3 d-flex justify-center"},[e($.Z,{attrs:{dense:"",borderless:"",mandatory:""},model:{value:t.modeTable,callback:function(e){t.modeTable=e},expression:"modeTable"}},[e(i.Z,{class:{"blue darken-2 white--text":t.modeTable},attrs:{value:!0},on:{click:function(e){return e.stopPropagation(),t.changeViewMode(!0)}}},[e(c.Z,[t._v("mdi-view-headline")]),e("span",[t._v(t._s(t.$t("Database.一覧表示")))])],1),e(i.Z,{class:{"blue darken-2 white--text":!t.modeTable},attrs:{value:!1},on:{click:function(e){return e.stopPropagation(),t.changeViewMode(!1)}}},[e(c.Z,[t._v("mdi-view-comfy")]),e("span",[t._v(t._s(t.$t("Database.艦隊分析表示")))])],1)],1)],1):t._e()],1)],1),e(v.Z,{attrs:{value:"analytics"}},[e("analytics")],1),e(v.Z,{attrs:{value:"status_up"}},[e("status-up-line-list")],1),e(v.Z,{attrs:{value:"compare"}},[e("compare")],1),e(v.Z,{attrs:{value:"group"}},[e("area-manager",{attrs:{readonly:t.readOnly}})],1)],1),e(n.Z,{attrs:{transition:"scroll-x-transition",width:"600",fullscreen:t.isMobile},model:{value:t.editDialog,callback:function(e){t.editDialog=e},expression:"editDialog"}},[t.editRow&&t.versionButtons.length?e(l.Z,{staticClass:"ship-edit-card"},[e("div",{staticClass:"ship-edit-card-body"},[e("div",{staticClass:"d-md-flex"},[e("div",{staticClass:"align-self-center edit-stock-img"},[e(d.Z,{attrs:{src:`./img/ship/${t.versionButtons[t.version].id}.png`,height:"40",width:"160"}}),t.editRow.stockData.area>0&&t.editRow.stockData.area<=t.maxAreas?e("div",{staticClass:"area-banner"},[e(d.Z,{attrs:{src:`./img/tags/area${t.editRow.stockData.area}.webp`,height:"58",width:"42"}})],1):t._e()],1),e("div",{staticClass:"align-self-center ml-md-2 mt-2 mt-md-0"},[e($.Z,{staticClass:"flex-wrap",attrs:{dense:"",mandatory:""},model:{value:t.version,callback:function(e){t.version=e},expression:"version"}},t._l(t.versionButtons,(function(a,s){return e(i.Z,{key:`ver${s}`,attrs:{value:s},on:{click:function(e){return e.stopPropagation(),t.changeVersion(s)}}},[e("span",[t._v(t._s(t.getShipName(a)))])])})),1)],1)]),e(r.Z,{staticClass:"mt-3"}),e("div",{staticClass:"d-sm-flex mt-3"},[e("div",{staticClass:"d-flex flex-grow-1"},[e("div",{staticClass:"range-input"},[e(b.Z,{attrs:{label:t.$t("Database.練度(Lv)"),type:"number",max:t.maxLevel,min:"1","hide-details":""},model:{value:t.editRow.stockData.level,callback:function(e){t.$set(t.editRow.stockData,"level",e)},expression:"editRow.stockData.level"}})],1),e(H.Z,{staticClass:"mx-2 align-self-center",attrs:{"hide-details":"",max:t.maxLevel,min:"1","thumb-label":""},model:{value:t.editRow.stockData.level,callback:function(e){t.$set(t.editRow.stockData,"level",e)},expression:"editRow.stockData.level"}})],1),e("div",{staticClass:"level-buttons"},[e(i.Z,{staticClass:"mr-1 align-self-center",attrs:{color:"teal",block:"",dark:""},on:{click:function(e){e.stopPropagation(),t.editRow.stockData.level=99}}},[t._v("Lv99")]),e(i.Z,{staticClass:"mr-1 align-self-center",attrs:{color:"red lighten-2",block:"",dark:""},on:{click:function(e){e.stopPropagation(),t.editRow.stockData.level=t.maxLevel}}},[t._v("Lv"+t._s(t.maxLevel))])],1)]),e("div",{staticClass:"d-flex mt-8"},[e("div",{staticClass:"range-input"},[e(b.Z,{attrs:{label:t.$t("Common.運"),type:"number",max:t.versionButtons[t.version].maxLuck,min:t.versionButtons[t.version].luck,"hide-details":""},model:{value:t.editLuck,callback:function(e){t.editLuck=e},expression:"editLuck"}})],1),e(H.Z,{staticClass:"mx-2 align-self-center",attrs:{"hide-details":"",max:t.versionButtons[t.version].maxLuck,min:t.versionButtons[t.version].luck,"thumb-label":""},model:{value:t.editLuck,callback:function(e){t.editLuck=e},expression:"editLuck"}})],1),e("div",{staticClass:"d-flex mt-8"},[e("div",{staticClass:"range-input"},[e(b.Z,{attrs:{label:t.$t("Database.耐久改修"),type:"number",max:"2",min:"0","hide-details":""},model:{value:t.editRow.stockData.improvement.hp,callback:function(e){t.$set(t.editRow.stockData.improvement,"hp",e)},expression:"editRow.stockData.improvement.hp"}})],1),e(H.Z,{staticClass:"mx-2 align-self-center",attrs:{"hide-details":"",max:"2",min:"0","thumb-label":""},model:{value:t.editRow.stockData.improvement.hp,callback:function(e){t.$set(t.editRow.stockData.improvement,"hp",e)},expression:"editRow.stockData.improvement.hp"}})],1),e("div",{staticClass:"d-flex mt-8"},[e("div",{staticClass:"range-input"},[e(b.Z,{attrs:{label:t.$t("Database.対潜改修"),type:"number",max:"9",min:"0","hide-details":"",disabled:!t.editRow.ship.maxAsw},model:{value:t.editRow.stockData.improvement.asw,callback:function(e){t.$set(t.editRow.stockData.improvement,"asw",e)},expression:"editRow.stockData.improvement.asw"}})],1),e(H.Z,{staticClass:"mx-2 align-self-center",attrs:{"hide-details":"",max:"9",min:"0",disabled:!t.editRow.ship.maxAsw,"thumb-label":""},model:{value:t.editRow.stockData.improvement.asw,callback:function(e){t.$set(t.editRow.stockData.improvement,"asw",e)},expression:"editRow.stockData.improvement.asw"}})],1),e("div",{staticClass:"mt-8"},[e(w.Z,{attrs:{label:t.$t("Database.補強増設開放済"),"hide-details":""},model:{value:t.editRow.stockData.releaseExpand,callback:function(e){t.$set(t.editRow.stockData,"releaseExpand",e)},expression:"editRow.stockData.releaseExpand"}}),e(u.Z,{attrs:{row:""},model:{value:t.editRow.spEffectItemId,callback:function(e){t.$set(t.editRow,"spEffectItemId",e)},expression:"editRow.spEffectItemId"}},[e(h.Z,{attrs:{label:t.$t("Common.なし"),value:0}}),e(h.Z,{attrs:{label:t.$t("Database.海色リボン"),value:1}}),e(h.Z,{attrs:{label:t.$t("Database.白たすき"),value:2}})],1)],1),e("div",{staticClass:"d-flex flex-wrap justify-space-around"},t._l(t.maxAreas,(function(a){return e("div",{key:`area${a}`,staticClass:"selected-area-btn",class:{selected:t.editRow.stockData.area===a},on:{click:function(e){return e.stopPropagation(),t.toggleArea(a)},keypress:function(e){return t.toggleArea(a)}}},[e(d.Z,{attrs:{src:`./img/tags/area${a}.webp`,height:"68",width:"50"}})],1)})),0)],1),e(r.Z,{staticClass:"my-2"}),e("div",{staticClass:"d-sm-flex pa-2"},[e("div",{staticClass:"d-flex"},[t.isFav?e(i.Z,{attrs:{color:"pink lighten-2",icon:""},on:{click:function(e){return t.toggleFav(t.editRow.ship.id)}}},[e(c.Z,[t._v("mdi-heart")])],1):e(i.Z,{attrs:{color:"grey",icon:""},on:{click:function(e){return t.toggleFav(t.editRow.ship.id)}}},[e(c.Z,[t._v("mdi-heart")])],1),t.versionButtons[t.version]?e("div",{staticClass:"align-self-center ml-3"},[e("a",{attrs:{href:`https://wikiwiki.jp/kancolle/${encodeURI(t.versionButtons[t.version].name)}`,target:"_blank"}},[t._v("wiki")])]):t._e()],1),e("div",{staticClass:"ship-edit-card-buttons ml-sm-auto"},[e(i.Z,{attrs:{disabled:t.btnPushed||t.readOnly,color:"primary"},on:{click:function(e){return e.stopPropagation(),t.commitStock.apply(null,arguments)}}},[t._v(" "+t._s(t.$t("Database.着任"))+" ")]),e(i.Z,{attrs:{disabled:t.btnPushed||!t.editRow.stockData.uniqueId||t.readOnly,color:"success"},on:{click:function(e){return e.stopPropagation(),t.updateStock.apply(null,arguments)}}},[t._v(" "+t._s(t.$t("Common.更新"))+" ")]),e(i.Z,{attrs:{disabled:!t.editRow.stockData.uniqueId||t.readOnly,color:"error"},on:{click:function(e){e.stopPropagation(),t.confirmDialog=!0}}},[t._v(" "+t._s(t.$t("Database.除籍"))+" ")]),e(i.Z,{attrs:{color:"secondary"},on:{click:function(e){e.stopPropagation(),t.editDialog=!1}}},[t._v(t._s(t.$t("Common.戻る")))])],1)])],1):t._e()],1),e(n.Z,{attrs:{width:"400"},model:{value:t.confirmDialog,callback:function(e){t.confirmDialog=e},expression:"confirmDialog"}},[e(l.Z,{staticClass:"pa-3"},[e("div",{staticClass:"ma-4"},[e("div",[t._v(t._s(t.$t("Database.本当に除籍しますか？")))])]),e(r.Z,{staticClass:"my-2"}),e("div",{staticClass:"d-flex"},[e(i.Z,{staticClass:"ml-auto",attrs:{color:"error",disabled:t.btnPushed,dark:""},on:{click:function(e){return e.stopPropagation(),t.deleteStock.apply(null,arguments)}}},[t._v(t._s(t.$t("Database.除籍")))]),e(i.Z,{staticClass:"ml-4",attrs:{color:"secondary"},on:{click:function(e){e.stopPropagation(),t.confirmDialog=!1}}},[t._v(t._s(t.$t("Database.やっぱやめとく")))])],1)],1)],1),e(N.Z,{attrs:{color:"black",bottom:"",right:"",transition:"slide-y-transition","position-x":t.tooltipX,"position-y":t.tooltipY},model:{value:t.enabledTooltip,callback:function(e){t.enabledTooltip=e},expression:"enabledTooltip"}},[e("ship-tooltip",{attrs:{value:t.tooltipShip}})],1)],1)},O=[],z=a(3632),W=a.n(z),V=a(7739),q=a.n(V),X=a(361),K=a.n(X),j=a(255),J=a(2348),Y=a(400),G=a(1214),Q=a(9449),tt=a(7394),et=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"mt-sm-8"},[e("div",{staticClass:"d-sm-flex my-3 mx-1"},[e("div",{staticClass:"align-self-center mr-5 mb-2 mb-sm-0"},[t._v(t._s(t.$t("Database.集計対象Lv")))]),e("div",{staticClass:"d-flex align-center flex-grow-1"},[e("div",{staticClass:"range-input"},[e(b.Z,{attrs:{label:t.$t("Database.Lv下限"),type:"number",max:t.levelRange[1],min:"1",dense:"","hide-details":""},on:{input:function(e){return t.analyze()}},model:{value:t.levelRange[0],callback:function(e){t.$set(t.levelRange,0,"string"===typeof e?e.trim():e)},expression:"levelRange[0]"}})],1),e(A.Z,{staticClass:"pt-2 align-center mx-2",attrs:{dense:"","thumb-label":"",min:"1",max:t.maxLevel,"hide-details":""},on:{change:function(e){return t.analyze()}},model:{value:t.levelRange,callback:function(e){t.levelRange=e},expression:"levelRange"}}),e("div",{staticClass:"range-input"},[e(b.Z,{attrs:{label:t.$t("Database.Lv上限"),type:"number",max:t.maxLevel,min:t.levelRange[0],dense:"","hide-details":""},on:{input:function(e){return t.analyze()}},model:{value:t.levelRange[1],callback:function(e){t.$set(t.levelRange,1,"string"===typeof e?e.trim():e)},expression:"levelRange[1]"}})],1)],1)]),e(l.Z,{staticClass:"pa-1"},[e(r.Z),t.isMobile?e(Q.Z,{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[e("tbody",[e("tr",[e("th",[t._v(t._s(t.$t("Database.合計艦娘数")))]),e("td",{staticClass:"text-right"},[t._v(t._s(t.allShipCount.toLocaleString()))])]),e("tr",[e("th",[t._v(t._s(t.$t("Database.ケッコン艦")))]),e("td",{staticClass:"text-right"},[t._v(t._s(t.allMarriageCount.toLocaleString()))])]),e("tr",[e("th",[t._v(t._s(t.$t("Database.補強増設艦")))]),e("td",{staticClass:"text-right"},[t._v(t._s(t.allExSlotCount.toLocaleString()))])]),e("tr",[e("th",[t._v(t._s(t.$t("Database.耐久改修合計")))]),e("td",{staticClass:"text-right"},[t._v(t._s(t.totalHPImprovement.toLocaleString()))])]),e("tr",[e("th",[t._v(t._s(t.$t("Database.対潜改修合計")))]),e("td",{staticClass:"text-right"},[t._v(t._s(t.totalASWImprovement.toLocaleString()))])]),e("tr",[e("th",[t._v(t._s(t.$t("Database.運改修合計")))]),e("td",{staticClass:"text-right"},[t._v(t._s(t.totalLuckImprovement.toLocaleString()))])]),e("tr",[e("th",[t._v(t._s(t.$t("Database.まるゆ指数")))]),e("td",{staticClass:"text-right"},[t._v(t._s(t.maruyuRank.toLocaleString()))])]),e("tr",[e("th",[e(i.Z,{staticClass:"pl-0",attrs:{small:"",text:"",disabled:!t.totalBluePrintsPlan},on:{click:function(e){return e.stopPropagation(),t.showBlueprintPlanDialog()}}},[t._v(" "+t._s(t.$t("Database.改装設計図必要数"))+" "),e(c.Z,{attrs:{small:""}},[t._v("mdi-magnify")])],1)],1),e("td",{staticClass:"text-right"},[t._v(t._s(t.totalBluePrintsPlan.toLocaleString()))])]),e("tr",[e("th",[e(i.Z,{staticClass:"pl-0",attrs:{small:"",text:"",disabled:!t.totalActionReportsPlan},on:{click:function(e){return e.stopPropagation(),t.showActionReportPlanDialog()}}},[t._v(" "+t._s(t.$t("Database.戦闘詳報必要数"))+" "),e(c.Z,{attrs:{small:""}},[t._v("mdi-magnify")])],1)],1),e("td",{staticClass:"text-right"},[t._v(t._s(t.totalActionReportsPlan.toLocaleString()))])]),e("tr",[e("th",[e(i.Z,{staticClass:"pl-0",attrs:{small:"",text:"",disabled:!t.totalCatapultsPlan},on:{click:function(e){return e.stopPropagation(),t.showCatapultPlanDialog()}}},[t._v(" "+t._s(t.$t("Database.カタパルト必要数"))+" "),e(c.Z,{attrs:{small:""}},[t._v("mdi-magnify")])],1)],1),e("td",{staticClass:"text-right"},[t._v(t._s(t.totalCatapultsPlan.toLocaleString()))])]),e("tr",[e("th",[e(i.Z,{staticClass:"pl-0",attrs:{small:"",text:"",disabled:!t.totalCatapultsPlan},on:{click:function(e){return e.stopPropagation(),t.showBlueprintUseDialog()}}},[t._v(" "+t._s(t.$t("Database.改装設計図消費数"))+" "),e(c.Z,{attrs:{small:""}},[t._v("mdi-magnify")])],1)],1),e("td",{staticClass:"text-right"},[t._v(t._s(t.totalBluePrints.toLocaleString()))])]),e("tr",[e("th",[e(i.Z,{staticClass:"pl-0",attrs:{small:"",text:"",disabled:!t.totalCatapultsPlan},on:{click:function(e){return e.stopPropagation(),t.showActionReportUseDialog()}}},[t._v(" "+t._s(t.$t("Database.戦闘詳報消費数"))+" "),e(c.Z,{attrs:{small:""}},[t._v("mdi-magnify")])],1)],1),e("td",{staticClass:"text-right"},[t._v(t._s(t.totalActionReports.toLocaleString()))])]),e("tr",[e("th",[e(i.Z,{staticClass:"pl-0",attrs:{small:"",text:"",disabled:!t.totalCatapultsPlan},on:{click:function(e){return e.stopPropagation(),t.showCatapultUseDialog()}}},[t._v(" "+t._s(t.$t("Database.カタパルト消費数"))+" "),e(c.Z,{attrs:{small:""}},[t._v("mdi-magnify")])],1)],1),e("td",{staticClass:"text-right"},[t._v(t._s(t.totalCatapults.toLocaleString()))])])])]},proxy:!0}],null,!1,2873613016)}):e(Q.Z,{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.合計艦娘数")))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.ケッコン艦")))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.補強増設艦")))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.耐久改修合計")))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.対潜改修合計")))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.運改修合計")))]),e("th",{staticClass:"text-right"},[t._v(" "+t._s(t.$t("Database.まるゆ指数"))+" "),e(N.Z,{attrs:{top:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(c.Z,t._g(t._b({staticClass:"ml-1",attrs:{small:""}},"v-icon",s,!1),a),[t._v("mdi-help-circle-outline")])]}}])},[e("div",[e("s",[t._v(t._s(t.$t("Database.まるゆを近代化改修に使えば使うほど上昇します。")))])]),e("div",[t._v(t._s(t.$t("Database.ケッコン以外の手段で運改修を進めていると上昇する指標です。")))])])],1)])]),e("tbody",[e("tr",[e("td",{staticClass:"text-right"},[t._v(t._s(t.allShipCount.toLocaleString()))]),e("td",{staticClass:"text-right"},[t._v(t._s(t.allMarriageCount.toLocaleString()))]),e("td",{staticClass:"text-right"},[t._v(t._s(t.allExSlotCount.toLocaleString()))]),e("td",{staticClass:"text-right"},[t._v(t._s(t.totalHPImprovement.toLocaleString()))]),e("td",{staticClass:"text-right"},[t._v(t._s(t.totalASWImprovement.toLocaleString()))]),e("td",{staticClass:"text-right"},[t._v(t._s(t.totalLuckImprovement.toLocaleString()))]),e("td",{staticClass:"text-right"},[t._v(t._s(t.maruyuRank.toLocaleString()))])])])]},proxy:!0}])}),e(r.Z),t.isMobile?t._e():e(Q.Z,{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-right"},[e(i.Z,{attrs:{small:"",text:"",disabled:!t.totalBluePrintsPlan},on:{click:function(e){return e.stopPropagation(),t.showBlueprintPlanDialog()}}},[e(c.Z,{staticClass:"ml-1",attrs:{small:""}},[t._v("mdi-magnify")]),t._v(" "+t._s(t.$t("Database.改装設計図必要数"))+" ")],1)],1),e("th",{staticClass:"text-right"},[e(i.Z,{attrs:{small:"",text:"",disabled:!t.totalActionReportsPlan},on:{click:function(e){return e.stopPropagation(),t.showActionReportPlanDialog()}}},[e(c.Z,{staticClass:"ml-1",attrs:{small:""}},[t._v("mdi-magnify")]),t._v(" "+t._s(t.$t("Database.戦闘詳報必要数"))+" ")],1)],1),e("th",{staticClass:"text-right"},[e(i.Z,{attrs:{small:"",text:"",disabled:!t.totalCatapultsPlan},on:{click:function(e){return e.stopPropagation(),t.showCatapultPlanDialog()}}},[e(c.Z,{staticClass:"ml-1",attrs:{small:""}},[t._v("mdi-magnify")]),t._v(" "+t._s(t.$t("Database.カタパルト必要数"))+" ")],1)],1),e("th",{staticClass:"text-right"},[e(i.Z,{attrs:{small:"",text:"",disabled:!t.totalCatapultsPlan},on:{click:function(e){return e.stopPropagation(),t.showBlueprintUseDialog()}}},[e(c.Z,{staticClass:"ml-1",attrs:{small:""}},[t._v("mdi-magnify")]),t._v(" "+t._s(t.$t("Database.改装設計図消費数"))+" ")],1)],1),e("th",{staticClass:"text-right"},[e(i.Z,{attrs:{small:"",text:"",disabled:!t.totalCatapultsPlan},on:{click:function(e){return e.stopPropagation(),t.showActionReportUseDialog()}}},[e(c.Z,{staticClass:"ml-1",attrs:{small:""}},[t._v("mdi-magnify")]),t._v(" "+t._s(t.$t("Database.戦闘詳報消費数"))+" ")],1)],1),e("th",{staticClass:"text-right"},[e(i.Z,{attrs:{small:"",text:"",disabled:!t.totalCatapultsPlan},on:{click:function(e){return e.stopPropagation(),t.showCatapultUseDialog()}}},[e(c.Z,{staticClass:"ml-1",attrs:{small:""}},[t._v("mdi-magnify")]),t._v(" "+t._s(t.$t("Database.カタパルト消費数"))+" ")],1)],1)])]),e("tbody",[e("tr",[e("td",{staticClass:"text-right pr-7"},[t._v(t._s(t.totalBluePrintsPlan.toLocaleString()))]),e("td",{staticClass:"text-right pr-7"},[t._v(t._s(t.totalActionReportsPlan.toLocaleString()))]),e("td",{staticClass:"text-right pr-7"},[t._v(t._s(t.totalCatapultsPlan.toLocaleString()))]),e("td",{staticClass:"text-right pr-7"},[t._v(t._s(t.totalBluePrints.toLocaleString()))]),e("td",{staticClass:"text-right pr-7"},[t._v(t._s(t.totalActionReports.toLocaleString()))]),e("td",{staticClass:"text-right pr-7"},[t._v(t._s(t.totalCatapults.toLocaleString()))])])])]},proxy:!0}],null,!1,3715605281)})],1),e(l.Z,{staticClass:"my-3 pa-1 ship-type-analytics"},[e(r.Z),e(Q.Z,{scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[t._v(t._s(t.$t("Database.艦種")))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.隻数")))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.最大Lv")))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.最小Lv")))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.中央Lv")))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.平均Lv")))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.総経験値")))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.1隻平均")))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.経験値割合")))])])]),e("tbody",t._l(t.summaryTable,(function(a,s){return e("tr",{key:`summary_row${s}`},[e("td",{staticClass:"text-left"},[t._v(t._s(a.name))]),e("td",{staticClass:"text-right"},[t._v(t._s(a.data.count))]),e("td",{staticClass:"text-right"},[t._v(t._s(a.data.maxLevel))]),e("td",{staticClass:"text-right"},[t._v(t._s(a.data.minLevel))]),e("td",{staticClass:"text-right"},[t._v(t._s(a.data.midLevel))]),e("td",{staticClass:"text-right"},[t._v(t._s(a.data.avgLevel))]),e("td",{staticClass:"text-right"},[t._v(t._s(a.data.sumExp))]),e("td",{staticClass:"text-right"},[t._v(t._s(a.data.avgExp))]),e("td",{staticClass:"text-right"},[t._v(t._s(a.data.expRate)+" %")])])})),0)]},proxy:!0}])})],1),e("div",{staticClass:"graph-area"},[e(l.Z,{staticClass:"pa-4"},[e("div",{staticClass:"d-flex justify-center"},[e("div",{staticClass:"body-2"},[t._v(t._s(t.$t("Database.艦種別Lv帯分析")))])]),e("radar-chart",{attrs:{data:t.radarGraphData,options:t.radarOptions}})],1),e(l.Z,{staticClass:"pa-1"},[e(r.Z),e(Q.Z,{attrs:{"fixed-header":"",height:"64vh"},scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-right"},[t._v("Rank")]),e("th",{staticClass:"text-left"},[t._v(t._s(t.$t("Common.艦娘名")))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.総経験値")))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.経験値割合")))])])]),e("tbody",t._l(t.expRankTable,(function(a,s){return e("tr",{key:`exp_rank_row${s}`},[e("td",{staticClass:"text-right"},[t._v(t._s(a.rank))]),e("td",{staticClass:"text-left"},[t._v(t._s(t.needTrans?t.$t(`${a.name}`):a.name))]),e("td",{staticClass:"text-right"},[t._v(t._s(a.exp))]),e("td",{staticClass:"text-right"},[t._v(t._s(a.rate)+" %")])])})),0)]},proxy:!0}])})],1)],1),e(l.Z,{staticClass:"my-4 pa-4"},[e("div",{staticClass:"d-flex justify-center"},[e("div",{staticClass:"body-2"},[t._v(t._s(t.$t("Database.Lv帯別艦娘数")))])]),e("div",[e("stacked-bar",{attrs:{data:t.stackedBarData,options:t.stackedBarOption}})],1)]),e(n.Z,{attrs:{width:"720",fullscreen:t.isMobile},model:{value:t.detailDialog,callback:function(e){t.detailDialog=e},expression:"detailDialog"}},[e(l.Z,{staticClass:"detail-card"},[e("div",{staticClass:"d-flex justify-end pa-2"},[e(i.Z,{attrs:{icon:""},on:{click:function(e){t.detailDialog=!1}}},[e(c.Z,[t._v("mdi-close")])],1)],1),e(r.Z,{staticClass:"mx-2"}),e("div",{staticClass:"detail-content pa-1 pa-sm-4"},t._l(t.reportPlans,(function(a,s){return e(G.Z,{key:`row${s}`,staticClass:"mt-2",model:{value:a.open,callback:function(e){t.$set(a,"open",e)},expression:"row.open"}},[e(j.Z,[e(Y.Z,{staticClass:"py-2 pl-2",attrs:{"hide-actions":""}},[e("div",{staticClass:"d-flex align-center"},[e("div",[t.isMobile?e(d.Z,{attrs:{src:`./img/ship/${a.master.id}.png`,height:"30",width:"120"}}):e(d.Z,{attrs:{src:`./img/ship/${a.master.id}.png`,height:"40",width:"160"}})],1),e("div",{staticClass:"ml-1 flex-grow-1"},[e("div",{staticClass:"primary--text caption"},[t._v("Lv."+t._s(a.stock.level))]),e("div",{staticClass:"d-flex"},[e("div",{staticClass:"ship-name text-truncate"},[t._v(t._s(t.getShipName(a.master)))])])]),e(tt.V,[0!==a.open||t.isMobile?e("div",{staticClass:"ml-auto d-flex"},[e("div",{staticClass:"d-sm-flex align-center",class:{"opacity-10":!a.blueprints}},[e("img",{attrs:{src:"./img/util/blueprint.png",height:"40",width:"40",alt:"blueprint"}}),e("div",{staticClass:"ml-1 text-right body-2"},[t._v("x "+t._s(a.blueprints))])]),e("div",{staticClass:"ml-1 ml-sm-3 d-sm-flex align-center",class:{"opacity-10":!a.actionReports}},[e("img",{attrs:{src:"./img/util/actionReport.png",height:"40",width:"40",alt:"actionReport"}}),e("div",{staticClass:"ml-1 text-right body-2"},[t._v("x "+t._s(a.actionReports))])]),e("div",{staticClass:"ml-1 ml-sm-3 d-sm-flex align-center",class:{"opacity-10":!a.catapults}},[e("img",{attrs:{src:"./img/util/catapult.png",height:"40",width:"40",alt:"catapult"}}),e("div",{staticClass:"ml-1 text-right body-2"},[t._v("x "+t._s(a.catapults))])])]):t._e()])],1)]),e(J.Z,[e(r.Z),t._l(a.details,(function(a,i){return e("div",{key:`row${s}_${i}`,staticClass:"d-sm-flex mt-2"},[e("div",{staticClass:"d-flex flex-grow-1"},[t.usedMode?t._e():e("div",{staticClass:"next-arrow-container"},[e("div",{staticClass:"mr-3"},[a.requireEXP?e(c.Z,{attrs:{color:"warning"}},[t._v("mdi-arrow-right-bold")]):e(c.Z,{attrs:{color:"success"}},[t._v("mdi-arrow-right-bold")])],1),e("div",{staticClass:"next-level",class:{"warning--text":a.requireEXP,"success--text":!a.requireEXP}},[e("span",{staticClass:"caption"},[t._v("Lv.")]),e("span",{staticClass:"body-2"},[t._v(t._s(a.base.nextLv))])])]),e("div",{staticClass:"align-self-center"},[t.isMobile?e(d.Z,{attrs:{src:`./img/ship/${a.next.id}.png`,height:"30",width:"120"}}):e(d.Z,{attrs:{src:`./img/ship/${a.next.id}.png`,height:"40",width:"160"}})],1),e("div",{staticClass:"ml-1 flex-grow-1 align-self-center"},[t.usedMode?t._e():[a.requireEXP?e("div",{staticClass:"caption warning--text"},[t._v(t._s(t.$t("Database.残exp"))+" "+t._s(a.requireEXP.toLocaleString()))]):e("div",{staticClass:"caption success--text"},[e(c.Z,{attrs:{color:"success",small:""}},[t._v("mdi-check-circle-outline")])],1)],e("div",{staticClass:"d-flex"},[e("div",{staticClass:"ship-name text-truncate"},[t._v(t._s(t.getShipName(a.next)))])])],2)]),e("div",{staticClass:"ml-auto d-flex align-self-center justify-center"},[e("div",{staticClass:"d-flex align-center",class:{"opacity-10":!a.blueprints}},[e(d.Z,{attrs:{src:"./img/util/blueprint.png",height:"40",width:"40"}}),e("div",{staticClass:"ml-1 body-2 text-right"},[t._v("x "+t._s(a.blueprints))])],1),e("div",{staticClass:"ml-3 d-flex align-center",class:{"opacity-10":!a.actionReports}},[e(d.Z,{attrs:{src:"./img/util/actionReport.png",height:"40",width:"40"}}),e("div",{staticClass:"ml-1 body-2 text-right"},[t._v("x "+t._s(a.actionReports))])],1),e("div",{staticClass:"ml-3 d-flex align-center",class:{"opacity-10":!a.catapults}},[e(d.Z,{attrs:{src:"./img/util/catapult.png",height:"40",width:"40"}}),e("div",{staticClass:"ml-1 body-2 text-right"},[t._v("x "+t._s(a.catapults))])],1)])])}))],2)],1)],1)})),1),e(r.Z),e(o.h7,[e(F.Z),e(i.Z,{attrs:{color:"primary"},on:{click:function(e){return t.expandAll()}}},[t._v(t._s(t.$t("Database.全て展開")))]),e(i.Z,{attrs:{color:"secondary"},on:{click:function(e){return t.collapseAll()}}},[t._v(t._s(t.$t("Database.全て折りたたむ")))])],1)],1)],1)],1)},at=[],st=a(2297),it=a.n(st),lt=a(8659),ot=a.n(lt),nt=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("RadarChart",{style:t.styles,attrs:{"chart-data":t.actualData,options:t.actualOptions,plugins:t.plugins}})},rt=[],ct=a(5706),dt=a(6775),pt=a(9231),ht=a(6429);dt.kL.register(ht.Z,...dt.zX);var ut=C.ZP.use(ct.ZP).extend({components:{RadarChart:pt.HM},props:{data:{type:Object,required:!0},options:{type:Object},titleText:{type:String},height:{type:Number,default:1200}},data:()=>({plugins:[ht.Z]}),computed:{actualData(){return this.$vuetify.theme.dark,this.data},actualOptions(){if(this.$vuetify.theme.dark){const t="rgb(200, 200, 200)";this.options.plugins.title.color=t,this.options.plugins.legend.labels.color=t,this.options.scales.r.pointLabels.color=t,this.options.scales.r.ticks.color=t,this.options.scales.r.ticks.backdropColor="rgba(0, 0, 0, 0.1)"}else{const t="rgb(64, 64, 64)";this.options.plugins.title.color=t,this.options.plugins.legend.labels.color=t,this.options.scales.r.pointLabels.color=t,this.options.scales.r.ticks.color=t,this.options.scales.r.ticks.backdropColor="rgba(255, 255, 255, 0.9)"}return this.titleText&&(this.options.plugins.title.text=this.titleText),this.options},styles(){return{height:"60vh",position:"relative"}}}}),mt=ut,vt=a(1001),gt=(0,vt.Z)(mt,nt,rt,!1,null,null,null),ft=gt.exports,bt=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("BarChart",{ref:"stackedBarRef",style:t.styles,attrs:{"chart-data":t.actualData,options:t.actualOptions,plugins:t.plugins}})},xt=[];const kt=["rgba(224, 0, 0, 0.5)","rgba(128, 0, 224, 0.5)","rgba(0, 0, 224, 0.5)","rgba(0, 128, 224, 0.5)","rgba(0, 224, 224, 0.5)","rgba(0, 224, 0, 0.5)","rgba(224, 224, 0, 0.5)","rgba(224, 128, 0, 0.5)","rgba(0, 0, 0, 0.25)"],_t=["rgba(255, 80, 80, 0.5)","rgba(170, 80, 255, 0.5)","rgba(80, 80, 255, 0.5)","rgba(80, 180, 255, 0.5)","rgba(80, 255, 255, 0.5)","rgba(80, 255, 80, 0.5)","rgba(255, 255, 80, 0.5)","rgba(255, 180, 80, 0.5)","rgba(255, 255, 255, 0.25)"];dt.kL.register(ht.Z,...dt.zX);var Ct=C.ZP.use(ct.ZP).extend({components:{BarChart:pt.vz},props:{data:{type:Object,required:!0},options:{type:Object},titleText:{type:String}},data:()=>({stackedBarRef:{},plugins:[ht.Z]}),computed:{actualData(){const t=this.$vuetify.theme.dark?_t:kt,{datasets:e}=this.data;for(let a=0;a<e.length;a+=1)e[a].backgroundColor=t[a];return this.data},actualOptions(){let t="rgb(64, 64, 64)";return this.$vuetify.theme.dark&&(t="rgb(200, 200, 200)"),this.options.plugins.legend.labels.color=t,this.options.scales.x.ticks.color=t,this.options.scales.x.title.color=t,this.options.scales.y.ticks.color=t,this.options},styles(){return{height:"70vh",position:"relative"}}}}),yt=Ct,St=(0,vt.Z)(yt,bt,xt,!1,null,null,null),$t=St.exports,wt=a(6141),Zt=a(5549);const Dt=["最大Lv","最小Lv","中央Lv","平均Lv"];var Lt=C.ZP.extend({name:"AnalyticsComponent",components:{RadarChart:ft,StackedBar:$t},data:()=>({levelRange:[1,wt.ZP.MAX_LEVEL],summaryTable:[],expRankTable:[],unsubscribe:void 0,readOnly:!1,radarGraphData:{labels:[],datasets:[{label:Dt[0],data:[],fill:!1,backgroundColor:"rgba(64, 164, 255, 0.1)",borderColor:"rgb(64, 164, 255)",borderWidth:2,pointRadius:3,datalabels:{display:!1}},{label:Dt[1],data:[],backgroundColor:"rgba(255, 64, 64, 0.1)",borderColor:"rgb(255, 64, 64)",borderWidth:2,pointRadius:3,datalabels:{display:!1},hidden:!0},{label:Dt[2],data:[],fill:!1,backgroundColor:"rgba(255, 128, 64, 0.1)",borderColor:"rgb(255, 128, 64)",borderWidth:2,pointRadius:3,datalabels:{display:!1}},{label:Dt[3],data:[],fill:!1,backgroundColor:"rgba(0, 200, 0, 0.1)",borderColor:"rgb(0, 200, 0)",borderWidth:2,pointRadius:3,datalabels:{display:!1}}]},radarOptions:{responsive:!0,maintainAspectRatio:!1,scales:{r:{min:0,max:wt.ZP.MAX_LEVEL,ticks:{stepSize:25,color:"rgb(64, 64, 64)",backdropColor:"rgba(255, 255, 255, 0.7)"},angleLines:{color:"rgba(128, 128, 128, 0.4)"},pointLabels:{color:"rgb(64, 64, 64)"},grid:{color:"rgba(128, 128, 128, 0.4)"}}},plugins:{legend:{display:!0,position:"bottom",labels:{color:"rgb(64, 64, 64)"}},title:{display:!0}}},stackedBarData:{labels:[],datasets:[]},stackedBarOption:{responsive:!0,indexAxis:"y",scales:{x:{grid:{color:"rgba(128, 128, 128, 0.4)"},title:{display:!0,text:"艦娘数[隻]"},ticks:{color:"rgb(64, 64, 64)"}},y:{grid:{color:"rgba(128, 128, 128, 0.4)"},title:{display:!1},ticks:{color:"rgb(64, 64, 64)"}}},plugins:{legend:{display:!0,position:"bottom",labels:{color:"rgb(64, 64, 64)"}}}},allShipCount:0,allMarriageCount:0,allExSlotCount:0,totalLuckImprovement:0,totalHPImprovement:0,totalASWImprovement:0,maruyuRank:0,totalBluePrintsPlan:0,totalActionReportsPlan:0,totalCatapultsPlan:0,totalBluePrints:0,totalActionReports:0,totalCatapults:0,detailDialog:!1,isMobile:!0,usedMode:!1,onlyBlueprint:!1,onlyActionReport:!1,onlyCatapult:!1,reportPlans:[],maxLevel:wt.ZP.MAX_LEVEL}),mounted(){this.$store.getters.getExistsTempStock&&(this.readOnly=!0),this.analyze(),this.unsubscribe=this.$store.subscribe((t=>{"setShipStock"===t.type&&this.analyze()}));const t=Math.floor(this.maxLevel/10);for(let e=t;e>0;e-=1)this.stackedBarData.labels.push(10*e+"～");this.stackedBarData.labels.push("1～")},watch:{isTempStockMode(t){this.readOnly=!!t,this.analyze()}},computed:{needTrans(){const t=this.$store.state.siteSetting;return"ja"!==this.$i18n.locale&&!t.nameIsNotTranslate},isNotJapanese(){return"ja"!==this.$i18n.locale},isTempStockMode(){return this.$store.getters.getExistsTempStock}},beforeDestroy(){this.unsubscribe&&this.unsubscribe()},methods:{analyze(){this.isMobile=window.innerWidth<600;const t=this.$store.state.ships;let e=this.$store.state.shipStock;this.readOnly&&(e=this.$store.state.tempShipStock);const a=wt.ZP.SHIP_TYPES_ALT2,s=[];let i=0,l=[],o=0,n=0,r=0,c=0,d=0,p=0,h=0,u=0,m=0,v=0,g=0,f=0,b=[];this.radarGraphData.labels=[],this.stackedBarData.datasets=[],this.stackedBarOption.scales.x.title.text=`${this.$t("Database.艦娘数")}`;for(let _=0;_<a.length;_+=1){const x=a[_],k=this.isNotJapanese?`${this.$t(`SType.${x.text}`)}`:x.text;this.radarGraphData.labels.push(k),this.radarGraphData.datasets[0].label=`${this.$t("Database.最大Lv")}`,this.radarGraphData.datasets[1].label=`${this.$t("Database.最小Lv")}`,this.radarGraphData.datasets[2].label=`${this.$t("Database.中央Lv")}`,this.radarGraphData.datasets[3].label=`${this.$t("Database.平均Lv")}`;const C=t.filter((t=>x.types.includes(t.type))),y=C.map((t=>t.id)),$={label:k,borderWidth:0,data:[],stack:"stack-1",datalabels:{display:!1}},w=Math.floor(this.maxLevel/10);for(let t=0;t<=w;t+=1)$.data.push(0);const Z=e.filter((t=>y.includes(t.id)&&t.level>=this.levelRange[0]&&t.level<=this.levelRange[1]));if(Z.length){const e=[],a=[];for(let s=0;s<Z.length;s+=1){const i=Z[s];e.push(i.level),a.push(i.exp),o+=i.level>99?1:0,n+=i.releaseExpand?1:0,r+=i.improvement.hp,c+=i.improvement.asw,d+=i.improvement.luck,p+=163===i.id||402===i.id?1:0,$.data[$.data.length-1-Math.floor(i.level/10)]+=1;const l=t.find((t=>t.id===i.id));if(!l)continue;const x=l.originalId,k=b.find((t=>t.id===x));k?k.exp+=i.exp:x&&b.push({id:x,name:"",exp:i.exp,rate:0});const _=t.filter((t=>t.originalId===x&&t.version<l.version));for(let t=0;t<_.length;t+=1){const e=_[t];v+=e.blueprints,g+=e.actionReports,f+=e.catapults}const C=t.filter((t=>t.originalId===x&&t.version>=l.version));for(let t=0;t<C.length;t+=1){const e=C[t];h+=e.blueprints,u+=e.actionReports,m+=e.catapults}}const x=it()(a);i+=x,l=l.concat(e);const C={count:Z.length,maxLevel:S()(e),minLevel:W()(e),midLevel:this.getMidValue(e),avgLevel:ot()(e),sumExp:x,avgExp:ot()(a),expRate:0};s.push({name:k,data:C}),this.radarGraphData.datasets[0].data[_]=C.maxLevel?C.maxLevel:0,this.radarGraphData.datasets[1].data[_]=C.minLevel?C.minLevel:0,this.radarGraphData.datasets[2].data[_]=C.midLevel?C.midLevel:0,this.radarGraphData.datasets[3].data[_]=C.avgLevel?Math.floor(C.avgLevel):0}else{const t={count:0,maxLevel:0,minLevel:0,midLevel:0,avgLevel:0,sumExp:0,avgExp:0,expRate:0};s.push({name:k,data:t}),this.radarGraphData.datasets[0].data[_]=0,this.radarGraphData.datasets[1].data[_]=0,this.radarGraphData.datasets[2].data[_]=0,this.radarGraphData.datasets[3].data[_]=0}this.stackedBarData.datasets.push($)}this.summaryTable=[];for(let _=0;_<s.length;_+=1){const t=s[_];this.summaryTable.push({name:t.name,data:{count:t.data.count,maxLevel:t.data.maxLevel,minLevel:t.data.minLevel,midLevel:t.data.midLevel,avgLevel:t.data.avgLevel?t.data.avgLevel.toFixed(1):0,sumExp:t.data.sumExp.toLocaleString(),avgExp:Math.floor(t.data.avgExp).toLocaleString(),expRate:i?Math.floor(1e3*t.data.sumExp/i)/10:0}})}const x=it()(l),k=l.length;this.summaryTable.push({name:this.isNotJapanese?`${this.$t("SType.合計")}`:"合計",data:{count:k,maxLevel:S()(s.map((t=>t.data.maxLevel))),minLevel:W()(s.map((t=>t.data.minLevel))),midLevel:this.getMidValue(l),avgLevel:k?(x/k).toFixed(1):"0",sumExp:i.toLocaleString(),avgExp:k?Math.floor(i/k).toLocaleString():"0",expRate:k?100:0}}),this.allShipCount=k,this.allMarriageCount=o,this.allExSlotCount=n,this.totalHPImprovement=r,this.totalLuckImprovement=d,this.totalASWImprovement=c,this.maruyuRank=Math.max(Math.floor(p+(d-4.5*this.allMarriageCount)/1.6),0),this.totalBluePrintsPlan=h,this.totalActionReportsPlan=u,this.totalCatapultsPlan=m,this.totalBluePrints=v,this.totalActionReports=g,this.totalCatapults=f,b=b.sort(((t,e)=>e.exp!==t.exp?e.exp-t.exp:t.id-e.id)).splice(0,50),this.expRankTable=[];for(let _=0;_<b.length;_+=1){const e=b[_],a=t.find((t=>t.id===e.id))?.name;a&&(e.name=a),i&&(e.rate=100*e.exp/i),this.expRankTable.push({rank:_+1,name:e.name,exp:e.exp.toLocaleString(),rate:e.rate.toFixed(2)})}},getMidValue(t){if(t.length){const e=t.length;t.sort(((t,e)=>t-e));const a=Math.floor(t.length/2);return e%2?t[a]:Math.floor((t[a-1]+t[a])/2)}return 0},translate(t){return t?`${this.$t(t)}`:""},getShipName(t){if(this.needTrans){const e=Zt.Z.getSuffix(t);return`${e.map((t=>this.translate(t))).join("")}`}return t.name?t.name:""},showBlueprintPlanDialog(){this.usedMode=!1,this.onlyBlueprint=!0,this.onlyActionReport=!1,this.onlyCatapult=!1,this.setDetailDialogData()},showActionReportPlanDialog(){this.usedMode=!1,this.onlyBlueprint=!1,this.onlyActionReport=!0,this.onlyCatapult=!1,this.setDetailDialogData()},showCatapultPlanDialog(){this.usedMode=!1,this.onlyBlueprint=!1,this.onlyActionReport=!1,this.onlyCatapult=!0,this.setDetailDialogData()},showBlueprintUseDialog(){this.usedMode=!0,this.onlyBlueprint=!0,this.onlyActionReport=!1,this.onlyCatapult=!1,this.setDetailDialogData()},showActionReportUseDialog(){this.usedMode=!0,this.onlyBlueprint=!1,this.onlyActionReport=!0,this.onlyCatapult=!1,this.setDetailDialogData()},showCatapultUseDialog(){this.usedMode=!0,this.onlyBlueprint=!1,this.onlyActionReport=!1,this.onlyCatapult=!0,this.setDetailDialogData()},setDetailDialogData(){const t=this.$store.state.ships;let e=this.$store.state.shipStock;this.readOnly&&(e=this.$store.state.tempShipStock),this.reportPlans=[];const a=[],s=e.filter((t=>t.level>=this.levelRange[0]&&t.level<=this.levelRange[1]));for(let i=0;i<s.length;i+=1){const e=s[i],l=t.find((t=>t.id===e.id));if(!l)continue;const o={master:l,stock:e,blueprints:0,actionReports:0,catapults:0,details:[],open:-1};let n;n=this.usedMode?t.filter((t=>t.originalId===l.originalId&&t.version<=l.version)):t.filter((t=>t.originalId===l.originalId&&t.version>=l.version));for(let t=0;t<n.length;t+=1){const a=n[t];let s;if(this.usedMode){if(s=n.find((t=>t.version===a.version-1)),s&&(s.blueprints||s.actionReports||s.catapults)){if(this.onlyBlueprint&&!s.blueprints)continue;if(this.onlyActionReport&&!s.actionReports)continue;if(this.onlyCatapult&&!s.catapults)continue;o.details.push({base:a,next:s,requireEXP:0,blueprints:s.blueprints,actionReports:s.actionReports,catapults:s.catapults}),o.blueprints+=s.blueprints,o.actionReports+=s.actionReports,o.catapults+=s.catapults}}else if(s=n.find((t=>t.version===a.version+1)),s&&(a.blueprints||a.actionReports||a.catapults)){if(this.onlyBlueprint&&!a.blueprints)continue;if(this.onlyActionReport&&!a.actionReports)continue;if(this.onlyCatapult&&!a.catapults)continue;let t=0;if(e.level<a.nextLv){const s=wt.ZP.LEVEL_BORDERS.find((t=>t.lv===a.nextLv));t=s?s.req-e.exp:0}o.details.push({base:a,next:s,requireEXP:t,blueprints:a.blueprints,actionReports:a.actionReports,catapults:a.catapults}),o.blueprints+=a.blueprints,o.actionReports+=a.actionReports,o.catapults+=a.catapults}}o.details.length&&a.push(o)}a.sort(((t,e)=>t.master.sort-e.master.sort)),this.reportPlans=a,this.isMobile=window.innerWidth<600,this.detailDialog=!0},expandAll(){for(let t=0;t<this.reportPlans.length;t+=1)this.reportPlans[t].open=0},collapseAll(){for(let t=0;t<this.reportPlans.length;t+=1)this.reportPlans[t].open=-1}}}),Rt=Lt,It=(0,vt.Z)(Rt,et,at,!1,null,"7fcda09c",null),Tt=It.exports,Pt=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"mt-3"},[e(l.Z,{staticClass:"my-2 pa-2"},[e("table",[e("thead",[e("tr",[e("td",{staticClass:"text-left"},[t._v(t._s(t.$t("Database.艦種")))]),e("td",[t._v(t._s(t.$t("Database.登録艦隊")))]),e("td",[t._v(t._s(t.$t("Database.現在閲覧中の艦隊")))]),e("td",[t._v(t._s(t.$t("Database.差")))])])]),e("tbody",t._l(t.summaryTable,(function(a,s){return e("tr",{key:`summary_row${s}`},[e("td",{staticClass:"text-left"},[t._v(t._s(t.isNotJapanese?t.$t(`SType.${a.name}`):a.name))]),e("td",{class:{"win-td":a.isWin}},[t._v(t._s(a.data.sumExp))]),e("td",{class:{"win-td":a.isLose}},[t._v(t._s(a.data.tempSumExp))]),e("td",{class:{"win-sub":a.isWin,"lose-sub":a.isLose}},[t._v(t._s(a.data.sub))])])})),0)])]),e("div",{staticClass:"mt-5 d-flex flex-wrap"},t._l(t.types,(function(a,s){return e("div",{directives:[{def:B.Z,name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],key:s,staticClass:"type-selector",class:{active:s===t.type},on:{click:function(e){return t.changeType(s)},keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.changeType(s)}}},[t._v(" "+t._s(t.isNotJapanese?t.$t(`SType.${a.text}`):a.text)+" ")])})),0),e(l.Z,{staticClass:"my-1"},[e(Q.Z,{attrs:{"fixed-header":"",height:"70vh"},scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[t._v(t._s(t.$t("Database.登録艦隊")))]),e("th",{staticClass:"text-right"},[t._v("Lv")]),e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.経験値")))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.耐久改修")))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.対潜改修")))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.運改修")))]),e("th",{staticClass:"text-left"},[t._v(t._s(t.$t("Database.現在閲覧中の艦隊")))]),e("th",{staticClass:"text-right"},[t._v("Lv")]),e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.経験値")))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.耐久改修")))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.対潜改修")))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Database.運改修")))])])]),e("tbody",t._l(t.diffRow,(function(a,s){return e("tr",{key:`ship_row${s}`},[a.stock1?[e("td",{staticClass:"text-left pl-0",class:{more:a.isMore,less:a.isLess,exist:!a.stock2}},[e("div",{staticClass:"ship-img-area"},[e(d.Z,{attrs:{src:`./img/ship/${a.id}.png`,height:"36",width:"144"}})],1)]),e("td",{class:{more:a.isMore,less:a.isLess,exist:!a.stock2}},[t._v(t._s(a.stock1.level))]),e("td",{class:{more:a.isMore,less:a.isLess,exist:!a.stock2}},[t._v(t._s(a.stock1.exp.toLocaleString()))]),e("td",{class:{more:a.isMore,less:a.isLess,exist:!a.stock2}},[t._v(t._s(a.stock1.improvement.hp||""))]),e("td",{class:{more:a.isMore,less:a.isLess,exist:!a.stock2}},[t._v(t._s(a.stock1.improvement.asw||""))]),e("td",{class:{more:a.isMore,less:a.isLess,exist:!a.stock2}},[t._v(t._s(a.stock1.improvement.luck||""))])]:[e("td",{staticClass:"none",attrs:{colspan:"6"}})],a.stock2?[e("td",{staticClass:"text-left pl-0",class:{more:a.isLess,less:a.isMore,exist:!a.stock1}},[e("div",{staticClass:"ship-img-area"},[e(d.Z,{attrs:{src:`./img/ship/${a.id}.png`,height:"36",width:"144"}})],1)]),e("td",{class:{more:a.isLess,less:a.isMore,exist:!a.stock1}},[t._v(t._s(a.stock2.level))]),e("td",{class:{more:a.isLess,less:a.isMore,exist:!a.stock1}},[t._v(t._s(a.stock2.exp.toLocaleString()))]),e("td",{class:{more:a.isLess,less:a.isMore,exist:!a.stock1}},[t._v(t._s(a.stock2.improvement.hp||""))]),e("td",{class:{more:a.isLess,less:a.isMore,exist:!a.stock1}},[t._v(t._s(a.stock2.improvement.asw||""))]),e("td",{class:{more:a.isLess,less:a.isMore,exist:!a.stock1}},[t._v(t._s(a.stock2.improvement.luck||""))])]:[e("td",{staticClass:"none",attrs:{colspan:"6"}})]],2)})),0)]},proxy:!0}])})],1)],1)},Mt=[],At=C.ZP.extend({name:"CompareComponent",data:()=>({summaryTable:[],unsubscribe:void 0,diffRow:[],type:0,types:[]}),mounted(){for(let t=0;t<wt.ZP.SHIP_TYPES_ALT2.length;t+=1){const e=wt.ZP.SHIP_TYPES_ALT2[t];this.types.push({text:e.text,types:e.types})}this.analyze(),this.generateDiffRow(),this.unsubscribe=this.$store.subscribe((t=>{"setShipStock"===t.type&&(this.analyze(),this.generateDiffRow())}))},watch:{isTempStockMode(t){t&&(this.analyze(),this.generateDiffRow())}},computed:{isTempStockMode(){return this.$store.getters.getExistsTempStock},isNotJapanese(){return"ja"!==this.$i18n.locale}},beforeDestroy(){this.unsubscribe&&this.unsubscribe()},methods:{changeType(t=0){this.type=t,this.generateDiffRow()},analyze(){const t=this.$store.state.ships,e=this.$store.state.shipStock,a=this.$store.state.tempShipStock,s=wt.ZP.SHIP_TYPES_ALT2,i=[];let l=0,o=0;for(let r=0;r<s.length;r+=1){const n=s[r],c=t.filter((t=>n.types.includes(t.type))),d=c.map((t=>t.id)),p=e.filter((t=>d.includes(t.id))),h=[];for(let t=0;t<p.length;t+=1)h.push(p[t].exp);const u=it()(h);l+=u;const m=a.filter((t=>d.includes(t.id))),v=[];for(let t=0;t<m.length;t+=1)v.push(m[t].exp);const g=it()(v);o+=g;const f=u-g;i.push({name:n.text,data:{sumExp:u,sub:f,tempSumExp:g}})}this.summaryTable=[];for(let r=0;r<i.length;r+=1){const t=i[r];this.summaryTable.push({name:t.name,data:{sumExp:t.data.sumExp.toLocaleString(),sub:t.data.sub.toLocaleString(),tempSumExp:t.data.tempSumExp.toLocaleString()},isWin:t.data.sub>0,isLose:t.data.sub<0})}const n=l-o;this.summaryTable.push({name:"合計",data:{sumExp:l.toLocaleString(),sub:n.toLocaleString(),tempSumExp:o.toLocaleString()},isWin:n>0,isLose:n<0})},generateDiffRow(){const t=this.$store.state.ships,e=this.$store.state.shipStock,a=this.$store.state.tempShipStock,s=this.types[this.type]?this.types[this.type].types:[],i=t.concat().filter((t=>s.includes(t.type)));i.sort(((t,e)=>t.sort-e.sort)),this.diffRow=[];for(let l=0;l<i.length;l+=1){const{id:t}=i[l],s=e.filter((e=>e.id===t)),o=a.filter((e=>e.id===t));s.sort(((t,e)=>e.level!==t.level?e.level-t.level:e.exp-t.exp)),o.sort(((t,e)=>e.level!==t.level?e.level-t.level:e.exp-t.exp));const n=Math.max(s.length,o.length);for(let e=0;e<n;e+=1){const a=s[e],i=o[e];let l=!!a&&!i,n=!a&&!!i;a&&i&&(l=a.level>i.level,n=a.level<i.level);const r={id:t,isMore:l,isLess:n,stock1:a||void 0,stock2:i||void 0};this.diffRow.push(r)}}}}}),Et=At,Ht=(0,vt.Z)(Et,Pt,Mt,!1,null,"9693cc2e",null),Ft=Ht.exports,Nt=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"mt-3"},[e("div",{staticClass:"d-flex align-center flex-wrap"},[e("div",{staticClass:"search-input"},[e(b.Z,{attrs:{label:t.$t("Database.名称検索"),dense:"",clearable:"","prepend-inner-icon":"mdi-magnify"},model:{value:t.searchWord,callback:function(e){t.searchWord="string"===typeof e?e.trim():e},expression:"searchWord"}})],1),e("div",{staticClass:"ml-auto d-flex"},[e(N.Z,{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(i.Z,t._g(t._b({attrs:{fab:"",text:""},on:{click:function(e){return t.expandAll()}}},"v-btn",s,!1),a),[e(c.Z,[t._v("mdi-expand-all")])],1)]}}])},[e("span",[t._v(t._s(t.$t("Database.全て展開")))])]),e(N.Z,{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(i.Z,t._g(t._b({attrs:{fab:"",text:""},on:{click:function(e){return t.collapseAll()}}},"v-btn",s,!1),a),[e(c.Z,[t._v("mdi-collapse-all")])],1)]}}])},[e("span",[t._v(t._s(t.$t("Database.全て折りたたむ")))])]),e(N.Z,{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(i.Z,t._g(t._b({attrs:{fab:"",text:""},on:{click:function(e){return t.captureTagManager()}}},"v-btn",s,!1),a),[e(c.Z,[t._v("mdi-camera")])],1)]}}])},[e("span",[t._v(t._s(t.$t("Common.スクリーンショットを保存")))])]),e(N.Z,{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(i.Z,t._g(t._b({attrs:{fab:"",text:""},on:{click:function(e){t.confirmResetDialog=!0}}},"v-btn",s,!1),a),[e(c.Z,[t._v("mdi-trash-can-outline")])],1)]}}])},[e("span",[t._v(t._s(t.$t("Database.お札一斉解除")))])])],1)]),e("div",{staticClass:"area-manager-container mt-1",class:{captured:t.capturing},attrs:{id:"area-tag-manager"}},t._l(t.filteredAreaShipList,(function(a){return e(l.Z,{key:`area_${a.area}`,staticClass:"px-2 py-3 area-card",class:{minimize:t.minimizeArea.includes(a.area)},attrs:{"data-area":a.area},on:{dragenter:function(e){return t.dragEnter(e)},dragleave:function(e){return t.dragLeave(e)},drop:function(e){return e.stopPropagation(),t.dropShip(e)},dragover:function(t){t.preventDefault()}}},[t.capturing?t._e():e("div",{staticClass:"d-flex mb-2"},[e("div",{staticClass:"area-banner"},[e(d.Z,{attrs:{src:`./img/tags/area${a.area}.webp`,height:"54",width:"40"}})],1),e(i.Z,{staticClass:"ml-12",attrs:{color:"primary",disabled:t.disabledEdit},on:{click:function(e){return e.stopPropagation(),t.showShipList(a.area)}}},[t._v(" "+t._s(t.$t("Common.配備"))+" ")]),e(i.Z,{staticClass:"ml-3",attrs:{color:"secondary",disabled:t.disabledEdit},on:{click:function(e){return e.stopPropagation(),t.resetShipsClicked(a.area)}}},[t._v(" "+t._s(t.$t("Database.解散"))+" ")]),e(i.Z,{staticClass:"ml-auto",attrs:{icon:""},on:{click:function(e){return t.toggleMinimize(a.area)}}},[t.minimizeArea.includes(a.area)?e(c.Z,[t._v("mdi-chevron-down")]):e(c.Z,[t._v("mdi-chevron-up")])],1)],1),t.minimizeArea.includes(a.area)?t._e():t._l(a.headers,(function(s){return e("div",{key:`type_${s.text}`},[e("div",{staticClass:"type-divider",class:{"mt-2 mb-1":t.capturing}},[e("div",{staticClass:"caption"},[t._v(t._s(t.$t(`SType.${s.text}`)))]),e("div",{staticClass:"caption ml-1 text--secondary"},[t._v("("+t._s(s.ships.length)+")")]),e("div",{staticClass:"type-divider-border"})]),e("div",{staticClass:"ships-container",class:{capturing:t.capturing}},t._l(s.ships,(function(s,i){return e("div",{key:`area_${a.area}_ship${i}`,staticClass:"ship-container",class:{draggable:!t.disabledEdit,capturing:t.capturing},attrs:{draggable:!t.disabledEdit},on:{dragstart:function(e){return t.dragStart(s,e)},dragend:function(e){return t.dragEnd(e)},click:function(e){return e.stopPropagation(),t.clickedShip(a.area,s)},keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.clickedShip(a.area,s)}}},[e("div",{staticClass:"ship-img-container",attrs:{draggable:"false"},on:{mouseenter:function(e){return t.bootTooltip(s,e)},mouseleave:t.clearTooltip,focus:function(e){return t.bootTooltip(s,e)},blur:t.clearTooltip}},[e("div",{staticClass:"ship-img"},[e("img",{attrs:{src:`./img/ship/${s.data.id}.png`,alt:`ship${s.data.id}`}})]),s.expand?e("div",{staticClass:"slot-ex-img"},[e("img",{attrs:{src:"./img/util/slot_ex.png",alt:"slot_ex"}})]):t._e(),t.capturing?e("div",{staticClass:"ship-area-banner"},[e("img",{attrs:{src:`./img/tags/area${a.area}.webp`,alt:"banner"}})]):t._e()]),e("div",{staticClass:"ship-status-name"},[e("div",{staticClass:"ship-status"},[e("div",{staticClass:"align-self-center primary--text"},[t._v(" Lv "),e("span",{staticClass:"font-weight-bold"},[t._v(t._s(s.level))])]),e("div",{staticClass:"ml-1 align-self-center d-none d-sm-block"},[t._v(" "+t._s(t.$t("Common.運"))+" "),e("span",{staticClass:"font-weight-bold"},[t._v(t._s(s.luck))])])]),e("div",{staticClass:"text-truncate ship-name"},[t._v(t._s(t.getShipName(s.data)))])])])})),0)])}))],2)})),1),e(n.Z,{attrs:{transition:"scroll-x-transition",width:t.shipDialogWidth,fullscreen:t.isMobile},model:{value:t.shipListDialog,callback:function(e){t.shipListDialog=e},expression:"shipListDialog"}},[e("ship-list",{ref:"shipList",attrs:{"handle-decide-ship":t.putShip,"handle-close":t.closeDialog,"handle-change-width":t.changeShipWidth}})],1),e(n.Z,{attrs:{transition:"scroll-x-transition",width:"400"},model:{value:t.confirmDialog,callback:function(e){t.confirmDialog=e},expression:"confirmDialog"}},[e(l.Z,{staticClass:"pa-3"},[e("div",{staticClass:"ma-4"},[t.confirmShip?e("div",{staticClass:"d-flex mb-3"},[e("div",[e(d.Z,{attrs:{src:`./img/ship/${t.confirmShip.data.id}.png`,height:"30",width:"120"}})],1),e("div",{staticClass:"ship-status-name"},[e("div",{staticClass:"ship-status"},[e("div",{staticClass:"align-self-center primary--text"},[t._v("Lv:"+t._s(t.confirmShip.level))]),e("div",{staticClass:"ml-1 align-self-center"},[t._v(t._s(t.$t("Common.運"))+" "+t._s(t.confirmShip.luck))])]),e("div",{staticClass:"text-truncate"},[t._v(t._s(t.getShipName(t.confirmShip.data)))])])]):t._e(),t.confirmShip?e("div",[t._v(t._s(t.$t("Database.札を解除します。よろしいですか？")))]):e("div",[t._v(t._s(t.$t("Database.解散します。よろしいですか？")))])]),e(r.Z,{staticClass:"my-2"}),e("div",{staticClass:"d-flex"},[t.confirmShip?e(i.Z,{staticClass:"ml-auto",attrs:{color:"red",dark:""},on:{click:function(e){return e.stopPropagation(),t.removeShip()}}},[t._v(t._s(t.$t("Database.解除")))]):e(i.Z,{staticClass:"ml-auto",attrs:{color:"red",dark:""},on:{click:function(e){return e.stopPropagation(),t.resetShips()}}},[t._v(t._s(t.$t("Database.解散")))]),e(i.Z,{staticClass:"ml-4",attrs:{color:"secondary"},on:{click:function(e){e.stopPropagation(),t.confirmDialog=!1}}},[t._v(t._s(t.$t("Common.戻る")))])],1)],1)],1),e(n.Z,{attrs:{transition:"scroll-x-transition",width:"400"},model:{value:t.confirmResetDialog,callback:function(e){t.confirmResetDialog=e},expression:"confirmResetDialog"}},[e(l.Z,{staticClass:"pa-3"},[e("div",{staticClass:"ma-4"},[e("div",[t._v(t._s(t.$t("Database.札を解除します。よろしいですか？")))])]),e(r.Z,{staticClass:"my-2"}),e("div",{staticClass:"d-flex"},[e(i.Z,{staticClass:"ml-auto",attrs:{color:"red",dark:""},on:{click:function(e){return e.stopPropagation(),t.resetAreaTag()}}},[t._v(t._s(t.$t("Database.解除")))]),e(i.Z,{staticClass:"ml-4",attrs:{color:"secondary"},on:{click:function(e){e.stopPropagation(),t.confirmResetDialog=!1}}},[t._v(t._s(t.$t("Common.戻る")))])],1)],1)],1),e(N.Z,{attrs:{color:"black",bottom:"",right:"",transition:"slide-y-transition","position-x":t.tooltipX,"position-y":t.tooltipY},model:{value:t.enabledTooltip,callback:function(e){t.enabledTooltip=e},expression:"enabledTooltip"}},[e("ship-tooltip",{model:{value:t.tooltipShip,callback:function(e){t.tooltipShip=e},expression:"tooltipShip"}})],1)],1)},Bt=[],Ut=a(1827),Ot=a(1969),zt=a(2382),Wt=a(1120),Vt=a.n(Wt),qt=a(6770),Xt=C.ZP.extend({name:"AreaManager",components:{ShipList:Ut.Z,ShipTooltip:Ot.Z},props:{readonly:{type:Boolean,required:!0}},data:()=>({searchWord:"",existStock:!1,areaShipList:[],unsubscribe:void 0,shipListDialog:!1,shipDialogWidth:1200,selectedArea:0,confirmDialog:!1,confirmShip:void 0,enabledTooltip:!1,tooltipTimer:void 0,tooltipShip:new zt.Z,tooltipX:0,tooltipY:0,draggingShipId:0,minimizeArea:[],capturing:!1,confirmResetDialog:!1,isMobile:!0}),mounted(){this.unsubscribe=this.$store.subscribe((t=>{"setShipStock"===t.type&&this.loadShipStock()})),this.loadShipStock()},watch:{isTempStockMode(){this.loadShipStock()}},computed:{isTempStockMode(){return this.$store.getters.getExistsTempStock},filteredAreaShipList(){if(this.searchWord){const t=this.searchWord,e=K()(this.areaShipList);for(let a=0;a<e.length;a+=1){const{headers:s}=e[a];for(let e=0;e<s.length;e+=1){const a=s[e];a.ships=a.ships.filter((e=>e.data.name.includes(t)))}e[a].headers=s.filter((t=>t.ships.length))}return e}return this.areaShipList},disabledEdit(){return!(this.existStock&&!this.readonly&&!this.searchWord)},needTrans(){const t=this.$store.state.siteSetting;return"ja"!==this.$i18n.locale&&!t.nameIsNotTranslate}},beforeDestroy(){this.unsubscribe&&this.unsubscribe()},methods:{loadShipStock(){this.isMobile=window.innerWidth<600,this.areaShipList=[];const t=this.$store.state.areaCount;for(let s=0;s<t;s+=1){const t=[],e=wt.ZP.SHIP_TYPES_ALT;for(let a=0;a<e.length;a+=1){const s=e[a];t.push({text:s.text,types:s.types,ships:[]})}this.areaShipList.push({area:s+1,headers:t})}const e=this.$store.state.ships;let a=this.$store.state.shipStock;this.existStock=a.length>0,this.readonly&&(a=this.$store.state.tempShipStock);for(let s=0;s<a.length;s+=1){const t=a[s];if(t.area<=0)continue;const i=e.find((e=>e.id===t.id));if(!i)continue;const l=this.areaShipList[t.area-1];if(l){const e=l.headers.find((t=>t.types.includes(i.type)));if(e){const a={data:i,hp:(t.level>99?i.hp2:i.hp)+t.improvement.hp,level:t.level,luck:i.luck+t.improvement.luck,expand:t.releaseExpand,impHP:t.improvement.hp,impASW:t.improvement.asw,impLuck:t.improvement.luck,unique:t.uniqueId};e.ships.push(a)}}}for(let s=0;s<this.areaShipList.length;s+=1){const t=this.areaShipList[s].headers.filter((t=>t.ships.length));for(let e=0;e<t.length;e+=1)t[e].ships.sort(((t,e)=>t.level!==e.level?e.level-t.level:t.data.sort-e.data.sort));this.areaShipList[s].headers=t}},async showShipList(t){this.selectedArea=t,await(this.shipListDialog=!0);const e=this.$refs.shipList;e.disabledStockOnlyChange=!0,e.isStockOnly=!0,e.initialize(!1)},putShip(t){const e=this.$store.state.shipStock,a={hp:t.hp-(t.level>99?t.ship.hp2:t.ship.hp),asw:t.asw,luck:t.luck-t.ship.luck},s=e.filter((e=>e.id===t.ship.id&&e.level===t.level&&e.area===t.area&&e.releaseExpand===t.expanded&&e.improvement.hp===a.hp&&e.improvement.asw===a.asw&&e.improvement.luck===a.luck));s.length&&(s.sort(((t,e)=>t.area-e.area)),s[0].area=this.selectedArea,this.$store.dispatch("updateShipStock",e)),this.shipListDialog=!1},changeShipWidth(t){this.shipDialogWidth=t},closeDialog(){this.shipListDialog=!1},clickedShip(t,e){this.disabledEdit||(this.clearTooltip(),this.confirmShip=e,this.selectedArea=t,this.confirmDialog=!0)},removeShip(){const t=this.selectedArea,e=this.confirmShip;if(t<=0||!e)return;const a=this.$store.state.shipStock,s=a.find((a=>a.id===e.data.id&&a.level===e.level&&a.area===t&&a.releaseExpand===e.expand&&a.improvement.hp===e.impHP&&a.improvement.asw===e.impASW&&a.improvement.luck===e.impLuck));s&&(s.area=0,this.$store.dispatch("updateShipStock",a)),this.confirmDialog=!1},resetShipsClicked(t){this.confirmShip=void 0,this.selectedArea=t,this.confirmDialog=!0},resetShips(){const t=this.selectedArea,e=this.$store.state.shipStock,a=e.filter((e=>e.area===t));for(let s=0;s<a.length;s+=1)a[s].area=0;this.$store.dispatch("updateShipStock",e),this.confirmDialog=!1},resetAreaTag(){const t=this.$store.state.shipStock;for(let e=0;e<t.length;e+=1)t[e].area=0;this.$store.dispatch("updateShipStock",t),this.confirmResetDialog=!1},getShipName(t){if(this.needTrans){const e=Zt.Z.getSuffix(t),a=t=>t?`${this.$t(t)}`:"";return e.map((t=>a(t))).join("")}return t.name?t.name:""},bootTooltip(t,e){const a=this.$store.state.siteSetting;a.disabledShipTooltip||(window.clearTimeout(this.tooltipTimer),this.tooltipTimer=window.setTimeout((()=>{this.tooltipX=e.clientX,this.tooltipY=e.clientY;const a=zt.Z.getStatusFromLevel(t.level,t.data.maxAsw,t.data.minAsw),s=new zt.Z({master:t.data,level:t.level,hp:t.hp,luck:t.luck,asw:a+t.impASW});this.tooltipShip=s,this.enabledTooltip=!0}),Math.max(a.popUpCount,10)))},clearTooltip(){this.enabledTooltip=!1,window.clearTimeout(this.tooltipTimer)},toggleMinimize(t){this.minimizeArea.includes(t)?this.minimizeArea=this.minimizeArea.filter((e=>t!==e)):this.minimizeArea.push(t)},expandAll(){this.minimizeArea=[]},collapseAll(){const t=this.$store.state.areaCount;for(let e=1;e<=t;e+=1)this.minimizeArea.push(e)},dragStart(t,e){const a=e.target;if(!a||!a.classList||!a.classList.contains("ship-container")||!a.draggable)return;a.style.opacity="0.4",a.id="dragging-item";const s=a.closest(".area-card");s&&s.classList.add("dragging-parent");const i=document.getElementsByClassName("area-card");for(let l=0;l<i.length;l+=1)i[l].classList.add("dragging");this.clearTooltip(),this.draggingShipId=t.unique},dragLeave(t){t.target.style.boxShadow=""},dragEnter(t){const e=document.getElementById("dragging-item"),a=t.target;e&&e.classList.contains("ship-container")&&a&&a.classList.contains("area-card")&&!a.classList.contains("dragging-parent")&&(a.style.boxShadow="inset 0 0 80px rgba(20, 160, 255, 0.6)")},dropShip(t){t.preventDefault();const e=document.getElementById("dragging-item");if(!e||!e.classList.contains("ship-container"))return;const a=t.target;a.style.boxShadow="";const s=this.$store.state.shipStock,i=s.filter((t=>t.uniqueId===this.draggingShipId));i.length&&a.dataset.area&&i[0].area!==+a.dataset.area&&(i.sort(((t,e)=>t.area-e.area)),i[0].area=+a.dataset.area,this.$store.dispatch("updateShipStock",s))},dragEnd(t){const e=document.getElementsByClassName("area-card");for(let i=0;i<e.length;i+=1)e[i].classList.remove("dragging","dragging-parent");const a=document.getElementById("dragging-item");if(!a||!a.draggable||!a.classList.contains("ship-container")){const e=t.target;return void(e&&e.classList.contains("ship-container")&&(e.style.opacity="1",e.id=""))}const s=t.target;s.style.opacity="1",s.id=""},captureTagManager(){this.capturing=!0;const t=document.getElementById("area-tag-manager");setTimeout((()=>{Vt()(t,{scale:1}).then((t=>{const e=document.createElement("a"),a=this.$store.state.siteSetting;e.href=t.toDataURL("png"===a.imageType?"image/png":"image/jpeg"),e.download=`area_tag_${qt.Z.formatDate(new Date,"yyyyMMdd-HHmmss")}.${a.imageType}`,e.click(),this.capturing=!1}))}),10)}}}),Kt=Xt,jt=(0,vt.Z)(Kt,Nt,Bt,!1,null,"72c74360",null),Jt=jt.exports,Yt=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(l.Z,{staticClass:"ma-1 ma-sm-2 pa-2 pa-sm-3"},[e("div",{staticClass:"my-1 d-flex align-center flex-wrap"},[e("div",{staticClass:"select-item"},[e(E.Z,{attrs:{items:t.viewStatuses,"item-text":e=>`${t.$t(`Common.${e.text}`)}`,"hide-details":"",dense:"","return-object":"",outlined:"",label:t.$t("Database.計算したい項目")},on:{change:t.setShipList},model:{value:t.viewStatus,callback:function(e){t.viewStatus=e},expression:"viewStatus"}})],1),e("div",{staticClass:"mr-6"},[e(N.Z,{attrs:{top:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(c.Z,t._g(t._b({staticClass:"ml-1"},"v-icon",s,!1),a),[t._v("mdi-help-circle-outline")])]}}])},[e("div",[t._v(t._s(t.$t("Database.選択した項目と、次にその項目が1繰り上がるのは何Lvであるかを表示します。")))])])],1),t.luckMode?t._e():e("div",[e(w.Z,{attrs:{dense:"","hide-details":"",label:t.$t("Database.必要経験値表示")},on:{change:t.setShipList},model:{value:t.showEXP,callback:function(e){t.showEXP=e},expression:"showEXP"}})],1),t.showEXP?t._e():e("div",{staticClass:"ml-6"},[e(w.Z,{attrs:{dense:"","hide-details":"",label:t.$t("Extra.差分表示")},model:{value:t.showDiff,callback:function(e){t.showDiff=e},expression:"showDiff"}})],1),t.enabledLuckMode?e("div",{staticClass:"ml-6"},[e(w.Z,{attrs:{dense:"","hide-details":"",label:t.$t("Database.運改修モード")},on:{change:t.setShipList},model:{value:t.luckMode,callback:function(e){t.luckMode=e},expression:"luckMode"}})],1):t._e(),t.enabledLuckMode?e("div",{staticClass:"ml-1 mt-1"},[e(N.Z,{attrs:{top:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(c.Z,t._g(t._b({attrs:{small:""}},"v-icon",s,!1),a),[t._v("mdi-help-circle-outline")])]}}],null,!1,722434280)},[e("div",[t._v(t._s(t.$t("Database.Lvはそのままに、運の改修によってステータスを上昇させようとした場合の結果を計算します。")))])])],1):t._e()]),e("div",{staticClass:"d-flex flex-wrap align-center mt-3"},[e("div",{staticClass:"text-field mr-3 mb-3"},[e(b.Z,{attrs:{label:t.$t("Database.名称検索"),placeholder:t.$t("Database.空白区切りで複数指定可"),clearable:"","hide-details":"",dense:"","prepend-inner-icon":"mdi-magnify"},on:{input:function(e){return t.setShipList()}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),e("div",{staticClass:"mb-1"},[e(i.Z,{attrs:{outlined:"",disabled:!!t.keyword},on:{click:function(e){t.filterDialog=!0}}},[e(c.Z,[t._v("mdi-filter")]),t._v(t._s(t.$t("Common.絞り込み")))],1)],1),t.viewStatus?e("div",{staticClass:"ml-auto mb-1"},[e(b.Z,{attrs:{type:"number",dense:"",outlined:"","hide-details":"",label:t.$t("Database.任意"),min:"0",max:"200"},on:{input:t.setShipList},model:{value:t.viewStatus.manual,callback:function(e){t.$set(t.viewStatus,"manual",t._n(e))},expression:"viewStatus.manual"}})],1):t._e()]),e(r.Z),e(Z.Z,{staticClass:"ship-list",attrs:{dense:"","fixed-header":"",height:"60vh","multi-sort":"",page:t.page,headers:t.headers,items:t.listData,"hide-default-footer":"","footer-props":{showFirstLastPage:!0,"items-per-page-options":[30]},"mobile-breakpoint":"0"},on:{"update:page":function(e){t.page=e}},scopedSlots:t._u([{key:"header.name",fn:function(){},proxy:!0},{key:"header.luck",fn:function({header:e}){return[t._v(t._s(t.$t(`Common.${e.text}`)))]}},{key:"header.target",fn:function({header:e}){return[t._v(t._s(t.targetText(e.text)))]}},{key:"header.target1",fn:function({header:e}){return[t._v(t._s(t.targetText(e.text))+" +1")]}},{key:"header.target2",fn:function({header:e}){return[t._v(t._s(t.targetText(e.text))+" +2")]}},{key:"header.target3",fn:function({header:e}){return[t._v(t._s(t.targetText(e.text))+" +3")]}},{key:"header.manual",fn:function({header:e}){return[t._v(t._s(t.$t(`Database.${e.text}`))+"("+t._s(t.viewStatus?t.viewStatus.manual:"")+")")]}},{key:"header.nextExp",fn:function(){return[t._v("Next EXP")]},proxy:!0},{key:"item",fn:function({item:a}){return[e("tr",{class:{maximum:a.isMaximum},on:{mouseenter:function(e){return t.bootTooltip(a,e)},mouseleave:t.clearTooltip,focus:t.clearTooltip,blur:t.clearTooltip}},[e("td",{staticClass:"px-0 py-1"},[e("div",{staticClass:"d-none d-md-flex align-center"},[e("div",{staticClass:"ship-img"},[e(d.Z,{attrs:{src:`./img/ship/${a.master.id}.png`,height:"35",width:"140"}}),a.stock.releaseExpand?e("div",{staticClass:"slot-ex-img"},[e(d.Z,{attrs:{src:"./img/util/slot_ex.png",height:"30",width:"30"}})],1):t._e()],1),e("div",{staticClass:"ship-name text-truncate",attrs:{title:a.master.name}},[t._v(t._s(t.getShipName(a.master)))])]),e("div",{staticClass:"d-flex d-md-none align-center"},[e("div",{staticClass:"ship-img"},[e(d.Z,{attrs:{src:`./img/ship/${a.master.id}.png`,height:"30",width:"120"}}),a.stock.releaseExpand?e("div",{staticClass:"slot-ex-img min"},[e(d.Z,{attrs:{src:"./img/util/slot_ex.png",height:"25",width:"25"}})],1):t._e()],1)])]),e("td",{staticClass:"text-right"},[t._v(t._s(a.stock.level))]),e("td",{staticClass:"text-right"},[t._v(t._s(a.luck))]),e("td",{staticClass:"text-right"},[t._v(t._s(a.target?a.target:"-"))]),e("td",{staticClass:"result-td"},[e("div",[t.isLuckResult?[e("span",{staticClass:"luck-caption"},[t._v(t._s(t.$t("Common.運")))]),e("span",{class:{"red--text":a.target1>a.master.maxLuck}},[t._v(t._s(a.target1))])]:t.showEXP?[e("span",{class:{"red--text":a.target1<0}},[t._v(t._s(a.target1>0?a.target1.toLocaleString():"-"))])]:[e("span",{staticClass:"lv-caption"},[t._v("Lv.")]),e("span",{class:{"red--text":a.target1>t.maxLevel}},[t._v(t._s(a.target1))])]],2),t.showDiff&&!t.showEXP?e("div",{staticClass:"diff"},[t._v("+"+t._s(a.target1-a.diffBase))]):t._e()]),e("td",{staticClass:"result-td"},[e("div",[t.isLuckResult?[e("span",{staticClass:"luck-caption"},[t._v(t._s(t.$t("Common.運")))]),e("span",{class:{"red--text":a.target2>a.master.maxLuck}},[t._v(t._s(a.target2))])]:t.showEXP?[e("span",{class:{"red--text":a.target2<0}},[t._v(t._s(a.target2>0?a.target2.toLocaleString():"-"))])]:[e("span",{staticClass:"lv-caption"},[t._v("Lv.")]),e("span",{class:{"red--text":a.target2>t.maxLevel}},[t._v(t._s(a.target2))])]],2),t.showDiff&&!t.showEXP?e("div",{staticClass:"diff"},[t._v("+"+t._s(a.target2-a.diffBase))]):t._e()]),e("td",{staticClass:"result-td"},[e("div",[t.isLuckResult?[e("span",{staticClass:"luck-caption"},[t._v(t._s(t.$t("Common.運")))]),e("span",{class:{"red--text":a.target3>a.master.maxLuck}},[t._v(t._s(a.target3))])]:t.showEXP?[e("span",{class:{"red--text":a.target3<0}},[t._v(t._s(a.target3>0?a.target3.toLocaleString():"-"))])]:[e("span",{staticClass:"lv-caption"},[t._v("Lv.")]),e("span",{class:{"red--text":a.target3>t.maxLevel}},[t._v(t._s(a.target3))])]],2),t.showDiff&&!t.showEXP?e("div",{staticClass:"diff"},[t._v("+"+t._s(a.target3-a.diffBase))]):t._e()]),e("td",{staticClass:"result-td"},[e("div",[t.isLuckResult?[e("span",{staticClass:"luck-caption"},[t._v(t._s(t.$t("Common.運")))]),e("span",{class:{"red--text":a.manual>a.master.maxLuck}},[t._v(t._s(a.manual))])]:t.showEXP?[e("span",{class:{"red--text":a.manual<0}},[t._v(t._s(a.manual>0?a.manual.toLocaleString():"-"))])]:[e("span",{staticClass:"lv-caption"},[t._v("Lv.")]),e("span",{class:{"red--text":a.manual>t.maxLevel}},[t._v(t._s(a.manual))])]],2),t.showDiff&&!t.showEXP?e("div",{staticClass:"diff"},[t._v(t._s(a.manualDiffString))]):t._e()]),e("td",{staticClass:"result-td"},[t._v(t._s(t.isLuckResult||a.isMaximum?"-":a.nextExp.toLocaleString()))])])]}}],null,!0)}),e(r.Z),e("div",{staticClass:"mt-3"},[e(M,{attrs:{length:t.pageLength,"total-visible":"9"},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1),e(n.Z,{attrs:{width:"740",fullscreen:t.isMobile},on:{input:t.toggleFilterDialog},model:{value:t.filterDialog,callback:function(e){t.filterDialog=e},expression:"filterDialog"}},[e(l.Z,{staticClass:"px-3 pt-2 pb-3"},[e("div",{staticClass:"d-flex pt-2 pb-1 px-2"},[e("div",{staticClass:"align-self-center mx-2"},[e(c.Z,[t._v("mdi-filter")])],1),e("div",{staticClass:"align-self-center"},[t._v(t._s(t.$t("Common.絞り込み")))]),e(F.Z),e(i.Z,{attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),t.closeFilterDialog()}}},[e(c.Z,[t._v("mdi-close")])],1)],1),e(r.Z,{staticClass:"mb-3"}),e("div",{staticClass:"px-2"},[e($.Z,{staticClass:"flex-wrap",attrs:{mandatory:"",color:"primary"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.types,(function(a,s){return e(i.Z,{key:s,staticClass:"py-5",attrs:{value:s,small:""}},[t._v(" "+t._s(t.isNotJapanese?t.$t(`SType.${a.text}`):a.text)+" ")])})),1),e("div",{staticClass:"d-flex mt-10"},[e("div",{staticClass:"range-input"},[e(b.Z,{attrs:{label:t.$t("Database.Lv下限"),type:"number",max:t.levelRange[1],min:"1",dense:"","hide-details":""},model:{value:t.levelRange[0],callback:function(e){t.$set(t.levelRange,0,"string"===typeof e?e.trim():e)},expression:"levelRange[0]"}})],1),e(A.Z,{staticClass:"pt-2 align-center mx-2",attrs:{dense:"","thumb-label":"",min:"1",max:t.maxLevel,"hide-details":""},model:{value:t.levelRange,callback:function(e){t.levelRange=e},expression:"levelRange"}}),e("div",{staticClass:"range-input"},[e(b.Z,{attrs:{label:t.$t("Database.Lv上限"),type:"number",max:"200",min:t.levelRange[0],dense:"","hide-details":""},model:{value:t.levelRange[1],callback:function(e){t.$set(t.levelRange,1,"string"===typeof e?e.trim():e)},expression:"levelRange[1]"}})],1)],1),e("div",{staticClass:"d-flex mt-6"},[e("div",{staticClass:"range-input"},[e(b.Z,{attrs:{label:t.$t("Database.運下限"),type:"number",max:t.luckRange[1],min:"1",dense:"","hide-details":""},model:{value:t.luckRange[0],callback:function(e){t.$set(t.luckRange,0,"string"===typeof e?e.trim():e)},expression:"luckRange[0]"}})],1),e(A.Z,{staticClass:"pt-2 align-center mx-2",attrs:{dense:"","thumb-label":"",min:"1",max:"200","hide-details":""},model:{value:t.luckRange,callback:function(e){t.luckRange=e},expression:"luckRange"}}),e("div",{staticClass:"range-input"},[e(b.Z,{attrs:{label:t.$t("Database.運上限"),type:"number",max:"200",min:t.luckRange[0],dense:"","hide-details":""},model:{value:t.luckRange[1],callback:function(e){t.$set(t.luckRange,1,"string"===typeof e?e.trim():e)},expression:"luckRange[1]"}})],1)],1),"asw"===t.viewStatus.value?e("div",{staticClass:"d-flex mt-6"},[e("div",{staticClass:"range-input"},[e(b.Z,{attrs:{label:t.$t("Database.対潜下限"),type:"number",max:t.aswRange[1],min:"1",dense:"","hide-details":""},model:{value:t.aswRange[0],callback:function(e){t.$set(t.aswRange,0,"string"===typeof e?e.trim():e)},expression:"aswRange[0]"}})],1),e(A.Z,{staticClass:"pt-2 align-center mx-2",attrs:{dense:"","thumb-label":"",min:"1",max:"150","hide-details":""},model:{value:t.aswRange,callback:function(e){t.aswRange=e},expression:"aswRange"}}),e("div",{staticClass:"range-input"},[e(b.Z,{attrs:{label:t.$t("Database.対潜上限"),type:"number",max:"150",min:t.aswRange[0],dense:"","hide-details":""},model:{value:t.aswRange[1],callback:function(e){t.$set(t.aswRange,1,"string"===typeof e?e.trim():e)},expression:"aswRange[1]"}})],1)],1):t._e(),"LoS"===t.viewStatus.value?e("div",{staticClass:"d-flex mt-6"},[e("div",{staticClass:"range-input"},[e(b.Z,{attrs:{label:t.$t("Database.索敵下限"),type:"number",max:t.losRange[1],min:"1",dense:"","hide-details":""},model:{value:t.losRange[0],callback:function(e){t.$set(t.losRange,0,"string"===typeof e?e.trim():e)},expression:"losRange[0]"}})],1),e(A.Z,{staticClass:"pt-2 align-center mx-2",attrs:{dense:"","thumb-label":"",min:"1",max:"150","hide-details":""},model:{value:t.losRange,callback:function(e){t.losRange=e},expression:"losRange"}}),e("div",{staticClass:"range-input"},[e(b.Z,{attrs:{label:t.$t("Database.索敵上限"),type:"number",max:"150",min:t.losRange[0],dense:"","hide-details":""},model:{value:t.losRange[1],callback:function(e){t.$set(t.losRange,1,"string"===typeof e?e.trim():e)},expression:"losRange[1]"}})],1)],1):t._e(),"avoid"===t.viewStatus.value?e("div",{staticClass:"d-flex mt-6"},[e("div",{staticClass:"range-input"},[e(b.Z,{attrs:{label:t.$t("Database.回避下限"),type:"number",max:t.evaRange[1],min:"1",dense:"","hide-details":""},model:{value:t.evaRange[0],callback:function(e){t.$set(t.evaRange,0,"string"===typeof e?e.trim():e)},expression:"evaRange[0]"}})],1),e(A.Z,{staticClass:"pt-2 align-center mx-2",attrs:{dense:"","thumb-label":"",min:"1",max:"180","hide-details":""},model:{value:t.evaRange,callback:function(e){t.evaRange=e},expression:"evaRange"}}),e("div",{staticClass:"range-input"},[e(b.Z,{attrs:{label:t.$t("Database.回避上限"),type:"number",max:"180",min:t.evaRange[0],dense:"","hide-details":""},model:{value:t.evaRange[1],callback:function(e){t.$set(t.evaRange,1,"string"===typeof e?e.trim():e)},expression:"evaRange[1]"}})],1)],1):t._e(),"acc"===t.viewStatus.value?e("div",{staticClass:"d-flex mt-6"},[e("div",{staticClass:"range-input"},[e(b.Z,{attrs:{label:t.$t("Database.命中項下限"),type:"number",max:t.accRange[1],min:"1",dense:"","hide-details":""},model:{value:t.accRange[0],callback:function(e){t.$set(t.accRange,0,"string"===typeof e?e.trim():e)},expression:"accRange[0]"}})],1),e(A.Z,{staticClass:"pt-2 align-center mx-2",attrs:{dense:"","thumb-label":"",min:"1",max:"50","hide-details":""},model:{value:t.accRange,callback:function(e){t.accRange=e},expression:"accRange"}}),e("div",{staticClass:"range-input"},[e(b.Z,{attrs:{label:t.$t("Database.命中項上限"),type:"number",max:"50",min:t.accRange[0],dense:"","hide-details":""},model:{value:t.accRange[1],callback:function(e){t.$set(t.accRange,1,"string"===typeof e?e.trim():e)},expression:"accRange[1]"}})],1)],1):t._e(),"ci"===t.viewStatus.value?e("div",{staticClass:"d-flex mt-6"},[e("div",{staticClass:"range-input"},[e(b.Z,{attrs:{label:t.$t("Database.CI項下限"),type:"number",max:t.ciRange[1],min:"1",dense:"","hide-details":""},model:{value:t.ciRange[0],callback:function(e){t.$set(t.ciRange,0,"string"===typeof e?e.trim():e)},expression:"ciRange[0]"}})],1),e(A.Z,{staticClass:"pt-2 align-center mx-2",attrs:{dense:"","thumb-label":"",min:"1",max:"100","hide-details":""},model:{value:t.ciRange,callback:function(e){t.ciRange=e},expression:"ciRange"}}),e("div",{staticClass:"range-input"},[e(b.Z,{attrs:{label:t.$t("Database.CI項上限"),type:"number",max:"100",min:t.ciRange[0],dense:"","hide-details":""},model:{value:t.ciRange[1],callback:function(e){t.$set(t.ciRange,1,"string"===typeof e?e.trim():e)},expression:"ciRange[1]"}})],1)],1):t._e(),e("div",{staticClass:"d-flex flex-wrap"},[e(w.Z,{staticClass:"mr-6",attrs:{label:t.$t("Fleet.最終改造")},model:{value:t.isFinalOnly,callback:function(e){t.isFinalOnly=e},expression:"isFinalOnly"}}),e(w.Z,{staticClass:"mr-6",attrs:{label:t.$t("Database.成長限界に到達した艦娘を省略")},model:{value:t.enabledOnly,callback:function(e){t.enabledOnly=e},expression:"enabledOnly"}}),e(w.Z,{attrs:{label:t.$t("Fleet.お気に入り")},model:{value:t.onlyBookmarked,callback:function(e){t.onlyBookmarked=e},expression:"onlyBookmarked"}})],1)],1)],1)],1),e(N.Z,{attrs:{color:"black",bottom:"",right:"",transition:"slide-y-transition","position-x":t.tooltipX,"position-y":t.tooltipY},model:{value:t.enabledTooltip,callback:function(e){t.enabledTooltip=e},expression:"enabledTooltip"}},[e("ship-tooltip",{attrs:{value:t.tooltipShip}})],1)],1)},Gt=[],Qt=C.ZP.extend({name:"StatusUpLineList",components:{ShipTooltip:Ot.Z},data:()=>({all:[],readOnly:!1,filterDialog:!1,keyword:"",isFinalOnly:!0,headers:[{text:"艦娘名",value:"name",sortable:!1},{text:"Lv",align:"end",value:"stock.level"},{text:"運",align:"end",value:"luck"},{text:"項目",align:"end",value:"target"},{text:"項目1",align:"end",value:"target1"},{text:"項目2",align:"end",value:"target2",sortable:!1},{text:"項目3",align:"end",value:"target3",sortable:!1},{text:"任意",align:"end",value:"manual"},{text:"next",align:"end",value:"nextExp"}],viewStatus:void 0,viewStatuses:[{text:"対潜",value:"asw",manual:85},{text:"索敵",value:"LoS",manual:80},{text:"回避",value:"avoid",manual:80},{text:"命中項",value:"acc",manual:30},{text:"CI項",value:"ci",manual:40}],enabledOnly:!1,onlyBookmarked:!1,listData:[],type:5,page:1,types:[],luckMode:!1,showDiff:!0,showEXP:!1,unsubscribe:void 0,maxLevel:wt.ZP.MAX_LEVEL,levelRange:[1,wt.ZP.MAX_LEVEL],luckRange:[1,200],aswRange:[1,150],losRange:[1,150],evaRange:[1,180],accRange:[1,50],ciRange:[1,100],enabledTooltip:!1,tooltipTimer:void 0,tooltipShip:new zt.Z,tooltipX:0,tooltipY:0,isMobile:!0}),mounted(){for(let t=0;t<wt.ZP.SHIP_TYPES_ALT2.length;t+=1){const e=wt.ZP.SHIP_TYPES_ALT2[t];this.types.push({text:e.text,types:e.types})}this.$store.getters.getExistsTempStock&&(this.readOnly=!0),this.unsubscribe=this.$store.subscribe((t=>{"setShipStock"===t.type&&this.setShipList()})),this.viewStatus=this.viewStatuses[0],this.setShipList()},watch:{isTempStockMode(t){this.readOnly=!!t}},computed:{completed(){return this.$store.getters.getCompletedAll},needTrans(){const t=this.$store.state.siteSetting;return"ja"!==this.$i18n.locale&&!t.nameIsNotTranslate},isNotJapanese(){return"ja"!==this.$i18n.locale},isTempStockMode(){return this.$store.getters.getExistsTempStock},enabledLuckMode(){return!!this.viewStatus&&("ci"===this.viewStatus.value||"acc"===this.viewStatus.value)},targetText(){return()=>this.viewStatus?`${this.$t(`Common.${this.viewStatus.text}`)}`:""},pageLength(){return Math.ceil(this.listData.length/30)},isLuckResult(){return this.enabledLuckMode&&this.luckMode}},beforeDestroy(){},methods:{changeType(t=0){this.type=t,this.setShipList()},setShipList(){this.isMobile=window.innerWidth<600,this.listData=[];const t=this.$store.state.ships;let e=this.$store.state.shipStock;this.readOnly&&(e=this.$store.state.tempShipStock);const a=this.types[this.type]?this.types[this.type].types:[],s=[],i=this.viewStatus&&this.viewStatus.value,l=this.viewStatus&&this.viewStatus.manual,o=this.enabledLuckMode&&this.luckMode,n=this.levelRange[1],r=this.levelRange[0],c=this.luckRange[1],d=this.luckRange[0];let p=this.aswRange;this.viewStatus&&"LoS"===this.viewStatus.value?p=this.losRange:this.viewStatus&&"avoid"===this.viewStatus.value?p=this.evaRange:this.viewStatus&&"acc"===this.viewStatus.value?p=this.accRange:this.viewStatus&&"ci"===this.viewStatus.value&&(p=this.ciRange);const h=p[1],u=p[0],m=(this.keyword??"").trim().toUpperCase(),v=m.split(/\s+/),g=this.$store.state.siteSetting,f=g.bookmarkedShipIds,b=Math.min(Math.max(l??0,1),200);for(let k=0;k<e.length;k+=1){const l=e[k],p=t.find((t=>t.id===l.id));if(!p)continue;const g=p.luck+l.improvement.luck,x=l.improvement.hp+(l.level>99?p.hp2:p.hp),_=zt.Z.getStatusFromLevel(l.level,p.maxAsw,p.minAsw)+l.improvement.asw;if(m){const t=m.replace(/[\u3041-\u3096]/g,(t=>{const e=t.charCodeAt(0)+96;return String.fromCharCode(e)}));if(v.length<=1&&p.name.toUpperCase().indexOf(m)<0&&p.yomi.indexOf(m)<0&&p.yomi.indexOf(t)<0)continue;if(v.length){let t=!1;for(let e=0;e<v.length;e+=1){const a=v[e].trim(),s=a.replace(/[\u3041-\u3096]/g,(t=>{const e=t.charCodeAt(0)+96;return String.fromCharCode(e)}));if(a&&(p.name.toUpperCase().indexOf(a)>=0||p.yomi.indexOf(a)>=0||p.yomi.indexOf(s)>=0)){t=!0;break}}if(!t)continue}}else{if(!a.includes(p.type))continue;if(this.isFinalOnly&&!p.isFinal)continue;if(n<l.level||r>l.level)continue;if(c<g||d>g)continue;if(this.onlyBookmarked&&!f.includes(p.id))continue}const C={stock:l,master:p,hp:x,luck:g,asw:_,diffBase:l.level,target:0,target1:0,target2:0,target3:0,manual:0,manualDiffString:"",isMaximum:!1,nextExp:0};if("asw"===i||"LoS"===i||"avoid"===i){let t=p.minAsw,e=p.maxAsw;"avoid"===i?(t=p.minAvoid,e=p.maxAvoid):"LoS"===i&&(t=p.minScout,e=p.maxScout);const a="asw"===i?l.improvement.asw:0,s=zt.Z.getStatusFromLevel(l.level,e,t);C.target=s+a,C.target1=zt.Z.getRequiredLevel(s+1,e,t),C.target2=zt.Z.getRequiredLevel(s+2,e,t),C.target3=zt.Z.getRequiredLevel(s+3,e,t),C.manual=zt.Z.getRequiredLevel(b-a,e,t),C.isMaximum=C.target1>this.maxLevel}else o?(C.diffBase=C.luck,"ci"===i?(C.target=zt.Z.getCIValue(l.level,C.luck),C.target1=zt.Z.getRequiredLuckCI(C.target+1,C.stock.level),C.target2=zt.Z.getRequiredLuckCI(C.target+2,C.stock.level),C.target3=zt.Z.getRequiredLuckCI(C.target+3,C.stock.level),C.manual=zt.Z.getRequiredLuckCI(b,C.stock.level)):"acc"===i&&(C.target=zt.Z.getAccuracyValue(l.level,C.luck),C.target1=zt.Z.getRequiredLuckAccuracy(C.target+1,C.stock.level),C.target2=zt.Z.getRequiredLuckAccuracy(C.target+2,C.stock.level),C.target3=zt.Z.getRequiredLuckAccuracy(C.target+3,C.stock.level),C.manual=zt.Z.getRequiredLuckAccuracy(b,C.stock.level)),C.isMaximum=C.target1>C.master.maxLuck):"ci"===i?(C.target=zt.Z.getCIValue(l.level,C.luck),C.target1=zt.Z.getRequiredLevelCI(C.target+1,C.luck),C.target2=zt.Z.getRequiredLevelCI(C.target+2,C.luck),C.target3=zt.Z.getRequiredLevelCI(C.target+3,C.luck),C.manual=zt.Z.getRequiredLevelCI(b,C.luck),C.isMaximum=C.target1>this.maxLevel):"acc"===i&&(C.target=zt.Z.getAccuracyValue(l.level,C.luck),C.target1=zt.Z.getRequiredLevelAccuracy(C.target+1,C.luck),C.target2=zt.Z.getRequiredLevelAccuracy(C.target+2,C.luck),C.target3=zt.Z.getRequiredLevelAccuracy(C.target+3,C.luck),C.manual=zt.Z.getRequiredLevelAccuracy(b,C.luck),C.isMaximum=C.target1>this.maxLevel);if(!(h<C.target||C.target<u)){if(!o&&!C.isMaximum){const t=wt.ZP.LEVEL_BORDERS.find((t=>t.lv===C.target1));t&&(C.nextExp=t.req-l.exp)}if(!o&&this.showEXP){const t=wt.ZP.LEVEL_BORDERS.find((t=>t.lv===C.target1));C.target1=t?t.req-l.exp:-1;const e=wt.ZP.LEVEL_BORDERS.find((t=>t.lv===C.target2));C.target2=e?e.req-l.exp:-1;const a=wt.ZP.LEVEL_BORDERS.find((t=>t.lv===C.target3));C.target3=a?a.req-l.exp:-1;const s=wt.ZP.LEVEL_BORDERS.find((t=>t.lv===C.manual));C.manual=s?s.req-l.exp:-1}if(!this.enabledOnly||!C.isMaximum){const t=C.manual-C.diffBase;C.manualDiffString=t<0?"-"+-t:`+${t}`,s.push(C)}}}s.sort(((t,e)=>t.master.sort!==e.master.sort?t.master.sort-e.master.sort:e.stock.level-t.stock.level));const x=Math.ceil(s.length/30);this.page=this.page>x?x:this.page,this.page=this.page<1&&x>0?1:this.page,this.listData=s},translate(t){return t?`${this.$t(t)}`:""},getShipName(t){if(this.needTrans){const e=Zt.Z.getSuffix(t);return`${e.map((t=>this.translate(t))).join("")}`}return t.name?t.name:""},getShipTypeName(t){if(this.isNotJapanese){const e=qt.Z.getShipTypeNameArray(t);return`${e.map((t=>this.translate(t))).join("")}`}return t},closeFilterDialog(){this.filterDialog=!1,this.toggleFilterDialog()},toggleFilterDialog(){this.filterDialog||this.setShipList()},bootTooltip(t,e){const a=this.$store.state.siteSetting;a.disabledShipTooltip||this.isMobile||(window.clearTimeout(this.tooltipTimer),this.tooltipTimer=window.setTimeout((()=>{this.tooltipX=e.clientX,this.tooltipY=e.clientY;const a=new zt.Z({master:t.master,level:t.stock.level,hp:t.hp,luck:t.luck,asw:t.asw});this.tooltipShip=a,this.enabledTooltip=!0}),Math.max(a.popUpCount,10)))},clearTooltip(){this.enabledTooltip=!1,window.clearTimeout(this.tooltipTimer)}}}),te=Qt,ee=(0,vt.Z)(te,Yt,Gt,!1,null,"6ef40d93",null),ae=ee.exports,se=a(2063),ie=a(3631),le=a(3893),oe=C.ZP.extend({name:"ShipsComponent",components:{Analytics:Tt,Compare:Ft,ShipTooltip:Ot.Z,AreaManager:Jt,StatusUpLineList:ae,ManualCheckbox:le.Z},data:()=>({all:[],filteredShips:[],viewShips:[],shipStock:[],page:1,isAvoidSpoiler:!0,showDeviation:!1,filterDialog:!1,searchWord:"",onlyStock:!1,onlyNoStock:!1,onlyReleaseExSlot:!1,withoutReleaseExSlot:!1,includeInitial:!0,includeIntermediate:!0,includeFinal:!0,isDaihatsu:!1,isNotDaihatsu:!1,isKamisha:!1,isNotKamisha:!1,onlyBookmarked:!1,onlyMarriage:!1,levelRange:[1,wt.ZP.MAX_LEVEL],luckRange:[1,200],luckImpRange:[0,100],aswRange:[0,150],aswImpRange:[0,9],okDaihatsu:[],okKamisha:[],addHP0:!0,addHP1:!0,addHP2:!0,HPIs4n1:!0,HPIs4n2:!0,HPIs4n3:!0,HPIs4n:!0,includeFast:!0,includeSlow:!0,types:[],nationalities:[{text:"日本",value:0,filter:[],isChecked:!0},{text:"アメリカ",value:1,filter:wt.ZP.USA,isChecked:!0},{text:"イタリア",value:2,filter:wt.ZP.ITA,isChecked:!0},{text:"イギリス",value:3,filter:wt.ZP.GBR,isChecked:!0},{text:"ドイツ",value:4,filter:wt.ZP.DEU,isChecked:!0},{text:"フランス",value:5,filter:wt.ZP.FRA,isChecked:!0},{text:"ソ連",value:6,filter:wt.ZP.RUS,isChecked:!0},{text:"その他",value:7,filter:wt.ZP.AUS.concat(wt.ZP.SWE).concat(wt.ZP.NLD),isChecked:!0}],editDialog:!1,editRow:{},versionButtons:[],version:0,editLuck:0,maxAreas:0,confirmDialog:!1,unsubscribe:void 0,btnPushed:!1,allCount:0,modeTable:!0,selectedArea:[],visibleNoArea:!0,readOnly:!1,tab:"list",headers:[{text:"艦娘名",value:"name",sortable:!1},{text:"Lv",align:"end",value:"level"},{text:"耐久",align:"end",value:"hp"},{text:"運",align:"end",value:"luck"},{text:"運改修",align:"end",value:"impLuck"},{text:"対潜",align:"end",value:"asw"},{text:"任意",align:"end",value:"manualValue"},{text:"命中項",align:"end",value:"accuracy"},{text:"回避項",align:"end",value:"avoid"},{text:"CI項",align:"end",value:"ci"}],enabledTooltip:!1,tooltipTimer:void 0,tooltipShip:new zt.Z,tooltipX:0,tooltipY:0,maxLevel:wt.ZP.MAX_LEVEL,manualValue:"fire",manualValues:[{text:"火力",value:"fire"},{text:"雷装",value:"torpedo"},{text:"夜戦火力",value:"nightBattleFirePower"},{text:"対空",value:"antiAir"},{text:"装甲",value:"armor"},{text:"索敵",value:"scout"},{text:"回避",value:"avoid"},{text:"燃料",value:"fuel"},{text:"弾薬",value:"ammo"},{text:"射程",value:"range"}],isMobile:!0}),mounted(){this.$store.getters.getExistsTempStock&&(this.readOnly=!0),this.initialize(),this.unsubscribe=this.$store.subscribe(((t,e)=>{"setShipStock"===t.type&&(this.shipStock=e.shipStock,this.masterFilter(),this.editDialog=!1)})),this.isMobile=window.innerWidth<600,this.isMobile&&this.changeViewMode(!1)},watch:{completed(t){t&&(this.all=this.$store.state.ships,this.initialize())},isTempStockMode(t){this.readOnly=!!t,this.initialize()}},computed:{completed(){return this.$store.getters.getCompletedAll},isTempStockMode(){return this.$store.getters.getExistsTempStock},pageLength(){return Math.ceil(this.viewShips.length/100)},minLevel(){const t=this.versionButtons[this.version];if(!t||t.beforeId<=0||"山城改二"===t.name)return 1;const e=this.all.find((e=>e.id===t.beforeId));return e?e.nextLv:1},altViewShips(){const t=this.viewShips;if(!t.length)return[];const e=[];for(let i=0;i<t.length;i+=1){const a=t[i],s=e.find((t=>t.master.id===a.ship.id));s?(s.count+=1,s.detail.push(a)):e.push({master:a.ship,count:a.count,detail:[a]})}const a=wt.ZP.SHIP_TYPES_ALT_INFO,s=[];for(let i=0;i<a.length;i+=1){const t=a[i],l=e.filter((e=>e.master.type2===t.id));if(l.length){const e=q()(l,(t=>t.master.originalId)),a=[];Object.keys(e).forEach((t=>{const s=e[t];s.sort(((t,e)=>e.master.version-t.master.version)),a.push(s)})),a.sort(((t,e)=>{const a=W()(t.map((t=>t.master.sort))),s=W()(e.map((t=>t.master.sort)));return(a||0)-(s||0)})),s.push({typeName:t.name,rows:a})}}return s},needTrans(){const t=this.$store.state.siteSetting;return"ja"!==this.$i18n.locale&&!t.nameIsNotTranslate},isNotJapanese(){return"ja"!==this.$i18n.locale},translatedShipTypes(){const t=[];for(let e=0;e<this.types.length;e+=1){const a=this.types[e];t.push({text:`${this.$t(`SType.${a.text}`)}`,value:a.value})}return t},manualColumnText(){if(this.manualValue){const t=this.manualValues.find((t=>t.value===this.manualValue));return t?`${this.$t(`Common.${t.text}`)}`:""}return""},isFav(){const t=this.$store.state.siteSetting;return this.editRow&&this.editRow.ship&&t.bookmarkedShipIds.includes(this.editRow.ship.id)}},beforeDestroy(){this.unsubscribe&&this.unsubscribe()},methods:{initialize(){this.all=this.$store.state.ships,this.shipStock=this.$store.state.shipStock,this.maxAreas=this.$store.state.areaCount,this.readOnly&&(this.shipStock=this.$store.state.tempShipStock);const t=this.$store.state.items.find((t=>68===t.id)),e=this.$store.state.items.find((t=>167===t.id));for(let s=0;s<this.all.length;s+=1){const a=this.all[s];ie.Z.isValidItem(a,t)&&this.okDaihatsu.push(a.id),ie.Z.isValidItem(a,e)&&this.okKamisha.push(a.id)}const a=wt.ZP.SHIP_TYPES_ALT;this.types=[];for(let s=0;s<a.length;s+=1)this.types.push({text:a[s].text,value:s,isChecked:!0});if(this.completed){const t=this.$store.state.siteSetting;this.isAvoidSpoiler=t.isAvoidSpoiler,this.changeViewMode(t.viewTableMode)}this.selectedArea=[];for(let s=1;s<=this.maxAreas;s+=1)this.selectedArea.push(s);this.masterFilter()},toggleDaihatsuFilter(){this.isDaihatsu?(this.isDaihatsu=!1,this.isNotDaihatsu=!0):this.isNotDaihatsu?this.isNotDaihatsu=!1:this.isDaihatsu=!0},toggleTankFilter(){this.isKamisha?(this.isKamisha=!1,this.isNotKamisha=!0):this.isNotKamisha?this.isNotKamisha=!1:this.isKamisha=!0},toggleExSlotFilter(){this.onlyReleaseExSlot?(this.onlyReleaseExSlot=!1,this.withoutReleaseExSlot=!0):this.withoutReleaseExSlot?this.withoutReleaseExSlot=!1:this.onlyReleaseExSlot=!0},closeFilterDialog(){this.filterDialog=!1,this.filter()},toggleFilterDialog(){this.filterDialog||this.filter()},resetFilterCondition(){this.searchWord="",this.onlyStock=!1,this.onlyNoStock=!1,this.onlyBookmarked=!1,this.onlyMarriage=!1,this.onlyReleaseExSlot=!1,this.withoutReleaseExSlot=!1,this.isDaihatsu=!1,this.isNotDaihatsu=!1,this.isKamisha=!1,this.isNotKamisha=!1,this.includeInitial=!0,this.includeIntermediate=!0,this.includeFinal=!0,this.luckRange=[1,200],this.levelRange=[1,wt.ZP.MAX_LEVEL],this.luckImpRange=[0,100],this.aswRange=[0,150],this.aswImpRange=[0,9],this.addHP0=!0,this.addHP1=!0,this.addHP2=!0,this.HPIs4n1=!0,this.HPIs4n2=!0,this.HPIs4n3=!0,this.HPIs4n=!0,this.includeFast=!0,this.includeSlow=!0;for(let t=0;t<this.types.length;t+=1)this.types[t].isChecked=!0;for(let t=0;t<this.nationalities.length;t+=1)this.nationalities[t].isChecked=!0;this.selectedArea=[];for(let t=1;t<=this.maxAreas;t+=1)this.selectedArea.push(t);this.visibleNoArea=!0,this.filter()},filter(){const t=this.filteredShips,e=this.shipStock;let a=[];const s=this.searchWord?this.searchWord.trim().toUpperCase():"",i=s.replace(/[\u3041-\u3096]/g,(t=>{const e=t.charCodeAt(0)+96;return String.fromCharCode(e)}));let l=0;const o=t.filter((t=>0===t.version)),n=this.$store.state.siteSetting,r=n.bookmarkedShipIds;for(let w=0;w<o.length;w+=1){const n=o[w],r=t.filter((t=>t.originalId===n.id)),c=r.map((t=>t.id)),d=e.filter((t=>c.includes(t.id))),p=[];if(d.length){for(let t=0;t<d.length;t+=1){const e=d[t];if(l+=1,this.onlyNoStock)continue;if(s&&!r.some((t=>t.name.toUpperCase().indexOf(s)>=0||t.yomi.indexOf(s)>=0||t.yomi.indexOf(i)>=0)))continue;const a=r.find((t=>t.id===e.id)),o=e.improvement.hp+(e.level>99?a.hp2:a.hp),n=e.improvement.luck+a.luck,c=zt.Z.getStatusFromLevel(e.level,a.maxAvoid,a.minAvoid);let h=0;e.spEffectItems&&e.spEffectItems.length&&(h=e.spEffectItems.some((t=>1===t.kind))?1:2),p.push({count:1,ship:a,stockData:e,level:e.level,hp:o,luck:n,impHP:e.improvement.hp,impLuck:e.improvement.luck,impAsw:e.improvement.asw,asw:zt.Z.getStatusFromLevel(e.level,a.maxAsw,a.minAsw)+e.improvement.asw,accuracy:zt.Z.getAccuracyValue(e.level,n),avoid:zt.Z.getAvoidValue(c,n),ci:zt.Z.getCIValue(e.level,n),manualValue:0,spEffectItemId:h})}p.sort(((t,e)=>t.ship.version===e.ship.version?e.stockData.level-t.stockData.level:e.ship.version-t.ship.version))}else{if(l+=1,s&&!r.some((t=>t.name.toUpperCase().indexOf(s)>=0||t.yomi.indexOf(s)>=0||t.yomi.indexOf(i)>=0)))continue;if(this.onlyStock)continue;p.push({count:0,ship:n,stockData:new se.Z,hp:n.hp,luck:n.luck,impHP:0,impLuck:0,impAsw:0,level:0,asw:n.minAsw,accuracy:-1,avoid:-1,ci:-1,manualValue:0,spEffectItemId:0})}a=a.concat(p)}const c=this.levelRange[1],d=this.levelRange[0],p=this.luckRange[1],h=this.luckRange[0],u=this.luckImpRange[1],m=this.luckImpRange[0],v=this.aswRange[1],g=this.aswRange[0],f=this.aswImpRange[1],b=this.aswImpRange[0],x=[];this.addHP0&&x.push(0),this.addHP1&&x.push(1),this.addHP2&&x.push(2);const k=this.types.filter((t=>t.isChecked)).map((t=>t.value));let _=[];const C=this.nationalities.filter((t=>!t.isChecked)).map((t=>t.filter));for(let w=0;w<C.length;w+=1)_=_.concat(C[w]);const y=this.nationalities.filter((t=>!t.isChecked)).map((t=>t.value)).includes(0),S=wt.ZP.SHIP_TYPES_ALT.filter(((t,e)=>k.includes(e))).map((t=>t.types)).flat();if(a=a.filter((t=>{const{stockData:e,ship:a,luck:s,hp:i,asw:l}=t;return!(!this.includeInitial&&0===a.version)&&(!(!this.includeIntermediate&&0!==a.version&&!a.isFinal)&&(!(!this.includeFinal&&a.isFinal)&&(!(e.level<d||e.level>c)&&(!(e.improvement.asw<b||e.improvement.asw>f)&&(!(e.improvement.luck<m||e.improvement.luck>u)&&(!!x.includes(e.improvement.hp)&&(!!S.includes(a.type)&&(!(_.includes(a.type2)||y&&wt.ZP.JPN.includes(a.type2))&&(!(s<h||s>p)&&(!(l<g||l>v)&&(!(!this.HPIs4n&&i%4===0)&&(!(!this.HPIs4n1&&i%4===3)&&(!(!this.HPIs4n2&&i%4===2)&&(!(!this.HPIs4n3&&i%4===1)&&(!(!this.includeFast&&a.speed>=10)&&(!(!this.includeSlow&&a.speed<10)&&(!(this.isDaihatsu&&!this.okDaihatsu.includes(a.id))&&((!this.isNotDaihatsu||!this.okDaihatsu.includes(a.id))&&(!(this.isKamisha&&!this.okKamisha.includes(a.id))&&((!this.isNotKamisha||!this.okKamisha.includes(a.id))&&(!(this.onlyReleaseExSlot&&!e.releaseExpand)&&((!this.withoutReleaseExSlot||!e.releaseExpand)&&(!(!this.visibleNoArea&&e.area<1)&&(!(e.area&&!this.selectedArea.includes(e.area))&&(!(this.onlyBookmarked&&!r.includes(e.id))&&!(this.onlyMarriage&&e.level<100))))))))))))))))))))))))))})),this.allCount=l,this.manualValue){const t=this.manualValue;for(let e=0;e<a.length;e+=1){const s=a[e];s.manualValue="avoid"===t?zt.Z.getStatusFromLevel(s.level,s.ship.maxAvoid,s.ship.minAvoid):"scout"===t?zt.Z.getStatusFromLevel(s.level,s.ship.maxScout,s.ship.minScout):"nightBattleFirePower"===t?s.ship.fire+s.ship.torpedo:"fuel"===t?s.level>=100?Math.max(Math.floor(.85*s.ship.fuel),1):s.ship.fuel:"ammo"===t?s.level>=100?Math.max(Math.floor(.85*s.ship.ammo),1):s.ship.ammo:s.ship[t]}}a.sort(((t,e)=>t.ship.sort-e.ship.sort));const $=Math.ceil(a.length/100);this.page=this.page>$?$:this.page,this.page=this.page<1&&$>0?1:this.page,this.viewShips=a},masterFilter(){this.filteredShips=this.all.filter((t=>t.id>0)),this.filter()},toggleAllType(){const t=this.types.some((t=>!t.isChecked));for(let e=0;e<this.types.length;e+=1)this.types[e].isChecked=t},toggleAllNationality(){const t=this.nationalities.some((t=>!t.isChecked));for(let e=0;e<this.nationalities.length;e+=1)this.nationalities[e].isChecked=t},clickedArea(t){-1===t?this.visibleNoArea=!this.visibleNoArea:this.selectedArea.includes(t)?this.selectedArea=this.selectedArea.filter((e=>e!==t)):this.selectedArea.push(t)},toggleAllArea(){if(this.selectedArea.length===this.maxAreas&&this.visibleNoArea)this.selectedArea=[],this.visibleNoArea=!1;else{this.selectedArea=[];for(let t=1;t<=this.maxAreas;t+=1)this.selectedArea.push(t);this.visibleNoArea=!0}},changeVersion(t){this.version=t},showEditDialog(t){this.editRow=K()(t);const e=this.all.filter((e=>e.originalId===t.ship.originalId)).sort(((t,e)=>t.version-e.version));this.version=e.findIndex((e=>e.id===t.ship.id)),this.versionButtons=e,this.editLuck=t.luck,this.editDialog=!0,this.btnPushed=!1},toggleArea(t){this.editRow.stockData.area=this.editRow.stockData.area!==t?t:0},getNewStock(){const{stockData:t}=this.editRow,e=this.versionButtons[this.version];t.id=e.id,t.improvement.luck=this.editLuck-e.luck,t.spEffectItems=[],1===this.editRow.spEffectItemId?t.spEffectItems.push({kind:1,torpedo:1,armor:1}):2===this.editRow.spEffectItemId&&t.spEffectItems.push({kind:2,fire:2,avoid:2});const a=wt.ZP.LEVEL_BORDERS.find((e=>e.lv===t.level));return t.exp=a?a.req:0,t.isManualInput=!0,K()(t)},commitStock(){this.btnPushed=!0;const t=this.$store.state.shipStock.concat();let e=S()(t.map((t=>t.uniqueId)));void 0===e&&(e=1);const a=this.getNewStock();a.uniqueId=e+1,t.push(a),this.$store.dispatch("setNeedShipStockDiff",!1),this.$store.dispatch("updateShipStock",t),this.shipStock=t},updateStock(){this.btnPushed=!0;const t=this.$store.state.shipStock.concat(),e=this.getNewStock(),a=t.findIndex((t=>t.uniqueId===e.uniqueId));a>=0&&(t[a]=e,this.$store.dispatch("setNeedShipStockDiff",!1),this.$store.dispatch("updateShipStock",t),this.shipStock=t)},deleteStock(){this.btnPushed=!0,this.confirmDialog=!1;const t=this.editRow.stockData.uniqueId,e=this.$store.state.shipStock,a=e.filter((e=>e.uniqueId!==t));this.$store.dispatch("setNeedShipStockDiff",!1),this.$store.dispatch("updateShipStock",a),this.shipStock=a},changeAvoidSpoiler(){const t=this.$store.state.siteSetting;t.isAvoidSpoiler=this.isAvoidSpoiler,this.$store.dispatch("updateSetting",t)},changeViewMode(t){this.modeTable=t;const e=this.$store.state.siteSetting;e.viewTableMode=t,this.$store.dispatch("updateSetting",e)},translate(t){return t?`${this.$t(t)}`:""},getShipName(t){if(this.needTrans){const e=Zt.Z.getSuffix(t);return`${e.map((t=>this.translate(t))).join("")}`}return t.name?t.name:""},getShipTypeName(t){if(this.isNotJapanese){const e=qt.Z.getShipTypeNameArray(t);return`${e.map((t=>this.translate(t))).join("")}`}return t},toggleFav(t){const e=this.$store.state.siteSetting;e.bookmarkedShipIds.includes(t)?e.bookmarkedShipIds=e.bookmarkedShipIds.filter((e=>e!==t)):e.bookmarkedShipIds.push(t),this.$store.dispatch("updateSetting",e)},bootTooltip(t,e){const a=this.$store.state.siteSetting;a.disabledShipTooltip||!t.count&&this.isAvoidSpoiler||this.isMobile||(window.clearTimeout(this.tooltipTimer),this.tooltipTimer=window.setTimeout((()=>{this.tooltipX=e.clientX,this.tooltipY=e.clientY;const a=new zt.Z({master:t.ship,level:t.level,hp:t.hp,luck:t.luck,asw:t.asw});this.tooltipShip=a,this.enabledTooltip=!0}),Math.max(a.popUpCount,10)))},clearTooltip(){this.enabledTooltip=!1,window.clearTimeout(this.tooltipTimer)}}}),ne=oe,re=(0,vt.Z)(ne,U,O,!1,null,"44ee0552",null),ce=re.exports,de=a(4568),pe=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"mt-3"},[e(f.Z,{attrs:{touchless:!0},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(v.Z,{attrs:{value:"list"}},[e("div",{staticClass:"d-flex align-center flex-wrap mt-2"},[e(i.Z,{attrs:{color:"info"},on:{click:function(e){t.filterDialog=!0}}},[e(c.Z,[t._v("mdi-filter")]),t._v(" "+t._s(t.$t("Common.絞り込み"))+" ")],1),e(i.Z,{staticClass:"ml-1",attrs:{text:""},on:{click:function(e){return t.resetFilterCondition()}}},[t._v(" "+t._s(t.$t("Common.リセット"))+" ")]),t.isNotJapanese?t._e():e("div",{staticClass:"ml-2 caption d-none d-md-block text--secondary"},[t._v("Ctrlキー + 装備をクリックでwikiを展開します。")]),e(i.Z,{staticClass:"ml-auto",attrs:{color:"secondary"},on:{click:function(e){return t.showBlacklist()}}},[e(c.Z,[t._v("mdi-skull-crossbones")]),t._v("Blacklist ("+t._s(t.$store.state.siteSetting.blacklistItemIds.length)+") ")],1)],1),e(n.Z,{attrs:{transition:"scroll-x-transition",width:"800",fullscreen:t.isMobile},on:{input:t.toggleFilterDialog},model:{value:t.filterDialog,callback:function(e){t.filterDialog=e},expression:"filterDialog"}},[e(l.Z,[e("div",{staticClass:"d-flex pt-2 pb-1 px-2"},[e("div",{staticClass:"align-self-center ml-3 body-2"},[t._v(t._s(t.$t("Common.絞り込み")))]),e(F.Z),e(i.Z,{staticClass:"mr-3 align-self-center",attrs:{small:"",text:""},on:{click:function(e){return e.stopPropagation(),t.resetFilterCondition()}}},[t._v(" "+t._s(t.$t("Common.リセット"))+" ")]),e(i.Z,{attrs:{icon:""},on:{click:function(e){return t.closeFilterDialog()}}},[e(c.Z,[t._v("mdi-close")])],1)],1),e(r.Z,{staticClass:"mx-2"}),e("div",{staticClass:"filter-dialog-body pr-3"},[e("div",{staticClass:"d-flex"},[e("div",{staticClass:"caption"},[t._v(t._s(t.$t("Database.基本条件")))]),e("div",{staticClass:"header-divider"})]),e("div",{staticClass:"px-3 pt-2 d-flex flex-wrap align-center"},[e("div",{staticClass:"keyword-input mr-5"},[e(b.Z,{attrs:{dense:"","hide-details":"",clearable:"","prepend-inner-icon":"mdi-magnify",label:t.$t("ItemList.図鑑id 名称検索")},model:{value:t.searchWord,callback:function(e){t.searchWord="string"===typeof e?e.trim():e},expression:"searchWord"}})],1),e(w.Z,{staticClass:"mr-5",attrs:{dense:"","hide-details":"",label:t.$t("Database.未所持装備非表示"),disabled:t.onlyHasNot},model:{value:t.onlyStock,callback:function(e){t.onlyStock=e},expression:"onlyStock"}}),e(w.Z,{staticClass:"mr-5",attrs:{dense:"","hide-details":"",label:t.$t("Database.総所持数表示"),disabled:t.onlyHasNot},on:{change:function(e){return t.changeVisibleAllCount()}},model:{value:t.visibleAllCount,callback:function(e){t.visibleAllCount=e},expression:"visibleAllCount"}}),e(w.Z,{attrs:{dense:"","hide-details":"",label:"未所持のみ"},on:{change:function(e){return t.changeVisibleAllCount()}},model:{value:t.onlyHasNot,callback:function(e){t.onlyHasNot=e},expression:"onlyHasNot"}})],1),e("div",{staticClass:"d-flex mt-4 align-center"},[e("div",{staticClass:"caption"},[t._v(t._s(t.$t("Database.カテゴリ")))]),e("div",{staticClass:"header-divider"}),e("div",{staticClass:"pr-1 pl-3"},[e(i.Z,{attrs:{small:"",outlined:"",color:"primary"},on:{click:function(e){return t.toggleAllType()}}},[e(c.Z,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-check-all")]),t._v(" "+t._s(t.$t("Database.一括チェック"))+" ")],1)],1)]),e("div",{staticClass:"filter-input-container"},t._l(t.types,(function(a,s){return e(w.Z,{key:`item${s}`,attrs:{dense:"",label:t.$t(`EType.${a.text}`),"hide-details":"",disabled:t.onlyHasNot},model:{value:a.isChecked,callback:function(e){t.$set(a,"isChecked",e)},expression:"item.isChecked"}})})),1),e("div",{staticClass:"d-flex mt-6"},[e("div",{staticClass:"caption"},[t._v(t._s(t.$t("Common.改修値")))]),e("div",{staticClass:"header-divider"})]),e("div",[e(A.Z,{staticClass:"mt-4 px-3",attrs:{dense:"","thumb-label":"",min:"0",max:"10","hide-details":"",disabled:t.onlyHasNot},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(b.Z,{staticClass:"range-input",class:{english:t.isNotJapanese},attrs:{label:t.$t("Database.改修下限"),type:"number",max:t.remodelRange[1],min:"0","hide-details":""},model:{value:t.remodelRange[0],callback:function(e){t.$set(t.remodelRange,0,e)},expression:"remodelRange[0]"}})]},proxy:!0},{key:"append",fn:function(){return[e(b.Z,{staticClass:"range-input",class:{english:t.isNotJapanese},attrs:{label:t.$t("Database.改修上限"),type:"number",max:"10",min:t.remodelRange[0],"hide-details":""},model:{value:t.remodelRange[1],callback:function(e){t.$set(t.remodelRange,1,e)},expression:"remodelRange[1]"}})]},proxy:!0}]),model:{value:t.remodelRange,callback:function(e){t.remodelRange=e},expression:"remodelRange"}})],1)])],1)],1),t.viewItems.length?e("div",{staticClass:"item-all-container mt-3"},t._l(t.viewItems,(function(a,s){return e(l.Z,{key:s,staticClass:"py-1"},[e("div",{staticClass:"ma-1 d-flex"},[e("div",{staticClass:"type-img"},[e("img",{attrs:{src:`./img/type/type${a.type.id}.png`,alt:`type-${a.type.id}`}})]),e("div",{staticClass:"ml-1 type-name"},[t._v(t._s(t.$t(`EType.${a.type.name}`)))]),e(F.Z),a.type.sortKey?e("div",[e(de.Z,{attrs:{"offset-y":"",left:""},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(i.Z,t._g(t._b({attrs:{icon:""}},"v-btn",s,!1),a),[e(c.Z,[t._v("mdi-sort")])],1)]}}],null,!0)},[e(l.Z,[e("div",{directives:[{def:B.Z,name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],staticClass:"sort-key",class:{selected:"id"===a.selectedKey},on:{click:function(e){return t.sortItems(a,"id")},keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sortItems(a,"id")}}},[t._v(" "+t._s(t.$t("Database.図鑑ID"))+" ")]),t._l(a.type.sortKey,(function(i,l){return e("div",{directives:[{def:B.Z,name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],key:`type${s}Key${l}`,staticClass:"sort-key",class:{selected:a.selectedKey===i},on:{click:function(e){return t.sortItems(a,i)},keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sortItems(a,i)}}},[t._v(" "+t._s(t.convertStatusString(i))+" ")])}))],2)],1)],1):t._e()],1),e(r.Z),t._l(a.items,(function(a,i){return e("div",{key:`${s}${i}`},[e("div",{directives:[{def:B.Z,name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],staticClass:"item-container",class:{"no-item":!a.allCount},on:{click:function(e){return t.clickItem(a.master,e)},keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.clickItem(a.master,e)},mouseenter:function(e){return t.bootTooltip(a.master,e)},mouseleave:t.clearTooltip,focus:t.clearTooltip,blur:t.clearTooltip}},[e("div",{staticClass:"d-flex align-self-start flex-grow-1"},[e("div",{staticClass:"icon-img"},[e("img",{attrs:{src:`./img/type/icon${a.master.iconTypeId}.png`,alt:`icon-${a.master.iconTypeId}`}})]),e("div",{staticClass:"item-name flex-grow-1"},[t._v(" "+t._s(t.needTrans?t.$t(`${a.master.name}`):a.master.name)+" ")])]),e("div",{staticClass:"detail-container"},[t.visibleAllCount&&!t.remodelRange[0]?e("div",{staticClass:"primary--text count-text"},[t._v(t._s(a.allCount))]):t._e(),t._l(a.details,(function(a,l){return e("div",{key:`${s}${i}${l}`,staticClass:"d-flex remodel-container"},[a.remodel?e("div",{staticClass:"item-remodel teal--text text--accent-4"},[t._v("★"+t._s(a.remodel))]):t._e(),e("div",{staticClass:"ml-auto"},[t._v(t._s(a.count))])])}))],2)])])}))],2)})),1):e(l.Z,{staticClass:"my-3 pa-4"},[e("div",{staticClass:"text-center my-10"},[e("div",[t._v(t._s(t.$t("Common.探したけど見つからなかったよ"))+"😢")])])]),t.editedItem?e(n.Z,{attrs:{transition:"scroll-x-transition",width:"600"},model:{value:t.editDialog,callback:function(e){t.editDialog=e},expression:"editDialog"}},[e(l.Z,{staticClass:"pa-3"},[e("div",{staticClass:"mx-2 mb-2"},[e("div",{staticClass:"d-flex align-center"},[e("div",[e(d.Z,{attrs:{src:`./img/type/icon${t.editedItem.iconTypeId}.png`,width:"40",height:"40"}})],1),e("div",{staticClass:"ml-1"},[e("div",{staticClass:"caption info--text"},[t._v("id "+t._s(t.editedItem.id))]),e("div",{staticClass:"body-2"},[t._v(t._s(t.needTrans?t.$t(`${t.editedItem.name}`):t.editedItem.name))])])])]),e(r.Z),e("div",{staticClass:"ma-3"},[e("div",{staticClass:"caption"},[t._v(t._s(t.$t("Database.所持数")))]),e("div",{staticClass:"stock-inputs"},[t._l(t.editedStock,(function(a,s){return e(b.Z,{key:`stock$${s}`,staticClass:"stock-input",attrs:{type:"number",max:"999",min:"0",label:`★+${s}`,"hide-details":"",readonly:t.readOnly},model:{value:t.editedStock[s],callback:function(e){t.$set(t.editedStock,s,t._n(e))},expression:"editedStock[i]"}})})),e(b.Z,{staticClass:"stock-input",attrs:{type:"number",readonly:"",label:t.$t("Fleet.合計")},model:{value:t.sumStock,callback:function(e){t.sumStock=t._n(e)},expression:"sumStock"}})],2)]),e(r.Z,{staticClass:"mb-2"}),e("div",{staticClass:"d-flex"},[e(i.Z,{staticClass:"ml-auto",attrs:{color:"success",disabled:t.readOnly},on:{click:function(e){return e.stopPropagation(),t.commitStock.apply(null,arguments)}}},[t._v(t._s(t.$t("Common.更新")))]),e(i.Z,{staticClass:"ml-4",attrs:{disabled:!t.sumStock||t.readOnly,color:"error"},on:{click:function(e){return e.stopPropagation(),t.clearStock.apply(null,arguments)}}},[t._v(t._s(t.$t("Database.全破棄")))]),e(i.Z,{staticClass:"ml-4",attrs:{color:"secondary"},on:{click:function(e){e.stopPropagation(),t.editDialog=!1}}},[t._v(t._s(t.$t("Common.戻る")))])],1)],1)],1):t._e(),e(n.Z,{attrs:{width:"660",fullscreen:t.isMobile},on:{input:function(e){return t.toggleBlackListDialog()}},model:{value:t.blacklistDialog,callback:function(e){t.blacklistDialog=e},expression:"blacklistDialog"}},[e("blacklist-item-edit",{attrs:{"handle-close":t.closeBlacklist}})],1)],1)],1),e(N.Z,{attrs:{color:"black",bottom:"",right:"",transition:"slide-y-transition","position-x":t.tooltipX,"position-y":t.tooltipY},model:{value:t.enabledTooltip,callback:function(e){t.enabledTooltip=e},expression:"enabledTooltip"}},[e("item-tooltip",{attrs:{"is-airbase-mode":!!t.tooltipItem.data.radius},model:{value:t.tooltipItem,callback:function(e){t.tooltipItem=e},expression:"tooltipItem"}})],1)],1)},he=[],ue=a(3085),me=a(8030),ve=a(1462),ge=a(7783),fe=a(7525),be=C.ZP.extend({name:"ItemsComponent",components:{ItemTooltip:ue.Z,BlacklistItemEdit:me.Z},data:()=>({tab:"list",filterDialog:!1,all:[],itemStock:[],searchWord:"",onlyStock:!1,visibleAllCount:!1,remodelRange:[0,10],types:[],baseViewItems:[],viewItems:[],editDialog:!1,editedItem:void 0,editedStock:[0,0,0,0,0,0,0,0,0,0,0],unsubscribe:void 0,enabledTooltip:!1,tooltipTimer:void 0,tooltipItem:new fe.Z,tooltipX:0,tooltipY:0,readOnly:!1,blacklistDialog:!1,onlyHasNot:!1,isMobile:!0}),mounted(){this.$store.getters.getExistsTempStock&&(this.readOnly=!0);const t=this.$store.state.siteSetting;this.visibleAllCount=t.visibleItemStockAllCount,this.initialize(),this.unsubscribe=this.$store.subscribe(((t,e)=>{"setItemStock"===t.type&&(this.itemStock=e.itemStock,this.masterFilter(),this.editDialog=!1)}))},watch:{completed(t){t&&!this.all.length&&this.initialize()},isTempStockMode(t){this.readOnly=!!t,this.initialize()},tab(t){}},computed:{completed(){return this.$store.getters.getCompletedAll},isTempStockMode(){return this.$store.getters.getExistsTempStock},sumStock(){return it()(this.editedStock)},convertStatusString(){return t=>{const e=qt.Z.convertAttributeString(t);return this.isNotJapanese?`${this.$t(`Common.${e}`)}`:e}},isNotJapanese(){return"ja"!==this.$i18n.locale},needTrans(){const t=this.$store.state.siteSetting;return"ja"!==this.$i18n.locale&&!t.nameIsNotTranslate}},beforeDestroy(){this.unsubscribe&&this.unsubscribe()},methods:{initialize(){this.all=this.$store.state.items,this.all=this.all.filter((t=>!t.isEnemyItem)),this.itemStock=this.$store.state.itemStock,this.readOnly&&(this.itemStock=this.$store.state.tempItemStock);const t=wt.ZP.ITEM_TYPES_ALT;this.types=[];for(let e=0;e<t.length;e+=1)this.types.push({text:t[e].text,value:e,isChecked:!0});this.masterFilter()},masterFilter(){const t=this.types.filter((t=>t.isChecked)).map((t=>t.value)),e=wt.ZP.ITEM_TYPES_ALT.filter(((e,a)=>t.includes(a))).map((t=>t.types)).flat(),a=this.all,s=wt.ZP.ITEM_API_TYPE.filter((t=>e.includes(t.id))),i=[];for(let l=0;l<s.length;l+=1){const t=s[l],e=a.filter((e=>e.apiTypeId===t.id)),o=[];for(let a=0;a<e.length;a+=1){const t=e[a],s={master:t,allCount:0,details:[]},i=[];let l=0;const n=this.itemStock.find((e=>e.id===t.id));for(let e=10;e>=0;e-=1){const t=n?n.num[e]:0;t&&(i.push({remodel:e,count:t}),l+=t)}s.details=i,s.allCount=l,o.push(s)}i.push({type:t,items:o,selectedKey:"id"})}this.baseViewItems=i,this.filter()},closeFilterDialog(){this.filterDialog=!1,this.masterFilter()},toggleFilterDialog(){this.filterDialog||this.masterFilter()},resetFilterCondition(){this.searchWord="",this.remodelRange=[0,10],this.onlyStock=!1,this.onlyHasNot=!1;for(let t=0;t<this.types.length;t+=1)this.types[t].isChecked=!0;this.masterFilter()},filter(){this.isMobile=window.innerWidth<600;const t=this.baseViewItems,e=[],a=this.remodelRange[0],s=this.remodelRange[1],i=this.searchWord?this.searchWord.toUpperCase():"",l=this.$store.state.siteSetting;for(let o=0;o<t.length;o+=1){const{items:n}=t[o],r={type:t[o].type,items:[],selectedKey:"id"};for(let t=0;t<n.length;t+=1){const{master:e,details:o,allCount:c}=n[t];if((!i||e.id===+i||-1!==e.name.toUpperCase().indexOf(i))&&!l.blacklistItemIds.includes(e.id))if(this.onlyHasNot)c||r.items.push(n[t]);else{const i=o.filter((t=>t.remodel>=a&&t.remodel<=s));i.length?r.items.push({master:e,details:i,allCount:it()(i.map((t=>t.count)))}):0!==a||0!==c||this.onlyStock||r.items.push(n[t])}}r.items.length&&e.push(r)}this.viewItems=e},toggleAllType(){const t=this.types.some((t=>!t.isChecked));for(let e=0;e<this.types.length;e+=1)this.types[e].isChecked=t},sortItems(t,e){t.selectedKey=e;const a=t.items;"id"===e||"cost"===e?a.sort(((t,a)=>t.master[e]-a.master[e])):a.sort(((t,a)=>a.master[e]-t.master[e]))},clickItem(t,e){if(this.clearTooltip(),e&&e.ctrlKey&&t&&!t.isEnemyItem)return void window.open(ge.Z.getWikiURL(t));this.editDialog=!0,this.editedItem=t;const a=this.itemStock.find((e=>e.id===t.id));this.editedStock=a?a.num:[0,0,0,0,0,0,0,0,0,0,0]},clearStock(){this.editedStock=[0,0,0,0,0,0,0,0,0,0,0]},commitStock(){if(this.editedItem){const t=this.editedItem.id,e=this.itemStock.find((e=>e.id===t));if(e)e.num=this.editedStock,e.isManualInput=!0;else{const e=new ve.Z(t);e.num=this.editedStock,e.isManualInput=!0,this.itemStock.push(e)}this.$store.dispatch("updateItemStock",this.itemStock),this.masterFilter(),this.editDialog=!1,window.setTimeout((()=>{this.editedItem=void 0}),100)}},bootTooltip(t,e){const a=this.$store.state.siteSetting;if(!t.id||a.disabledItemTooltip)return;const s=e.target.getElementsByClassName("item-name")[0];window.clearTimeout(this.tooltipTimer),this.tooltipTimer=window.setTimeout((()=>{const e=s.getBoundingClientRect();this.tooltipX=e.x+e.width/3,this.tooltipY=e.y+e.height,this.tooltipItem=new fe.Z({master:t}),this.enabledTooltip=!0}),Math.max(a.popUpCount,10))},clearTooltip(){this.enabledTooltip=!1,window.clearTimeout(this.tooltipTimer)},changeVisibleAllCount(){const t=this.$store.state.siteSetting;t.visibleItemStockAllCount=this.visibleAllCount,this.$store.dispatch("updateSetting",t)},showBlacklist(){this.blacklistDialog=!0},closeBlacklist(){this.blacklistDialog=!1,this.filter()},toggleBlackListDialog(){this.blacklistDialog||this.filter()}}}),xe=be,ke=(0,vt.Z)(xe,pe,he,!1,null,"6aed919f",null),_e=ke.exports,Ce=a(4127),ye=a(266),Se=a(2118),$e=a(1713),we=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"mt-3 result-all-container"},[t.analyzeResult.ships&&t.analyzeResult.ships.length?t._e():e("div",{staticClass:"mb-2"},[e(i.Z,{attrs:{loading:t.loading,color:"primary"},on:{click:function(e){return t.fetchAnalyticsResult()}}},[t._v(t._s(t.$t("Database.集計の結果を閲覧する")))])],1),e(n.Z,{attrs:{width:"400"},model:{value:t.errorDialog,callback:function(e){t.errorDialog=e},expression:"errorDialog"}},[e(l.Z,{staticClass:"pa-3"},[e("div",{staticClass:"mx-2 my-4 text-body-2"},[e("div",[t._v(t._s(t.$t("Database.集計データが取得できませんでした。")))]),e("div",{staticClass:"mt-2"},[t._v(t._s(t.$t("Database.一度、サイトの再読み込みをしてみてください。それでも取得できない場合は集計中かも。")))])]),e(r.Z,{staticClass:"my-2"}),e("div",{staticClass:"d-flex"},[e(i.Z,{staticClass:"ml-auto",attrs:{color:"secondary"},on:{click:function(e){e.stopPropagation(),t.errorDialog=!1}}},[t._v(t._s(t.$t("Common.閉じる")))])],1)],1)],1),!t.isTempStockMode&&t.shipStock&&t.shipStock.length&&!t.isSubmitted?e("div",{staticClass:"mb-2"},[e(i.Z,{attrs:{color:"success"},on:{click:function(e){t.confirmDialog=!0}}},[t._v(t._s(t.$t("Database.自分のデータを送信する")))])],1):t._e(),t.isSubmitted?e(s.Z,{attrs:{type:"success",outlined:"",dense:""}},[t._v(" "+t._s(t.$t("Database.送信しました"))+" ")]):t._e(),e(n.Z,{attrs:{width:"660"},model:{value:t.confirmDialog,callback:function(e){t.confirmDialog=e},expression:"confirmDialog"}},[e(l.Z,{staticClass:"pa-3"},[e("div",{staticClass:"ma-4 text-body-2"},[e("div",{staticClass:"my-2"},[t._v(t._s(t.$t("Database.あなたの艦隊、装備データを統計データの集計対象として送信します。")))]),e("div",{staticClass:"my-2"},[t._v(t._s(t.$t("Database.集計は一日一回実行されます。データを送信した後すぐに反映はされませんのでご注意ください。")))])]),t.hasManualData?e(s.Z,{staticClass:"text-body-2",attrs:{type:"error",outlined:"",dense:""}},[e("div",[t._v("手動でのデータ更新を行った艦隊データは集計対象外となりました。")]),e("div",[t._v("データ送信を行う場合は、この画面を閉じ、「反映」タブの手順で艦隊、装備データを更新してください。")])]):t._e(),e(r.Z,{staticClass:"my-2"}),e("div",{staticClass:"d-flex"},[e(i.Z,{staticClass:"ml-auto",attrs:{color:"success",loading:t.loading,dark:"",disabled:t.hasManualData},on:{click:t.sendStockData}},[t._v(t._s(t.$t("Database.データ送信")))]),e(i.Z,{staticClass:"ml-4",attrs:{color:"secondary"},on:{click:function(e){e.stopPropagation(),t.confirmDialog=!1}}},[t._v(t._s(t.$t("Database.やっぱやめとく")))])],1)],1)],1),t.analyzeResult.ships&&t.analyzeResult.ships.length?[e($.Z,{staticClass:"mb-2",attrs:{dense:"",borderless:"",mandatory:""},model:{value:t.isShipMode,callback:function(e){t.isShipMode=e},expression:"isShipMode"}},[e(i.Z,{class:{"blue darken-2 white--text":t.isShipMode},attrs:{value:!0,block:""},on:{click:function(e){return e.stopPropagation(),t.setShipTables()}}},[e("span",[t._v(t._s(t.$t("Fleet.艦娘")))])]),e(i.Z,{class:{"green darken-2 white--text":!t.isShipMode},attrs:{value:!1,block:""},on:{click:function(e){return e.stopPropagation(),t.setItemTables()}}},[e("span",[t._v(t._s(t.$t("Fleet.装備")))])])],1),e(G.Z,{attrs:{focusable:""}},[e(j.Z,[e(Y.Z,{staticClass:"py-0",attrs:{"min-height":"10"}},[e("div",{staticClass:"d-flex align-center"},[e(c.Z,[t._v("mdi-format-list-numbered")]),e("div",{staticClass:"ml-2"},[t._v(t._s(t.$t("Database.全体統計データ")))])],1)]),e(J.Z,[t.isShipMode?e("div",{staticClass:"mt-3"},[e("div",{staticClass:"d-flex flex-wrap"},[e("button",{directives:[{def:B.Z,name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],staticClass:"type-selector d-flex",class:{active:-1===t.shipType},on:{click:function(e){return t.changeShipType(-1)}}},[e("div",{staticClass:"type-all-text"},[t._v("ALL")])]),t._l(t.shipTypes,(function(a,s){return e("button",{directives:[{def:B.Z,name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],key:s,staticClass:"type-selector",class:{active:s===t.shipType},on:{click:function(e){return t.changeShipType(s)}}},[t._v(" "+t._s(t.isNotJapanese?t.$t(`SType.${a.text}`):a.text)+" ")])}))],2),e("div",{staticClass:"d-flex flex-wrap mb-1"},[e(w.Z,{staticClass:"mr-3",attrs:{dense:"",label:t.$t("Fleet.未改造"),error:t.errorRemodel},on:{click:function(e){return t.setShipTables()}},model:{value:t.includeInitial,callback:function(e){t.includeInitial=e},expression:"includeInitial"}}),e(w.Z,{staticClass:"mr-3",attrs:{dense:"",label:t.$t("Fleet.中間改造"),error:t.errorRemodel},on:{click:function(e){return t.setShipTables()}},model:{value:t.includeIntermediate,callback:function(e){t.includeIntermediate=e},expression:"includeIntermediate"}}),e(w.Z,{attrs:{dense:"",label:t.$t("Fleet.最終改造"),error:t.errorRemodel},on:{click:function(e){return t.setShipTables()}},model:{value:t.includeFinal,callback:function(e){t.includeFinal=e},expression:"includeFinal"}})],1)]):e("div",{staticClass:"mt-3"},[e("div",{staticClass:"d-flex flex-wrap"},[e("button",{directives:[{def:B.Z,name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],staticClass:"type-selector d-flex",class:{active:-1===t.itemType},on:{click:function(e){return t.changeItemType(-1)}}},[e("div",{staticClass:"type-all-text item"},[t._v("ALL")])]),t._l(t.itemTypes,(function(a){return e("button",{directives:[{def:B.Z,name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],key:a.id,staticClass:"type-selector",class:{active:t.itemType===a.id},on:{click:function(e){return t.changeItemType(a.id)}}},[e("div",[e(d.Z,{attrs:{src:`./img/type/type${a.id}.png`,height:"25",width:"25"}})],1)])}))],2),e(r.Z),e("div",{staticClass:"d-flex flex-wrap mb-1"},[e("button",{directives:[{def:B.Z,name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],staticClass:"type-selector",class:{active:-1===t.selectedRemodel},on:{click:function(e){return t.changeRemodel(-1)}}},[e("div",{staticClass:"type-all-text"},[t._v("ALL")])]),t._l(11,(function(a){return e("button",{directives:[{def:B.Z,name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],key:a,staticClass:"type-selector",class:{active:t.selectedRemodel===a-1},on:{click:function(e){return t.changeRemodel(a-1)}}},[e(c.Z,{attrs:{"x-small":"",color:"teal accent-4"}},[t._v("mdi-star")]),e("span",{staticClass:"teal--text text--accent-4"},[t._v(t._s(a-1))])],1)}))],2)],1),t.isNotJapanese||t.isShipMode?t._e():e("div",{staticClass:"mb-1 caption d-none d-md-block text--secondary"},[t._v("Ctrlキー + 装備をクリックでwikiを展開します。")]),e("div",{staticClass:"ranking-cards"},t._l(t.viewTables,(function(a,s){return e(l.Z,{key:`table${s}`,attrs:{outlined:""}},[e("div",{staticClass:"pa-2 d-flex flex-wrap align-end"},[e("div",{staticClass:"ml-1 body-2"},[t._v(t._s(a.title?t.$t(`Database.${a.title}`):""))]),e(F.Z),e(i.Z,{attrs:{color:"secondary",small:"",disabled:!a.top10.length||a.items.length<11},on:{click:function(e){return t.showFullTable(a)}}},[t._v(" "+t._s(t.$t("Database.さらに見る"))+" ")])],1),e(r.Z),e(Q.Z,{class:{"my-6":!a.top10.length},attrs:{dense:""}},[e("tbody",t._l(a.top10,(function(a,s){return e("tr",{key:s,staticClass:"clickable",on:{click:function(e){return t.clickedRaw(a.data,e)}}},[t.isMobile?t._e():e("td",{staticClass:"py-1 pr-0 text-right"},[t._v(t._s(s+1))]),e("td",{staticClass:"py-1 pr-0"},[e("div",{staticClass:"d-flex align-center"},[t.isShipMode?[e("div",[a.data.id?e(d.Z,{attrs:{src:`./img/ship/${a.data.id}.png`,height:"30",width:"120"}}):t._e()],1),e("div",{staticClass:"ml-1 ship-name text-caption text-truncate"},[t._v(t._s(t.getShipName(a.data)))])]:[e("div",[a.data.id?e(d.Z,{attrs:{src:`./img/type/icon${a.data.iconTypeId}.png`,height:"30",width:"30"}}):t._e()],1),e("div",{staticClass:"ml-1 ship-name text-caption text-truncate"},[t._v(t._s(t.needTrans?t.$t(`${a.data.name}`):a.data.name))]),t.selectedRemodel>=1?e("div",[e(c.Z,{attrs:{"x-small":"",color:"teal accent-4"}},[t._v("mdi-star")]),e("span",{staticClass:"teal--text text--accent-4"},[t._v(t._s(t.selectedRemodel))])],1):t._e()]],2)]),e("td",{staticClass:"py-1 text-right value-td"},[t._v(t._s(a.value))])])})),0)])],1)})),1)])],1),t.isShipMode&&t.shipStock.length?e(j.Z,[e(Y.Z,{staticClass:"py-0",attrs:{"min-height":"10"}},[e("div",{staticClass:"d-flex align-center"},[e(c.Z,[t._v("mdi-account-details")]),e("div",{staticClass:"ml-2"},[t._v(t._s(t.$t("Database.自分のデータと比較")))])],1)]),e(J.Z,[e("div",{staticClass:"d-flex flex-wrap mt-3"},[e("button",{directives:[{def:B.Z,name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],staticClass:"type-selector d-flex",class:{active:-1===t.shipType},on:{click:function(e){return t.changeShipType(-1)}}},[e("div",{staticClass:"type-all-text"},[t._v("ALL")])]),t._l(t.shipTypes,(function(a,s){return e("button",{directives:[{def:B.Z,name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],key:s,staticClass:"type-selector",class:{active:s===t.shipType},on:{click:function(e){return t.changeShipType(s)}}},[t._v(" "+t._s(t.isNotJapanese?t.$t(`SType.${a.text}`):a.text)+" ")])}))],2),e("div",{staticClass:"d-flex flex-wrap mb-1"},[e(w.Z,{staticClass:"mr-3",attrs:{dense:"",label:t.$t("Fleet.未改造"),error:t.errorRemodel},on:{click:function(e){return t.setShipTables()}},model:{value:t.includeInitial,callback:function(e){t.includeInitial=e},expression:"includeInitial"}}),e(w.Z,{staticClass:"mr-3",attrs:{dense:"",label:t.$t("Fleet.中間改造"),error:t.errorRemodel},on:{click:function(e){return t.setShipTables()}},model:{value:t.includeIntermediate,callback:function(e){t.includeIntermediate=e},expression:"includeIntermediate"}}),e(w.Z,{attrs:{dense:"",label:t.$t("Fleet.最終改造"),error:t.errorRemodel},on:{click:function(e){return t.setShipTables()}},model:{value:t.includeFinal,callback:function(e){t.includeFinal=e},expression:"includeFinal"}})],1),e("div",{staticClass:"your-data-area"},[e(l.Z,{attrs:{outlined:""}},[e("div",{staticClass:"pa-2 d-flex align-end"},[e("div",{staticClass:"body-2"},[t._v(t._s(t.$t("Database.艦娘偏差値"))+" TOP10")]),e(F.Z),e(i.Z,{attrs:{color:"secondary",small:""},on:{click:function(e){return t.showFullDeviationTable()}}},[t._v(t._s(t.$t("Database.さらに見る")))])],1),e(r.Z),e(Q.Z,{class:{"my-6":!t.deviations.length},attrs:{dense:""}},[e("tbody",t._l(t.deviationTop10s,(function(a,s){return e("tr",{key:s,staticClass:"clickable",on:{click:function(e){return t.clickedRaw(a.data,e)}}},[t.isMobile?t._e():e("td",{staticClass:"py-1 pr-0 text-right"},[t._v(t._s(s+1))]),e("td",{staticClass:"py-1 pr-0"},[e("div",{staticClass:"d-flex align-center"},[e("div",[a.data.id?e(d.Z,{attrs:{src:`./img/ship/${a.data.id}.png`,height:"30",width:"120"}}):t._e()],1),e("div",{staticClass:"ml-1 ship-name text-caption text-truncate"},[t._v(t._s(t.getShipName(a.data)))])])]),e("td",{staticClass:"py-1 text-right"},[t._v(t._s(a.level))]),e("td",{staticClass:"py-1 text-right"},[e(Ce.Z,{attrs:{small:"",color:a.color,light:a.isLight,dark:a.isDark}},[t._v(" "+t._s(a.deviation.toFixed(1))+" ")])],1)])})),0)])],1),e("div",{staticClass:"your-data-container"},[e(Q.Z,[e("thead",[e("tr",[e("th"),e("th",{staticClass:"text-no-wrap pr-0 text-right"},[t._v(t._s(t.$t("Database.サーバー平均")))]),e("th",{staticClass:"text-no-wrap pr-0 text-right"},[t._v(t._s(t.$t("Database.サーバー中央値")))]),e("th",{staticClass:"text-no-wrap pr-0 text-right"},[t._v(t._s(t.$t("Database.あなたのデータ")))]),e("th",{staticClass:"text-no-wrap pr-0 text-center"},[t._v(t._s(t.$t("Database.偏差値")))])])]),e("tbody",t._l(t.deviationTable,(function(a,s){return e("tr",{key:`dev${s}`},[e("td",{staticClass:"text-no-wrap"},[t._v(t._s(t.$t(`Database.${a.title}`)))]),e("td",{staticClass:"text-right pr-0"},[t._v(t._s(Math.floor(a.avg).toLocaleString()))]),e("td",{staticClass:"text-right pr-0"},[t._v(t._s(Math.floor(a.med).toLocaleString()))]),e("td",{staticClass:"text-right pr-0"},[t._v(t._s(a.value.toLocaleString()))]),e("td",{staticClass:"text-center pr-0 py-1"},[e(Ce.Z,{attrs:{color:t.getChipColor(a.deviation),light:a.deviation<=55&&a.deviation>38,dark:a.deviation>55||a.deviation<=38}},[t._v(" "+t._s(a.deviation.toFixed(1))+" ")])],1)])})),0)])],1)],1)])],1):t._e()],1),t.isShipMode?e("div",{staticClass:"mt-10"},[e("div",[t._v(t._s(t.$t("Database.その他のデータ")))]),e(r.Z,{staticClass:"mb-3"}),e(G.Z,{attrs:{focusable:""}},[t.isShipMode?e(j.Z,[e(Y.Z,{staticClass:"py-0",attrs:{"min-height":"10"}},[e("div",{staticClass:"d-flex align-center"},[e(c.Z,[t._v("mdi-swap-horizontal")]),e("div",{staticClass:"ml-2"},[t._v(t._s(t.$t("Database.コンバート艦")))])],1)]),e(J.Z,[e("div",{staticClass:"convert-results"},t._l(t.convertRemodelResults,(function(a,s){return e(l.Z,{key:`convert_${s}`,staticClass:"px-2 py-1",attrs:{outlined:""}},t._l(a.versions,(function(a,s){return e("div",{key:`version${s}`,staticClass:"d-flex align-center my-1"},[e("div",[a.data.id?e(d.Z,{attrs:{src:`./img/ship/${a.data.id}.png`,height:"30",width:"120"}}):t._e()],1),e("div",{staticClass:"ml-1 convert-ship-name text-caption text-truncate"},[t._v(t._s(t.getShipName(a.data)))]),e("div",{staticClass:"ml-auto text-right text-no-wrap"},[t._v(t._s(a.rate)+" "),e("span",{staticClass:"text-body-2"},[t._v("%")])])])})),0)})),1)])],1):t._e(),t.isShipMode?t._e():e(j.Z,[e(Y.Z,{staticClass:"py-0",attrs:{"min-height":"10"}},[e("div",{staticClass:"d-flex align-center"},[e(c.Z,[t._v("mdi-swap-horizontal")]),e("div",{staticClass:"ml-2"},[t._v("改修値平均")])],1)]),e(J.Z,[e("div",{staticClass:"convert-results"},t._l(t.convertRemodelResults,(function(a,s){return e(l.Z,{key:`convert_${s}`,staticClass:"px-2 py-1",attrs:{outlined:""}},t._l(a.versions,(function(a,s){return e("div",{key:`version${s}`,staticClass:"d-flex align-center my-1"},[e("div",[a.data.id?e(d.Z,{attrs:{src:`./img/ship/${a.data.id}.png`,height:"30",width:"120"}}):t._e()],1),e("div",{staticClass:"ml-1 convert-ship-name text-caption text-truncate"},[t._v(t._s(t.getShipName(a.data)))]),e("div",{staticClass:"ml-auto text-right text-no-wrap"},[t._v(t._s(a.rate)+" "),e("span",{staticClass:"text-body-2"},[t._v("%")])])])})),0)})),1)])],1)],1),e("div",{staticClass:"mt-3"},[e(s.Z,{attrs:{type:"info",outlined:""}},[t._v("その他、閲覧、比較したいデータ募集中！")])],1)],1):t._e()]:t._e(),e(n.Z,{attrs:{width:"500",fullscreen:t.isMobile},model:{value:t.fullTableDialog,callback:function(e){t.fullTableDialog=e},expression:"fullTableDialog"}},[e(l.Z,{staticClass:"full-table-card"},[e("div",{staticClass:"pt-2 pb-1 px-2 d-flex flex-wrap align-center"},[e("div",[t._v(t._s(t.fullTable.title?t.$t(`Database.${t.fullTable.title}`):""))]),e(i.Z,{staticClass:"ml-auto",attrs:{icon:""},on:{click:function(e){t.fullTableDialog=!1}}},[e(c.Z,[t._v("mdi-close")])],1)],1),e(r.Z),e("div",{staticClass:"pa-1"},[e(b.Z,{attrs:{clearable:"","hide-details":"",dense:"",outlined:"",placeholder:t.isShipMode?"例: 春雨":"例: 12.7cm連装砲C型改三H","prepend-inner-icon":"mdi-magnify"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),e("div",{staticClass:"full-table-container"},[e(Q.Z,{attrs:{dense:""}},[e("tbody",[t._l(t.fullTable.items,(function(a,s){return[!t.keyword||a.data.name.indexOf(t.keyword)>=0?e("tr",{key:s,staticClass:"clickable",on:{click:function(e){return t.clickedRaw(a.data,e)}}},[e("td",{staticClass:"py-1 px-0 text-right rank-td"},[t._v(t._s(s+1))]),e("td",{staticClass:"py-1 pr-0"},[e("div",{staticClass:"d-flex align-center"},[t.isShipMode?[e("div",[a.data.id?e(d.Z,{attrs:{src:`./img/ship/${a.data.id}.png`,height:"30",width:"120"}}):t._e()],1),e("div",{staticClass:"ml-1 ship-name text-caption text-truncate"},[t._v(t._s(t.getShipName(a.data)))])]:[e("div",[a.data.id?e(d.Z,{attrs:{src:`./img/type/icon${a.data.iconTypeId}.png`,height:"30",width:"30"}}):t._e()],1),e("div",{staticClass:"ml-1 ship-name text-caption text-truncate"},[t._v(t._s(t.needTrans?t.$t(`${a.data.name}`):a.data.name))]),t.selectedRemodel>=1?e("div",[e(c.Z,{attrs:{"x-small":"",color:"teal accent-4"}},[t._v("mdi-star")]),e("span",{staticClass:"teal--text text--accent-4"},[t._v(t._s(t.selectedRemodel))])],1):t._e()]],2)]),e("td",{staticClass:"pl-0 py-1 text-right value-td"},[t._v(t._s(a.value))])]):t._e()]}))],2)])],1)],1)],1),e(n.Z,{attrs:{width:"500",fullscreen:t.isMobile},model:{value:t.fullDeviationDialog,callback:function(e){t.fullDeviationDialog=e},expression:"fullDeviationDialog"}},[e(l.Z,{staticClass:"full-table-card"},[e("div",{staticClass:"pt-2 pb-1 px-2 d-flex align-center"},[e("div",[t._v(t._s(t.$t("Database.艦娘偏差値")))]),e(i.Z,{staticClass:"ml-auto",attrs:{icon:""},on:{click:function(e){t.fullDeviationDialog=!1}}},[e(c.Z,[t._v("mdi-close")])],1)],1),e(r.Z),e("div",{staticClass:"pa-1"},[e(b.Z,{attrs:{clearable:"","hide-details":"",dense:"",outlined:"",placeholder:t.isShipMode?"例: 春雨":"例: 12.7cm連装砲C型改三H","prepend-inner-icon":"mdi-magnify"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),e("div",{staticClass:"full-table-container"},[e(Q.Z,{attrs:{dense:""}},[e("tbody",[t._l(t.deviations,(function(a,s){return[!t.keyword||a.data.name.indexOf(t.keyword)>=0?e("tr",{key:s,staticClass:"clickable",on:{click:function(e){return t.clickedRaw(a.data,e)}}},[e("td",{staticClass:"text-right"},[t._v(t._s(s+1))]),e("td",{staticClass:"px-0"},[e("div",{staticClass:"d-flex align-center"},[e("div",[a.data.id?e(d.Z,{attrs:{src:`./img/ship/${a.data.id}.png`,height:"30",width:"120"}}):t._e()],1),e("div",{staticClass:"ml-1 ship-name text-caption text-truncate"},[t._v(t._s(t.getShipName(a.data)))])])]),e("td",{staticClass:"text-right"},[t._v(t._s(a.level))]),e("td",{staticClass:"text-right"},[e(Ce.Z,{attrs:{small:"",color:a.color,light:a.isLight,dark:a.isDark}},[t._v(" "+t._s(a.deviation.toFixed(1))+" ")])],1)]):t._e()]}))],2)])],1)],1)],1),e(n.Z,{attrs:{width:"360"},model:{value:t.detailDialog,callback:function(e){t.detailDialog=e},expression:"detailDialog"}},[e(l.Z,[t.detailData.data?e("div",{staticClass:"pt-2 pb-1 px-2 d-flex align-center"},[e("div",{staticClass:"d-flex align-center flex-grow-1"},[t.isShipMode?[e("div",[t.detailData.data.id?e(d.Z,{attrs:{src:`./img/ship/${t.detailData.data.id}.png`,height:"30",width:"120"}}):t._e()],1),e("div",{staticClass:"ml-1 detail-name text-caption text-sm-body-2 text-truncate"},[t._v(t._s(t.getShipName(t.detailData.data)))])]:[e("div",[t.detailData.data.id?e(d.Z,{attrs:{src:`./img/type/icon${t.detailData.data.iconTypeId}.png`,height:"30",width:"30"}}):t._e()],1),e("div",{staticClass:"ml-1 detail-name text-caption text-truncate"},[t._v(" "+t._s(t.needTrans?t.$t(`${t.detailData.data.name}`):t.detailData.data.name)+" ")])]],2),e(i.Z,{staticClass:"ml-auto",attrs:{icon:""},on:{click:function(e){t.detailDialog=!1}}},[e(c.Z,[t._v("mdi-close")])],1)],1):t._e(),e(r.Z,{staticClass:"mx-3"}),e("div",{staticClass:"px-1"},[t.detailData.items?e(Se.Z,[t._l(t.detailData.items,(function(a,s){return[e($e.Z,{key:`body${s}`,attrs:{align:"end"}},[e(ye.Z,{staticClass:"text-body-2 text-no-wrap"},[t._v(t._s(t.$t(`Database.${a.header}`)))]),e(ye.Z,{staticClass:"text-right"},[t._v(t._s(a.value))])],1),e(r.Z,{key:`line${s}`,staticClass:"mb-1"})]})),t.isShipMode?e($e.Z,{attrs:{align:"end"}},[e(ye.Z,{staticClass:"text-body-2 text-no-wrap"},[t._v(t._s(t.$t("Database.Lv偏差値計算")))]),e(ye.Z,[e(b.Z,{attrs:{type:"number","hide-details":"",label:"Lv",max:t.maxLevel,min:"1"},model:{value:t.manualLevel,callback:function(e){t.manualLevel=e},expression:"manualLevel"}})],1),e(ye.Z,{staticClass:"text-right"},[t._v(t._s(t.deviationValue))])],1):t._e(),!t.isShipMode&&t.detailData.levels?[t._l(11,(function(a){return[e($e.Z,{key:`remodel_${a}`,staticClass:"ml-1",attrs:{align:"center"}},[e(ye.Z,{staticClass:"text-no-wrap"},[e(c.Z,{attrs:{small:"",color:"teal accent-4"}},[t._v("mdi-star")]),e("span",{staticClass:"teal--text text--accent-4"},[t._v("+ "+t._s(a-1))])],1),e(ye.Z,{staticClass:"text-right text--secondary"},[t._v(t._s(t.detailData.levels[a-1].toLocaleString()))])],1),e("div",{key:`bar${a}`,staticClass:"mb-1 ml-3"},[e(p.Z,{attrs:{height:"1px",color:"grey",value:Math.floor(t.detailData.levels[a-1]/t.detailData.totalCount*100)}})],1)]}))]:t._e()],2):t._e()],1)],1)],1)],2)},Ze=[],De=a(7632),Le=a(3567),Re=a(6961),Ie=a(65),Te=a(7663),Pe=C.ZP.extend({name:"FleetStatics",components:{},data:()=>({isShipMode:!0,allShipMaster:[],allItemMaster:[],itemStock:[],shipStock:[],shipTypes:[],shipType:-1,itemTypes:[],itemType:-1,selectedRemodel:-1,includeInitial:!0,includeIntermediate:!0,includeFinal:!0,unsubscribe:void 0,enabledTooltip:!1,tooltipTimer:void 0,tooltipX:0,tooltipY:0,readOnly:!1,isMobile:!0,fullTable:{},fullTableDialog:!1,fullDeviationDialog:!1,detailDialog:!1,manualLevel:99,maxLevel:wt.ZP.MAX_LEVEL,detailData:{},analyzeResult:{ships:[],items:[],avgTotalExp:0,divTotalExp:0,medTotalExp:0,avgImproveAsw:0,medImproveAsw:0,divImproveAsw:0,avgImproveLuck:0,medImproveLuck:0,divImproveLuck:0,avgImproveHP:0,medImproveHP:0,divImproveHP:0,avgMaruyu:0,medMaruyu:0,divMaruyu:0,itemCount:0,shipCount:0},viewTables:[],keyword:"",deviations:[],convertRemodelResults:[],deviationTable:[],loading:!1,confirmDialog:!1,isSubmitted:!1,errorDialog:!1}),mounted(){this.$store.getters.getExistsTempStock&&(this.readOnly=!0),this.initialize(),this.unsubscribe=this.$store.subscribe(((t,e)=>{"setItemStock"===t.type?(this.itemStock=e.itemStock,this.setItemTables(),this.isSubmitted=!1):"setShipStock"===t.type&&(this.shipStock=e.shipStock,this.setShipTables(),this.isSubmitted=!1)}))},watch:{completed(t){!t||this.allItemMaster.length||this.allShipMaster.length||this.initialize()},isTempStockMode(t){this.readOnly=!!t,this.initialize()}},computed:{completed(){return this.$store.getters.getCompletedAll},isTempStockMode(){return this.$store.getters.getExistsTempStock},isNotJapanese(){return"ja"!==this.$i18n.locale},needTrans(){const t=this.$store.state.siteSetting;return"ja"!==this.$i18n.locale&&!t.nameIsNotTranslate},deviationValue(){if(this.manualLevel&&this.detailData.divLevel&&this.detailData.avgLevel){if(this.manualLevel<=0||this.manualLevel>this.maxLevel)return"-";const t=Math.min(this.maxLevel,+this.manualLevel);return((t-this.detailData.avgLevel)/this.detailData.divLevel*10+50).toFixed(1)}return"-"},deviationTop10s(){return this.deviations.slice(0,10)},errorRemodel(){return!this.includeInitial&&!this.includeIntermediate&&!this.includeFinal},hasManualData(){return!!(this.shipStock&&this.shipStock.length&&this.shipStock.some((t=>t.isManualInput)))||!(!this.itemStock||!this.itemStock.length)&&this.itemStock.some((t=>t.isManualInput))}},beforeDestroy(){this.unsubscribe&&this.unsubscribe()},methods:{initialize(){this.allItemMaster=this.$store.state.items,this.allItemMaster=this.allItemMaster.filter((t=>!t.isEnemyItem)),this.itemStock=this.$store.state.itemStock,this.allShipMaster=this.$store.state.ships,this.shipStock=this.$store.state.shipStock,this.readOnly&&(this.itemStock=this.$store.state.tempItemStock,this.shipStock=this.$store.state.tempShipStock),this.shipTypes=[];for(let t=0;t<wt.ZP.SHIP_TYPES_ALT2.length;t+=1){const e=wt.ZP.SHIP_TYPES_ALT2[t];this.shipTypes.push({text:e.text,types:e.types})}this.itemTypes=[];for(let t=0;t<wt.ZP.ITEM_TYPES_ALT.length;t+=1){const e=wt.ZP.ITEM_TYPES_ALT[t];this.itemTypes.push({id:e.id,types:e.types})}},async fetchAnalyticsResult(){this.loading=!0;const t=(0,Ie.v0)();await(0,Ie.XB)(t);const e=(0,Te.N8)();(0,Te.jM)((0,Te.iH)(e,"/analyze_result"),(t=>{const e=t.val(),a=(0,Re.decompressFromEncodedURIComponent)(e);if(a){const t=JSON.parse(a);this.analyzeResult={avgTotalExp:t.avgTotalExp??0,medTotalExp:t.medTotalExp??0,divTotalExp:t.divTotalExp??0,avgImproveAsw:t.avgImproveAsw??0,medImproveAsw:t.medImproveAsw??0,divImproveAsw:t.divImproveAsw??0,avgImproveLuck:t.avgImproveLuck??0,medImproveLuck:t.medImproveLuck??0,divImproveLuck:t.divImproveLuck??0,avgImproveHP:t.avgImproveHP??0,medImproveHP:t.medImproveHP??0,divImproveHP:t.divImproveHP??0,avgMaruyu:t.avgMaruyu??0,medMaruyu:t.medMaruyu??0,divMaruyu:t.divMaruyu??0,itemCount:t.itemCount??0,items:t.is.map((t=>{const e=this.allItemMaster.find((e=>e.id===t.i))??new ge.Z;return{id:t.i,data:e,onceCount:t.oc,totalCount:t.tc,levels:t.rm,maxCount:t.mx,maxCounts:t.ms}})),shipCount:t.shipCount??0,ships:t.ss.map((t=>{const e=this.allShipMaster.find((e=>e.id===t.i))??new Zt.Z;return{id:t.i,data:e,totalCount:t.tc,maxCount:t.mx,totalImproveHP:t.hp,totalImproveASW:t.as,totalImproveLuck:t.lu,releaseExCount:t.rc,totalSeaRibbonCount:t.sc,totalWhiteTasukiCount:t.wt,onceMarriageCount:t.mc,onceCount:t.oc,avgLevel:t.av,divLevel:t.dv,medLevel:t.md,maxExp:t.me}}))}}else this.analyzeResult={ships:[],items:[],avgTotalExp:0,medTotalExp:0,divTotalExp:0,avgImproveAsw:0,medImproveAsw:0,divImproveAsw:0,avgImproveLuck:0,medImproveLuck:0,divImproveLuck:0,avgImproveHP:0,medImproveHP:0,divImproveHP:0,avgMaruyu:0,medMaruyu:0,divMaruyu:0,itemCount:0,shipCount:0};this.analyzeResult.shipCount||(this.errorDialog=!0),this.setItemTables(),this.setShipTables(),this.loading=!1}),{onlyOnce:!0})},async sendStockData(){if(this.loading=!0,this.hasManualData)return this.loading=!1,void(this.confirmDialog=!1);const t=this.$store.state.shipStock,e=this.$store.state.itemStock,a=Le.Z.createFirebaseStockObject(t,e);if(this.isTempStockMode||!a.ships&&!a.items)this.loading=!1;else try{const t=(0,Te.N8)(),e=(0,Ie.v0)();(0,Ie.XB)(e).then((()=>{const e=this.$store.state.siteSetting;e.userId||(e.userId=(0,De.Z)()),(0,Te.t8)((0,Te.iH)(t,`user_stocks/${e.userId}`),{ships:a.ships,items:a.items,date:qt.Z.formatDate(new Date,"yy/MM/dd HH:mm:ss")}).then((()=>{this.$store.dispatch("updateSetting",e),this.loading=!1,this.isSubmitted=!0,this.confirmDialog=!1})).catch((t=>{console.error(t),this.loading=!1}))})).catch((t=>{console.error(t),this.loading=!1}))}catch(s){console.error(s),this.loading=!1}},changeShipType(t=0){this.shipType=t,this.setShipTables()},changeItemType(t=0){this.itemType=t,this.setItemTables()},changeRemodel(t=0){this.selectedRemodel=t,this.setItemTables()},setShipTables(){this.isMobile=window.innerWidth<600,this.isShipMode=!0,this.viewTables=[];const t=this.analyzeResult.shipCount;let e=this.analyzeResult.ships.concat();const a=this.shipTypes[this.shipType];a&&(e=e.filter((t=>a.types.includes(t.data.type)))),this.includeInitial||(e=e.filter((t=>0!==t.data.version||t.data.isFinal))),this.includeIntermediate||(e=e.filter((t=>0===t.data.version||t.data.isFinal))),this.includeFinal||(e=e.filter((t=>!t.data.isFinal)));const s=-1===this.shipType?400:500;e.sort(((t,e)=>e.onceCount-t.onceCount)),this.viewTables.push({title:"在籍率",top10:e.slice(0,10).map((e=>({data:e.data,value:`${(e.onceCount/t*100).toFixed(1)} %`}))),items:e.slice(0,s).map((e=>({data:e.data,value:`${(e.onceCount/t*100).toFixed(1)} %`})))}),e.sort(((t,e)=>e.totalCount-t.totalCount)),this.viewTables.push({title:"総在籍数",top10:e.slice(0,10).map((t=>({data:t.data,value:t.totalCount.toLocaleString()}))),items:e.slice(0,s).map((t=>({data:t.data,value:t.totalCount.toLocaleString()})))}),this.viewTables.push({title:"平均在籍数",top10:e.slice(0,10).map((e=>({data:e.data,value:(e.totalCount/t).toFixed(1)}))),items:e.map((e=>({data:e.data,value:(e.totalCount/t).toFixed(1)})))}),e.sort(((t,e)=>e.maxCount-t.maxCount)),this.viewTables.push({title:"最多在籍数",top10:e.slice(0,10).map((t=>({data:t.data,value:t.maxCount.toLocaleString()}))),items:e.slice(0,s).map((t=>({data:t.data,value:t.maxCount.toLocaleString()})))}),e.sort(((t,e)=>e.maxExp-t.maxExp)),this.viewTables.push({title:"最多EXP",top10:e.slice(0,10).map((t=>({data:t.data,value:t.maxExp.toLocaleString()}))),items:e.slice(0,s).map((t=>({data:t.data,value:t.maxExp.toLocaleString()})))}),e.sort(((t,e)=>e.onceMarriageCount-t.onceMarriageCount)),this.viewTables.push({title:"ケッコン率",top10:e.filter((t=>t.onceMarriageCount)).slice(0,10).map((e=>({data:e.data,value:`${(e.onceMarriageCount/t*100).toFixed(1)} %`}))),items:e.filter((t=>t.onceMarriageCount)).slice(0,s).map((e=>({data:e.data,value:`${(e.onceMarriageCount/t*100).toFixed(1)} %`})))}),e.sort(((t,e)=>e.avgLevel-t.avgLevel)),this.viewTables.push({title:"Lv平均",top10:e.slice(0,10).map((t=>({data:t.data,value:t.avgLevel.toFixed(1)}))),items:e.slice(0,s).map((t=>({data:t.data,value:t.avgLevel.toFixed(1)})))}),e.sort(((t,e)=>e.medLevel-t.medLevel)),this.viewTables.push({title:"Lv中央値",top10:e.slice(0,10).map((t=>({data:t.data,value:t.medLevel}))),items:e.slice(0,s).map((t=>({data:t.data,value:t.medLevel})))}),e.sort(((t,e)=>e.releaseExCount/e.totalCount-t.releaseExCount/t.totalCount)),this.viewTables.push({title:"補強増設開放率",top10:e.filter((t=>t.releaseExCount)).slice(0,10).map((t=>({data:t.data,value:`${(t.releaseExCount/t.totalCount*100).toFixed(1)} %`}))),items:e.filter((t=>t.releaseExCount)).slice(0,s).map((t=>({data:t.data,value:`${(t.releaseExCount/t.totalCount*100).toFixed(1)} %`})))}),e.sort(((t,e)=>e.totalSeaRibbonCount-t.totalSeaRibbonCount)),this.viewTables.push({title:"海色リボン付与数",top10:e.filter((t=>t.totalSeaRibbonCount)).slice(0,10).map((t=>({data:t.data,value:t.totalSeaRibbonCount.toLocaleString()}))),items:e.filter((t=>t.totalSeaRibbonCount)).slice(0,s).map((t=>({data:t.data,value:t.totalSeaRibbonCount.toLocaleString()})))}),e.sort(((t,e)=>e.totalWhiteTasukiCount-t.totalWhiteTasukiCount)),this.viewTables.push({title:"白たすき付与数",top10:e.filter((t=>t.totalWhiteTasukiCount)).slice(0,10).map((t=>({data:t.data,value:t.totalWhiteTasukiCount.toLocaleString()}))),items:e.filter((t=>t.totalWhiteTasukiCount)).slice(0,s).map((t=>({data:t.data,value:t.totalWhiteTasukiCount.toLocaleString()})))}),e.sort(((t,e)=>e.totalImproveLuck-t.totalImproveLuck)),this.viewTables.push({title:"総運改修値",top10:e.filter((t=>t.totalImproveLuck)).slice(0,10).map((t=>({data:t.data,value:t.totalImproveLuck.toLocaleString()}))),items:e.filter((t=>t.totalImproveLuck)).slice(0,s).map((t=>({data:t.data,value:t.totalImproveLuck.toLocaleString()})))}),e.sort(((t,e)=>e.totalImproveHP-t.totalImproveHP)),this.viewTables.push({title:"総耐久改修値",top10:e.filter((t=>t.totalImproveHP)).slice(0,10).map((t=>({data:t.data,value:t.totalImproveHP.toLocaleString()}))),items:e.filter((t=>t.totalImproveHP)).slice(0,s).map((t=>({data:t.data,value:t.totalImproveHP.toLocaleString()})))}),e.sort(((t,e)=>e.totalImproveASW-t.totalImproveASW)),this.viewTables.push({title:"総対潜改修値",top10:e.filter((t=>t.totalImproveASW)).slice(0,10).map((t=>({data:t.data,value:t.totalImproveASW.toLocaleString()}))),items:e.filter((t=>t.totalImproveASW)).slice(0,s).map((t=>({data:t.data,value:t.totalImproveASW.toLocaleString()})))}),this.setDeviations(),this.extendAnalyze()},setDeviations(){const t=this.shipStock;this.deviations=[],this.deviationTable=[];let e=0,a=0,s=0,i=0,l=0,o=0;if(!t.length)return;const n=this.shipTypes[this.shipType];for(let c=0;c<t.length;c+=1){const r=t[c],d=this.allShipMaster.find((t=>t.id===r.id));e+=r.exp,a+=r.improvement.hp,s+=r.improvement.asw,i+=r.improvement.luck,l+=r.level>99?1:0,o+=163===r.id||402===r.id?1:0;const p=this.analyzeResult.ships.find((t=>t.id===r.id));if(!d||!p)continue;if(n&&!n.types.includes(d.type))continue;if(!this.includeInitial&&0===d.version)continue;if(!this.includeIntermediate&&0!==d.version&&!d.isFinal)continue;if(!this.includeFinal&&d.isFinal)continue;if(this.deviations.some((t=>t.data.id===r.id&&t.level===r.level)))continue;const h=(r.level-p.avgLevel)/p.divLevel*10+50;this.deviations.push({data:d,level:r.level,deviation:h,color:this.getChipColor(h),isLight:h<=55&&h>38,isDark:h>55||h<=38})}const r=Math.max(Math.floor(o+(i-4.5*l)/1.6),0);this.deviations.sort(((t,e)=>e.deviation-t.deviation)),this.analyzeResult.divTotalExp&&this.deviationTable.push({title:"総経験値",avg:this.analyzeResult.avgTotalExp,med:this.analyzeResult.medTotalExp,value:e,deviation:(e-this.analyzeResult.avgTotalExp)/this.analyzeResult.divTotalExp*10+50}),this.analyzeResult.divImproveLuck&&this.deviationTable.push({title:"総運改修値",avg:this.analyzeResult.avgImproveLuck,med:this.analyzeResult.medImproveLuck,value:i,deviation:(i-this.analyzeResult.avgImproveLuck)/this.analyzeResult.divImproveLuck*10+50}),this.analyzeResult.divImproveHP&&this.deviationTable.push({title:"総耐久改修値",avg:this.analyzeResult.avgImproveHP,med:this.analyzeResult.medImproveHP,value:a,deviation:(a-this.analyzeResult.avgImproveHP)/this.analyzeResult.divImproveHP*10+50}),this.analyzeResult.divImproveAsw&&this.deviationTable.push({title:"総対潜改修値",avg:this.analyzeResult.avgImproveAsw,med:this.analyzeResult.medImproveAsw,value:s,deviation:(s-this.analyzeResult.avgImproveAsw)/this.analyzeResult.divImproveAsw*10+50}),this.analyzeResult.divMaruyu&&this.deviationTable.push({title:"まるゆ指数",avg:this.analyzeResult.avgMaruyu,med:this.analyzeResult.medMaruyu,value:r,deviation:(r-this.analyzeResult.avgMaruyu)/this.analyzeResult.divMaruyu*10+50})},extendAnalyze(){this.convertRemodelResults=[];const t=Zt.Z.getConvertOriginalShips(this.allShipMaster).map((t=>t.id)),e=this.allShipMaster.filter((e=>t.includes(e.originalId)&&e.isFinal));for(let a=0;a<t.length;a+=1){const s=t[a],i=e.find((t=>t.originalId===s));if(!i)continue;const l=[],o=e.filter((t=>t.originalId===s));let n=0;for(let t=0;t<o.length;t+=1){const e=o[t];if(184===e.id)continue;const a=this.analyzeResult.ships.find((t=>t.id===e.id));a&&(l.push(a),n+=a.totalCount)}const r=l.map((t=>({data:t.data,rate:Math.round(100*t.totalCount/n)})));r.sort(((t,e)=>e.rate-t.rate)),this.convertRemodelResults.push({base:i,versions:r})}this.convertRemodelResults.sort(((t,e)=>t.versions.length!==e.versions.length?t.versions.length-e.versions.length:t.base.type-e.base.type))},setItemTables(){this.isMobile=window.innerWidth<600,this.isShipMode=!1,this.viewTables=[];const t=this.analyzeResult.itemCount;let e=this.analyzeResult.items.concat();const a=this.itemTypes.find((t=>t.id===this.itemType));a&&(e=e.filter((t=>a.types.includes(t.data.apiTypeId)))),-1===this.selectedRemodel?(e.sort(((t,e)=>e.onceCount-t.onceCount)),this.viewTables.push({title:"所持率",top10:e.slice(0,10).map((e=>({data:e.data,value:`${(e.onceCount/t*100).toFixed(1)} %`}))),items:e.map((e=>({data:e.data,value:`${(e.onceCount/t*100).toFixed(1)} %`})))}),e.sort(((t,e)=>e.totalCount-t.totalCount)),this.viewTables.push({title:"総在庫数",top10:e.slice(0,10).map((t=>({data:t.data,value:t.totalCount.toLocaleString()}))),items:e.map((t=>({data:t.data,value:t.totalCount.toLocaleString()})))}),this.viewTables.push({title:"平均所持数",top10:e.slice(0,10).map((e=>({data:e.data,value:(e.totalCount/t).toFixed(1)}))),items:e.map((e=>({data:e.data,value:(e.totalCount/t).toFixed(1)})))}),e.sort(((t,e)=>e.maxCount-t.maxCount)),this.viewTables.push({title:"最多所持数",top10:e.slice(0,10).map((t=>({data:t.data,value:t.maxCount.toLocaleString()}))),items:e.filter((t=>t.maxCount)).map((t=>({data:t.data,value:t.maxCount.toLocaleString()})))})):(e.sort(((t,e)=>e.levels[this.selectedRemodel]-t.levels[this.selectedRemodel])),this.viewTables.push({title:"総在庫数",top10:e.filter((t=>t.levels[this.selectedRemodel])).slice(0,10).map((t=>({data:t.data,value:t.levels[this.selectedRemodel]}))),items:e.filter((t=>t.levels[this.selectedRemodel])).slice(0,300).map((t=>({data:t.data,value:t.levels[this.selectedRemodel]})))}),this.viewTables.push({title:"平均所持数",top10:e.filter((t=>t.levels[this.selectedRemodel])).slice(0,10).map((e=>({data:e.data,value:(e.levels[this.selectedRemodel]/t).toFixed(2)}))),items:e.filter((t=>t.levels[this.selectedRemodel])).slice(0,300).map((e=>({data:e.data,value:(e.levels[this.selectedRemodel]/t).toFixed(2)})))}),e.sort(((t,e)=>e.maxCounts[this.selectedRemodel]-t.maxCounts[this.selectedRemodel])),this.viewTables.push({title:"最多所持数",top10:e.filter((t=>t.maxCounts[this.selectedRemodel])).slice(0,10).map((t=>({data:t.data,value:t.maxCounts[this.selectedRemodel].toLocaleString()}))),items:e.filter((t=>t.maxCounts[this.selectedRemodel])).map((t=>({data:t.data,value:t.maxCounts[this.selectedRemodel].toLocaleString()})))}))},showFullTable(t){this.isMobile=window.innerWidth<600,this.fullTable=t,this.fullTableDialog=!0},showFullDeviationTable(){this.isMobile=window.innerWidth<600,this.fullDeviationDialog=!0},translate(t){return t?`${this.$t(t)}`:""},getShipName(t){if(this.needTrans){const e=Zt.Z.getSuffix(t);return`${e.map((t=>this.translate(t))).join("")}`}return t.name?t.name:""},getChipColor(t){return t>80?"indigo":t>70?"blue darken-3":t>65?"blue":t>60?"teal":t>55?"green":t>53?"lime":t>47?"yellow":t>45?"amber":t>38?"orange":t>30?"deep-orange":"error"},clickedRaw(t,e){if(!this.isShipMode&&e&&e.ctrlKey&&t&&t instanceof ge.Z&&!t.isEnemyItem)return void window.open(ge.Z.getWikiURL(t));const a=this.isShipMode?this.analyzeResult.ships.find((e=>e.id===t.id)):this.analyzeResult.items.find((e=>e.id===t.id));a&&(a.data=t,this.detailData={data:t,items:[]},this.isShipMode&&"releaseExCount"in a?(this.detailData.items.push({header:"在籍率",value:`${(a.onceCount/this.analyzeResult.shipCount*100).toFixed(1)} %`}),this.detailData.items.push({header:"ケッコン率",value:`${(a.onceMarriageCount/this.analyzeResult.shipCount*100).toFixed(1)} %`}),this.detailData.items.push({header:"総在籍数",value:a.totalCount.toLocaleString()}),this.detailData.items.push({header:"最多在籍数",value:a.maxCount.toLocaleString()}),this.detailData.items.push({header:"補強増設開放数",value:a.releaseExCount.toLocaleString()}),this.detailData.items.push({header:"総運改修値",value:a.totalImproveLuck.toLocaleString()}),this.detailData.items.push({header:"総耐久改修値",value:a.totalImproveHP.toLocaleString()}),this.detailData.items.push({header:"総対潜改修値",value:a.totalImproveASW.toLocaleString()}),this.detailData.items.push({header:"Lv平均",value:a.avgLevel.toLocaleString()}),this.detailData.items.push({header:"Lv標準偏差",value:a.divLevel.toLocaleString()}),this.detailData.avgLevel=a.avgLevel,this.detailData.divLevel=a.divLevel):!this.isShipMode&&"levels"in a&&(this.detailData.items.push({header:"所持率",value:`${(a.onceCount/this.analyzeResult.itemCount*100).toFixed(1)} %`}),this.detailData.items.push({header:"平均所持数",value:(a.totalCount/this.analyzeResult.itemCount).toFixed(1)}),this.detailData.items.push({header:"最多所持数",value:a.maxCount.toLocaleString()}),this.detailData.items.push({header:"総在庫数",value:a.totalCount.toLocaleString()}),this.detailData.totalCount=a.totalCount,this.detailData.levels=a.levels),this.isMobile=window.innerWidth<600,this.detailDialog=!0)}}}),Me=Pe,Ae=(0,vt.Z)(Me,we,Ze,!1,null,"1c2f79e6",null),Ee=Ae.exports,He=a(7327);class Fe{constructor(){(0,He.Z)(this,"id",0),(0,He.Z)(this,"key",""),(0,He.Z)(this,"remarks",""),(0,He.Z)(this,"createdAt",qt.Z.formatDate(new Date,"yyyy/MM/dd HH:mm:ss"))}}var Ne=C.ZP.extend({name:"FleetManager",components:{Ships:ce,Items:_e,FleetStatics:Ee},data:()=>({tab:0,includeUnLockedShip:!0,includeUnLockedItem:!1,inputText:"",readOnlyMode:!1,loadingURL:!1,createdURL:"",copiedURLHint:"",outputHistories:[],confirmDialog:!1,deleteId:-1,expandBtnClicked:!1,kantaiAnalyticsShipsCode:"",kantaiAnalyticsItemsCode:"",copiedShipCodeHint:"",copiedItemCodeHint:"",unsubscribe:void 0,kantaiSarashiURL:"",loading:!1,successCopy:!1,showHowToDoIt:!1,areaOverwriteConfirmDialog:!1,readyImportShipStock:[],maxLevel:wt.ZP.MAX_LEVEL,importMinLevel:1,yearTab:0}),mounted(){const t=this.$store.state.saveData;t.disabledMain(),this.readOnlyMode=this.$store.getters.getExistsTempStock;const e=this.$store.state.outputHistories;e&&e.length&&(this.outputHistories=e.concat()),this.generateKCAnalyticsCode(),this.generateKantaiSarashiURL(),this.unsubscribe=this.$store.subscribe((t=>{"setShipStock"!==t.type&&"setItemStock"!==t.type||(this.expandBtnClicked=!1,this.generateKCAnalyticsCode(),this.generateKantaiSarashiURL())})),this.loading=!this.$store.getters.getCompletedAll;const a=this.$store.state.siteSetting;this.includeUnLockedShip=a.isIncludeUnLockShip,this.includeUnLockedItem=a.isIncludeUnLockItem,this.importMinLevel=a.importShipMinLevel;const s=this.$store.state.shipStock,i=this.$store.state.itemStock;this.readOnlyMode||s.length||i.length||(this.tab=2,this.showHowToDoIt=!0),window.scroll({top:0,behavior:"smooth"})},computed:{completed(){return this.$store.getters.getCompletedAll},isTempStockMode(){return this.$store.getters.getExistsTempStock},years(){const t=[];for(let e=0;e<this.outputHistories.length;e+=1){const a=this.outputHistories[e].createdAt,s=a&&+a.slice(0,4);s&&!t.some((t=>t===s))&&t.push(s)}return t}},watch:{completed(t){if(t){this.loading=!1;const t=this.$store.state.outputHistories;t&&t.length&&(this.outputHistories=t.concat()),this.generateKCAnalyticsCode(),this.generateKantaiSarashiURL()}},isTempStockMode(t){this.readOnlyMode=!!t,this.expandBtnClicked=!1,this.generateKCAnalyticsCode(),this.generateKantaiSarashiURL()}},beforeDestroy(){this.unsubscribe&&this.unsubscribe()},methods:{readJson(){if(this.setShipStock()){if(this.areaOverwriteConfirmDialog)return void(this.inputText="");this.$emit("inform","在籍艦娘データの更新が完了しました。"),this.loadingURL=!1}else this.setItemStock()?(this.$emit("inform","所持装備データの更新が完了しました。"),this.loadingURL=!1):this.$emit("inform","データの読み込みに失敗しました。正しいデータではない可能性があります。",!0);this.inputText="",this.generateKCAnalyticsCode(),this.generateKantaiSarashiURL()},overwriteAreaImport(){this.readyImportShipStock&&(this.$store.dispatch("updateShipStock",this.readyImportShipStock),this.areaOverwriteConfirmDialog=!1,this.$emit("inform","在籍艦娘データの更新が完了しました。"),this.inputText="",this.generateKCAnalyticsCode(),this.generateKantaiSarashiURL())},importWithoutArea(){if(this.readyImportShipStock){const t=this.$store.state.shipStock;for(let e=0;e<this.readyImportShipStock.length;e+=1){const a=this.readyImportShipStock[e],s=t.find((t=>t.uniqueId===a.uniqueId));s&&(a.area=s.area)}this.$store.dispatch("updateShipStock",this.readyImportShipStock),this.areaOverwriteConfirmDialog=!1,this.$emit("inform","在籍艦娘データの更新が完了しました。"),this.inputText="",this.generateKCAnalyticsCode(),this.generateKantaiSarashiURL()}},setShipStock(){try{!this.importMinLevel||this.importMinLevel<0?this.importMinLevel=1:this.importMinLevel>this.maxLevel&&(this.importMinLevel=this.maxLevel);const t=qt.Z.readShipStockJson(this.inputText,!this.includeUnLockedShip,this.importMinLevel);if(this.readyImportShipStock=[],0===t.length)return!1;const e=this.$store.state.siteSetting;e.isStockOnlyForShipList=!0,e.importShipMinLevel=this.importMinLevel,this.$store.dispatch("updateSetting",e);const a=this.$store.state.shipStock;return a.length&&a[a.length-1].uniqueId!==a.length&&t[t.length-1].uniqueId!==t.length&&t.some((t=>a.find((e=>e.uniqueId===t.uniqueId&&e.area!==t.area))))?(this.areaOverwriteConfirmDialog=!0,this.readyImportShipStock=t,!0):(this.$store.dispatch("updateShipStock",t),!0)}catch(t){return console.error(t),!1}},setItemStock(){try{const t=qt.Z.readItemStockJson(this.inputText,!this.includeUnLockedItem);if(0===t.length)return!1;const e=this.$store.state.siteSetting;return e.isStockOnlyForItemList=!0,this.$store.dispatch("updateSetting",e),this.$store.dispatch("updateItemStock",t),!0}catch(t){return console.error(t),!1}},async requestURLKey(){this.loadingURL=!0;const t=this.$store.state.shipStock,e=this.$store.state.itemStock,a=Le.Z.createFirebaseStockObject(t,e);if(!a.ships&&!a.items)return void this.$emit("inform","艦娘、装備情報が登録されていません。",!0);const s={ships:a.ships,items:a.items,date:qt.Z.formatDate(new Date,"yy/MM/dd HH:mm:ss"),uid:"",ver:3};try{const t=(0,Te.N8)(),{key:e}=(0,Te.VF)((0,Te.iU)((0,Te.iH)(t),"stocks"));if(!e)return void this.$emit("inform","共有URLの生成に失敗しました。",!0);const{location:a}=document,i=`${a.protocol}//${a.host}${a.pathname}?stockid=${e}`,l=(0,Ie.v0)();(0,Ie.XB)(l).then((a=>{a&&a.user&&a.user.uid&&(s.uid=a.user.uid),(0,Te.t8)((0,Te.iH)(t,`stocks/${e}`),s).then((()=>{this.generateShortURL(i).then((t=>{t?this.createHistory(e):this.$emit("inform","共有URLの生成に失敗しました。",!0)}))})).catch((t=>{console.error(t),this.$emit("inform","共有URLの生成に失敗しました。",!0)}))})).catch((t=>{console.error(t),this.$emit("inform","共有URLの生成に失敗しました。",!0)}))}catch(i){console.error(i),this.$emit("inform","共有URLの生成に失敗しました。",!0)}},async generateShortURL(t){let e=!1;const a=await Le.Z.getShortURL(t);return a?(this.createdURL=a,this.loadingURL=!1,e=!0):(this.createdURL="URLの発行に失敗しました",this.loadingURL=!1),e},createHistory(t){const e=this.$store.state.outputHistories,a=S()(e.map((t=>t.id)))||0,s=e.concat(),i=new Fe;i.id=a+1,i.key=t,s.push(i),this.outputHistories=s,this.$store.dispatch("updateOutputHistories",s),this.$emit("inform","共有URLを生成しました。")},copyURL(){const t=document.getElementById("created-url");t.select(),document.execCommand("copy"),this.copiedURLHint="コピーされました。"},clearURLHint(){this.copiedURLHint=""},async expandHistory(t){this.expandBtnClicked=!0;const e=this.outputHistories.find((e=>e.id===t));if(e){const t=await Le.Z.getAndRestoreStockData(e.key);t.shipStocks.length||t.itemStocks.length?(this.$store.dispatch("updateTempShipStock",t.shipStocks),this.$store.dispatch("updateTempItemStock",t.itemStocks),this.$store.dispatch("updateTempDate",e.createdAt),this.$emit("inform","編成を展開しました。")):this.$emit("inform","編成の展開に失敗しました。",!0)}},clickedDeleteHistory(t){this.confirmDialog=!0,this.deleteId=t},deleteHistory(){this.confirmDialog=!1;const t=this.outputHistories.find((t=>t.id===this.deleteId));if(t){const e=this.$store.state.outputHistories,a=e.filter((e=>e.id!==t.id));this.outputHistories=a,this.$store.dispatch("updateOutputHistories",a),this.$emit("inform","出力履歴を削除しました。")}},updateHistory(t){const e=this.outputHistories.findIndex((e=>e.id===t));if(e>=0){const t=this.outputHistories[e],a=this.$store.state.outputHistories,s=a.concat();s[e]=t,this.outputHistories=s,this.$store.dispatch("updateOutputHistories",s),this.$emit("inform","更新が完了しました。")}},generateKCAnalyticsCode(){this.kantaiAnalyticsShipsCode="",this.kantaiAnalyticsItemsCode="";let t=this.$store.state.shipStock,e=this.$store.state.itemStock;this.readOnlyMode&&(t=this.$store.state.tempShipStock,e=this.$store.state.tempItemStock),this.kantaiAnalyticsShipsCode=se.Z.createFleetAnalyticsCode(t),this.kantaiAnalyticsItemsCode=ve.Z.createFleetAnalyticsCode(e)},copyShipCode(){const t=document.getElementById("analytics-ship-code");t.select(),document.execCommand("copy"),this.copiedShipCodeHint="コピーされました。"},clearShipCodeHint(){this.copiedShipCodeHint=""},copyItemCode(){const t=document.getElementById("analytics-item-code");t.select(),document.execCommand("copy"),this.copiedItemCodeHint="コピーされました。"},clearItemCodeHint(){this.copiedItemCodeHint=""},copyCode(t){const e=document.getElementById(t);e&&(e.select(),document.execCommand("copy"),this.$emit("inform","コピーされました。"),this.successCopy=!0,window.setTimeout((()=>{this.successCopy=!1}),3e3))},generateKantaiSarashiURL(){this.kantaiSarashiURL="http://kancolle-calc.net/kanmusu_list.html";let t=this.$store.state.shipStock;if(this.readOnlyMode&&(t=this.$store.state.tempShipStock),t&&t.length){const e=this.$store.state.ships,a=e.filter((t=>0===t.version)),s=[];for(let i=0;i<a.length;i+=1){const l=a[i],o=e.filter((t=>t.originalId===l.id)),n=o.map((t=>t.id)),r=t.filter((t=>n.includes(t.id)));if(r.length){const t=[];for(let a=0;a<r.length;a+=1){const s=r[a],i=e.find((t=>t.id===s.id))?.version;(i||0===i)&&t.push({lv:s.level,ver:i+1})}t.sort(((t,e)=>e.lv-t.lv)),s.push(`${699===l.id?645:l.id}:${t.map((t=>`${t.lv}.${t.ver}`)).join(",")}`)}}this.kantaiSarashiURL=`http://kancolle-calc.net/kanmusu_list.html?data=${qt.Z.encode64(`.2|${s.join("|")}`)}`}},toggleUnLocked(){const t=this.$store.state.siteSetting;t.isIncludeUnLockShip=this.includeUnLockedShip,t.isIncludeUnLockItem=this.includeUnLockedItem,this.$store.dispatch("updateSetting",t)},changeMinLevel(){const t=this.$store.state.siteSetting;this.importMinLevel>0&&this.importMinLevel<=this.maxLevel?t.importShipMinLevel=+this.importMinLevel:t.importShipMinLevel=1,this.$store.dispatch("updateSetting",t)}}}),Be=Ne,Ue=(0,vt.Z)(Be,k,_,!1,null,"d3a40508",null),Oe=Ue.exports},9787:function(t,e,a){var s=a(7762),i=NaN;function l(t,e){var a=null==t?0:t.length;return a?s(t,e)/a:i}t.exports=l},8659:function(t,e,a){var s=a(9787),i=a(6557);function l(t){return s(t,i)}t.exports=l}}]);
//# sourceMappingURL=144.03a3db52.js.map