"use strict";(self["webpackChunkkc_web"]=self["webpackChunkkc_web"]||[]).push([[971],{2783:function(t,e,i){i.d(e,{Z:function(){return u}});var s=i(6486),a=i(7525),n=i(2382),l=i(3631),o=i(6141),r=i(4026),d=i(906),c=i(3628),m=i(7777);class u{static getShipAACITriggerItems(t,e,i=!1){const s=e.filter((e=>l.Z.isValidItem(t.data,e.data))),n=u.getBestAAItem(t,s,{iconTypeId:16}),r=u.getBestAAItem(t,s,{iconTypeId:11,minAA:1}),d=u.getBestAAItem(t,s,{apiTypeId:21,isSpecial:!0}),c=t.data.id,m=[];if(54===t.data.type2){const e=u.getBestAAItem(t,s,{iconTypeId:11}),a=s.findIndex((t=>t.data.id===n.data.id&&t.remodel===n.remodel)),l=u.getBestAAItem(t,i?s.filter(((t,e)=>e!==a)):s,{iconTypeId:16});return[{id:1,items:[n,l,e]},{id:2,items:[n,e]},{id:3,items:[n,l]}]}if(428===c)return[{id:10,items:[n,r,d]},{id:11,items:[n,d]}];if(141===c){const e=u.getBestAAItem(t,s,{apiTypeId:21});return[{id:14,items:[n,r,e]},{id:15,items:[n,e]}]}if(470===c||622===c){const e=u.getBestAAItem(t,s,{apiTypeId:21});return[{id:16,items:[n,r,e]},{id:17,items:[n,e]}]}if(418===c&&m.push({id:18,items:[d]}),487===c){const e=u.getBestAAItem(t,s,{iconTypeId:16,maxAA:7});return[{id:19,items:[e,d]},{id:20,items:[d]}]}if(488===c&&m.push({id:21,items:[n,r]}),548===c&&m.push({id:22,items:[d]}),329===c||530===c){const e=u.getBestAAItem(t,s,{apiTypeId:21,maxAA:8});return[{id:22,items:[e]}]}if(478===c){const e=u.getBestAAItem(t,s,{apiTypeId:21,maxAA:8});m.push({id:22,items:[n,e]})}if([82,88,553,554].includes(c)){const e=s.find((t=>274===t.data.id))??new a.Z,i=u.getBestAAItem(t,s,{apiTypeId:18});return[{id:25,items:[r,i,e]},{id:28,items:[r,e]}]}if(148===c){const t=s.find((t=>274===t.data.id))??new a.Z;m.push({id:28,items:[r,t]})}if(557!==c&&558!==c||m.push({id:29,items:[n,r]}),477===c){const e=s.findIndex((t=>t.data.id===n.data.id&&t.remodel===n.remodel)),a=u.getBestAAItem(t,i?s.filter(((t,i)=>i!==e)):s,{iconTypeId:16}),l=s.findIndex(((t,i)=>i!==e&&t.data.id===a.data.id&&t.remodel===a.remodel)),o=u.getBestAAItem(t,i?s.filter(((t,i)=>i!==e&&i!==l)):s,{iconTypeId:16}),r=u.getBestAAItem(t,s,{apiTypeId:21,maxAA:8});return[{id:24,items:[n,r]},{id:30,items:[n,a,o]},{id:31,items:[n,a]}]}if(579===c||630===c){const e=s.findIndex((t=>t.data.id===n.data.id&&t.remodel===n.remodel)),a=u.getBestAAItem(t,i?s.filter(((t,i)=>i!==e)):s,{iconTypeId:16}),l=s.findIndex(((t,i)=>i!==e&&t.data.id===a.data.id&&t.remodel===a.remodel)),o=u.getBestAAItem(t,i?s.filter(((t,i)=>i!==e&&i!==l)):s,{iconTypeId:16}),r=u.getBestAAItem(t,s,{apiTypeId:21,minAA:4});return[{id:30,items:[n,a,o]},{id:33,items:[n,r]}]}if(o.ZP.GBR.includes(t.data.type2)||6===t.data.type2&&t.data.version>=2){const t=s.find((t=>300===t.data.id))??new a.Z,e=s.find((t=>191===t.data.id))??new a.Z,n=s.findIndex((t=>301===t.data.id)),l=s[n]??new a.Z,o=s.find(((t,e)=>301===t.data.id&&(!i||e!==n)))??new a.Z;m.push({id:32,items:[t,e]}),m.push({id:32,items:[l,e]}),m.push({id:32,items:[l,o]})}if(91===t.data.type2){const t=s.findIndex((t=>308===t.data.id))??new a.Z,e=s[t]??new a.Z,n=s.find(((e,s)=>308===e.data.id&&(!i||s!==t)))??new a.Z,l=s.findIndex((t=>313===t.data.id))??new a.Z,o=s[l]??new a.Z,r=s.find(((t,e)=>313===t.data.id&&(!i||e!==l)))??new a.Z,d=s.findIndex((t=>284===t.data.id))??new a.Z,c=s[d]??new a.Z,m=s.find(((t,e)=>284===t.data.id&&(!i||e!==d)))??new a.Z,u=s.find((t=>307===t.data.id))??new a.Z,h=[];return o.data.id&&h.push(o),r.data.id&&h.push(r),h.length<2&&c.data.id&&h.push(c),h.length<2&&h.push(m),[{id:34,items:[e,n]},{id:35,items:[e,o]},{id:36,items:h.concat(u)},{id:37,items:h}]}if(99===t.data.type2){const t=s.findIndex((t=>363===t.data.id))??new a.Z,e=s[t]??new a.Z,n=s.find(((e,s)=>363===e.data.id&&(!i||s!==t)))??new a.Z,l=s.findIndex((t=>362===t.data.id))??new a.Z,o=s[l]??new a.Z,r=s.find(((t,e)=>362===t.data.id&&(!i||e!==l)))??new a.Z,d=s.find((t=>307===t.data.id))??new a.Z,c=[];return e.data.id&&c.push(e),n.data.id&&c.push(n),c.length<2&&o.data.id&&c.push(o),c.length<2&&c.push(r),[{id:38,items:[e,n]},{id:39,items:[e,o]},{id:40,items:c.concat(d)},{id:41,items:c}]}if(546===c||911===c||916===c){const e=s.findIndex((t=>464===t.data.id))??new a.Z,n=s[e]??new a.Z,l=s.find(((t,s)=>464===t.data.id&&(!i||s!==e)))??new a.Z,o=s.find((t=>460===t.data.id))??new a.Z,d=s.find((t=>142===t.data.id))??new a.Z,c=s.find((t=>275===t.data.id))??new a.Z,m=u.getBestAAItem(t,s,{apiTypeId:21,minAA:6}),h=[n,o.data.id?o:d];return[{id:26,items:[r,c]},{id:42,items:h.concat([m,l])},{id:43,items:h.concat(l)},{id:44,items:h.concat(m)},{id:45,items:h}]}if(593===c){const t=s.find((t=>503===t.data.id))??new a.Z,e=s.find((t=>502===t.data.id))??new a.Z;m.push({id:46,items:[t.data.id?t:e,r,d]})}if(m.length<2){const e=u.getBestAAItem(t,s,{iconTypeId:16,isSpecial:!0}),a=s.findIndex((t=>t.data.id===e.data.id&&t.remodel===e.remodel)),l=u.getBestAAItem(t,i?s.filter(((t,e)=>e!==a)):s,{iconTypeId:16,isSpecial:!0});m.push({id:5,items:[e,l,r]});const o=u.getBestAAItem(t,s,{apiTypeId:36});m.push({id:7,items:[n,r,o]}),m.push({id:8,items:[e,r]}),m.push({id:9,items:[n,o]});const c=u.getBestAAItem(t,s,{apiTypeId:21,minAA:3});m.push({id:12,items:[d,r,c]}),m.push({id:13,items:[e,r,d]})}return m.filter((t=>t.items.some((t=>t.data.id))))}static getBestAAItem(t,e,i){const l=e.filter((t=>{let e=!0;return i.apiTypeId&&(e&&=t.data.apiTypeId===i.apiTypeId),i.iconTypeId&&(e&&=t.data.iconTypeId===i.iconTypeId),i.minAA&&(e&&=t.data.antiAir>=i.minAA),i.maxAA&&(e&&=t.data.antiAir<=i.maxAA),i.isSpecial&&(e&&=t.data.isSpecial),e}));let o=0,r=0,d=0,c=new a.Z;for(let a=0;a<l.length;a+=1){const e=l[a],i=n.Z.getItemBonus(t.data,[e]),m=(0,s.sum)(i.map((t=>t.antiAir??0))),u=e.antiAirBonus+(16===e.data.iconTypeId?50:10)*m,h=e.antiAirWeight+m,p=e.dayBattleFirePower+(0,s.sum)(i.map((t=>t.firePower??0)));let v=!1;(u>o||u===o&&h>r||u===o&&h===r&&p>d)&&(v=!0),v&&(o=u,r=h,d=p,c=e)}return c}static getOptimizedFighterFleet(t){const e=[],i=[],s=[],l=[];for(let a=0;a<t.length;a+=1){const n=t[a];if(!n.isEmpty&&n.isActive)for(let t=0;t<n.items.length;t+=1){const o=n.items[t];o.data.isFighter&&(6===o.data.apiTypeId?(e.push({shipIndex:a,slotIndex:t,slot:o.fullSlot}),i.push(o)):45===o.data.apiTypeId&&(s.push({shipIndex:a,slotIndex:t,slot:o.fullSlot}),l.push(o)))}}e.sort(((t,e)=>e.slot-t.slot)),s.sort(((t,e)=>e.slot-t.slot)),i.sort(((t,e)=>e.actualAntiAir-t.actualAntiAir)),l.sort(((t,e)=>e.actualAntiAir-t.actualAntiAir));for(let n=0;n<i.length;n+=1){const{shipIndex:s,slotIndex:l,slot:o}=e[n];t[s].items[l]=new a.Z({item:i[n],slot:o})}for(let n=0;n<s.length;n+=1){const{shipIndex:e,slotIndex:i,slot:o}=s[n];t[e].items[i]=new a.Z({item:l[n],slot:o})}const o=[];for(let a=0;a<t.length;a+=1){const e=t[a];o.push(new n.Z({ship:e,items:e.items}))}return o}static reflectStockData(t,e,i,s){const{airbases:a}=t.airbaseInfo,l=[];for(let n=0;n<a.length;n+=1){const t=a[n],e=[];for(let a=0;a<t.items.length;a+=1)e.push(u.getReflectedItem(t.items[a],i,s));l.push(new m.Z({airbase:t,items:e}))}const{fleets:o}=t.fleetInfo,h=[],p=[];for(let d=0;d<o.length;d+=1){const t=o[d],a=[];for(let l=0;l<t.ships.length;l+=1){const o=t.ships[l];if(!o.data.id){a.push(o);continue}let r;const d=e.filter((t=>t.id===o.data.id&&!p.includes(t.uniqueId)));if(d.length){d.sort(((t,e)=>{if(o.area&&t.area!==e.area){if(t.area===o.area)return-1;if(e.area===o.area)return 1;if(0===t.area)return-1;if(0===e.area)return 1}return t.level!==e.level||t.improvement.luck!==e.improvement.luck?e.level-t.level:t.area-e.area}));const t=d[0];r=new n.Z({ship:o,level:t.level,hp:(t.level>99?o.data.hp2:o.data.hp)+t.improvement.hp,asw:n.Z.getStatusFromLevel(t.level,o.data.maxAsw,o.data.minAsw)+t.improvement.asw,luck:o.data.luck+t.improvement.luck,area:t.area,uniqueId:t.uniqueId,releaseExpand:t.releaseExpand}),p.push(t.uniqueId)}else r=s?new n.Z:new n.Z({ship:o,noStock:!0});const c=[];for(let t=0;t<r.items.length;t+=1)c.push(u.getReflectedItem(r.items[t],i,s));const m=u.getReflectedItem(r.exItem,i,s,!r.releaseExpand);a.push(new n.Z({ship:r,items:c,exItem:m,noStock:r.noStock}))}h.push(new r.Z({fleet:t,ships:a}))}return{airbaseInfo:new d.Z({info:t.airbaseInfo,airbases:l}),fleetInfo:new c.Z({info:t.fleetInfo,fleets:h})}}static getReflectedItem(t,e,i,s=!1){if(!t.data.id)return t;const n=e.find((e=>e.id===t.data.id&&e.num.some((t=>t>0))));if(n){for(let l=10;l>=0;l-=1)if(n.num[l])return n.num[l]-=1,new a.Z({item:t,remodel:l,noStock:s})}else if(i)return new a.Z;return new a.Z({item:t,noStock:!0})}}},3117:function(t,e,i){i.d(e,{Z:function(){return k}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"pa-2 detail-card"},[i("div",{staticClass:"d-flex pb-1"},[i("div",{staticClass:"align-self-center ml-3"},[t._v(t._s(t.$t("Fleet.艦隊詳細")))]),i("v-spacer"),i("v-btn",{attrs:{icon:""},on:{click:t.close}},[i("v-icon",[t._v("mdi-close")])],1)],1),i("v-divider",{staticClass:"mb-1"}),i("v-tabs",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("v-tab",{attrs:{href:"#fleet"}},[t._v(t._s(t.$t("Fleet.艦隊情報")))]),i("v-tab",{attrs:{href:"#stage2"}},[t._v(t._s(t.$t("Fleet.対空砲火")))]),i("v-tab",{attrs:{href:"#contact"}},[t._v(t._s(t.$t("Fleet.触接")))]),i("v-tab-item",{staticClass:"detail-fleet",attrs:{value:"fleet"}},[i("v-divider"),i("div",{staticClass:"ma-1"},[i("div",{staticClass:"d-flex air-power-info flex-wrap"},[i("div",{staticClass:"text--secondary label-text body-2"},[t._v(t._s(t.$t("Common.制空")))]),i("div",{staticClass:"value-text mr-3"},[t._v(t._s(t.fleet.fullAirPower))]),i("div",[i("v-chip",{staticClass:"mr-1",attrs:{color:"green",label:"",outlined:""}},[i("span",[t._v(t._s(t.$t("Common.確保")))]),i("span",{staticClass:"chip-value"},[t._v(t._s(t.fleet.fullBorders[0]))])]),i("v-chip",{staticClass:"mr-1",attrs:{color:"light-green",label:"",outlined:""}},[i("span",[t._v(t._s(t.$t("Common.優勢")))]),i("span",{staticClass:"chip-value"},[t._v(t._s(t.fleet.fullBorders[1]))])]),i("v-chip",{staticClass:"mr-1",attrs:{color:"orange",label:"",outlined:""}},[i("span",[t._v(t._s(t.$t("Common.拮抗")))]),i("span",{staticClass:"chip-value"},[t._v(t._s(t.fleet.fullBorders[2]))])]),i("v-chip",{staticClass:"mr-1",attrs:{color:"deep-orange",label:"",outlined:""}},[i("span",[t._v(t._s(t.$t("Common.劣勢")))]),i("span",{staticClass:"chip-value"},[t._v(t._s(t.fleet.fullBorders[3]))])])],1)]),t.fleet.fullAirPower!==t.fleet.fullAirbaseAirPower?i("div",{staticClass:"mt-1 d-flex air-power-info flex-wrap"},[i("div",{staticClass:"text--secondary label-text body-2"},[t._v(t._s(t.$t("Common.基地制空")))]),i("div",{staticClass:"value-text mr-3"},[t._v(t._s(t.fleet.fullAirbaseAirPower))]),i("div",[i("v-chip",{staticClass:"mr-1",attrs:{color:"green",label:"",outlined:""}},[i("span",[t._v(t._s(t.$t("Common.確保")))]),i("span",{staticClass:"chip-value"},[t._v(t._s(t.fleet.fullAirbaseBorders[0]))])]),i("v-chip",{staticClass:"mr-1",attrs:{color:"light-green",label:"",outlined:""}},[i("span",[t._v(t._s(t.$t("Common.優勢")))]),i("span",{staticClass:"chip-value"},[t._v(t._s(t.fleet.fullAirbaseBorders[1]))])]),i("v-chip",{staticClass:"mr-1",attrs:{color:"orange",label:"",outlined:""}},[i("span",[t._v(t._s(t.$t("Common.拮抗")))]),i("span",{staticClass:"chip-value"},[t._v(t._s(t.fleet.fullAirbaseBorders[2]))])]),i("v-chip",{staticClass:"mr-1",attrs:{color:"deep-orange",label:"",outlined:""}},[i("span",[t._v(t._s(t.$t("Common.劣勢")))]),i("span",{staticClass:"chip-value"},[t._v(t._s(t.fleet.fullAirbaseBorders[3]))])])],1)]):t._e()]),i("v-divider"),i("div",[i("div",{staticClass:"mt-3 mb-5"},[t.fleet.isUnion?i("div",{staticClass:"d-flex"},[i("div",{staticClass:"align-self-center px-2 primary--text"},[t._v(t._s(t.$t("Fleet.第x艦隊",{number:1})))]),i("div",{staticClass:"align-self-center body-2 ml-4 text--secondary"},[t._v(t._s(t.$t("Common.制空値")))]),i("div",{staticClass:"align-self-center body-2 ml-1"},[t._v(t._s(t.fleet.mainAirPower))]),i("div",{staticClass:"align-self-center body-2 ml-4 text--secondary"},[t._v(t._s(t.$t("Common.基地制空")))]),i("div",{staticClass:"align-self-center body-2 ml-1"},[t._v(t._s(t.fleet.mainAirbaseAirPower))])]):t._e(),i("div",{staticClass:"enemy-inputs-container"},t._l(t.fleet.mainEnemies,(function(e,s){return i("enemy-input",{key:s,attrs:{enemy:e,"handle-show-item-list":t.showItemList}})})),1)]),t.fleet.isUnion?i("v-divider"):t._e(),t.fleet.isUnion?i("div",{staticClass:"my-3"},[i("div",{staticClass:"d-flex"},[i("div",{staticClass:"align-self-center px-2 success--text"},[t._v(t._s(t.$t("Fleet.第x艦隊",{number:2})))]),i("div",{staticClass:"align-self-center body-2 ml-4 text--secondary"},[t._v(t._s(t.$t("Common.制空値")))]),i("div",{staticClass:"align-self-center body-2 ml-1"},[t._v(t._s(t.fleet.escortAirPower))]),i("div",{staticClass:"align-self-center body-2 ml-4 text--secondary"},[t._v(t._s(t.$t("Common.基地制空")))]),i("div",{staticClass:"align-self-center body-2 ml-1"},[t._v(t._s(t.fleet.escortAirbaseAirPower))])]),i("div",{staticClass:"enemy-inputs-container"},t._l(t.fleet.escortEnemies,(function(e,s){return i("enemy-input",{key:s,attrs:{enemy:e,"handle-show-item-list":t.showItemList}})})),1)]):t._e()],1)],1),i("v-tab-item",{staticClass:"detail-fleet",attrs:{value:"stage2"}},[i("v-divider"),i("anti-air-calculator",{ref:"antiAirCalculator",attrs:{fleet:t.fleet}})],1),i("v-tab-item",{staticClass:"detail-fleet",attrs:{value:"contact"}},[i("v-divider"),i("contact-rates",{ref:"contactRates",attrs:{fleet:t.fleet}})],1)],1)],1)},a=[],n=i(144),l=i(9648),o=i(7428),r=i(6889),d=i(2981),c=n.Z.extend({components:{EnemyInput:d.Z,AntiAirCalculator:l.Z,ContactRates:o.Z},name:"EnemyDetail",props:{handleShowItemList:{type:Function},fleet:{type:r.Z,required:!0},handleClose:{type:Function,required:!0}},data:()=>({tab:"stage2"}),mounted(){const t=this.$refs.contactRates;t&&t.calculate();const e=this.$refs.antiAirCalculator;e&&e.updateTable()},methods:{showItemList(t,e){this.handleShowItemList(t,e)},close(){this.handleClose()}}}),m=c,u=i(1001),h=i(3453),p=i.n(h),v=i(4562),f=i(9582),g=i(4127),y=i(9223),_=i(4324),x=i(8718),w=i(626),C=i(2165),b=i(7771),I=(0,u.Z)(m,s,a,!1,null,"21ee3be4",null),k=I.exports;p()(I,{VBtn:v.Z,VCard:f.Z,VChip:g.Z,VDivider:y.Z,VIcon:_.Z,VSpacer:x.Z,VTab:w.Z,VTabItem:C.Z,VTabs:b.Z})},2981:function(t,e,i){i.d(e,{Z:function(){return b}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"ma-1 pa-2 enemy-preview"},[i("div",{staticClass:"d-flex"},[i("div",{staticClass:"align-self-center"},[i("v-img",{attrs:{src:"./img/ship/"+t.enemy.data.id+".png",height:"30",width:"120"}})],1),i("div",{staticClass:"flex-grow-1"},[i("div",{staticClass:"d-flex caption flex-wrap"},[i("div",{staticClass:"enemy-id ml-2 primary--text"},[t._v("id "+t._s(t.enemy.data.id))]),i("div",{staticClass:"ml-2"},[i("span",{staticClass:"text--secondary"},[t._v(t._s(t.$t("Common.耐久")))]),i("span",{staticClass:"ml-1 font-weight-medium"},[t._v(t._s(t.enemy.data.hp))]),i("span",{staticClass:"ml-2 text--secondary"},[t._v(t._s(t.$t("Common.装甲")))]),i("span",{staticClass:"ml-1 font-weight-medium"},[t._v(t._s(t.enemy.actualArmor))])])]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"enemy-name ml-2 text-truncate"},[t._v(t._s(t.getEnemyName(t.enemy.data.name)))])])])]),i("div",{staticClass:"d-flex caption px-1 flex-wrap"},[t.enemy.fullAirPower>0||!t.enemy.fullLBAirPower?i("div",[i("span",{staticClass:"text--secondary"},[t._v(t._s(t.$t("Common.制空")))]),i("span",{staticClass:"ml-1 font-weight-medium"},[t._v(t._s(t.enemy.fullAirPower))]),i("span",{staticClass:"ml-1 mr-2 text--secondary"},[t._v(t._s(t.airPowerDetail))])]):t._e(),t.enemy.fullLBAirPower&&t.enemy.fullLBAirPower!==t.enemy.fullAirPower?i("div",[i("span",{staticClass:"text--secondary"},[t._v(t._s(t.$t("Common.基地制空")))]),i("span",{staticClass:"ml-1 font-weight-medium"},[t._v(t._s(t.enemy.fullLBAirPower))]),i("span",{staticClass:"ml-1 mr-2 text--secondary"},[t._v(t._s(t.airPowerDetailAB))])]):t._e()]),i("div",{staticClass:"caption px-1"},[i("span",{staticClass:"text--secondary"},[t._v(t._s(t.$t("Common.装備命中")))]),i("span",{staticClass:"ml-1 font-weight-medium"},[t._v(t._s(t.enemy.sumItemAccuracy))]),i("span",{staticClass:"ml-3 text--secondary"},[t._v(t._s(t.$t("Common.総搭載数")))]),i("span",{staticClass:"ml-1 font-weight-medium"},[t._v(t._s(t.sumSlot))])]),i("v-divider",{staticClass:"item-input-divider"}),i("div",t._l(t.enemy.items,(function(e,s){return i("div",{key:s,on:{mouseenter:function(i){return t.bootTooltip(e,i)},mouseleave:t.clearTooltip,focus:function(i){return t.bootTooltip(e,i)},blur:t.clearTooltip}},[i("item-input",{attrs:{index:s,max:999,init:t.enemy.data.slots[s],"handle-show-item-list":t.showItemList,"handle-drag-start":t.clearTooltip,readonly:t.readonly,"is-enemy":!0},on:{input:t.updateItem},model:{value:t.enemy.items[s],callback:function(e){t.$set(t.enemy.items,s,e)},expression:"enemy.items[j]"}})],1)})),0),i("v-tooltip",{attrs:{color:"black",bottom:"",right:"",transition:"slide-y-transition","position-x":t.tooltipX,"position-y":t.tooltipY},model:{value:t.enabledTooltip,callback:function(e){t.enabledTooltip=e},expression:"enabledTooltip"}},[i("item-tooltip",{model:{value:t.tooltipItem,callback:function(e){t.tooltipItem=e},expression:"tooltipItem"}})],1)],1)},a=[],n=i(144),l=i(2297),o=i.n(l),r=i(7538),d=i(4313),c=i(5722),m=i(7525),u=i(2399),h=n.Z.extend({components:{ItemInput:r.Z,ItemTooltip:d.Z},name:"EnemyInput",props:{handleShowItemList:{type:Function},enemy:{type:c.Z,required:!0},readonly:{type:Boolean,default:!0}},data:()=>({enabledTooltip:!1,tooltipTimer:void 0,tooltipItem:new m.Z,tooltipX:0,tooltipY:0}),computed:{airPowerDetail(){const t=this.enemy.items.map((t=>t.data.isRecon?0:t.fullAirPower));return t.filter((t=>t>0)).length?`( ${t.join(" | ")} )`:""},airPowerDetailAB(){const t=this.enemy.items.map((t=>t.fullAirPower));return t.filter((t=>t>0)).length?`( ${t.join(" | ")} )`:""},sumSlot(){return o()(this.enemy.items.map((t=>t.fullSlot)))}},methods:{getEnemyName(t){const e=this.$store.state.siteSetting;if(t&&"ja"!==this.$i18n.locale&&!e.nameIsNotTranslate){const e=u.Z.getSuffix(t),i=t=>t?`${this.$t(t)}`:"";return e.map((t=>i(t))).join("")}return t||""},showItemList(t){this.readonly||this.handleShowItemList(t)},updateItem(){this.readonly||this.$emit("input",this.enemy)},bootTooltip(t,e){const i=this.$store.state.siteSetting;if(!t.data.id||i.disabledItemTooltip)return;const s=e.target.getElementsByClassName("item-name")[0];window.clearTimeout(this.tooltipTimer),this.tooltipTimer=window.setTimeout((()=>{const e=s.getBoundingClientRect();this.tooltipX=e.x+e.width/3,this.tooltipY=e.y+e.height,this.tooltipItem=t,this.enabledTooltip=!0}),Math.max(i.popUpCount,10))},clearTooltip(){this.enabledTooltip=!1,window.clearTimeout(this.tooltipTimer)}}}),p=h,v=i(1001),f=i(3453),g=i.n(f),y=i(9582),_=i(9223),x=i(5495),w=i(2082),C=(0,v.Z)(p,s,a,!1,null,"05c69e76",null),b=C.exports;g()(C,{VCard:y.Z,VDivider:_.Z,VImg:x.Z,VTooltip:w.Z})},536:function(t,e,i){i.d(e,{Z:function(){return T}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-card",[i("div",{staticClass:"d-flex pt-2 pb-1 pr-2"},[i("div",{staticClass:"align-self-center ml-3"},[t._v(t._s(t.$t("Enemies.敵艦選択")))]),i("v-spacer"),i("v-btn",{attrs:{icon:""},on:{click:t.close}},[i("v-icon",[t._v("mdi-close")])],1)],1),i("v-divider"),i("div",{staticClass:"d-flex px-2 pt-2"},[i("div",{staticClass:"align-self-center"},[i("v-text-field",{attrs:{label:t.$t("ItemList.図鑑id 名称検索"),clearable:"","prepend-inner-icon":"mdi-magnify"},on:{input:function(e){return t.filter()}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),i("div",{staticClass:"ml-5 align-self-center"},[i("v-checkbox",{attrs:{label:t.$t("Enemies.地上施設")},on:{change:function(e){return t.filter()}},model:{value:t.isLandBase,callback:function(e){t.isLandBase=e},expression:"isLandBase"}})],1),i("v-spacer")],1),i("div",{staticClass:"d-flex flex-wrap mx-3"},t._l(t.types,(function(e,s){return i("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],key:s,staticClass:"type-selector",class:{active:s===t.type,disabled:t.keyword||t.isLandBase},on:{click:function(e){return t.changeType(s)},keypress:function(e){return t.changeType(s)}}},[t._v(" "+t._s(t.isNotJapanese?t.$t("SType."+e.text):e.text)+" ")])})),0),i("v-divider",{staticClass:"mx-3"}),i("div",{staticClass:"enemy-table-container pa-3"},t._l(t.enemies,(function(e,s){return i("div",{key:"type"+s},[i("div",{staticClass:"type-divider"},[i("div",{staticClass:"caption text--secondary"},[t._v(t._s(t.needTrans?t.$t(e.name):e.name))]),i("div",{staticClass:"type-divider-border"})]),i("div",{staticClass:"enemy-table-body"},t._l(e.enemies,(function(e,s){return i("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],key:s,staticClass:"enemy-list",on:{click:function(i){return t.clickedEnemy(e)},keypress:function(i){return t.clickedEnemy(e)},mouseenter:function(i){return t.bootTooltip(e,i)},mouseleave:t.clearTooltip,focus:function(i){return t.bootTooltip(e,i)},blur:t.clearTooltip}},[i("div",[i("v-img",{attrs:{src:"./img/ship/"+e.id+".png",height:"30",width:"120"}})],1),i("div",{staticClass:"flex-grow-1 ml-1"},[i("div",{staticClass:"d-flex align-center enemy-caption"},[i("div",{staticClass:"enemy-id primary--text text-no-wrap"},[t._v(" id "),i("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.id))])]),i("div",{staticClass:"ml-1 text-no-wrap"},[t._v(" "+t._s(t.$t("Common.耐久"))+" "),i("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.hp))])]),i("div",{staticClass:"ml-1 text-no-wrap"},[t._v(" "+t._s(t.$t("Common.装甲"))+" "),i("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.armor))])])]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"enemy-name text-truncate",class:{"orange--text text--darken-2":e.isUnknown}},[t._v(" "+t._s(t.getEnemyName(e.name))+" ")])])])])})),0)])})),0)],1),i("v-tooltip",{attrs:{color:"black",bottom:"",right:"",transition:"slide-y-transition","position-x":t.tooltipX,"position-y":t.tooltipY},model:{value:t.enabledTooltip,callback:function(e){t.enabledTooltip=e},expression:"enabledTooltip"}},[i("enemy-tooltip",{model:{value:t.tooltipEnemy,callback:function(e){t.tooltipEnemy=e},expression:"tooltipEnemy"}})],1)],1)},a=[],n=i(144),l=i(941),o=i(2399),r=i(6141),d=i(5722),c=n.Z.extend({name:"EnemyList",components:{EnemyTooltip:l.Z},props:{handleDecideEnemy:{type:Function,required:!0},handleClose:{type:Function,required:!0}},data:()=>({all:[],enemies:[],types:[],type:0,isLandBase:!1,keyword:"",enabledTooltip:!1,tooltipTimer:void 0,tooltipEnemy:new d.Z,tooltipX:0,tooltipY:0}),mounted(){const t=[],e=this.$store.state.defaultEnemies;for(let i=0;i<e.length;i+=1){const s=e[i];this.all.push(s),t.includes(s.type)||t.push(s.type)}for(let i=0;i<r.ZP.SHIP_TYPES_ALT.length;i+=1){const e=r.ZP.SHIP_TYPES_ALT[i];e.types.some((e=>t.includes(e)))&&this.types.push({text:e.text,types:e.types})}this.filter()},computed:{isNotJapanese(){return"ja"!==this.$i18n.locale},needTrans(){const t=this.$store.state.siteSetting;return"ja"!==this.$i18n.locale&&!t.nameIsNotTranslate}},methods:{getEnemyName(t){if(t&&this.needTrans){const e=o.Z.getSuffix(t),i=t=>t?`${this.$t(t)}`:"";return e.map((t=>i(t))).join("")}return t||""},changeType(t=0){this.type=t,this.filter()},filter(){const t=this.keyword;let e=this.all.concat();const i=this.types[this.type];t?e=e.filter((e=>e.id===+t||e.name.indexOf(t)>=0)):this.isLandBase?e=e.filter((t=>t.isLandBase)):i&&(e=e.filter((t=>!t.isLandBase&&i.types.includes(t.type))));const s=[];for(let a=0;a<e.length;a+=1){const t=e[a].name.substring(0,4);s.includes(t)||s.push(t)}this.enemies=[];for(let a=0;a<s.length;a+=1){const t=s[a],i=e.filter((e=>e.name.startsWith(t)));if(i.length){const t=o.Z.getSuffix(i[0].name)[0];this.enemies.push({name:t,enemies:i})}}},clickedEnemy(t){this.clearTooltip(),this.handleDecideEnemy(t)},close(){this.handleClose()},bootTooltip(t,e){if(!t.id)return;const i=this.$store.state.siteSetting,s=e.target.getElementsByClassName("enemy-id")[0];window.clearTimeout(this.tooltipTimer),this.tooltipTimer=window.setTimeout((()=>{const i=s.getBoundingClientRect();this.tooltipX=e.clientX,this.tooltipY=i.y+i.height;const a=this.$store.state.manualEnemies,n=a.find((e=>e.id===t.id));this.tooltipEnemy=n?d.Z.createEnemyFromMaster(n,!1,this.$store.state.items):d.Z.createEnemyFromMaster(t,!1,this.$store.state.items),this.enabledTooltip=!0}),Math.max(i.popUpCount,10))},clearTooltip(){this.enabledTooltip=!1,window.clearTimeout(this.tooltipTimer)}}}),m=c,u=i(1001),h=i(3453),p=i.n(h),v=i(4562),f=i(9582),g=i(3486),y=i(9223),_=i(4324),x=i(5495),w=i(8718),C=i(9780),b=i(2082),I=i(6392),k=i.n(I),A=i(7069),S=(0,u.Z)(m,s,a,!1,null,"3dbde513",null),T=S.exports;p()(S,{VBtn:v.Z,VCard:f.Z,VCheckbox:g.Z,VDivider:y.Z,VIcon:_.Z,VImg:x.Z,VSpacer:w.Z,VTextField:C.Z,VTooltip:b.Z}),k()(S,{Ripple:A.Z})},941:function(t,e,i){i.d(e,{Z:function(){return g}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"py-1"},[i("div",{staticClass:"d-flex"},[i("div",{staticClass:"ml-1"},[i("div",{staticClass:"d-flex"},[i("div",{staticClass:"tooltip-item-text id"},[t._v(" id "),i("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.value.data.id))])]),i("div",{staticClass:"ml-2 tooltip-item-text"},[t._v(" "+t._s(t.$t("Common.耐久"))+" "),i("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.value.data.hp))])]),i("div",{staticClass:"ml-2 tooltip-item-text"},[t._v(" "+t._s(t.$t("Common.装甲"))+" "),i("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.value.data.armor)+" ("+t._s(t.armor)+")")])])]),i("div",{staticClass:"my-1"},[i("div",[t._v(t._s(t.getEnemyName(t.value.data.name)))])])])]),i("div",t._l(t.value.items,(function(e,s){return i("div",{key:s},[i("div",{staticClass:"d-flex"},[i("div",{staticClass:"align-self-center item-slot",class:{"orange--text text--darken-2":t.value.data.isUnknown}},[i("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.fullSlot))]),t._v(t._s(t.value.data.isUnknown?"?":"")+" ")]),i("div",[i("v-img",{attrs:{src:"./img/type/icon"+e.data.iconTypeId+".png",height:"30",width:"30"}})],1),i("div",{staticClass:"ml-1 align-self-center tooltip-item-text id"},[t._v(" id "),i("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.data.id))])]),i("div",{staticClass:"ml-1 align-self-center item-name"},[t._v(t._s(t.needTrans?t.$t(""+e.data.name):e.data.name))])])])})),0),t.hasOASW||t.hasOpeningTorpedo||t.nightSpecialAttacks.length||t.value.antiAirCutIn.length||t.specialAttacks.length?[i("v-divider",{staticClass:"my-2"}),i("div",{staticClass:"ml-1 caption grey--text text--lighten-1 text-left"},[t._v(t._s(t.$t("Fleet.特殊攻撃")))]),i("div",{staticClass:"mx-1 d-flex flex-wrap mt-1 body-2"},[t.value.antiAirCutIn.length?i("div",{staticClass:"mr-3 anti-air-cutin"},[t._v(t._s(t.$t("Fleet.対空CI")))]):t._e(),t.hasOASW?i("div",{staticClass:"mr-3 light-blue--text text--lighten-2"},[t._v(t._s(t.$t("Fleet.先制対潜")))]):t._e(),t.hasOpeningTorpedo?i("div",{staticClass:"mr-3 blue--text text--lighten-1"},[t._v("先制雷撃")]):t._e(),t._l(t.specialAttacks,(function(e){return i("div",{key:e,staticClass:"orange--text text--lighten-2 mr-3"},[t._v(t._s(t.$t("Fleet."+e)))])})),t._l(t.nightSpecialAttacks,(function(e){return i("div",{key:e,staticClass:"indigo--text text--lighten-3 mr-3"},[t._v(t._s(t.$t("Fleet."+e)))])}))],2)]:t._e()],2)},a=[],n=i(144),l=i(5722),o=i(2399),r=i(3314),d=n.Z.extend({name:"EnemyTooltip",props:{value:{type:l.Z,required:!0}},computed:{armor(){let t=0;for(let e=0;e<this.value.items.length;e+=1)t+=this.value.items[e].data.armor;return this.value.data.armor+t},needTrans(){const t=this.$store.state.siteSetting;return"ja"!==this.$i18n.locale&&!t.nameIsNotTranslate},hasOpeningTorpedo(){return this.value.items.some((t=>22===t.data.apiTypeId))||this.value.isSubmarine&&this.value.level>=10},hasOASW(){return 7===this.value.data.type&&this.value.items.some((t=>[1574,1575,1586].includes(t.data.id)))||[1623,1624,1862,1690,1691,1692,1849,1850,1851,1927,1928,1929,1930,1931,1932,1947].includes(this.value.data.id)},specialAttacks(){return r.Z.getDayBattleSpecialAttackRate(this.value,1,!1).map((t=>t.text))},nightSpecialAttacks(){return r.Z.getNightBattleSpecialAttackRate(this.value,!1).map((t=>t.text))}},methods:{getEnemyName(t){if(t&&this.needTrans){const e=o.Z.getSuffix(t),i=t=>t?`${this.$t(t)}`:"";return e.map((t=>i(t))).join("")}return t||""}}}),c=d,m=i(1001),u=i(3453),h=i.n(u),p=i(9223),v=i(5495),f=(0,m.Z)(c,s,a,!1,null,"22f7ef4e",null),g=f.exports;h()(f,{VDivider:p.Z,VImg:v.Z})},4872:function(t,e,i){i.d(e,{Z:function(){return D}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"ma-1 ship-input",class:{disabled:!t.ship.isActive,"py-1":!t.ship.isEmpty},on:{mousedown:t.setDraggable,mouseup:t.resetDraggable,dragstart:function(e){return t.dragStart(e)},dragend:function(e){return t.dragEnd(e)},dragenter:function(e){return t.dragEnter(e)},dragleave:function(e){return t.dragLeave(e)},drop:function(e){return e.stopPropagation(),t.dropShip(e)},dragover:function(t){t.preventDefault()}}},[t.ship.isEmpty?[i("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],staticClass:"empty-ship d-flex",on:{click:function(e){return e.stopPropagation(),t.showShipList.apply(null,arguments)},keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.showShipList.apply(null,arguments)}}},[i("div",{staticClass:"align-self-center"},[t._v(t._s(t.shipName))]),t.handleShowTempShipList?i("div",{staticClass:"empty-temp-list"},[i("v-tooltip",{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,a=e.attrs;return[i("v-btn",t._g(t._b({attrs:{icon:"",small:"",color:"orange lighten-2"},on:{click:function(e){return e.stopPropagation(),t.showTempShip()}}},"v-btn",a,!1),s),[i("v-icon",{attrs:{small:""}},[t._v("mdi-clipboard-arrow-down")])],1)]}}],null,!1,3999962373)},[i("span",[t._v(t._s(t.$t("Fleet.艦娘クリップボード")))])])],1):t._e()])]:[i("div",{staticClass:"d-flex px-2"},[t.isNoShip?t._e():i("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],staticClass:"align-self-center ship-img-container",on:{click:function(e){return e.stopPropagation(),t.showShipList.apply(null,arguments)},keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.showShipList.apply(null,arguments)}}},[i("div",{staticClass:"ship-img",on:{mouseenter:function(e){return t.bootShipTooltip(e)},mouseleave:t.clearTooltip,focus:function(e){return t.bootShipTooltip(e)},blur:t.clearTooltip}},[i("v-img",{attrs:{src:"./img/ship/"+t.ship.data.id+".png",height:"30",width:"120"}})],1),t.ship.area>0&&t.ship.area<=t.maxAreas?i("div",{staticClass:"area-banner"},[i("v-img",{attrs:{src:"./img/tags/area"+t.ship.area+".webp",height:"40",width:"29"}})],1):t._e()]),i("div",{staticClass:"flex-grow-1"},[i("div",{staticClass:"caption"},[i("v-menu",{attrs:{"close-on-content-click":!1,transition:"slide-y-transition","max-width":"360","min-width":"360",bottom:"",right:""},on:{input:t.onEditStatusMenuToggle},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,a=e.attrs;return[i("div",t._g(t._b({directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],staticClass:"pr-2 clickable-status d-flex flex-wrap"},"div",a,!1),s),[i("div",{staticClass:"pl-1 pr-1 primary--text"},[t._v(" Lv"),i("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.ship.level))])]),i("div",{staticClass:"pl-1 text--secondary"},[t._v(t._s(t.$t("Common.運")))]),i("div",{staticClass:"pl-1 pr-1 font-weight-medium"},[t._v(t._s(t.ship.luck))]),i("div",{staticClass:"pl-1 text--secondary"},[t._v(t._s(t.$t("Common.対空")))]),i("div",{staticClass:"pl-1 font-weight-medium"},[t._v(t._s(t.ship.antiAir))])])]}}]),model:{value:t.editStatusMenu,callback:function(e){t.editStatusMenu=e},expression:"editStatusMenu"}},[i("v-card",{staticClass:"px-5 pt-5 pb-3"},[i("div",{staticClass:"d-flex justify-space-between"},[i("v-btn",{attrs:{small:"",outlined:"",color:"grey"},on:{click:function(e){e.stopPropagation(),t.level=1}}},[t._v("Lv1")]),i("v-btn",{attrs:{small:"",outlined:"",color:"primary"},on:{click:function(e){e.stopPropagation(),t.level=50}}},[t._v("Lv50")]),i("v-btn",{attrs:{small:"",outlined:"",color:"teal"},on:{click:function(e){e.stopPropagation(),t.level=80}}},[t._v("Lv80")]),i("v-btn",{attrs:{small:"",outlined:"",color:"teal"},on:{click:function(e){e.stopPropagation(),t.level=99}}},[t._v("Lv99")]),i("v-btn",{attrs:{small:"",outlined:"",color:"red lighten-2"},on:{click:function(e){e.stopPropagation(),t.level=t.maxLevel}}},[t._v("Lv"+t._s(t.maxLevel))])],1),i("div",{staticClass:"d-flex mt-4 align-center"},[i("div",{staticClass:"edit-status-menu-text"},[i("v-text-field",{staticClass:"pt-0 mt-0",attrs:{label:"Lv",max:t.maxLevel,min:"1","hide-details":"",type:"number"},model:{value:t.level,callback:function(e){t.level=t._n(e)},expression:"level"}})],1),i("div",{staticClass:"flex-grow-1"},[i("v-slider",{attrs:{max:t.maxLevel,min:"1","hide-details":""},model:{value:t.level,callback:function(e){t.level=e},expression:"level"}})],1)]),i("v-divider",{staticClass:"my-3"}),i("div",{staticClass:"edit-status-container"},[i("v-text-field",{attrs:{label:t.$t("Common.耐久"),max:t.value.data.maxHp,min:t.minHP,"hide-details":"",type:"number"},model:{value:t.hp,callback:function(e){t.hp=t._n(e)},expression:"hp"}}),i("v-text-field",{attrs:{label:t.$t("Common.対潜"),max:t.maxAsw,min:t.minAsw,"hide-details":"",type:"number"},model:{value:t.asw,callback:function(e){t.asw=t._n(e)},expression:"asw"}}),i("v-text-field",{attrs:{label:t.$t("Common.運"),max:t.ship.data.maxLuck,min:t.ship.data.luck,"hide-details":"",type:"number"},model:{value:t.luck,callback:function(e){t.luck=t._n(e)},expression:"luck"}}),i("v-text-field",{attrs:{label:t.$t("Common.対空"),max:t.ship.data.antiAir,min:"0","hide-details":"",type:"number"},model:{value:t.antiAir,callback:function(e){t.antiAir=t._n(e)},expression:"antiAir"}})],1),i("v-divider",{staticClass:"my-3"}),i("div",{staticClass:"d-flex"},[i("v-spacer"),i("v-btn",{attrs:{color:"secondary"},on:{click:function(e){return t.closeEditStatusMenu()}}},[t._v(t._s(t.$t("Common.閉じる")))])],1)],1)],1)],1),i("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],staticClass:"d-flex pl-1 clickable-status",on:{click:function(e){return e.stopPropagation(),t.showShipList.apply(null,arguments)},keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.showShipList.apply(null,arguments)}}},[i("div",{staticClass:"ship-name text-truncate",class:{"no-stock":t.ship.noStock}},[t._v(t._s(t.shipName))])])]),i("div",{staticClass:"ship-remove mt-1"},[i("v-btn",{attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),t.removeShip.apply(null,arguments)}}},[i("v-icon",[t._v("mdi-close")])],1)],1)]),i("div",{staticClass:"ship-status-container caption pl-2"},[i("span",{staticClass:"text--secondary"},[t._v(t._s(t.$t("Fleet.撃墜")))]),i("span",{staticClass:"ml-1 font-weight-medium mr-2"},[t._v(t._s(t.rateDownValue)+"%,"+t._s(t.fixDown)+t._s(t.isNotJapanese?"":"機"))]),t.ship.hunshinRate?[i("span",{staticClass:"text--secondary text-no-wrap"},[t._v(t._s(t.$t("Fleet.噴進")))]),i("span",{staticClass:"ml-1 font-weight-medium mr-2"},[t._v(t._s(t.ship.hunshinRate.toFixed(1))+"%")])]:t._e(),i("span",{staticClass:"text--secondary"},[t._v(t._s(t.$t("Common.射程")))]),i("span",{staticClass:"ml-1 font-weight-medium"},[t._v(t._s(t.$t("Common."+t.rangeText[t.ship.displayStatus.range])))]),t.ship.data.maxAsw||t.ship.enabledTSBK?[i("v-tooltip",{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,a=e.attrs;return[i("span",t._g(t._b({staticClass:"cursor-help"},"span",a,!1),s),[i("span",{staticClass:"ml-2 text--secondary mr-1"},[t._v(t._s(t.$t("Fleet.先制対潜")))]),t.ship.enabledTSBK?i("span",[t.isNotJapanese?[t._v("✔")]:[t._v(t._s(t.$t("Fleet.可")))]],2):i("span",[t._v("×")])])]}}],null,!1,427717158)},[i("table",{staticClass:"asw-table"},[i("tr",[i("td",{staticClass:"body-2"},[t._v(t._s(t.$t("Fleet.対潜先制爆雷攻撃")))]),i("td",{staticClass:"text-right pl-2"},[t.ship.enabledTSBK?i("span",{staticClass:"blue--text text--lighten-2"},[t.isNotJapanese?[t._v("✔")]:[t._v(" "+t._s(t.$t("Fleet.可"))+" ")]],2):t.isNotJapanese?i("span",{staticClass:"red--text text--lighten-1"},[t._v("×")]):i("span",{staticClass:"red--text text--lighten-1"},[t._v(" "+t._s(t.$t("Fleet.不可"))+" ")])])]),i("tr",[i("td",{staticClass:"body-2 grey--text text--lighten-2"},[t._v(" "+t._s(t.$t("Common.対潜"))),i("span",{staticClass:"ml-2 caption"},[t._v(t._s(t.$t("Fleet.艦娘")))])]),i("td",{staticClass:"text-right"},[t._v(t._s(t.ship.asw-t.ship.improveAsw))])]),t.ship.improveAsw?i("tr",[i("td",{staticClass:"body-2 grey--text text--lighten-2"},[t._v(" "+t._s(t.$t("Common.対潜"))),i("span",{staticClass:"ml-2 caption"},[t._v(t._s(t.$t("Common.改修")))])]),i("td",{staticClass:"text-right"},[t._v(t._s(t.ship.improveAsw))])]):t._e(),i("tr",[i("td",{staticClass:"body-2 grey--text text--lighten-2"},[t._v(" "+t._s(t.$t("Common.対潜"))),i("span",{staticClass:"ml-2 caption"},[t._v(t._s(t.$t("Fleet.装備")))])]),i("td",{staticClass:"text-right"},[t._v(t._s(t.ship.itemAsw))])]),t.ship.itemBonusStatus.asw?i("tr",[i("td",{staticClass:"body-2 grey--text text--lighten-2"},[t._v(" "+t._s(t.$t("Common.対潜"))),i("span",{staticClass:"ml-2 caption"},[t._v(t._s(t.$t("Fleet.装備ボーナス")))])]),i("td",{staticClass:"text-right"},[t._v(t._s(t.ship.itemBonusStatus.asw))])]):t._e(),i("tr",{staticClass:"border"},[i("td",{attrs:{colspan:"3"}})]),i("tr",[i("td",{staticClass:"body-2 grey--text text--lighten-2 pb-1"},[t._v(" "+t._s(t.$t("Common.対潜"))),i("span",{staticClass:"ml-2 caption"},[t._v(t._s(t.$t("Common.合計")))])]),i("td",{staticClass:"text-right pb-1"},[t._v(t._s(t.ship.displayStatus.asw))])]),!t.ship.enabledTSBK&&t.ship.missingAsw?i("tr",[i("td",{staticClass:"caption grey--text text--lighten-2"},[t._v(t._s(t.$t("Fleet.不足対潜値")))]),i("td",{staticClass:"text-right"},[t._v(t._s(t.ship.missingAsw))])]):t._e(),!t.ship.enabledTSBK&&t.ship.needTSBKLevel?i("tr",[i("td",{staticClass:"caption grey--text text--lighten-2"},[t._v(t._s(t.$t("Fleet.必要艦娘Lv")))]),i("td",{staticClass:"text-right"},[t._v(t._s(t.ship.needTSBKLevel))])]):t._e()])])]:t._e()],2),i("div",{staticClass:"d-flex pr-1 pl-2 flex-wrap"},[t.ship.fullAirPower?i("div",{staticClass:"align-self-center caption"},[i("span",{staticClass:"text--secondary"},[t._v(t._s(t.$t("Common.制空")))]),i("span",{staticClass:"ml-1 font-weight-medium"},[t._v(t._s(t.ship.fullAirPower))]),i("span",{staticClass:"ml-1 text--secondary"},[t._v(t._s(t.airPowerDetail))])]):i("div",{staticClass:"align-self-center caption cursor-help",on:{mouseenter:function(e){return t.bootShipTooltip(e)},mouseleave:t.clearTooltip,focus:function(e){return t.bootShipTooltip(e)},blur:t.clearTooltip}},[i("span",{staticClass:"text--secondary"},[t._v(t._s(t.$t("Common.火力")))]),i("span",{staticClass:"ml-1 font-weight-medium"},[t._v(t._s(t.ship.displayStatus.firePower))]),t.ship.data.torpedo?[i("span",{staticClass:"ml-2 text--secondary"},[t._v(t._s(t.$t("Common.雷装")))]),i("span",{staticClass:"ml-1 font-weight-medium"},[t._v(t._s(t.ship.displayStatus.torpedo))])]:[i("span",{staticClass:"ml-2 text--secondary"},[t._v(t._s(t.$t("Common.装甲")))]),i("span",{staticClass:"ml-1 font-weight-medium"},[t._v(t._s(t.ship.displayStatus.armor))])],t.ship.data.maxAsw?[i("span",{staticClass:"ml-2 text--secondary"},[t._v(t._s(t.$t("Common.対潜")))]),i("span",{staticClass:"ml-1 font-weight-medium"},[t._v(t._s(t.ship.displayStatus.asw))])]:[i("span",{staticClass:"ml-2 text--secondary"},[t._v(t._s(t.$t("Common.回避")))]),i("span",{staticClass:"ml-1 font-weight-medium"},[t._v(t._s(t.ship.displayStatus.avoid))])]],2),i("div",{staticClass:"ml-auto ship-buttons"},[t.enabledConvert?i("v-tooltip",{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,a=e.attrs;return[i("v-btn",t._g(t._b({attrs:{icon:"",small:"",color:"blue lighten-1"},on:{click:function(e){return e.stopPropagation(),t.toggleVersion()}}},"v-btn",a,!1),s),[i("v-icon",[t._v("mdi-sync")])],1)]}}],null,!1,3381741086)},[i("span",[t._v(t._s(t.$t("Fleet.コンバート改造")))])]):t._e(),t.handleShowTempShipList?i("v-tooltip",{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,a=e.attrs;return[i("v-btn",t._g(t._b({attrs:{icon:"",small:"",color:"orange lighten-2"},on:{click:function(e){return e.stopPropagation(),t.showTempShip()}}},"v-btn",a,!1),s),[i("v-icon",[t._v("mdi-clipboard-arrow-up")])],1)]}}],null,!1,3338777121)},[i("span",[t._v(t._s(t.$t("Fleet.艦娘クリップボード")))])]):t._e(),t.handleShowItemPreset?i("v-tooltip",{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,a=e.attrs;return[i("v-btn",t._g(t._b({attrs:{icon:"",small:"",color:"deep-orange lighten-1"},on:{click:function(e){return e.stopPropagation(),t.showItemPresets()}}},"v-btn",a,!1),s),[i("v-icon",[t._v("mdi-briefcase-variant")])],1)]}}],null,!1,3852360786)},[i("span",[t._v(t._s(t.$t("Fleet.装備プリセット展開")))])]):t._e(),t.hideActiveButton?t._e():i("v-tooltip",{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,a=e.attrs;return[i("v-btn",t._g(t._b({directives:[{name:"show",rawName:"v-show",value:t.ship.isActive,expression:"ship.isActive"}],attrs:{icon:"",small:""},on:{click:function(e){return e.stopPropagation(),t.changeActive(!1)}}},"v-btn",a,!1),s),[i("v-icon",[t._v("mdi-eye")])],1)]}}],null,!1,2150192410)},[i("span",[t._v(t._s(t.$t("Fleet.計算対象から省く")))])]),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.ship.isActive&&!t.hideActiveButton,expression:"!ship.isActive && !hideActiveButton"}],attrs:{icon:"",small:""},on:{click:function(e){return e.stopPropagation(),t.changeActive(!0)}}},[i("v-icon",[t._v("mdi-eye-off")])],1),i("div",{staticClass:"btn-item-reset"},[i("v-btn",{attrs:{icon:"",small:""},on:{click:function(e){return e.stopPropagation(),t.resetItems()}}},[i("v-icon",[t._v("mdi-close")])],1),i("div",{staticClass:"close-bar",class:"item-count-"+(t.ship.items.length+1)})],1)],1)]),i("v-divider",{staticClass:"mx-1 item-input-divider"}),t.ship.isEmpty?t._e():i("div",{staticClass:"px-1"},[t._l(t.ship.items,(function(e,s){return i("div",{key:s,on:{mouseenter:function(i){return t.bootTooltip(e,s,i)},mouseleave:t.clearTooltip,focus:function(i){return t.bootTooltip(e,s,i)},blur:t.clearTooltip}},[i("item-input",{attrs:{index:s,max:99,"drag-slot":!1,init:t.ship.data.slots[s],"handle-show-item-list":t.showItemList,"item-parent":t.ship,"handle-drag-start":t.clearTooltip},on:{input:t.updateItem},model:{value:t.ship.items[s],callback:function(e){t.$set(t.ship.items,s,e)},expression:"ship.items[j]"}})],1)})),i("div",{on:{mouseenter:function(e){return t.bootTooltip(t.ship.exItem,-1,e)},mouseleave:t.clearTooltip,focus:function(e){return t.bootTooltip(t.ship.exItem,-1,e)},blur:t.clearTooltip}},[i("item-input",{attrs:{index:99,max:0,init:0,"drag-slot":!1,"handle-show-item-list":t.showItemList,"item-parent":t.ship,"handle-drag-start":t.clearTooltip,"is-released":t.ship.releaseExpand},on:{input:t.updateItem},model:{value:t.ship.exItem,callback:function(e){t.$set(t.ship,"exItem",e)},expression:"ship.exItem"}})],1)],2)],i("v-tooltip",{attrs:{color:"black",bottom:"",right:"",transition:"slide-y-transition","position-x":t.tooltipX,"position-y":t.tooltipY},model:{value:t.enabledTooltip,callback:function(e){t.enabledTooltip=e},expression:"enabledTooltip"}},[i("item-tooltip",{attrs:{bonus:t.tooltipBonus},model:{value:t.tooltipItem,callback:function(e){t.tooltipItem=e},expression:"tooltipItem"}})],1),i("v-tooltip",{attrs:{color:"black",bottom:"",right:"",transition:"slide-y-transition","position-x":t.tooltipX,"position-y":t.tooltipY},model:{value:t.enabledShipTooltip,callback:function(e){t.enabledShipTooltip=e},expression:"enabledShipTooltip"}},[i("ship-tooltip",{attrs:{"fleet-ros-corr":t.fleetRosCorr,"is-flagship":0===t.index},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)],2)},a=[],n=i(144),l=i(7538),o=i(4313),r=i(4462),d=i(2382),c=i(7525),m=i(5549),u=i(3631),h=i(6486),p=i(47),v=i(6141),f=n.Z.extend({components:{ItemInput:l.Z,ItemTooltip:o.Z,ShipTooltip:r.Z},name:"ShipInput",props:{handleShowItemList:{type:Function,required:!0},handleShowShipList:{type:Function,required:!0},handleCloseShip:{type:Function,required:!0},handleShowTempShipList:{type:Function},handleShowItemPreset:{type:Function},value:{type:d.Z,required:!0},index:{type:Number,required:!0},fixDown:{type:Number,default:0},rateDown:{type:Number,default:0},fleetRosCorr:{type:Number,default:0},isLine2:{type:Boolean,default:!1},hideActiveButton:{type:Boolean,default:!1}},data:()=>({level:99,luck:0,antiAir:0,asw:0,hp:1,editStatusMenu:!1,enabledTooltip:!1,enabledShipTooltip:!1,tooltipTimer:void 0,tooltipItem:new c.Z,tooltipBonus:"",tooltipX:0,tooltipY:0,rangeText:["","短","中","長","超長","超長+","極","極+","極長","極長+"],maxLevel:v.ZP.MAX_LEVEL}),computed:{ship(){return this.value},isNotJapanese(){return"ja"!==this.$i18n.locale},needTrans(){const t=this.$store.state.siteSetting;return!t.nameIsNotTranslate},shipName(){if(this.isNotJapanese){if(!this.value.data.name)return this.$t("Fleet.艦娘選択");if(this.needTrans){const t=m.Z.getSuffix(this.value.data),e=t=>t?`${this.$t(t)}`:"";return t.map((t=>e(t))).join("")}}return this.value.data.name?this.value.data.name:"艦娘選択"},airPowerDetail(){const t=this.ship.items.map((t=>t.fullAirPower&&!t.data.isRecon?t.fullAirPower:0));return t.filter((t=>t>0)).length?`( ${t.join(" | ")} )`:""},isNoShip(){return 0===this.value.data.id},rateDownValue(){return Math.floor(100*this.rateDown)},enabledConvert(){const t=this.$store.state.ships,e=this.value.data;return"宗谷"===e.name||this.value.data.isFinal&&t.filter((t=>t.originalId===e.originalId&&t.isFinal&&t.version>1)).length>=2},maxAreas(){return this.$store.state.areaCount},minHP(){return this.level>99?this.value.data.hp2:this.value.data.hp},minAsw(){if(!this.value.data.minAsw||!this.value.data.maxAsw)return 0;const t=d.Z.getStatusFromLevel(this.level,this.value.data.maxAsw,this.value.data.minAsw);return t},maxAsw(){return this.value.data.minAsw&&this.value.data.maxAsw?this.minAsw+9:200}},watch:{level(t){const e=d.Z.getStatusFromLevel(t,this.ship.data.maxAsw,this.value.data.minAsw);this.asw=e+this.value.improveAsw,this.hp=Math.max(this.hp,t>99?this.value.data.hp2:this.value.data.hp),this.hp=Math.min(this.hp,t<=99?this.value.data.hp:999)}},methods:{updateItem(){this.setShip()},setShip(t){this.clearTooltip(),void 0===t?this.$emit("input",new d.Z({ship:this.ship})):this.$emit("input",t)},onEditStatusMenuToggle(){if(this.editStatusMenu)this.hp=this.ship.hp,this.level=this.ship.level,this.luck=this.ship.luck,this.asw=this.ship.asw,this.antiAir=this.ship.antiAir;else{const t={ship:this.ship,level:this.level,hp:this.hp,luck:this.luck,antiAir:this.antiAir,asw:this.asw};this.setShip(new d.Z(t))}},closeEditStatusMenu(){this.editStatusMenu=!1,this.onEditStatusMenuToggle()},changeActive(t){this.setShip(new d.Z({ship:this.ship,isActive:t}))},resetItems(){this.setShip(new d.Z({ship:this.value,items:[],exItem:new c.Z}))},removeShip(){this.handleCloseShip(this.index)},showItemList(t){this.clearTooltip(),this.handleShowItemList(this.index,t)},showShipList(){this.clearTooltip(),this.handleShowShipList(this.index)},showTempShip(){this.handleShowTempShipList(this.index)},showItemPresets(){this.handleShowItemPreset(this.index)},toggleVersion(){const t=this.$store.state.ships,e=this.value.data;let i=t.filter((t=>t.originalId===e.originalId&&t.isFinal&&t.version>1)).sort(((t,e)=>t.version-e.version));"宗谷"===e.name&&(i=t.filter((t=>"宗谷"===t.name)));const s=i.findIndex((t=>t.id===e.id));let a;a=s<i.length-1?i[s+1]:i[s-s];const{items:n,exItem:l}=this.value,o=[];let r;for(let d=0;d<a.slots.length;d+=1){const t=n[d];t&&u.Z.isValidItem(a,t.data,d)?o.push(new c.Z({item:t,slot:a.slots[d]})):o.push(new c.Z)}r=u.Z.isValidItem(a,l.data)?new c.Z({item:l}):new c.Z;const m=this.value.hp-(this.value.level>99?this.value.data.hp2:this.value.data.hp),h=(this.value.level>99?a.hp2:a.hp)+m,p=d.Z.getStatusFromLevel(this.value.level,a.maxAsw,a.minAsw)+this.value.improveAsw;let{luck:v}=this.value;const f=e.luck,g=v-f;v=g?a.luck+g:a.luck,this.setShip(new d.Z({master:a,level:this.value.level,hp:h,luck:v,asw:p,items:o,exItem:r}))},setDraggable(t){const e=t.target;if(e.closest(".item-input"))return;const i=e.closest(".ship-input");i.setAttribute("draggable","true")},resetDraggable(t){const e=t.target,i=e.closest(".ship-input");i.setAttribute("draggable","false")},dragStart(t){const e=document.getElementById("dragging-item");if(e)return;const i=t.target;if(this.value.isEmpty||!i||!i.classList||!i.classList.contains("ship-input")||!i.draggable)return;i.style.opacity="0.6",i.id="dragging-item",this.$store.dispatch("setDraggingShipData",this.value);const s=document.getElementsByClassName("ship-input");for(let a=0;a<s.length;a+=1)s[a].classList.add("dragging")},dragLeave(t){t.target.style.boxShadow=""},dragEnter(t){const e=document.getElementById("dragging-item"),i=t.target;e&&e.classList.contains("ship-input")&&i&&i.classList.contains("ship-input")&&(i.style.boxShadow="inset 0 0 80px rgba(20, 160, 255, 0.6)")},dropShip(t){t.preventDefault();const e=document.getElementById("dragging-item");if(!e||!e.classList.contains("ship-input"))return;const i=t.target;if(i.style.boxShadow="",i.id)return;const s=this.$store.state.draggingShipData;this.$store.dispatch("setDraggingShipData",this.value),this.setShip(s),e.classList.add("move-ok")},dragEnd(t){const e=document.getElementsByClassName("ship-input");for(let n=0;n<e.length;n+=1)e[n].classList.remove("dragging");const i=document.getElementById("dragging-item");if(!i||!i.draggable||!i.classList.contains("ship-input")){const e=t.target;return void(e&&e.classList.contains("ship-input")&&(e.style.opacity="1",e.id="",e.draggable=!1))}const s=t.target;if(s.style.opacity="1",s.id="",s.draggable=!1,!s.classList.contains("move-ok"))return;s.classList.remove("move-ok");const a=this.$store.state.draggingShipData;a&&this.setShip(a)},bootTooltip(t,e,i){const s=this.$store.state.siteSetting;if(!t.data.id||s.disabledItemTooltip)return;const a=i.target.getElementsByClassName("item-name")[0];window.clearTimeout(this.tooltipTimer),this.tooltipTimer=window.setTimeout((()=>{const i=a.getBoundingClientRect();this.tooltipX=i.x+i.width/3,this.tooltipY=i.y+i.height,this.tooltipItem=t,this.enabledTooltip=!0;const s=this.value.items.concat();s.push(this.value.exItem);const n=(0,h.cloneDeep)(s);n[e<0?n.length-1:e]=new c.Z;const l=d.Z.getItemBonus(this.value.data,n),o=p.Z.getTotalBonus(l),r=p.Z.getTotalBonus(this.value.itemBonuses);r.firePower&&(r.firePower-=o.firePower??0),r.torpedo&&(r.torpedo-=o.torpedo??0),r.antiAir&&(r.antiAir-=o.antiAir??0),r.armor&&(r.armor-=o.armor??0),r.asw&&(r.asw-=o.asw??0),r.avoid&&(r.avoid-=o.avoid??0),r.accuracy&&(r.accuracy-=o.accuracy??0),r.range&&(r.range-=o.range??0),r.bomber&&(r.bomber-=o.bomber??0),r.scout&&(r.scout-=o.scout??0),this.tooltipBonus=JSON.stringify(r)}),Math.max(s.popUpCount,10))},bootShipTooltip(t){const e=this.$store.state.siteSetting;e.disabledShipTooltip||(this.tooltipTimer=window.setTimeout((()=>{this.tooltipX=t.clientX,this.tooltipY=t.clientY,this.enabledShipTooltip=!0}),Math.max(e.popUpCount,10)))},clearTooltip(){this.enabledTooltip=!1,this.enabledShipTooltip=!1,window.clearTimeout(this.tooltipTimer)}}}),g=f,y=i(1001),_=i(3453),x=i.n(_),w=i(4562),C=i(9582),b=i(9223),I=i(4324),k=i(5495),A=i(4568),S=i(9670),T=i(8718),Z=i(9780),$=i(2082),P=i(6392),L=i.n(P),B=i(7069),E=(0,y.Z)(g,s,a,!1,null,"0be1595e",null),D=E.exports;x()(E,{VBtn:w.Z,VCard:C.Z,VDivider:b.Z,VIcon:I.Z,VImg:k.Z,VMenu:A.Z,VSlider:S.Z,VSpacer:T.Z,VTextField:Z.Z,VTooltip:$.Z}),L()(E,{Ripple:B.Z})},1891:function(t,e,i){i.d(e,{Z:function(){return p}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chart-container"},[i("DoughnutChart",{ref:"doughnutRef",attrs:{"chart-data":t.actualData,options:t.actualOptions,plugins:t.plugins}})],1)},a=[],n=i(144),l=i(5706),o=i(6775),r=i(9231),d=i(6429);o.kL.register(d.Z,...o.zX);var c=n.Z.use(l.ZP).extend({components:{DoughnutChart:r.LD},props:{data:{type:Object,required:!0},options:{type:Object},titleText:{type:String}},data:()=>({doughnutRef:{},plugins:[d.Z]}),computed:{actualData(){return this.$vuetify.theme.dark&&(this.data.datasets[0].borderColor="#222"),this.data},actualOptions(){return this.$vuetify.theme.dark&&(this.options.plugins.datalabels.color="#fff",this.options.plugins.title.color="#ccc"),this.titleText&&(this.options.plugins.title.text=this.titleText),this.options}}}),m=c,u=i(1001),h=(0,u.Z)(m,s,a,!1,null,"6bb4af6a",null),p=h.exports},7538:function(t,e,i){i.d(e,{Z:function(){return $}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],class:t.itemClass,attrs:{draggable:t.isDraggable},on:{dragstart:function(e){return e.stopPropagation(),t.dragStart(t.item,e)},dragenter:function(e){return t.dragEnter(e)},dragleave:function(e){return t.dragLeave(e)},drop:function(e){return e.stopPropagation(),t.dropItem(e)},dragend:function(e){return t.dragEnd(e)},dragover:function(t){t.preventDefault()}}},[i("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1,transition:"slide-y-transition",bottom:"",right:"",disabled:!t.item.data.isPlane||t.isExpandSlot||t.readonly||t.draggingNow},on:{input:t.onSlotMenuToggle},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,a=e.attrs;return[i("div",t._g(t._b({staticClass:"item-slot"},"div",a,!1),s),[t.isExpandSlot?t.isReleased?i("v-icon",[t._v("mdi-wrench")]):i("v-icon",{class:{"no-stock":t.item.noStock}},[t._v("mdi-cancel")]):i("span",[t._v(t._s(t.item.fullSlot))])],1)]}}]),model:{value:t.slotMenu,callback:function(e){t.slotMenu=e},expression:"slotMenu"}},[i("v-card",{staticClass:"px-2"},[i("div",{staticClass:"d-flex px-2"},[i("v-text-field",{staticClass:"slot-input",attrs:{type:"number",max:t.max,min:"0"},model:{value:t.slotValue,callback:function(e){t.slotValue=t._n(e)},expression:"slotValue"}}),i("v-btn",{staticClass:"ml-2 align-self-center",attrs:{depressed:""},on:{click:function(e){t.slotValue=t.init}}},[t._v(t._s(t.$t("Common.初期値")))])],1),i("v-slider",{attrs:{max:t.max,min:"0"},model:{value:t.slotValue,callback:function(e){t.slotValue=e},expression:"slotValue"}})],1)],1),i("div",{staticClass:"mx-1 item-icon",class:{draggable:t.isDraggable}},[t.item.data.iconTypeId>0?i("img",{attrs:{src:"./img/type/icon"+t.item.data.iconTypeId+".png",alt:"item-icon"}}):t._e()]),i("div",{staticClass:"item-name text-truncate",class:{"text--secondary":t.isNoItem,"is-special":t.item.data.isSpecial,"no-stock":t.item.noStock},on:{click:function(e){return e.stopPropagation(),t.showItemList()},keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.showItemList()}}},[t._v(" "+t._s(t.itemName)+" "),"Saury"===t.bonusText?i("div",{staticClass:"saury-bonus"},[t.$vuetify.theme.dark?i("v-icon",{attrs:{color:"light-blue lighten-3"}},[t._v("mdi-fish mdi-rotate-315")]):i("v-icon",{attrs:{color:"light-blue lighten-2"}},[t._v("mdi-fish mdi-rotate-315")])],1):t.bonusText?i("div",{staticClass:"item-special-text"},[i("div",{staticClass:"align-self-center"},[t._v(t._s(t.bonusText))])]):t._e()]),!t.isNoItem&&(!t.readonly||t.item.remodel>0||t.item.level>0)?[i("v-menu",{attrs:{"offset-y":"",transition:"slide-y-transition",left:"",disabled:t.readonly||t.draggingNow||t.isEnemy},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,a=e.attrs;return[i("div",t._g(t._b({staticClass:"item-remodel",class:{"no-remodel":!t.item.data.canRemodel,"value-0":0===t.item.remodel}},"div",a,!1),s),[i("v-icon",{attrs:{small:"",color:t.remodelIconColor}},[t._v("mdi-star")]),i("span",{class:t.remodelLabelColor},[t._v(t._s(t.item.remodel))])],1)]}}],null,!1,3381853348)},[i("v-card",[i("div",{staticClass:"d-flex"},t._l(11,(function(e){return i("div",{key:e,staticClass:"remodel-list-item",on:{click:function(i){return t.setRemodel(e-1)},keypress:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.setRemodel(e-1)}}},[i("v-icon",{attrs:{small:"",color:"teal accent-4"}},[t._v("mdi-star")]),i("span",{staticClass:"teal--text text--accent-4"},[t._v(t._s(e-1))])],1)})),0)])],1),i("v-menu",{attrs:{"offset-y":"",transition:"slide-y-transition",left:"",disabled:!t.item.data.isPlane||t.isExpandSlot||t.readonly||t.draggingNow||t.isEnemy},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,a=e.attrs;return[i("div",t._g(t._b({staticClass:"item-level"},"div",a,!1),s),[i("v-img",{attrs:{src:"./img/util/prof"+t.item.levelAlt+".png",height:"24",width:"18"}}),i("span",{staticClass:"level-value"},[t._v(t._s(t.item.level))])],1)]}}],null,!1,806240560)},[i("v-card",[i("div",{staticClass:"d-flex"},t._l(9,(function(e){return i("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],key:e-1,staticClass:"level-list-item",on:{click:function(i){return t.setLevel(e-1)},keypress:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.setLevel(e-1)}}},[i("v-img",{attrs:{src:"./img/util/prof"+(e-1)+".png",width:"18",height:"24"}}),i("span",{staticClass:"level-list-value"},[t._v(t._s(t.getLevelValue(e-1)))])],1)})),0)])],1),i("div",{staticClass:"ml-1 item-remove align-self-center"},[i("v-tooltip",{attrs:{top:"",color:"black","open-delay":200,disabled:!t.deathIndicatorColor},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,a=e.attrs;return[i("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.hover;return[i("v-btn",t._g(t._b({directives:[{name:"show",rawName:"v-show",value:t.isDraggable,expression:"isDraggable"}],attrs:{icon:"","x-small":""},on:{click:function(e){return t.removeItem()}}},"v-btn",a,!1),s),[n?i("v-icon",{attrs:{small:"",color:t.deathIndicatorColor}},[t._v("mdi-close")]):t.deathIndicatorColor?[t.isTriangleIcon?i("v-icon",{attrs:{"x-small":"",color:t.deathIndicatorColor}},[t._v("mdi-triangle")]):i("v-icon",{attrs:{small:"",color:t.deathIndicatorColor}},[t._v("mdi-record")])]:t._e()],2)]}}],null,!0)})]}}],null,!1,2297147381)},[i("span",[t._v(t._s(t.$t("Result.全滅率"))+" "+t._s(t.item.deathRate)+" %")])])],1)]:t._e()],2)},a=[],n=i(144),l=i(7525),o=i(7783),r=i(2382),d=i(6141),c=i(3631),m=i(7777),u=n.Z.extend({name:"ItemInput",props:{handleShowItemList:{type:Function,required:!0},value:{type:l.Z,required:!0},index:{type:Number,required:!0},readonly:{type:Boolean},max:{type:Number,required:!0},init:{type:Number,required:!0},dragSlot:{type:Boolean,default:!0},itemParent:{type:r.Z,default:void 0},handleDragStart:{type:Function},isEnemy:{type:Boolean,default:!1},isReleased:{type:Boolean,default:!0}},data:()=>({slotMenu:!1,slotValue:0,draggingNow:!1}),computed:{item(){return this.value},isExpandSlot(){return this.index===d.ZP.EXPAND_SLOT_INDEX},isNoItem(){return 0===this.value.data.id},setting(){return this.$store.state.siteSetting},needTrans(){return"ja"!==this.$i18n.locale&&!this.setting.nameIsNotTranslate},itemName(){return this.needTrans&&this.value.data.name?this.$t(`${this.value.data.name}`):this.isExpandSlot&&!this.isReleased&&this.isNoItem?this.$t("Fleet.補強増設未開放"):this.value.data.name||this.$t("Fleet.未装備")},isDraggable(){return this.value.data.id>0&&!this.readonly},remodelIconColor(){return this.item.data.canRemodel?this.$vuetify.theme.dark?this.item.remodel>0?"teal accent-4":"grey":this.item.remodel>0?"teal accent-4":"grey lighten-1":"red lighten-2"},remodelLabelColor(){return this.item.data.canRemodel?this.item.remodel>0?"teal--text text--accent-4":"grey--text text-lighten-1":"red--text text--lighten-2"},itemClass(){const t=["item-input",`type-${this.value.data.iconTypeId}`];return this.readonly&&t.push("readonly"),this.isExpandSlot&&(t.push("expand"),this.isReleased||t.push("disabled-expand")),this.isNoItem&&t.push("no-item"),this.value.data.isPlane||t.push("not-plane"),this.isDraggable||t.push("disabled-draggable"),t.join(" ")},bonusText(){if(!this.value.data.id||!this.value.data.bonuses.length)return"";const t=this.setting.displayBonusKey,e=this.value.data.bonuses.find((e=>e.key===t));return e?e.text:""},deathIndicatorColor(){return this.value.data.isPlane&&this.value.deathRate&&this.setting.showDeathRateIndicator?this.value.deathRate<10?"amber":this.value.deathRate<20?"orange darken-3":"red darken-2":""},isTriangleIcon(){return this.setting.isGraphicModeDeathRateIndicator&&this.value.deathRate>=10}},methods:{setItem(t){this.$emit("input",t)},onSlotMenuToggle(){if(this.slotMenu)this.slotValue=this.item.fullSlot;else{const t={item:this.item,slot:Math.floor(this.slotValue)};this.setItem(new l.Z(t))}},removeItem(){this.setItem(new l.Z)},setLevel(t){const e={item:this.item,level:d.ZP.PROF_LEVEL_BORDER[t]};this.setItem(new l.Z(e))},setRemodel(t){const e={item:this.item,remodel:t};this.setItem(new l.Z(e))},getLevelValue(t){return d.ZP.PROF_LEVEL_BORDER[t]},showItemList(){this.handleShowItemList(this.index)},dragStart(t,e){const i=e.target;if(!this.isDraggable||!i||!i.classList||!i.classList.contains("item-input")||!i.draggable)return;const s=e.dataTransfer;s.setData("text/plain",JSON.stringify(t)),i.id="dragging-item",i.dataset.itemId=`${this.value.data.id}`,i.dataset.apiType=`${this.value.data.apiTypeId}`,i.dataset.isPlane=""+(this.value.data.isPlane?"true":"");const a=document.getElementsByClassName("item-input");for(let n=0;n<a.length;n+=1)a[n].classList.add("dragging");this.draggingNow=!0,this.handleDragStart()},dragEnter(t){const e=document.getElementById("dragging-item"),i=t.target;if(!e||!i||!i.classList||!i.classList.contains("item-input"))return;if(i.classList.contains("disabled-drop"))return void(i.style.backgroundColor="rgba(255, 128, 128, 0.6)");if(i.classList.contains("enabled-drop"))return void(i.style.backgroundColor="rgba(80, 160, 255, 0.6)");if(!e||!e.dataset.itemId||!e.dataset.apiType)return;const s=new o.Z;s.id=+e.dataset.itemId,s.apiTypeId=+e.dataset.apiType,this.itemParent instanceof r.Z&&!c.Z.isValidItem(this.itemParent.data,s,this.index)||this.itemParent instanceof m.Z&&!e.dataset.isPlane?(i.style.backgroundColor="rgba(255, 128, 128, 0.6)",i.classList.add("disabled-drop")):(i.style.backgroundColor="rgba(80, 160, 255, 0.6)",i.classList.add("enabled-drop"))},dragLeave(t){t.target.style.backgroundColor=""},dropItem(t){const e=document.getElementById("dragging-item");if(!e||!e.classList.contains("item-input"))return;const i=t.target;if(i.style.backgroundColor="",!i.classList.contains("enabled-drop"))return;const s=t.dataTransfer.getData("text/plain");if(!this.isNoItem&&!t.ctrlKey&&e){const t=JSON.stringify(this.item);e.dataset.item=t}if(!t.ctrlKey&&e&&e.classList.add("delete-flg"),s){const t={item:JSON.parse(s)};this.dragSlot||(t.item&&41===t.item.data.apiTypeId?t.slot=1:41===this.value.data.apiTypeId?t.slot=this.init:t.slot=this.value.fullSlot),this.itemParent instanceof m.Z&&t.item&&(t.slot=Math.min(t.slot??t.item.slot,t.item.data.airbaseMaxSlot)),this.setItem(new l.Z(t))}},dragEnd(){const t=document.getElementsByClassName("item-input");for(let l=0;l<t.length;l+=1)t[l].classList.remove("dragging");const e=document.getElementsByClassName("enabled-drop");while(e.length>0)e[0].classList.remove("enabled-drop");const i=document.getElementsByClassName("disabled-drop");while(i.length>0)i[0].classList.remove("disabled-drop");const s=document.getElementById("dragging-item");if(!s||!s.draggable)return;s.id="",delete s.dataset.itemId,delete s.dataset.apiType,delete s.dataset.isPlane;const a={};this.dragSlot||(a.slot=this.value.fullSlot);const n=s.dataset.item;n?(a.item=JSON.parse(n),this.itemParent instanceof r.Z?c.Z.isValidItem(this.itemParent.data,a.item.data,this.index)?(41===a.item.data.apiTypeId?a.slot=1:41===this.value.data.apiTypeId&&(a.slot=this.init),this.setItem(new l.Z(a)),delete s.dataset.item):(a.item=void 0,this.setItem(new l.Z(a)),delete s.dataset.item):a.item&&a.item.data.isPlane?(this.setItem(new l.Z(a)),delete s.dataset.item):(a.item=void 0,this.setItem(new l.Z(a)),delete s.dataset.item)):s.classList.contains("delete-flg")?(s.classList.remove("delete-flg"),this.setItem(new l.Z(a))):this.setItem(new l.Z({item:this.value})),this.draggingNow=!1}}}),h=u,p=i(1001),v=i(3453),f=i.n(v),g=i(4562),y=i(9582),_=i(8224),x=i(4324),w=i(5495),C=i(4568),b=i(9670),I=i(9780),k=i(2082),A=i(6392),S=i.n(A),T=i(7069),Z=(0,p.Z)(h,s,a,!1,null,"7cf1efce",null),$=Z.exports;f()(Z,{VBtn:g.Z,VCard:y.Z,VHover:_.Z,VIcon:x.Z,VImg:w.Z,VMenu:C.Z,VSlider:b.Z,VTextField:I.Z,VTooltip:k.Z}),S()(Z,{Ripple:T.Z})},4816:function(t,e,i){i.d(e,{Z:function(){return q}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"list-card"},[i("div",{staticClass:"d-flex py-2 pr-2 align-center"},[i("div",{staticClass:"item-search-text ml-5"},[i("v-text-field",{attrs:{placeholder:t.$t("ItemList.図鑑id 名称検索"),clearable:"","hide-details":"",dense:"","prepend-inner-icon":"mdi-magnify"},on:{input:function(e){return t.filter()}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),i("div",{staticClass:"ml-5 filter-select"},[i("v-select",{attrs:{dense:"","hide-details":"",items:t.filterStatusItems},on:{change:function(e){return t.changedFilter()}},model:{value:t.filterStatus,callback:function(e){t.filterStatus=e},expression:"filterStatus"}})],1),i("div",{staticClass:"filter-value-input"},[i("v-text-field",{attrs:{dense:"","hide-details":"",type:"number",max:"30",min:"0"},on:{input:function(e){return t.changedFilter()}},model:{value:t.filterStatusValue,callback:function(e){t.filterStatusValue=e},expression:"filterStatusValue"}})],1),i("div",{staticClass:"align-self-end caption"},[t._v(t._s(t.$t("ItemList.以上")))]),i("div",{staticClass:"ml-3"},[i("v-btn",{attrs:{color:"secondary",small:""},on:{click:function(e){return t.resetFilter()}}},[t._v(t._s(t.$t("Common.リセット")))])],1),i("v-spacer"),i("div",{staticClass:"d-none d-sm-block mr-5"},[i("v-btn-toggle",{attrs:{dense:"",borderless:"",mandatory:""},model:{value:t.multiLine,callback:function(e){t.multiLine=e},expression:"multiLine"}},[i("v-btn",{class:{primary:!t.multiLine,secondary:t.multiLine},attrs:{value:!1},on:{click:function(e){return e.stopPropagation(),t.changeMultiLine(!1)}}},[i("v-icon",{attrs:{color:"white"}},[t._v("mdi-view-headline")]),i("span",{staticClass:"white--text"},[t._v(t._s(t.$t("ItemList.一列")))])],1),i("v-btn",{class:{primary:t.multiLine,secondary:!t.multiLine},attrs:{value:!0},on:{click:function(e){return e.stopPropagation(),t.changeMultiLine(!0)}}},[i("v-icon",{attrs:{color:"white"}},[t._v("mdi-view-comfy")]),i("span",{staticClass:"white--text"},[t._v(t._s(t.$t("ItemList.複数列")))])],1)],1)],1),i("v-btn",{attrs:{icon:""},on:{click:t.close}},[i("v-icon",[t._v("mdi-close")])],1)],1),i("v-divider"),i("div",{staticClass:"item-filter-container px-3 py-1"},[i("div",[i("v-checkbox",{attrs:{"hide-details":"",dense:"",label:t.$t("ItemList.敵装備")},on:{change:function(e){return t.filter()}},model:{value:t.isEnemyMode,callback:function(e){t.isEnemyMode=e},expression:"isEnemyMode"}})],1),t.isAirbaseMode?t._e():i("div",{staticClass:"d-flex manual-checkbox"},[i("v-btn",{staticClass:"manual-checkbox-button",attrs:{icon:""},on:{click:function(e){return t.toggleAffectingRangeFilter()}}},[t.onlyAffectingRange?i("v-icon",{staticClass:"manual-icon",attrs:{color:"primary"}},[t._v("mdi-checkbox-marked")]):t.onlyNotAffectingRange?i("v-icon",{staticClass:"manual-icon",attrs:{color:"error"}},[t._v("mdi-close-box")]):i("v-icon",{staticClass:"manual-icon"},[t._v("mdi-minus-box-outline")])],1),i("span",{on:{click:function(e){return t.toggleAffectingRangeFilter()},keypress:function(e){return t.toggleAffectingRangeFilter()}}},[t._v(t._s(t.$t("ItemList.射程増加")))])],1),7!==t.type||t.isEnemyMode?t._e():i("div",{staticClass:"d-flex manual-checkbox"},[i("v-btn",{staticClass:"manual-checkbox-button",attrs:{icon:""},on:{click:function(e){return t.toggleLandBaseAttackFilter()}}},[t.onlyEnabledLandBaseAttack?i("v-icon",{staticClass:"manual-icon",attrs:{color:"primary"}},[t._v("mdi-checkbox-marked")]):t.onlyDisabledLandBaseAttack?i("v-icon",{staticClass:"manual-icon",attrs:{color:"error"}},[t._v("mdi-close-box")]):i("v-icon",{staticClass:"manual-icon"},[t._v("mdi-minus-box-outline")])],1),i("span",{on:{click:function(e){return t.toggleLandBaseAttackFilter()},keypress:function(e){return t.toggleLandBaseAttackFilter()}}},[t._v(t._s(t.$t("ItemList.対地攻撃")))])],1),t.enabledNightAircraftFilter?i("div",{staticClass:"d-flex manual-checkbox"},[i("v-checkbox",{attrs:{"hide-details":"",dense:"",label:t.$t("ItemList.夜間機")},on:{click:function(e){return t.filter()}},model:{value:t.onlyNightAircraft,callback:function(e){t.onlyNightAircraft=e},expression:"onlyNightAircraft"}})],1):t._e(),t.enabledAAResistFilter?i("div",{staticClass:"d-flex manual-checkbox"},[i("v-checkbox",{attrs:{"hide-details":"",dense:"",label:t.$t("ItemList.射撃回避")},on:{click:function(e){return t.filter()}},model:{value:t.onlyAAResistAircraft,callback:function(e){t.onlyAAResistAircraft=e},expression:"onlyAAResistAircraft"}})],1):t._e(),14===t.type?[i("div",[i("v-checkbox",{attrs:{"hide-details":"",dense:"",label:t.$t("EType.ソナー")},on:{click:function(e){return t.filter()}},model:{value:t.includeSonar,callback:function(e){t.includeSonar=e},expression:"includeSonar"}})],1),i("div",[i("v-checkbox",{attrs:{"hide-details":"",dense:"",label:t.$t("EType.爆雷")},on:{click:function(e){return t.filter()}},model:{value:t.includeDepthCharge,callback:function(e){t.includeDepthCharge=e},expression:"includeDepthCharge"}})],1),i("div",[i("v-checkbox",{attrs:{"hide-details":"",dense:"",label:t.$t("EType.爆雷投射機")},on:{click:function(e){return t.filter()}},model:{value:t.includeDepthChargeLauncher,callback:function(e){t.includeDepthChargeLauncher=e},expression:"includeDepthChargeLauncher"}})],1)]:t._e(),!t.isEnemyMode&&t.setting.displayBonusKey?i("div",[i("v-checkbox",{attrs:{"hide-details":"",dense:"",label:t.$t("ItemList.特効装備")},on:{click:function(e){return t.filter()}},model:{value:t.isSpecialOnly,callback:function(e){t.isSpecialOnly=e},expression:"isSpecialOnly"}})],1):t._e(),t.isStockOnly&&!t.multiLine?i("div",[i("v-checkbox",{attrs:{"hide-details":"",dense:"",label:t.$t("ItemList.改修値無効")},on:{click:function(e){return t.filter()}},model:{value:t.sortExcludeRemodelStatus,callback:function(e){t.sortExcludeRemodelStatus=e},expression:"sortExcludeRemodelStatus"}})],1):t._e(),t.multiLine||t.isAirbaseMode?t._e():i("div",[i("v-checkbox",{attrs:{"hide-details":"",dense:"",label:t.$t("ItemList.装備シナジー無効")},on:{click:function(e){return t.filter()}},model:{value:t.sortExcludeSynergyStatus,callback:function(e){t.sortExcludeSynergyStatus=e},expression:"sortExcludeSynergyStatus"}})],1),i("div",{staticClass:"ml-auto mt-1 d-flex align-center"},[t.itemStock.length&&!t.isEnemyMode?i("v-switch",{staticClass:"mt-0 mr-2",attrs:{label:t.$t("ItemList.所持装備反映"),dense:"","hide-details":""},on:{click:t.clickedStockOnly},model:{value:t.isStockOnly,callback:function(e){t.isStockOnly=e},expression:"isStockOnly"}}):t._e(),i("v-btn",{attrs:{color:"secondary",small:""},on:{click:function(e){return t.showBlacklist()}}},[i("v-icon",[t._v("mdi-eye-off")]),t._v("("+t._s(t.setting.blacklistItemIds.length)+")")],1)],1)],2),i("div",{staticClass:"d-flex flex-wrap",class:{"ml-3":t.multiLine,"ml-1":!t.multiLine}},[i("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],staticClass:"type-selector d-flex",class:{active:-1===t.type,disabled:t.keyword},on:{click:function(e){return t.changeType(-1)},keypress:function(e){return t.changeType(-1)}}},[i("div",{staticClass:"type-all-text"},[t._v("ALL")])]),t._l(t.enabledTypes,(function(e){return i("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],key:e.id,staticClass:"type-selector",class:{active:t.type===e.id,disabled:t.keyword},on:{click:function(i){return t.changeType(e.id)},keypress:function(i){return t.changeType(e.id)}}},[i("v-img",{attrs:{src:"./img/type/type"+(t.isAirbaseMode&&17===e.id?26:e.id)+".png",height:"32",width:"32"}})],1)}))],2),i("v-divider",{class:{"mx-3":t.multiLine}}),i("div",{staticClass:"pb-2",class:{"ml-3":t.multiLine},attrs:{id:"item-table-body"}},[!t.multiLine&&t.viewItems.length?i("div",{staticClass:"item-status-header"},[i("div",{staticClass:"pl-1"},[i("v-btn",{attrs:{icon:"",small:""},on:{click:function(e){t.sortDialog=!0}}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-sort")])],1)],1),i("div",{staticClass:"item-status text-left flex-grow-1",class:{desc:"name"===t.sortKey&&t.isDesc,asc:"name"===t.sortKey&&!t.isDesc},on:{click:function(e){return t.toggleSortKey("name")},keypress:function(e){return t.toggleSortKey("name")}}},[i("div",[i("v-icon",{attrs:{small:""}},[t._v("mdi-chevron-down")]),t._v(t._s(t.$t("Common.装備名称")))],1)]),t._l(t.headerItems,(function(e,s){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow(e.key,t.viewStatus),expression:"isShow(data.key, viewStatus)"}],key:"item"+s,staticClass:"item-status",class:{desc:t.sortKey===e.key&&t.isDesc,asc:t.sortKey===e.key&&!t.isDesc},on:{click:function(i){return t.toggleSortKey(e.key)},keypress:function(i){return t.toggleSortKey(e.key)}}},[i("div",[i("v-icon",{attrs:{small:""}},[t._v("mdi-chevron-down")]),t._v(t._s(t.$t("Common."+e.text)))],1)])})),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow("airPower",t.viewStatus),expression:"isShow('airPower', viewStatus)"}],staticClass:"item-status",class:{desc:"airPower"===t.sortKey&&t.isDesc,asc:"airPower"===t.sortKey&&!t.isDesc},on:{click:function(e){return t.toggleSortKey("airPower")},keypress:function(e){return t.toggleSortKey("airPower")}}},[i("div",{staticClass:"d-flex"},[i("div",{staticClass:"align-self-center ml-auto"},[i("v-icon",{attrs:{small:""}},[t._v("mdi-chevron-down")])],1),i("div",[i("div",{staticClass:"mr-1"},[t._v(t._s(t.$t("Common.制空")))]),i("div",[t._v("("+t._s(t.$t("Common.x機",{number:t.slot}))+")")])])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow("defenseAirPower",t.viewStatus),expression:"isShow('defenseAirPower', viewStatus)"}],staticClass:"item-status",class:{desc:"defenseAirPower"===t.sortKey&&t.isDesc,asc:"defenseAirPower"===t.sortKey&&!t.isDesc},on:{click:function(e){return t.toggleSortKey("defenseAirPower")},keypress:function(e){return t.toggleSortKey("defenseAirPower")}}},[i("div",{staticClass:"d-flex"},[i("div",{staticClass:"align-self-center ml-auto"},[i("v-icon",{attrs:{small:""}},[t._v("mdi-chevron-down")])],1),i("div",[i("div",[t._v(t._s(t.$t("Common.防空制空")))]),i("div",[t._v("("+t._s(t.$t("Common.x機",{number:t.slot}))+")")])])])])],2):t._e(),t._l(t.itemListData,(function(e,s){return i("div",{key:s},[t.multiLine?i("div",{staticClass:"type-divider"},[i("div",{staticClass:"caption text--secondary"},[t._v(t._s(t.$t("EType."+e.typeName)))]),i("div",{staticClass:"type-divider-border"})]):t._e(),i("div",{staticClass:"type-item-container",class:{multi:t.multiLine}},t._l(e.items,(function(e,s){return i("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:e.count?"info--text":"red--text"},expression:"{ class: v.count ? 'info--text' : 'red--text' }"}],key:s,staticClass:"list-item",class:{single:!t.multiLine,"no-stock":!e.count,"has-bonus":e.sumBonus,"has-bad-bonus":e.sumBonus<0,"ignore-bonus":t.sortExcludeSynergyStatus},on:{click:function(i){return t.clickedItem(e,i)},keypress:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.clickedItem(e,i)},contextmenu:function(i){return t.showItemMenu(e,i)}}},[i("div",[i("div",[i("v-img",{attrs:{src:"./img/type/icon"+e.item.data.iconTypeId+".png",height:"30",width:"30"}})],1),"Saury"===e.text?i("div",{staticClass:"saury-bonus"},[t.$vuetify.theme.dark?i("v-icon",{attrs:{color:"light-blue lighten-3"}},[t._v("mdi-fish mdi-rotate-315")]):i("v-icon",{attrs:{color:"light-blue lighten-2"}},[t._v("mdi-fish mdi-rotate-315")])],1):e.text?i("div",{staticClass:"item-special-text"},[i("div",{staticClass:"align-self-center"},[t._v(t._s(e.text))])]):t._e()]),i("div",{staticClass:"item-name-container",class:{"is-special":e.item.data.isSpecial},on:{mouseenter:function(i){return t.bootTooltip(e.item,e.bonus,i)},mouseleave:t.clearTooltip,focus:function(i){return t.bootTooltip(e.item,e.bonus,i)},blur:t.clearTooltip}},[i("div",{staticClass:"text-truncate"},[t._v(" "+t._s(t.needTrans?t.$t(""+e.item.data.name):e.item.data.name)+" ")])]),e.sumBonus?i("div",{staticClass:"bonus-icon"},[e.sumBonus<0?i("v-icon",{attrs:{color:"red lighten-1"}},[t._v("mdi-chevron-double-down")]):e.sumBonus<=2?i("v-icon",{staticClass:"pt-1",attrs:{color:"light-blue"}},[t._v("mdi-chevron-up")]):e.sumBonus<=5?i("v-icon",{attrs:{color:"light-blue"}},[t._v("mdi-chevron-double-up")]):i("v-icon",{attrs:{color:"light-blue"}},[t._v("mdi-chevron-triple-up")])],1):t._e(),t.isStockOnly&&e.remodel>0?i("div",{staticClass:"item-remodel caption mr-1"},[i("v-icon",{attrs:{small:"",color:"teal accent-4"}},[t._v("mdi-star")]),i("span",{staticClass:"teal--text text--accent-4"},[t._v(t._s(e.remodel))])],1):t._e(),t.isStockOnly&&!t.isEnemyMode?i("div",{staticClass:"item-count caption"},[i("span",[t._v("×")]),i("span",[t._v(t._s(e.count))])]):t._e(),t.multiLine?t._e():[t.isShowFire?i("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.actualFire)))]):t._e(),t.isShowDayBattleFire&&t.isAircraftMode?i("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.aircraftDayBattleFirePower)))]):t.isShowDayBattleFire?i("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.dayBattleFirePower)))]):t._e(),t.isShowTorpedo?i("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.actualTorpedo)))]):t._e(),t.isShowNightBattleFire?i("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.nightBattleFirePower)))]):t._e(),t.isShowBomber?i("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.actualBomber)))]):t._e(),t.isShowAntiAir?i("div",{staticClass:"item-status"},[t._v(t._s(e.item.data.antiAir?e.item.data.antiAir:""))]):t._e(),t.isShowActAntiAir?i("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.actualAntiAir)))]):t._e(),t.isShowDefAntiAir?i("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.actualDefenseAntiAir)))]):t._e(),t.isShowArmor?i("div",{staticClass:"item-status"},[t._v(t._s(e.item.data.armor?e.item.data.armor:""))]):t._e(),t.isShowAsw?i("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.data.asw)))]):t._e(),t.isShowActualAsw?i("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.actualAsw)))]):t._e(),t.isShowAvoid?i("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.actualAvoid)))]):t._e(),t.isShowScout?i("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.actualScout)))]):t._e(),t.isShowAccuracy?i("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.actualAccuracy)))]):t._e(),t.isShowAntiBomber?i("div",{staticClass:"item-status"},[t._v(t._s(e.item.data.antiBomber?e.item.data.antiBomber:""))]):t._e(),t.isShowAntiAirWeight?i("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.antiAirWeight)))]):t._e(),t.isShowAntiAirBonus?i("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.antiAirBonus/100)))]):t._e(),t.isAirbaseMode&&t.isShowRadius?i("div",{staticClass:"item-status"},[t._v(t._s(e.item.data.radius?e.item.data.radius:""))]):t._e(),t.isShowCost?i("div",{staticClass:"item-status"},[t._v(t._s(e.item.data.cost?e.item.data.cost:""))]):t._e(),t.isShowTP?i("div",{staticClass:"item-status"},[t._v(t._s(e.item.tp?e.item.tp:""))]):t._e(),t.isShowAvoidText?i("div",{staticClass:"item-status"},[t._v(" "+t._s(t.avoidTexts[e.item.data.avoidId]?t.$t("Common.回避性能."+t.avoidTexts[e.item.data.avoidId]):"")+" ")]):t._e(),t.isShowAirPower?i("div",{staticClass:"item-status"},[t._v(t._s(e.item.fullAirPower?e.item.fullAirPower:""))]):t._e(),t.isShowDefAirPower?i("div",{staticClass:"item-status"},[t._v(" "+t._s(e.item.defenseAirPower?e.item.defenseAirPower:"")+" ")]):t._e()]],2)})),0)])})),i("div",{directives:[{name:"show",rawName:"v-show",value:0===t.viewItems.length,expression:"viewItems.length === 0"}],staticClass:"body-2 text-center mt-10"},[t._v(t._s(t.$t("Common.探したけど見つからなかったよ"))+"😢")])],2),i("v-menu",{attrs:{"position-x":t.menuX,"position-y":t.menuY,absolute:"","offset-y":""},model:{value:t.showMenu,callback:function(e){t.showMenu=e},expression:"showMenu"}},[t.menuItem?i("v-list",{staticClass:"caption",attrs:{dense:""}},[i("v-list-item",{attrs:{link:""},on:{click:function(e){return t.clickedItem(t.menuItem)}}},[t._v(t._s(t.$t("Common.配備")))]),t.isStockOnly&&!t.isReadonlyMode?i("v-menu",{attrs:{"offset-x":"","max-width":"72"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,a=e.attrs;return[i("v-list-item",t._g(t._b({attrs:{link:""}},"v-list-item",a,!1),s),[t._v(t._s(t.$t("ItemList.改修値変更")))])]}}],null,!1,3220070258),model:{value:t.remodelChangeMenu,callback:function(e){t.remodelChangeMenu=e},expression:"remodelChangeMenu"}},[i("v-list",{staticClass:"caption",attrs:{dense:""}},t._l(11,(function(e){return i("v-list-item",{key:"change-remodel-"+e,attrs:{link:""},on:{click:function(i){return t.changeRemodel(t.menuItem.item,11-e)}}},[i("v-icon",{attrs:{small:"",color:"teal accent-4"}},[t._v("mdi-star")]),i("span",{staticClass:"teal--text text--accent-4"},[t._v(t._s(11-e))])],1)})),1)],1):t._e(),i("v-list-item",{attrs:{link:""},on:{click:function(e){return t.copyItemName()}}},[t._v(" "+t._s(t.$t("ItemList.装備名コピー"))+" "),i("input",{attrs:{id:"item-name-box",readonly:""},domProps:{value:t.menuItem.item.data.name}})]),i("v-list-item",{attrs:{link:"",disabled:t.menuItem.item.data.isEnemyItem},on:{click:function(e){return t.openWiki(t.menuItem.item.data)}}},[t._v(t._s(t.$t("ItemList.wikiを開く")))]),i("v-list-item",{attrs:{link:""},on:{click:function(e){t.showMenu=!1}}},[t._v(t._s(t.$t("ItemList.メニューを閉じる")))])],1):t._e()],1),i("v-tooltip",{attrs:{color:"black",bottom:"",right:"",transition:"slide-y-transition","position-x":t.tooltipX,"position-y":t.tooltipY},model:{value:t.enabledTooltip,callback:function(e){t.enabledTooltip=e},expression:"enabledTooltip"}},[i("item-tooltip",{attrs:{bonus:t.tooltipBonus},model:{value:t.tooltipItem,callback:function(e){t.tooltipItem=e},expression:"tooltipItem"}})],1),i("v-dialog",{attrs:{transition:"scroll-x-transition",width:"400"},model:{value:t.confirmDialog,callback:function(e){t.confirmDialog=e},expression:"confirmDialog"}},[i("v-card",{staticClass:"pa-3"},[i("div",{staticClass:"ma-4"},[i("div",[t._v(t._s(t.$t("Common.既に配備されています。")))]),i("div",{staticClass:"caption mt-2"},[t._v("※ "+t._s(t.$t("Common.配備を押せば無視して配備できます。")))])]),i("v-divider",{staticClass:"my-2"}),i("div",{staticClass:"d-flex"},[i("v-btn",{staticClass:"ml-auto",attrs:{color:"primary",dark:""},on:{click:function(e){return e.stopPropagation(),t.clickedItem(t.confirmItem,e)}}},[t._v(t._s(t.$t("Common.配備")))]),i("v-btn",{staticClass:"ml-4",attrs:{color:"secondary"},on:{click:function(e){e.stopPropagation(),t.confirmDialog=!1}}},[t._v(t._s(t.$t("Common.戻る")))])],1)],1)],1),i("v-dialog",{attrs:{width:"660"},on:{input:t.toggleBlacklistDialog},model:{value:t.blacklistDialog,callback:function(e){t.blacklistDialog=e},expression:"blacklistDialog"}},[i("blacklist-item-edit",{attrs:{"handle-close":t.closeBlacklist}})],1),i("v-dialog",{attrs:{width:"600"},model:{value:t.sortDialog,callback:function(e){t.sortDialog=e},expression:"sortDialog"}},[i("v-card",{staticClass:"px-3 py-3"},[i("div",{staticClass:"d-flex px-2 align-center"},[i("div",[t._v(t._s(t.$t("Common.ソート")))]),i("v-btn",{staticClass:"ml-auto",attrs:{icon:""},on:{click:function(e){t.sortDialog=!1}}},[i("v-icon",[t._v("mdi-close")])],1)],1),i("v-divider",{staticClass:"mt-2 mb-3"}),i("div",{staticClass:"sort-selector px-2"},t._l(t.sortKeyItems,(function(e,s){return i("div",{key:"key"+s,staticClass:"sort-key"},[i("v-btn",{class:{primary:e.value===t.sortKey},attrs:{block:"",text:""},on:{click:function(i){return t.selectSortKey(e.value)}}},[t._v(" "+t._s(t.$t("Common."+e.text))+" ")])],1)})),0),i("div",{staticClass:"d-flex justify-center"},[i("v-radio-group",{attrs:{row:"","hide-detail":""},on:{change:t.handleSortItem},model:{value:t.isDesc,callback:function(e){t.isDesc=e},expression:"isDesc"}},[i("v-radio",{staticClass:"mx-10",attrs:{label:t.$t("Common.昇順"),value:!1}}),i("v-radio",{staticClass:"mx-10",attrs:{label:t.$t("Common.降順"),value:!0}})],1)],1),i("v-divider"),i("div",{staticClass:"d-flex mt-3 justify-end"},[i("v-btn",{attrs:{color:"secondary"},on:{click:t.resetOrdering}},[t._v(t._s(t.$t("Common.リセット")))])],1)],1)],1),!t.isEnemyMode&&t.isJapanese?i("div",{staticClass:"hint-footer"},[i("div",{staticClass:"caption d-none d-md-block text--secondary"},[t._v("Ctrlキー + 装備をクリックでwikiを展開します。")])]):t._e()],1)},a=[],n=i(144),l=i(4313),o=i(7267),r=i(7777),d=i(5722),c=i(2382),m=i(6141),u=i(7525),h=i(9575),p=i(3631),v=i(6486),f=i(47),g=n.Z.extend({name:"ItemList",components:{ItemTooltip:l.Z,BlacklistItemEdit:o.Z},props:{handleEquipItem:{type:Function,required:!0},handleClose:{type:Function,required:!0},handleChangeWidth:{type:Function,required:!0}},data:()=>({itemParent:void 0,slotIndex:-1,all:[],baseItems:[],types:[],avoids:m.ZP.AVOID_TYPE,type:0,multiLine:!0,keyword:"",isEnemyMode:!1,isStockOnly:!1,isReadonlyMode:!1,isEnabledLandBaseAttack:!1,includeSonar:!0,includeDepthCharge:!0,includeDepthChargeLauncher:!0,onlyEnabledLandBaseAttack:!1,onlyDisabledLandBaseAttack:!1,onlyAffectingRange:!1,onlyNotAffectingRange:!1,onlyNightAircraft:!1,onlyAAResistAircraft:!1,isSpecialOnly:!1,sortExcludeRemodelStatus:!1,sortExcludeSynergyStatus:!1,slot:0,avoidTexts:m.ZP.AVOID_TYPE.map((t=>t.text)),viewStatus:m.ZP.ITEM_TYPES_ALT[0].viewStatus,setting:new h.Z,sortKey:"",isDesc:!1,viewItems:[],itemStock:[],usedItems:[],confirmDialog:!1,confirmItem:{item:new u.Z,count:0},headerItems:[{text:"火力",key:"actualFire"},{text:"砲戦火力",key:"dayBattleFirePower"},{text:"雷装",key:"actualTorpedo"},{text:"夜戦火力",key:"nightBattleFirePower"},{text:"爆装",key:"actualBomber"},{text:"対空",key:"antiAir"},{text:"出撃対空",key:"actualAntiAir"},{text:"防空対空",key:"actualDefenseAntiAir"},{text:"装甲",key:"armor"},{text:"対潜",key:"asw"},{text:"対潜",key:"actualAsw"},{text:"回避",key:"actualAvoid"},{text:"索敵",key:"actualScout"},{text:"命中",key:"actualAccuracy"},{text:"対爆",key:"antiBomber"},{text:"加重対空",key:"antiAirWeight"},{text:"艦隊防空",key:"antiAirBonus"},{text:"半径",key:"radius"},{text:"コスト",key:"cost"},{text:"TP",key:"tp"},{text:"射撃回避",key:"avoidId"},{text:"射程",key:"range"}],enabledTooltip:!1,tooltipTimer:void 0,tooltipItem:new u.Z,tooltipBonus:"",tooltipX:0,tooltipY:0,filterStatus:"radius",filterStatusItems:[],filterStatusValue:0,sortKeyItems:[],blacklistDialog:!1,blacklistItems:[],sortDialog:!1,decidedItem:!1,wikiDialog:!1,showMenu:!1,remodelChangeMenu:!1,menuItem:null,menuX:0,menuY:0}),mounted(){this.types=[];for(let e=0;e<m.ZP.ITEM_TYPES_ALT.length;e+=1){const t=m.ZP.ITEM_TYPES_ALT[e];this.types.push({id:t.id,text:t.text,viewStatus:t.viewStatus,types:t.types,sortKey:"",isDesc:!1})}const t=this.$store.state.items;for(let e=0;e<t.length;e+=1)this.all.push(t[e]);this.all.sort(((t,e)=>t.apiTypeId-e.apiTypeId)),this.avoidTexts[0]="",this.setting=this.$store.state.siteSetting,this.changeMultiLine(this.setting.isMultiLineForItemList),this.sortKeyItems.push({text:"図鑑ID",value:"id"});for(let e=0;e<this.headerItems.length;e+=1){const{text:t,key:i}=this.headerItems[e];"対潜"===t&&this.filterStatusItems.find((t=>t.text===this.$t("Common.対潜")))||(this.filterStatusItems.push({text:`${this.$t(`Common.${t}`)}`,value:i}),this.sortKeyItems.push({text:t,value:i}))}},computed:{isAirbaseMode(){return this.itemParent instanceof r.Z},isAircraftMode(){return this.itemParent instanceof c.Z&&(this.itemParent.data.isCV||[352,717].includes(this.itemParent.data.id))},itemListData(){const t=this.viewItems;if(this.multiLine){const e={id:1700,name:"爆雷投射機",sortKey:[]},i=m.ZP.ITEM_API_TYPE.concat();i.splice(22,0,e);const s=[];for(let a=0;a<i.length;a+=1){const n=i[a];let l=[];l=15===n.id?t.filter((t=>t.item.data.isStrictDepthCharge)):n.id===e.id?t.filter((t=>15===t.item.data.apiTypeId&&!t.item.data.isStrictDepthCharge)):t.filter((t=>t.item.data.apiTypeId===n.id)),l.length&&s.push({typeName:n.name,items:l})}return s}return[{typeName:"",items:t}]},enabledTypes(){const t=this.baseItems.map((t=>t.apiTypeId)),e=[];for(let i=0;i<this.types.length;i+=1){const s=this.types[i].types;t.find((t=>s.includes(t)))&&e.push(this.types[i])}return e},selectedType(){const t=this.types.find((t=>t.id===this.type));if(t)return t},isShow(){return(t,e)=>e.includes(t)},isShowFire(){return this.viewStatus.includes("actualFire")},isShowDayBattleFire(){return this.viewStatus.includes("dayBattleFirePower")},isShowNightBattleFire(){return this.viewStatus.includes("nightBattleFirePower")},isShowTorpedo(){return this.viewStatus.includes("actualTorpedo")},isShowBomber(){return this.viewStatus.includes("actualBomber")},isShowAntiAir(){return this.viewStatus.includes("antiAir")},isShowActAntiAir(){return this.viewStatus.includes("actualAntiAir")},isShowDefAntiAir(){return this.viewStatus.includes("actualDefenseAntiAir")},isShowArmor(){return this.viewStatus.includes("armor")},isShowAsw(){return this.viewStatus.includes("asw")},isShowActualAsw(){return this.viewStatus.includes("actualAsw")},isShowAvoid(){return this.viewStatus.includes("actualAvoid")},isShowScout(){return this.viewStatus.includes("actualScout")},isShowAccuracy(){return this.viewStatus.includes("actualAccuracy")},isShowAntiBomber(){return this.viewStatus.includes("antiBomber")},isShowAntiAirWeight(){return this.viewStatus.includes("antiAirWeight")},isShowAntiAirBonus(){return this.viewStatus.includes("antiAirBonus")},isShowRadius(){return this.viewStatus.includes("radius")},isShowCost(){return this.viewStatus.includes("cost")},isShowTP(){return this.viewStatus.includes("tp")},isShowAvoidText(){return this.viewStatus.includes("avoidId")},isShowAirPower(){return this.viewStatus.includes("airPower")},isShowDefAirPower(){return this.viewStatus.includes("defenseAirPower")},formatStatus(){return t=>t?""+Math.floor(10*t)/10:""},isJapanese(){return"ja"===this.$i18n.locale},needTrans(){const t=this.$store.state.siteSetting;return"ja"!==this.$i18n.locale&&!t.nameIsNotTranslate},enabledNightAircraftFilter(){return-1===this.type||6===this.type||7===this.type||8===this.type},enabledAAResistFilter(){return m.ZP.ATTACKERS.includes(this.type)||-1===this.type||1100===this.type}},methods:{changeType(t=0){this.type=t,this.selectedType&&this.selectedType.sortKey?(this.isDesc=this.selectedType.isDesc,this.sortKey=this.selectedType.sortKey):(this.sortKey="",this.isDesc=!1),this.filter()},clickedStockOnly(){this.setting.isStockOnlyForItemList=this.isStockOnly,this.$store.dispatch("updateSetting",this.setting),this.filter()},resetFilter(){this.keyword="",this.filterStatusValue=0,this.changedFilter()},initialFilter(t,e=0,i=[]){this.decidedItem=!1,this.itemParent=t,this.slotIndex=e,this.isEnemyMode=!1,this.filterStatus="radius",this.filterStatusValue=0,this.itemStock=this.$store.state.itemStock,this.setting=this.$store.state.siteSetting,this.isStockOnly=this.setting.isStockOnlyForItemList,this.isReadonlyMode=!1,this.$store.getters.getExistsTempStock&&(this.itemStock=this.$store.state.tempItemStock,this.isStockOnly=!0,this.isReadonlyMode=!0);const s=e===m.ZP.EXPAND_SLOT_INDEX;if(this.slot=s?0:t.items[e]?t.items[e].fullSlot:0,this.usedItems=[],i.length)this.usedItems=i;else{const t=this.$store.state.mainSaveData;if(t){const e=t.tempData[t.tempIndex];if(e){let t=[];for(let s=0;s<e.fleetInfo.fleets.length;s+=1){const{ships:i}=e.fleetInfo.fleets[s];for(let e=0;e<i.length;e+=1)t=t.concat(i[e].items.filter((t=>t.data.id>0))),i[e].exItem.data.id>0&&t.push(i[e].exItem)}const{airbases:i}=e.airbaseInfo;for(let e=0;e<i.length;e+=1)t=t.concat(i[e].items.filter((t=>t.data.id>0)));this.usedItems=t}}}let a=[];if(t instanceof c.Z&&t.data.id){this.baseItems=this.all.filter((i=>p.Z.isValidItem(t.data,i,e))),this.enabledTypes.length&&-1!==this.type&&!this.enabledTypes.find((t=>t.id===this.type))&&(this.type=this.enabledTypes[0].id);const i=this.setting.savedItemListFilter.find((t=>"ship"===t.parent));return i&&i.key&&(this.filterStatus=i.key),i&&i.value&&(this.filterStatusValue=i.value),void this.filter()}if(t instanceof c.Z)for(let n=1;n<=60;n+=1)m.ZP.AB_PLANE_TYPES.includes(n)||a.push(n);else if(t instanceof r.Z){a=m.ZP.PLANE_TYPES.concat(),-1===this.type||a.includes(this.type)||(this.type=47),this.slot=18;const t=this.setting.savedItemListFilter.find((t=>"airbase"===t.parent));t&&t.key&&(this.filterStatus=t.key),t&&t.value&&(this.filterStatusValue=t.value)}else if(t instanceof d.Z){a=m.ZP.ITEM_API_TYPE.map((t=>t.id));const t=this.all.filter((t=>t.isEnemyItem));a=a.filter((e=>t.some((t=>t.apiTypeId===e)))),this.isEnemyMode=!0,a.includes(this.type)||(this.type=+a[0])}if(s){const t=m.ZP.EXPANDED_ITEM_TYPE;a=a.filter((e=>t.includes(e)))}this.baseItems=this.all.filter((t=>a.includes(t.apiTypeId))),this.filter()},changedFilter(){const t={parent:"ship",key:this.filterStatus,value:this.filterStatusValue};if(this.itemParent instanceof c.Z)t.parent="ship";else{if(!this.isAirbaseMode)return void this.filter();t.parent="airbase"}if(!this.setting.savedItemListFilter)return void this.filter();const e=this.setting.savedItemListFilter.findIndex((e=>e.parent===t.parent));e>=0&&(this.setting.savedItemListFilter[e]=t,this.$store.dispatch("updateSetting",this.setting)),this.filter()},toggleAffectingRangeFilter(){this.onlyAffectingRange?(this.onlyAffectingRange=!1,this.onlyNotAffectingRange=!0):this.onlyNotAffectingRange?this.onlyNotAffectingRange=!1:this.onlyAffectingRange=!0,this.filter()},toggleLandBaseAttackFilter(){this.onlyEnabledLandBaseAttack?(this.onlyEnabledLandBaseAttack=!1,this.onlyDisabledLandBaseAttack=!0):this.onlyDisabledLandBaseAttack?this.onlyDisabledLandBaseAttack=!1:this.onlyEnabledLandBaseAttack=!0,this.filter()},filter(){const t=this.keyword?this.keyword.toUpperCase():"";let e=this.baseItems.concat();const i=this.setting.displayBonusKey;if(e=this.isEnemyMode?e.filter((t=>t.isEnemyItem)):e.filter((t=>!t.isEnemyItem)),7===this.type&&(this.onlyEnabledLandBaseAttack?e=e.filter((t=>m.ZP.ENABLED_LAND_BASE_ATTACK.includes(t.id))):this.onlyDisabledLandBaseAttack&&(e=e.filter((t=>!m.ZP.ENABLED_LAND_BASE_ATTACK.includes(t.id))))),14===this.type&&(this.includeSonar||(e=e.filter((t=>14!==t.apiTypeId))),this.includeDepthCharge||(e=e.filter((t=>1700!==t.iconTypeId))),this.includeDepthChargeLauncher||(e=e.filter((t=>17!==t.iconTypeId)))),this.enabledNightAircraftFilter&&this.onlyNightAircraft&&(e=e.filter((t=>t.isNightAircraftItem))),this.enabledAAResistFilter&&this.onlyAAResistAircraft&&(e=e.filter((t=>t.avoidId))),this.isSpecialOnly&&i&&(e=e.filter((t=>t.bonuses.find((t=>t.key===i))))),this.setting.blacklistItemIds.length){const t=this.setting.blacklistItemIds;e=e.filter((e=>!t.includes(e.id)))}t&&(e=e.filter((e=>e.id===+t||e.name.toUpperCase().indexOf(t)>=0)));const s=this.types.find((t=>t.id===this.type));!t&&this.type&&s?(this.viewStatus=s.viewStatus.concat(),this.isAirbaseMode?this.viewStatus.includes("nightBattleFirePower")&&(this.viewStatus[this.viewStatus.indexOf("nightBattleFirePower")]="antiAir"):(this.viewStatus.includes("radius")&&(this.viewStatus[this.viewStatus.indexOf("radius")]="dayBattleFirePower"),this.viewStatus.includes("cost")&&(this.viewStatus[this.viewStatus.indexOf("cost")]="actualAvoid")),e=e.filter((t=>s.types.includes(t.apiTypeId)))):t||-1!==this.type||(this.itemParent instanceof c.Z?this.viewStatus=["dayBattleFirePower","antiAir","actualAccuracy","actualScout","nightBattleFirePower","actualAsw"]:this.isAirbaseMode?this.viewStatus=["actualTorpedo","actualBomber","actualAntiAir","radius","airPower","defenseAirPower"]:this.viewStatus=["actualFire","actualAntiAir","actualAccuracy","actualScout","actualAvoid","armor"]);let a=this.usedItems.concat();const n=this.sortExcludeRemodelStatus&&this.isStockOnly,l=this.sortExcludeSynergyStatus,o=[],r=this.setting.planeInitialLevels,{slot:d}=this;if(!this.isEnemyMode&&this.isStockOnly){const t=this.itemStock;for(let s=0;s<e.length;s+=1){const l=e[s],c=r.find((t=>t.id===l.apiTypeId)),m=t.find((t=>t.id===l.id));if(!m)continue;const h=c?c.level:0,p=i?l.bonuses.find((t=>t.key===i)):null;for(let t=10;t>=0;t-=1){let e=m.num[t];if(!e)continue;const i=new u.Z({master:l,slot:d,remodel:t,level:h,ignoreRemodelBonus:n}),s=a.filter((e=>e.data.id===l.id&&e.remodel===t)).length;e-=s,a=a.filter((e=>e.data.id!==l.id||e.remodel!==t)),o.push({item:i,count:Math.max(e,0),remodel:t,sumBonus:0,bonus:{},text:p?p.text:"",dayBattleFirePower:i.dayBattleFirePower,aircraftDayBattleFirePower:i.aircraftDayBattleFirePower})}}}else for(let c=0;c<e.length;c+=1){const t=e[c],s=r.find((e=>e.id===t.apiTypeId)),a=s?s.level:0,n=i?t.bonuses.find((t=>t.key===i)):null,l=new u.Z({master:t,slot:d,level:a});o.push({item:l,count:1,sumBonus:0,remodel:0,bonus:{},text:n?n.text:"",dayBattleFirePower:l.dayBattleFirePower,aircraftDayBattleFirePower:l.aircraftDayBattleFirePower})}if(this.viewItems=o,this.itemParent instanceof c.Z){const t=this.itemParent.items.concat();t.push(this.itemParent.exItem),this.slotIndex===m.ZP.EXPAND_SLOT_INDEX&&(this.slotIndex=t.length-1);const e=(0,v.cloneDeep)(t);e[this.slotIndex]=new u.Z;const i=c.Z.getItemBonus(this.itemParent.data,e),s=f.Z.getTotalBonus(i);for(let n=0;n<o.length;n+=1){const e=o[n],a=(0,v.cloneDeep)(t);a[this.slotIndex]=e.item;const r=c.Z.getItemBonus(this.itemParent.data,a);if(r.length>i.length){const t=f.Z.getTotalBonus(r);let i=0;t.firePower&&(t.firePower-=s.firePower??0,i+=t.firePower),t.torpedo&&(t.torpedo-=s.torpedo??0,i+=t.torpedo),t.antiAir&&(t.antiAir-=s.antiAir??0,i+=t.antiAir),t.armor&&(t.armor-=s.armor??0,i+=t.armor),t.asw&&(t.asw-=s.asw??0,i+=t.asw),t.avoid&&(t.avoid-=s.avoid??0,i+=t.avoid),t.accuracy&&(t.accuracy-=s.accuracy??0,i+=t.accuracy),t.range&&(t.range-=s.range??0,i+=t.range),t.bomber&&(t.bomber-=s.bomber??0,i+=t.bomber),t.scout&&(t.scout-=s.scout??0,i+=t.scout),e.sumBonus=i,e.bonus=t,l||(e.item.actualFire+=t.firePower??0,e.item.actualTorpedo+=t.torpedo??0,e.item.actualAsw+=t.asw??0,e.item.actualAccuracy+=t.accuracy??0,e.item.actualScout+=t.scout??0,e.item.actualAvoid+=t.avoid??0,e.item.nightBattleFirePower+=(t.firePower??0)+(t.torpedo??0),e.item.data.isPlane&&!e.item.data.isSPPlane?(e.dayBattleFirePower+=t.firePower??0,e.aircraftDayBattleFirePower+=1.5*((t.firePower??0)+(t.torpedo??0)+(t.bomber??0))):(e.dayBattleFirePower+=t.firePower??0,e.aircraftDayBattleFirePower+=t.firePower??0))}}const a=this.itemParent.displayStatus.range;this.onlyAffectingRange?this.viewItems=this.viewItems.filter((t=>t.bonus.range||a<t.item.data.range)):this.onlyNotAffectingRange&&(this.viewItems=this.viewItems.filter((t=>!t.bonus.range&&a>=t.item.data.range)))}const h=this.filterStatusValue?+this.filterStatusValue:0;if(this.filterStatus&&h){let t=this.filterStatus;n&&t.startsWith("actual")&&(t=t.replace("actual",""),t=t[0].toLowerCase()+t.slice(1));const e=t.indexOf("actual")>=0||"tp"===t||"airPower"===t||"defenseAirPower"===t||"antiAirWeight"===t||"antiAirBonus"===t;this.viewItems=this.viewItems.filter((i=>e?i.item[t]>=h:i.item.data[t]>=h))}this.sortKey&&this.sortItems()},clickedItem(t,e){e&&e.ctrlKey&&t&&t.item&&!t.item.data.isEnemyItem?this.openWiki(t.item.data):this.decidedItem||(this.clearTooltip(),t.count||this.confirmDialog?(this.decidedItem=!0,this.confirmDialog=!1,this.handleEquipItem(new u.Z({item:t.item,remodel:t.remodel}))):(this.confirmItem=t,this.confirmDialog=!0))},changeMultiLine(t){this.handleChangeWidth(t?1200:900),this.multiLine=t,this.setting.isMultiLineForItemList=t,this.$store.dispatch("updateSetting",this.setting)},close(){this.handleClose()},toggleSortKey(t){this.sortKey!==t?(this.isDesc=!0,this.sortKey=t,this.sortItems()):this.sortKey===t&&this.isDesc?(this.isDesc=!1,this.sortItems()):this.sortKey!==t||this.isDesc||(this.sortKey="",this.filter()),this.selectedType&&(this.selectedType.isDesc=this.isDesc,this.selectedType.sortKey=this.sortKey)},selectSortKey(t){this.sortKey!==t&&(this.isDesc="id"!==t,this.sortKey=t,this.handleSortItem())},handleSortItem(){this.sortItems(),this.selectedType&&(this.selectedType.isDesc=this.isDesc,this.selectedType.sortKey=this.sortKey)},resetOrdering(){this.sortKey="",this.filter(),this.selectedType&&(this.selectedType.isDesc=this.isDesc,this.selectedType.sortKey=this.sortKey)},sortItems(){const t=this.sortKey,e=this.isDesc?1:-1;if("dayBattleFirePower"===t)return this.isAircraftMode?void this.viewItems.sort(((t,i)=>e*(i.aircraftDayBattleFirePower-t.aircraftDayBattleFirePower))):void this.viewItems.sort(((t,i)=>e*(i.dayBattleFirePower-t.dayBattleFirePower)));const i="name"===t,s=t.indexOf("actual")>=0||"tp"===t||"airPower"===t||"defenseAirPower"===t||"antiAirWeight"===t||"antiAirBonus"===t||"nightBattleFirePower"===t;this.viewItems.sort(((a,n)=>{if(s)return e*(n.item[t]-a.item[t]);if(i){const t=String(a.item.data.name).replace(/(\d+)/g,(t=>t.padStart(10,"0"))),i=String(n.item.data.name).replace(/(\d+)/g,(t=>t.padStart(10,"0")));return-e*(t<i?-1:t>i?1:0)}return e*(n.item.data[t]-a.item.data[t])}))},bootTooltip(t,e,i){const s=this.$store.state.siteSetting;if(s.disabledItemTooltip)return;const a=i.target;window.clearTimeout(this.tooltipTimer),this.tooltipTimer=window.setTimeout((()=>{const s=a.getBoundingClientRect();i instanceof FocusEvent?this.tooltipX=this.multiLine?s.x+s.width/3:s.left:this.tooltipX=this.multiLine?s.x+s.width/3:i.clientX,this.tooltipY=s.y+s.height,this.tooltipItem=t,this.tooltipBonus=e?JSON.stringify(e):"",this.enabledTooltip=!0}),Math.max(s.popUpCount,10))},clearTooltip(){this.enabledTooltip=!1,window.clearTimeout(this.tooltipTimer)},showBlacklist(){this.blacklistDialog=!0},closeBlacklist(){this.blacklistDialog=!1,this.toggleBlacklistDialog()},toggleBlacklistDialog(){this.blacklistDialog||this.filter()},openWiki(t){let e=`https://wikiwiki.jp/kancolle/${encodeURI(t.name.replaceAll("/","／").replaceAll("+","＋").replaceAll("&","＆").replaceAll("Ⅲ","III"))}`;144===t.id?e=`https://wikiwiki.jp/kancolle/${encodeURI("天山(村田隊)")}`:303===t.id&&(e=`https://wikiwiki.jp/kancolle/${encodeURI("Bofors15.2cm連装砲 Model1930")}`),window.open(e)},showItemMenu(t,e){e.preventDefault(),this.menuItem=t,this.showMenu=!1,this.menuX=e.clientX,this.menuY=e.clientY,this.clearTooltip(),this.$nextTick((()=>{this.showMenu=!0}))},copyItemName(){const t=document.getElementById("item-name-box");t.select(),document.execCommand("copy")},changeRemodel(t,e){const i=this.itemStock.find((e=>e.id===t.data.id));i&&i.num[t.remodel]>0&&(i.num[t.remodel]-=1,i.num[e]+=1,this.$store.dispatch("updateItemStock",this.itemStock),this.showMenu=!1,this.filter())}}}),y=g,_=i(1001),x=i(3453),w=i.n(x),C=i(4562),b=i(2016),I=i(9582),k=i(3486),A=i(4061),S=i(9223),T=i(4324),Z=i(5495),$=i(5808),P=i(4525),L=i(4568),B=i(8419),E=i(6379),D=i(9481),F=i(8718),R=i(9884),N=i(9780),V=i(2082),M=i(6392),O=i.n(M),K=i(7069),j=(0,_.Z)(y,s,a,!1,null,"1ffd6033",null),q=j.exports;w()(j,{VBtn:C.Z,VBtnToggle:b.Z,VCard:I.Z,VCheckbox:k.Z,VDialog:A.Z,VDivider:S.Z,VIcon:T.Z,VImg:Z.Z,VList:$.Z,VListItem:P.Z,VMenu:L.Z,VRadio:B.Z,VRadioGroup:E.Z,VSelect:D.Z,VSpacer:F.Z,VSwitch:R.Z,VTextField:N.Z,VTooltip:V.Z}),O()(j,{Ripple:K.Z})},8132:function(t,e,i){i.d(e,{Z:function(){return N}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",[i("div",{staticClass:"d-flex pt-2 pb-1 pr-2"},[i("div",{staticClass:"align-self-center ml-3"},[t._v(t._s(t.$t("ItemList.装備プリセット")))]),i("v-spacer"),i("v-btn",{attrs:{icon:""},on:{click:t.handleClose}},[i("v-icon",[t._v("mdi-close")])],1)],1),i("v-divider"),i("div",{staticClass:"px-3"},[i("div",{staticClass:"d-flex flex-wrap"},[i("v-btn",{staticClass:"my-2 mr-2",attrs:{color:"teal",dark:!t.disabledCommit,disabled:t.disabledCommit},on:{click:function(e){return t.readyPreset()}}},[t._v(" "+t._s(t.$t("ItemList.現在の装備構成で新規登録"))+" ")]),i("v-btn",{staticClass:"my-2",attrs:{color:"primary",disabled:t.disabledCommit||t.isPresetItemEmpty||t.isAACIMode||t.selectedIndex<0},on:{click:function(e){return t.overwritePreset()}}},[t._v(" "+t._s(t.$t("ItemList.現在の装備構成で上書き"))+" ")])],1),i("v-divider"),i("div",{staticClass:"preset-container py-1"},[i("div",{staticClass:"preset-list"},[i("draggable",{attrs:{handle:".preset-id",animation:"150"},on:{end:function(e){return t.sortEnd()}},model:{value:t.presets,callback:function(e){t.presets=e},expression:"presets"}},t._l(t.presets,(function(e,s){return i("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],key:"preset"+s,staticClass:"preset-item",class:{selected:!t.isAACIMode&&s===t.selectedIndex},on:{click:function(i){return t.clickedPreset(e.id)},dblclick:function(e){return t.expandPreset()},keypress:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.clickedPreset(e.id)}}},[i("div",{staticClass:"preset-id primary--text"},[t._v(t._s(e.id)+".")]),i("div",{staticClass:"preset-name text-truncate"},[t._v(t._s(e.name))])])})),0),t.uniquePresets.length?i("div",{staticClass:"mt-2 d-flex ml-1"},[i("div",{staticClass:"caption"},[t._v(t._s(t.$t("ItemList.固有プリセット")))]),i("div",{staticClass:"divider-line"})]):t._e(),t._l(t.uniquePresets,(function(e,s){return i("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],key:"preset"+s,staticClass:"preset-item",class:{selected:t.isAACIMode&&s===t.selectedIndex},on:{click:function(e){return t.clickedUniquePreset(s)},dblclick:function(e){return t.expandPreset()},keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.clickedUniquePreset(s)}}},[i("div",{staticClass:"aaci-preset-id success--text"},[t._v("AACI.")]),i("div",{staticClass:"preset-name text-truncate"},[t._v(t._s(e.name))]),i("div",{staticClass:"text--secondary caption d-flex align-center mr-2"},[i("div",[t._v("(")]),i("div",{staticClass:"mx-1"},[t._v(t._s(e.spec1))]),i("div",[t._v(",")]),i("div",{staticClass:"mx-1"},[t._v(t._s(e.spec2))]),i("div",[t._v(")")])]),i("div",[e.isLack?i("v-icon",{staticClass:"mr-2",attrs:{color:"warning",small:""}},[t._v("mdi-alert-outline")]):i("v-icon",{staticClass:"mr-2",attrs:{color:"transparent",small:""}},[t._v("mdi-alert-outline")])],1)])}))],2),i("div",{staticClass:"preset-view pl-2"},[t.isPresetItemEmpty?t._e():i("div",{staticClass:"mt-5 d-flex align-center"},[i("v-text-field",{attrs:{label:t.$t("ItemList.名称"),outlined:"",clearable:"",dense:"",maxlength:"100","hide-details":""},model:{value:t.selectedPreset.name,callback:function(e){t.$set(t.selectedPreset,"name","string"===typeof e?e.trim():e)},expression:"selectedPreset.name"}}),i("v-btn",{staticClass:"ml-2",attrs:{color:"success",disabled:!t.selectedPreset.name||t.isAACIMode},on:{click:function(e){return t.savePreset()}}},[t._v(" "+t._s(t.selectedIndex>=0?t.$t("Common.更新"):t.$t("Common.保存"))+" ")])],1),t.isPresetItemEmpty?t._e():i("div",{staticClass:"items-container pa-2 mt-2"},[t._l(t.itemView,(function(e,s){return i("div",{key:"view"+s,staticClass:"d-flex align-center py-1"},[e.data.iconTypeId?i("div",[i("v-img",{attrs:{src:"./img/type/icon"+e.data.iconTypeId+".png",width:"30",height:"30"}})],1):t._e(),i("div",{staticClass:"ml-1 text-truncate preset-item-name",class:{"is-lack":e.isLack}},[t._v(" "+t._s(t.needTrans?t.$t(""+e.data.name):e.data.name)+" ")]),e.remodel?i("div",{staticClass:"ml-1 d-flex align-center"},[i("v-icon",{attrs:{small:"",color:"teal accent-4"}},[t._v("mdi-star")]),i("div",{staticClass:"remodel-text"},[t._v(t._s(e.remodel))])],1):t._e(),e.isLack?i("div",{staticClass:"ml-auto"},[i("v-icon",{attrs:{color:"warning",small:""}},[t._v("mdi-alert-outline")])],1):t._e()])})),t.exItemView.data.id?i("div",{staticClass:"mt-2 d-flex ml-1"},[i("div",{staticClass:"caption"},[t._v(t._s(t.$t("ItemList.補強増設")))]),i("div",{staticClass:"divider-line"})]):t._e(),t.exItemView.data.id?i("div",{staticClass:"d-flex align-center py-1"},[t.exItemView.data.iconTypeId?i("div",[i("v-img",{attrs:{src:"./img/type/icon"+t.exItemView.data.iconTypeId+".png",width:"30",height:"30"}})],1):t._e(),i("div",{staticClass:"ml-1 text-truncate preset-item-name",class:{"is-lack":t.exItemView.isLack}},[t._v(" "+t._s(t.needTrans?t.$t(""+t.exItemView.data.name):t.exItemView.data.name)+" ")]),t.exItemView.remodel?i("div",{staticClass:"ml-1 d-flex align-center"},[i("v-icon",{attrs:{small:"",color:"teal accent-4"}},[t._v("mdi-star")]),i("div",{staticClass:"remodel-text"},[t._v(t._s(t.exItemView.remodel))])],1):t._e(),t.exItemView.isLack?i("div",{staticClass:"ml-auto"},[i("v-icon",{attrs:{color:"warning",small:""}},[t._v("mdi-alert-outline")])],1):t._e()]):t._e()],2),t.isPresetItemEmpty?t._e():i("div",{staticClass:"d-flex my-3 justify-end"},[t.selectedIndex>=0?i("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.expandPreset()}}},[t._v(t._s(t.$t("Common.展開")))]):t._e(),t.selectedIndex>=0&&t.selectedPreset.isLack?i("v-btn",{staticClass:"ml-2",attrs:{color:"warning"},on:{click:function(e){return t.expandPreset(!0)}}},[t._v(" "+t._s(t.$t("ItemList.在庫がなくても展開"))+" ")]):t._e(),t.isAACIMode?t._e():i("v-btn",{staticClass:"ml-2",attrs:{color:"error",disabled:t.selectedIndex<0},on:{click:function(e){return t.deletePreset()}}},[t._v(t._s(t.$t("Common.削除")))])],1)])])],1),i("v-snackbar",{attrs:{color:"success",top:t.snackbar},scopedSlots:t._u([{key:"action",fn:function(e){var s=e.attrs;return[i("v-btn",t._b({attrs:{icon:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",s,!1),[i("v-icon",[t._v("mdi-close")])],1)]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.infoText?t.$t("ItemList."+t.infoText):t.infoText)+" ")])],1)},a=[],n=i(144),l=i(9980),o=i.n(l),r=i(6162),d=i.n(r),c=i(361),m=i.n(c),u=i(2382),h=i(7327);class p{constructor(){(0,h.Z)(this,"id",0),(0,h.Z)(this,"name",""),(0,h.Z)(this,"items",[]),(0,h.Z)(this,"exItem",{id:0,remodel:0})}static convertOldItemPresets(t){if(!t||!t.length)return[];const e=[];for(let i=0;i<t.length;i+=1){const s=t[i];if("items"in s&&"exItem"in s){const t=new p;t.id=s.id,t.name=s.name,t.items=s.items,t.exItem=s.exItem,e.push(t)}else if("itemIds"in s&&"exItemId"in s){const t=new p;t.id=s.id,t.name=s.name;for(let e=0;e<s.itemIds.length;e+=1)t.items.push({id:s.itemIds[e],remodel:0});t.exItem={id:s.exItemId,remodel:0},e.push(t)}}return e}}var v=i(7783),f=i(2783),g=i(7777),y=i(7525),_=i(6141),x=i(3631),w=n.Z.extend({name:"ItemPreset",components:{draggable:o()},props:{value:{type:[u.Z,g.Z],required:!0},handleExpandItemPreset:{type:Function,required:!0},handleClose:{type:Function,required:!0}},data:()=>({items:[],presets:[],uniquePresets:[],isAACIMode:!1,selectedIndex:-1,selectedPreset:new p,snackbar:!1,infoText:""}),mounted(){this.items=this.$store.state.items,this.presets=[];const t=this.$store.state.itemPresets;this.presets=p.convertOldItemPresets(t),this.getAACIPreset()},watch:{value(){this.getAACIPreset()}},computed:{needTrans(){const t=this.$store.state.siteSetting;return"ja"!==this.$i18n.locale&&!t.nameIsNotTranslate},disabledCommit(){return this.value instanceof g.Z?0===this.value.items.filter((t=>t.data.id>0)).length:0===this.value.items.concat(this.value.exItem).filter((t=>t.data.id>0)).length},itemView(){const t=[];for(let e=0;e<this.selectedPreset.items.length;e+=1){const{id:i,remodel:s,assumedId:a}=this.selectedPreset.items[e],n=this.items.find((t=>t.id===i));if(n)t.push({data:n,remodel:s});else if(a){const e=this.items.find((t=>t.id===a));e?t.push({data:e,remodel:0,isLack:!0}):t.push({data:new v.Z,remodel:0})}else t.push({data:new v.Z,remodel:0})}return t},exItemView(){const t=this.items.find((t=>t.id===this.selectedPreset.exItem.id));if(t)return{data:t,remodel:this.selectedPreset.exItem.remodel};const e=this.items.find((t=>t.id===this.selectedPreset.exItem.assumedId));return e?{data:e,remodel:0,isLack:!0}:{data:new v.Z,remodel:0}},isPresetItemEmpty(){return!this.selectedPreset.items.some((t=>t.id||t.assumedId))&&!this.selectedPreset.exItem.id&&!this.selectedPreset.exItem.assumedId}},methods:{clickedPreset(t){this.isAACIMode=!1;const e=this.presets.findIndex((e=>e.id===t));e>=0&&(this.selectedIndex=e,this.selectedPreset=m()(this.presets[e]))},clickedUniquePreset(t){this.isAACIMode=!0,this.selectedIndex=t,this.selectedPreset=m()(this.uniquePresets[t])},readyPreset(){this.isAACIMode=!1;const t=new p,e=d()(this.presets.map((t=>t.id)));e&&(t.id=e),t.id+=1,"ja"!==this.$i18n.locale?t.name=`${this.$t("ItemList.プリセット")} ${t.id}`:t.name=`装備プリセット${t.id}`;for(let i=0;i<this.value.items.length;i+=1){const e=this.value.items[i];t.items.push({id:e.data.id,remodel:e.remodel})}this.value instanceof u.Z&&(t.exItem={id:this.value.exItem.data.id,remodel:this.value.exItem.remodel}),this.selectedIndex=-1,this.selectedPreset=t},overwritePreset(){const{name:t}=this.selectedPreset;this.selectedPreset=new p,this.selectedPreset.name=t;for(let e=0;e<this.value.items.length;e+=1){const t=this.value.items[e];this.selectedPreset.items.push({id:t.data.id,remodel:t.remodel})}this.value instanceof u.Z&&(this.selectedPreset.exItem={id:this.value.exItem.data.id,remodel:this.value.exItem.remodel})},savePreset(){this.selectedIndex>=0?this.presets[this.selectedIndex]=this.selectedPreset:this.presets.push(this.selectedPreset),this.$store.dispatch("updateItemPresets",this.presets),this.infoText="保存しました。",this.snackbar=!0,this.selectedIndex=-1,this.selectedPreset=new p},deletePreset(){this.presets=this.presets.filter(((t,e)=>e!==this.selectedIndex)),this.$store.dispatch("updateItemPresets",this.presets),this.snackbar=!0,this.infoText="削除しました。",this.selectedIndex=-1,this.selectedPreset=new p},expandPreset(t=!1){this.selectedPreset&&(this.handleExpandItemPreset(this.selectedPreset,t),this.handleClose())},sortEnd(){const t=this.presets.map((t=>t.id));for(let e=0;e<this.presets.length;e+=1)this.presets[e].id=t[e];this.$store.dispatch("updateItemPresets",this.presets)},getAACIPreset(){const t=this.value;if(!(t instanceof u.Z))return;const e=this.items.filter((t=>!t.isEnemyItem)),i=e.map((t=>new y.Z({master:t}))),s=this.$store.state.itemStock;let a=[];const n=!!s.length&&s.some((t=>t.num.some((t=>!!t))));if(n){let i=[];const n=this.$store.state.mainSaveData;if(n){const e=n.tempData[n.tempIndex];if(e){for(let t=0;t<e.fleetInfo.fleets.length;t+=1){const{ships:s}=e.fleetInfo.fleets[t];for(let t=0;t<s.length;t+=1){const e=s[t],a=e.items.filter((t=>t.data.id));a.length&&(i=i.concat(a.map((t=>({id:t.data.id,remodel:t.remodel,isChecked:!1}))))),e.exItem.data.id>0&&i.push({id:e.exItem.data.id,remodel:e.exItem.remodel,isChecked:!1})}}const{airbases:s}=e.airbaseInfo;for(let t=0;t<s.length;t+=1){const e=s[t].items.filter((t=>t.data.id));e.length&&(i=i.concat(e.map((t=>({id:t.data.id,remodel:t.remodel,isChecked:!1})))))}const a=t.items.concat(t.exItem).filter((t=>t.data.id));for(let t=0;t<a.length;t+=1){const e=a[t],s=i.findIndex((t=>t.id===e.data.id&&t.remodel===e.remodel));s>=0&&(i=i.filter(((t,e)=>e!==s)))}}}for(let t=0;t<s.length;t+=1){const n=s[t],l=e.find((t=>t.id===n.id));if(l)for(let t=10;t>=0;t-=1)for(let e=0;e<n.num[t];e+=1){const e=i.find((e=>e.id===l.id&&e.remodel===t&&!e.isChecked));e?e.isChecked=!0:a.push(new y.Z({master:l,remodel:t}))}}}else a=i.concat();const l=f.Z.getShipAACITriggerItems(t,a,n),o=f.Z.getShipAACITriggerItems(t,i);this.uniquePresets=[];for(let r=0;r<l.length;r+=1){const i=l[r],s=_.ZP.ANTI_AIR_CUTIN.find((t=>t.id===i.id));if(!s)continue;const a=new p;a.id=s.id,a.items=i.items.map(((t,e)=>{const i={id:t.data.id,remodel:t.remodel,assumedId:0};return i.id||(i.assumedId=o[r].items[e].data.id),i})),a.name=`${a.id}種`;const n=i.items.some((t=>!t.data.id));let d=i.items[i.items.length-1];const c=!d.data.id;if(c){const t=e.find((t=>t.id===a.items[a.items.length-1].assumedId));d=t?new y.Z({master:t}):new y.Z}x.Z.isValidItem(t.data,d.data,_.ZP.EXPAND_SLOT_INDEX)&&(a.exItem={id:d.data.id,remodel:d.remodel},c&&(a.exItem={id:0,remodel:d.remodel,assumedId:d.data.id}),a.items.splice(-1)),a.items.length<=t.data.slotCount&&this.uniquePresets.push(Object.assign(a,{isLack:n,spec1:`${s.c1+s.c2}`,spec2:`x${s.rateBonus.toFixed(2)}`}))}}}}),C=w,b=i(1001),I=i(3453),k=i.n(I),A=i(4562),S=i(9582),T=i(9223),Z=i(4324),$=i(5495),P=i(9258),L=i(8718),B=i(9780),E=i(6392),D=i.n(E),F=i(7069),R=(0,b.Z)(C,s,a,!1,null,"3602db4f",null),N=R.exports;k()(R,{VBtn:A.Z,VCard:S.Z,VDivider:T.Z,VIcon:Z.Z,VImg:$.Z,VSnackbar:P.Z,VSpacer:L.Z,VTextField:B.Z}),D()(R,{Ripple:F.Z})},9648:function(t,e,i){i.d(e,{Z:function(){return $}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mt-2"},[i("div",{staticClass:"input-container"},[i("div",[i("v-select",{attrs:{label:t.$t("Common.陣形"),items:t.formations,"hide-details":"",outlined:"",dense:""},on:{change:t.updateTable},model:{value:t.formation,callback:function(e){t.formation=e},expression:"formation"}})],1),i("div",[i("v-select",{attrs:{label:t.$t("Fleet.対空CI"),items:t.antiAirItems,"hide-details":"",outlined:"",dense:""},on:{change:t.updateTable},model:{value:t.cutInId,callback:function(e){t.cutInId=e},expression:"cutInId"}})],1),i("div",[i("v-text-field",{attrs:{type:"number",min:"0",max:"999",label:t.$t("Fleet.攻撃機搭載数"),"hide-details":"",outlined:"",dense:""},on:{input:t.updateTable},model:{value:t.attackerSlot,callback:function(e){t.attackerSlot=t._n(e)},expression:"attackerSlot"}})],1),i("div",[i("v-select",{attrs:{label:t.$t("Fleet.対空射撃回避"),items:t.avoids,"hide-details":"",outlined:"",dense:""},on:{change:t.updateTable},model:{value:t.avoid,callback:function(e){t.avoid=e},expression:"avoid"}})],1),i("div",[i("v-text-field",{attrs:{type:"number",min:"0",max:"2",step:"0.1",label:t.$t("Fleet.加重対空補正"),"hide-details":"",outlined:"",dense:"",disabled:!t.isManual||t.showAntiAirMode},on:{input:t.updateTable},model:{value:t.adj1,callback:function(e){t.adj1=t._n(e)},expression:"adj1"}})],1),i("div",[i("v-text-field",{attrs:{type:"number",min:"0",max:"2",step:"0.1",label:t.$t("Fleet.艦隊防空補正"),"hide-details":"",outlined:"",dense:"",disabled:!t.isManual||t.showAntiAirMode},on:{input:t.updateTable},model:{value:t.adj2,callback:function(e){t.adj2=t._n(e)},expression:"adj2"}})],1)]),i("div",{staticClass:"mb-1 d-flex px-1"},[i("div",{staticClass:"align-self-end"},[i("span",{staticClass:"body-2 text--secondary mr-2"},[t._v(t._s(t.$t("Common.艦隊防空値")))]),i("span",[t._v(t._s(t.fleetAntiAir))])]),i("div",{staticClass:"align-self-end"},[i("v-switch",{staticClass:"mt-2 mb-0 ml-4",attrs:{dense:"","hide-details":"",label:t.$t("Result.対空CI一覧")},on:{change:t.setAntiAirCutInTable},model:{value:t.showAntiAirMode,callback:function(e){t.showAntiAirMode=e},expression:"showAntiAirMode"}})],1),t.showAntiAirMode?t._e():i("div",{staticClass:"ml-auto d-flex"},[i("v-checkbox",{staticClass:"mr-3",attrs:{label:t.$t("Fleet.空襲マス"),dense:"","hide-details":""},on:{change:t.updateTable},model:{value:t.isAirRaid,callback:function(e){t.isAirRaid=e},expression:"isAirRaid"}}),i("v-checkbox",{attrs:{label:t.$t("Fleet.敵側式"),dense:"","hide-details":""},on:{change:t.updateTable},model:{value:t.isEnemy,callback:function(e){t.isEnemy=e},expression:"isEnemy"}})],1)]),t.showAntiAirMode?i("div",{staticClass:"d-flex flex-wrap justify-center"},[i("div",{staticClass:"flex-grow-1"},[i("v-divider"),i("v-simple-table",{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[i("thead",[i("tr",[i("th",[t._v(t._s(t.$t("Fleet.艦娘")))]),i("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Result.種別id")))]),i("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Result.固定")))]),i("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Result.変動")))]),i("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Result.発動率")))]),i("th")])]),i("tbody",t._l(t.antiAirCutIns,(function(e,s){return i("tr",{key:s,staticClass:"stage2-row"},[i("td",{staticClass:"px-2 text-left"},[e.id?i("v-img",{attrs:{src:"./img/ship/"+e.id+".png",height:"30",width:"120"}}):i("span",{staticClass:"no-cutin-span caption"},[t._v(t._s(t.$t("Result.不発")))])],1),i("td",[t._v(t._s(e.cutInId?e.cutInId:"-"))]),i("td",[t._v(t._s(e.fix))]),i("td",[t._v(t._s(e.variable))]),i("td",[t._v(t._s(e.rate)+" %")]),i("td",[i("v-icon",{attrs:{color:e.color}},[t._v("mdi-square-rounded")])],1)])})),0)]},proxy:!0}])}),i("v-divider")],1),t.showAntiAirMode?i("div",{staticClass:"graph-area"},[i("div",{staticClass:"contact-graph"},[i("doughnut-chart",{attrs:{data:t.graphData,options:t.options,"title-text":""}})],1),i("div",{staticClass:"total-rate"},[i("div",[t._v(t._s(t.$t("Result.合計発動率")))]),i("div",[t._v(t._s(t.totalCutInRate)+" %")])])]):t._e()]):i("div",[i("v-divider"),i("v-simple-table",{attrs:{"fixed-header":"",height:"54vh"},scopedSlots:t._u([{key:"default",fn:function(){return[i("thead",[i("tr",[i("th",[t._v(t._s(t.$t("Fleet.艦娘")))]),i("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Common.加重対空")))]),i("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Fleet.割合撃墜")))]),i("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Fleet.固定撃墜")))]),i("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Fleet.最低保証")))]),i("th",{staticClass:"text-right"},[t._v(t._s(t.$t("Fleet.両成功")))])])]),i("tbody",t._l(t.stage2Data,(function(e,s){return i("tr",{key:s,staticClass:"stage2-row",class:{warn:e.sum>=t.attackerSlot/2,danger:e.sum>=t.attackerSlot}},[i("td",{staticClass:"d-flex align-center text-left"},[i("div",{staticClass:"mr-2"},[i("v-img",{attrs:{src:"./img/ship/"+e.id+".png",height:"30",width:"120"}})],1),i("div",{staticClass:"d-none d-sm-block flex-grow-1"},[e.isEnemy?i("div",{staticClass:"stage2-id primary--text"},[t._v("id "+t._s(e.id))]):t._e(),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"stage2-name text-truncate"},[t._v(t._s(t.getShipName(e.data)))])])])]),i("td",[t._v(t._s(e.antiAirWeight))]),i("td",[t._v(t._s(e.rate)+" ( "+t._s(t.$t("Common.x機",{number:e.rateDown}))+" )")]),i("td",[t._v(t._s(e.fix))]),i("td",[t._v(t._s(e.min))]),i("td",[t._v(t._s(e.sum))])])})),0)]},proxy:!0}],null,!1,2698091509)})],1)])},a=[],n=i(144),l=i(6889),o=i(6141),r=i(1715),d=i(3403),c=i(5722),m=i(4026),u=i(5549),h=i(2399),p=i(1891);const v=t=>`${t.dataset.labels[t.dataIndex]}: ${t.parsed.toFixed(1)} %`;var f=n.Z.extend({name:"AntiAirCalculator",components:{DoughnutChart:p.Z},props:{fleet:{type:[m.Z,l.Z],required:!0}},data:()=>({formation:1,avoid:0,attackerSlot:18,adj1:1,adj2:1,fleetAntiAir:"0.00",cutInId:0,isEnemy:!1,isAirRaid:!1,stage2Data:[],showAntiAirMode:!1,antiAirCutIns:[],totalCutInRate:0,graphData:{},options:{plugins:{legend:{display:!1},title:{display:!0,text:""},tooltip:{callbacks:{label:v}},datalabels:{formatter:t=>t>0?`${t.toFixed(1)}%`:""}}}}),computed:{isNotJapanese(){return"ja"!==this.$i18n.locale},needTrans(){const t=this.$store.state.siteSetting;return"ja"!==this.$i18n.locale&&!t.nameIsNotTranslate},ships(){return this.fleet instanceof l.Z?this.fleet.enemies.filter((t=>t.data.id>0)):this.fleet.ships.filter((t=>t.isActive&&!t.isEmpty))},formations(){if(this.isNotJapanese){const t=[];for(let e=0;e<o.ZP.FORMATIONS.length;e+=1){const{text:i,value:s,correction:a}=o.ZP.FORMATIONS[e];t.push({text:`${this.$t(`Common.${i}`)}`,value:s,correction:a})}return t}return o.ZP.FORMATIONS},avoids(){if(this.isNotJapanese){const t=[];for(let e=0;e<o.ZP.AVOID_TYPE.length;e+=1){const{text:i,value:s,c1:a,c2:n,c3:l,c4:r}=o.ZP.AVOID_TYPE[e];t.push({text:`${this.$t(`Common.回避性能.${i}`)}`,value:s,c1:a,c2:n,c3:l,c4:r})}return t}return o.ZP.AVOID_TYPE},isManual(){return this.avoid===o.ZP.MANUAL_AVOID},antiAirItems(){const t=[{text:`${this.$t("Result.不発")}`,value:0,rate:0,detail:""}],e=this.fleet.allAntiAirCutIn,i=this.fleet.shootDownList.map((t=>t.border));let s=0;for(let n=0;n<i.length;n+=1){const a=i[n];if(1===a)break;const{id:l}=e[n],r=o.ZP.ANTI_AIR_CUTIN.find((t=>t.id===l)),d=100*a-s;s+=d;const c=t.find((t=>t.value===l));r&&c?c.rate+=d:r&&t.push({text:r.text,value:r.id,rate:d,detail:`[ ${r.remarks} ]`})}t[0].rate=100-s;const a=[];for(let n=0;n<t.length;n+=1){const e=t[n];a.push({text:`${e.text}(${Math.floor(10*e.rate)/10}%) ${e.detail}`,value:e.value})}return a}},mounted(){this.isEnemy=this.ships[0]instanceof c.Z,this.formation=this.fleet.formation,this.updateTable()},methods:{updateTable(){let t=1,e=1;const i=o.ZP.AVOID_TYPE.find((t=>t.value===this.avoid));this.avoid!==o.ZP.MANUAL_AVOID&&i?(this.adj1=i.c1,this.adj2=i.c2,t=i.c3,e=i.c4):(this.adj1=Math.min(Math.abs(this.adj1),2),this.adj2=Math.min(Math.abs(this.adj2),2));let s=o.ZP.FORMATIONS.find((t=>t.value===this.formation));s||(s=o.ZP.FORMATIONS.find((()=>!0)));const a={text:"",value:0,c1:this.adj1,c2:this.adj2,c3:t,c4:e};let n=new d.Z;const l=o.ZP.ANTI_AIR_CUTIN.find((t=>t.id===this.cutInId));l&&(n=new d.Z(l.id,l.rateBonus,l.c1,l.c2,l.rate));const m=r.Z.getStage2(this.ships,this.isEnemy,this.fleet.isUnion,s,n,this.isAirRaid,a),u=m[m.length-1];this.stage2Data=[];for(let o=0;o<this.ships.length;o+=1){const t=this.ships[o],e=u.antiAirWeightList[o],i=u.rateDownList[o],s=Math.floor(this.attackerSlot*i),a=u.fixDownList[o],n=u.minimumDownList[o],l=t instanceof c.Z;this.stage2Data.push({id:t.data.id,data:t.data,rate:`${(100*i).toFixed(2)}%`,rateDown:s,fix:a,min:n,sum:s+a+n,antiAirWeight:e,isEnemy:l})}this.fleetAntiAir=this.fleet.getFleetAntiAir(s,a).toFixed(2)},getShipName(t){if(this.needTrans&&t instanceof u.Z){const e=u.Z.getSuffix(t),i=t=>t?`${this.$t(t)}`:"";return e.map((t=>i(t))).join("")}if(this.needTrans&&t.name){const e=h.Z.getSuffix(t.name),i=t=>t?`${this.$t(t)}`:"";return e.map((t=>i(t))).join("")}return t.name||""},setAntiAirCutInTable(){this.antiAirCutIns=[];for(let o=0;o<this.ships.length;o+=1){const t=this.ships[o];for(let e=0;e<t.antiAirCutIn.length;e+=1){const i=t.antiAirCutIn[e];this.antiAirCutIns.push({id:t.data.id,cutInId:i.id,fix:i.fixCorrA+i.fixCorrB,variable:i.rateCorr,rate:0,color:"#000"})}}const t=o.ZP.ANTI_AIR_CUT_IN_PRIORITIES;this.antiAirCutIns.sort(((e,i)=>{const s=t.indexOf(e.cutInId),a=t.indexOf(i.cutInId);return(s>=0?s:99)-(a>=0?a:99)}));const e=this.fleet.allAntiAirCutIn,i=this.fleet.shootDownList.map((t=>t.border));let s=0;if(this.antiAirCutIns.length===e.length)for(let o=0;o<e.length;o+=1){const t=i[o],e=100*t-s;s+=e,this.antiAirCutIns[o].rate=Math.floor(10*e)/10||Math.floor(100*e)/100||Math.floor(1e3*e)/1e3}const a=this.antiAirItems.length,n=["rgba(164,164,164,0.7)"],l=Math.floor(360/a);for(let u=0;u<o.ZP.ANTI_AIR_CUTIN.length;u+=1)n.push("hsla(180,100%,60%,0.5)");const r=[];for(let o=0;o<this.antiAirCutIns.length;o+=1){const t=this.antiAirCutIns[o].cutInId;r.includes(t)||(n[t]=`hsla(${218-l*r.length},85%,70%,0.7)`,r.push(t))}const d=100-s;this.antiAirCutIns.push({id:0,cutInId:0,fix:1,rate:Math.floor(10*d)/10||Math.floor(100*d)/100||Math.floor(1e3*d)/1e3,variable:1,color:""});for(let o=0;o<this.antiAirCutIns.length;o+=1){const t=this.antiAirCutIns[o];n[t.cutInId]&&(t.color=n[t.cutInId])}const c=this.antiAirCutIns.map((t=>t.cutInId?`${t.cutInId}種`:this.$t("Result.不発"))),m={labels:c,datasets:[{data:[0,0,0,100],backgroundColor:this.antiAirCutIns.map((t=>n[t.cutInId])),borderColor:"#fff",labels:c}]};m.datasets[0].data=this.antiAirCutIns.map((t=>+t.rate)),this.totalCutInRate=Math.floor(10*s)/10,this.graphData=m}}}),g=f,y=i(1001),_=i(3453),x=i.n(_),w=i(3486),C=i(9223),b=i(4324),I=i(5495),k=i(9481),A=i(9449),S=i(9884),T=i(9780),Z=(0,y.Z)(g,s,a,!1,null,"8a170848",null),$=Z.exports;x()(Z,{VCheckbox:w.Z,VDivider:C.Z,VIcon:b.Z,VImg:I.Z,VSelect:k.Z,VSimpleTable:A.Z,VSwitch:S.Z,VTextField:T.Z})},7428:function(t,e,i){i.d(e,{Z:function(){return w}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ma-2"},[i("div",{staticClass:"d-flex ml-5 align-center"},[i("div",[t._v(t._s(t.$t("Result.制空状態")))]),i("div",{staticClass:"ml-5"},[i("v-radio-group",{attrs:{row:""},on:{change:t.changeAirState},model:{value:t.airState,callback:function(e){t.airState=e},expression:"airState"}},[i("v-radio",{attrs:{label:t.$t("Common.制空権確保"),value:0}}),i("v-radio",{attrs:{label:t.$t("Common.航空優勢"),value:1}}),i("v-radio",{attrs:{label:t.$t("Common.航空劣勢"),value:2}})],1)],1)]),i("div",{staticClass:"graph-area"},[i("div",{staticClass:"contact-graph"},[i("doughnut-chart",{attrs:{data:t.graphData,options:t.options,"title-text":t.$t("Result.対敵通常艦隊")}})],1),i("div",{staticClass:"contact-graph"},[i("doughnut-chart",{attrs:{data:t.unionGraphData,options:t.unionOptions,"title-text":t.$t("Result.対敵連合艦隊")}})],1),i("div",{staticClass:"total-contact"},[i("div",[t._v(t._s(t.$t("Result.合計触接率")))]),i("div",[t._v(t._s(t.rates[t.airState].sumRate.toFixed(1))+" %")])]),i("div",{staticClass:"total-contact-union"},[i("div",[t._v(t._s(t.$t("Result.合計触接率")))]),i("div",[t._v(t._s(t.unionRates[t.airState].sumRate.toFixed(1))+" %")])])]),i("div",{staticClass:"contact-legends"},t._l(t.graphLegends,(function(e,s){return i("div",{key:"legend"+s,staticClass:"d-flex"},[i("div",{staticClass:"legend-color-label",style:"background-color: "+e.color}),i("div",{staticClass:"ml-2"},[t._v(t._s(e.text))])])})),0),i("div",[t._v(t._s(t.$t("Result.対敵通常艦隊")))]),i("div",{staticClass:"contact-row header-row"},[i("div",{staticClass:"text-left"},[t._v(t._s(t.$t("Result.制空状態")))]),i("div",[t._v(t._s(t.$t("Result.触接開始率")))]),i("div",[t._v("×1.2"+t._s(t.$t("Result.触接率")))]),i("div",[t._v("×1.17"+t._s(t.$t("Result.触接率")))]),i("div",[t._v("×1.12"+t._s(t.$t("Result.触接率")))]),i("div",[t._v(t._s(t.$t("Result.合計触接率")))])]),t._l(t.rates,(function(e,s){return i("div",{key:s,staticClass:"contact-row",class:{selected:s===t.airState}},[i("div",{staticClass:"text-left"},[t._v(t._s(t.$t("Common."+t.airStatus[s])))]),i("div",[t._v(t._s(e.startRate.toFixed(1))+" %")]),i("div",[t._v(t._s(e.contact120.toFixed(1))+" %")]),i("div",[t._v(t._s(e.contact117.toFixed(1))+" %")]),i("div",[t._v(t._s(e.contact112.toFixed(1))+" %")]),i("div",[t._v(t._s(e.sumRate.toFixed(1))+" %")])])})),i("div",{staticClass:"mt-2"},[t._v(t._s(t.$t("Result.対敵連合艦隊")))]),i("div",{staticClass:"contact-row header-row"},[i("div",{staticClass:"text-left"},[t._v(t._s(t.$t("Result.制空状態")))]),i("div",[t._v(t._s(t.$t("Result.触接開始率")))]),i("div",[t._v("×1.2"+t._s(t.$t("Result.触接率")))]),i("div",[t._v("×1.17"+t._s(t.$t("Result.触接率")))]),i("div",[t._v("×1.12"+t._s(t.$t("Result.触接率")))]),i("div",[t._v(t._s(t.$t("Result.合計触接率")))])]),t._l(t.unionRates,(function(e,s){return i("div",{key:"s"+s,staticClass:"contact-row",class:{selected:s===t.airState}},[i("div",{staticClass:"text-left"},[t._v(t._s(t.$t("Common."+t.airStatus[s])))]),i("div",[t._v(t._s(e.startRate.toFixed(1))+" %")]),i("div",[t._v(t._s(e.contact120.toFixed(1))+" %")]),i("div",[t._v(t._s(e.contact117.toFixed(1))+" %")]),i("div",[t._v(t._s(e.contact112.toFixed(1))+" %")]),i("div",[t._v(t._s(e.sumRate.toFixed(1))+" %")])])}))],2)},a=[],n=i(144),l=i(4026),o=i(1891),r=i(6889),d=i(7777);const c=["x12触接","x117触接","x112触接","触接不発"],m=["rgba(100, 180, 255, 0.7)","rgba(80, 220, 120, 0.7)","rgba(255, 160, 100, 0.7)","rgba(128, 128, 128, 0.5)"],u=t=>`${t.dataset.labels[t.dataIndex]}: ${t.parsed.toFixed(1)} %`;var h=n.Z.extend({name:"ContactRates",components:{DoughnutChart:o.Z},props:{fleet:{type:[l.Z,r.Z,d.Z],required:!0}},data:()=>({airState:0,airStatus:["制空権確保","航空優勢","航空劣勢"],graphData:{},unionGraphData:{},rates:[],unionRates:[],options:{plugins:{legend:{display:!1},title:{display:!0,text:""},tooltip:{callbacks:{label:u}},datalabels:{formatter:t=>t>0?`${t.toFixed(1)}%`:""}}},unionOptions:{plugins:{legend:{display:!1},title:{display:!0,text:""},tooltip:{callbacks:{label:u}},datalabels:{formatter:t=>t>0?`${t.toFixed(1)}%`:""}}},graphLegends:[]}),created(){this.calculate()},methods:{calculate(){this.rates=this.fleet.getContactRates(),this.unionRates=this.fleet.getContactRates(!0),this.graphData=this.getGraphData(this.rates[this.airState]),this.unionGraphData=this.getGraphData(this.unionRates[this.airState]),this.graphLegends=[];for(let t=0;t<4;t+=1)this.graphLegends.push({text:`${this.$t(`Result.${c[t]}`)}`,color:m[t]})},changeAirState(){this.graphData=this.getGraphData(this.rates[this.airState]),this.unionGraphData=this.getGraphData(this.unionRates[this.airState])},getGraphData(t){const e={labels:c,datasets:[{data:[0,0,0,100],backgroundColor:m,borderColor:"#fff",labels:c}]};return t&&(e.datasets[0].data=[t.contact120,t.contact117,t.contact112,100-t.sumRate]),e}}}),p=h,v=i(1001),f=i(3453),g=i.n(f),y=i(8419),_=i(6379),x=(0,v.Z)(p,s,a,!1,null,"68c3a088",null),w=x.exports;g()(x,{VRadio:y.Z,VRadioGroup:_.Z})}}]);
//# sourceMappingURL=971.597ee7d1.js.map