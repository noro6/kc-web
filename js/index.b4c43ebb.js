(function(t){function e(e){for(var i,s,o=e[0],l=e[1],c=e[2],d=0,u=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&u.push(r[s][0]),r[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);h&&h(e);while(u.length)u.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,s=1;s<a.length;s++){var o=a[s];0!==r[o]&&(i=!1)}i&&(n.splice(e--,1),t=l(l.s=a[0]))}return t}var i={},s={index:0},r={index:0},n=[];function o(t){return l.p+"js/"+({}[t]||t)+"."+{"chunk-014b0838":"aa1d9f1c","chunk-33db05a9":"a630ae2a","chunk-71211d12":"87f015b9","chunk-3db176d6":"4bac870c"}[t]+".js"}function l(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(t){var e=[],a={"chunk-014b0838":1,"chunk-33db05a9":1,"chunk-71211d12":1,"chunk-3db176d6":1};s[t]?e.push(s[t]):0!==s[t]&&a[t]&&e.push(s[t]=new Promise((function(e,a){for(var i="css/"+({}[t]||t)+"."+{"chunk-014b0838":"4734c9c7","chunk-33db05a9":"993e1089","chunk-71211d12":"f859f62d","chunk-3db176d6":"17302e82"}[t]+".css",r=l.p+i,n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var c=n[o],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===i||d===r))return e()}var u=document.getElementsByTagName("style");for(o=0;o<u.length;o++){c=u[o],d=c.getAttribute("data-href");if(d===i||d===r)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var i=e&&e.target&&e.target.src||r,n=new Error("Loading CSS chunk "+t+" failed.\n("+i+")");n.code="CSS_CHUNK_LOAD_FAILED",n.request=i,delete s[t],h.parentNode.removeChild(h),a(n)},h.href=r;var m=document.getElementsByTagName("head")[0];m.appendChild(h)})).then((function(){s[t]=0})));var i=r[t];if(0!==i)if(i)e.push(i[2]);else{var n=new Promise((function(e,a){i=r[t]=[e,a]}));e.push(i[2]=n);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=o(t);var u=new Error;c=function(e){d.onerror=d.onload=null,clearTimeout(h);var a=r[t];if(0!==a){if(a){var i=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",u.name="ChunkLoadError",u.type=i,u.request=s,a[1](u)}r[t]=void 0}};var h=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(e)},l.m=t,l.c=i,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)l.d(a,i,function(e){return t[e]}.bind(null,i));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/kc-web/",l.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var h=d;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"01fd":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var i=a("bee2"),s=a("d4ec"),r=Object(i["a"])((function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;Object(s["a"])(this,t),this.id=0,this.num=[0,0,0,0,0,0,0,0,0,0,0],this.id=e,a>=0&&a<this.num.length&&(this.num[a]=1)}))},"0341":function(t,e,a){},"0613":function(t,e,a){"use strict";var i=a("1da1"),s=(a("4de4"),a("d3b7"),a("3ca3"),a("ddb0"),a("99af"),a("c740"),a("96cf"),a("bc3a")),r=a.n(s),n=a("2b0e"),o=a("2f62"),l=a("588e"),c=a("c3af"),d=a("bee2"),u=a("d4ec"),h=a("262e"),m=a("2caf"),v=a("4dec"),f=function(t){Object(h["a"])(a,t);var e=Object(m["a"])(a);function a(){var t;return Object(u["a"])(this,a),t=e.call(this,"kc-web-database"),t.version(1).stores({savedata:"id",items:"id",ships:"uniqueId",setting:"id"}),t.version(2).stores({savedata:"id",items:"id",ships:"uniqueId",setting:"id",itemPresets:"id"}),t.version(3).stores({savedata:"id",items:"id",ships:"uniqueId",setting:"id",itemPresets:"id",manualEnemies:"id"}),t.version(4).stores({savedata:"id",items:"id",ships:"uniqueId",setting:"id",itemPresets:"id",manualEnemies:"id",outputHistories:"id"}),t}return Object(d["a"])(a)}(v["a"]),p=a("ac07"),g=a("07bc"),b=a("7970"),A=a("9f87"),y=a("14ed"),k=Object(d["a"])((function t(e){Object(u["a"])(this,t),this.area=e.a,this.node=e.n,this.detail=e.d,this.level=e.l,this.cellType=e.t,this.formation=e.f,this.radius=e.r,this.enemies=e.e,this.coords=e.c}));n["default"].use(o["a"]);e["a"]=new o["a"].Store({state:{siteVersion:"2.14.0",items:[],ships:[],cells:[],itemStock:[],shipStock:[],tempItemStock:[],tempShipStock:[],itemPresets:[],manualEnemies:[],defaultEnemies:[],outputHistories:[],saveData:new g["a"],equipShips:[],exSlotEquipShips:[],worlds:[],maps:[],calcManager:void 0,mainSaveData:new g["a"],draggingShipData:new c["a"],draggingSaveData:new g["a"],siteSetting:new p["a"],kcWebDatabase:new f,searchedList:[],completed:!1,settingLoadCompleted:!1,saveDataLoadCompleted:!1,disabledDatabase:!1,areaCount:0},mutations:{setShips:function(t,e){for(var a=[],i=0;i<e.length;i+=1){var s=new A["a"](e[i]);s.id&&a.push(s)}t.ships=a},setEnemies:function(t,e){for(var a=[],i=0;i<e.length;i+=1){var s=new y["a"](e[i]);s.id&&a.push(s)}t.defaultEnemies=a},setItems:function(t,e){for(var a=[],i=0;i<e.length;i+=1){var s=new b["a"](e[i]);s.id&&a.push(s)}t.items=a},setExSlotEquipShips:function(t,e){t.exSlotEquipShips=e},setEquipShips:function(t,e){t.equipShips=e},setWorlds:function(t,e){t.worlds=e},setMaps:function(t,e){t.maps=e},setAreaCount:function(t,e){t.areaCount=e},setCells:function(t,e){t.cells=e},updateSaveData:function(t,e){t.saveData=e},setItemStock:function(t,e){t.itemStock=e},setShipStock:function(t,e){t.shipStock=e},updateTempItemStock:function(t,e){t.tempItemStock=e},updateTempShipStock:function(t,e){t.tempShipStock=e},updateItemPresets:function(t,e){t.itemPresets=e},updateManualEnemies:function(t,e){t.manualEnemies=e},updateOutputHistories:function(t,e){t.outputHistories=e},setMainSaveData:function(t,e){t.mainSaveData=e},setDraggingSaveData:function(t,e){t.draggingSaveData=e},setDraggingShipData:function(t,e){t.draggingShipData=e},updateSetting:function(t,e){t.siteSetting=e},completed:function(t,e){t.completed=e},settingLoadCompleted:function(t,e){t.settingLoadCompleted=e},saveDataLoadCompleted:function(t,e){t.saveDataLoadCompleted=e},setSearchedList:function(t,e){t.searchedList=e},setDisabledDatabase:function(t,e){t.disabledDatabase=e}},actions:{updateSaveData:function(t,e){var a=e.getMinifyData();t.state.disabledDatabase||t.state.kcWebDatabase.savedata.put(a),t.commit("updateSaveData",e)},setMainSaveData:function(t,e){t.commit("setMainSaveData",e)},setDraggingSaveData:function(t,e){t.commit("setDraggingSaveData",e)},setDraggingShipData:function(t,e){t.commit("setDraggingShipData",e)},updateItemStock:function(t,e){t.state.disabledDatabase||t.state.kcWebDatabase.items.clear().then((function(){t.state.kcWebDatabase.items.bulkAdd(e)})),t.commit("setItemStock",e)},updateShipStock:function(t,e){t.state.disabledDatabase||t.state.kcWebDatabase.ships.clear().then((function(){t.state.kcWebDatabase.ships.bulkAdd(e)})),t.commit("setShipStock",e)},updateTempItemStock:function(t,e){t.commit("updateTempItemStock",e)},updateTempShipStock:function(t,e){t.commit("updateTempShipStock",e)},updateItemPresets:function(t,e){t.state.disabledDatabase||t.state.kcWebDatabase.itemPresets.clear().then((function(){t.state.kcWebDatabase.itemPresets.bulkAdd(e)})),t.commit("updateItemPresets",e)},updateManualEnemies:function(t,e){t.state.disabledDatabase||t.state.kcWebDatabase.manualEnemies.clear().then((function(){t.state.kcWebDatabase.manualEnemies.bulkAdd(e)})),t.commit("updateManualEnemies",e)},updateOutputHistories:function(t,e){t.state.disabledDatabase||t.state.kcWebDatabase.outputHistories.clear().then((function(){t.state.kcWebDatabase.outputHistories.bulkAdd(e)})),t.commit("updateOutputHistories",e)},updateSetting:function(t,e){t.state.disabledDatabase||t.state.kcWebDatabase.setting.put(e,"setting"),t.commit("updateSetting",e)},setSearchedList:function(t,e){t.commit("setSearchedList",e)},loadCellData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.commit("completed",!1),a=function(t){return r.a.get(t).then((function(t){for(var a=[],i=t.data.patterns,s=0;s<i.length;s+=1)a.push(new k(i[s]));e.commit("setCells",a)}))},Object(l["a"])(Object(l["c"])(Object(l["b"])(),"cells.json")).then((function(t){a(t).then((function(){e.commit("completed",!0)})).catch((function(t){console.error(t),a("./master_bk/cells.json").then((function(){console.log("セル(backup)利用"),e.commit("completed",!0)}))}))})).catch((function(t){console.error(t),a("./master_bk/cells.json").then((function(){console.log("セル(backup)利用"),e.commit("completed",!0)}))}));case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),loadData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=function(t){return r.a.get(t).then((function(t){if(200===t.status&&t.data){var a=t.data;e.commit("setItems",a.items),e.commit("setShips",a.ships),e.commit("setEnemies",a.enemies),e.commit("setExSlotEquipShips",a.api_mst_equip_exslot_ship),e.commit("setEquipShips",a.api_mst_equip_ship),e.commit("setWorlds",a.worlds),e.commit("setMaps",a.maps),e.commit("setAreaCount",a.area_count)}}))},Object(l["a"])(Object(l["c"])(Object(l["b"])(),"master.json")).then((function(t){a(t).then((function(){e.commit("completed",!0)})).catch((function(t){console.error(t),a("./master_bk/master.json").then((function(){console.log("マスター(backup)利用"),e.commit("completed",!0)}))}))})).catch((function(t){console.error(t),a("./master_bk/master.json").then((function(){console.log("マスター(backup)利用"),e.commit("completed",!0)}))}));case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),loadSaveData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,i,s,r,n,o,l,c,d,u,h,m,v,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.commit("saveDataLoadCompleted",!1),t.prev=1,a=e.state.kcWebDatabase,t.next=5,a.savedata.get("root");case 5:i=t.sent,t.next=15;break;case 8:return t.prev=8,t.t0=t["catch"](1),console.error(t.t0),e.commit("setDisabledDatabase",!0),e.commit("updateSaveData",g["a"].createInitialSaveData()),e.commit("saveDataLoadCompleted",!0),t.abrupt("return");case 15:if(i&&i.childItems.length){for(s=g["a"].getInstance(i),s.isReadonly=!0,s.childItems[0].isOpen=!0,s.childItems[0].isReadonly=!0,r=0;r<s.childItems.length;r+=1)n=s.childItems[r],n.isDirectory||(n.isUnsaved=!0,n.isActive=!0);for(o=e.state.saveData.childItems.filter((function(t){return t.isUnsaved})),l=0;l<o.length;l+=1)s.childItems.push(o[l]);e.commit("updateSaveData",s)}else c=g["a"].createInitialSaveData(),e.commit("updateSaveData",c);d=a.ships.toArray().then((function(t){e.commit("setShipStock",t)})),u=a.items.toArray().then((function(t){e.commit("setItemStock",t)})),h=a.itemPresets.toArray().then((function(t){e.commit("updateItemPresets",t)})),m=a.manualEnemies.toArray().then((function(t){e.commit("updateManualEnemies",t)})),v=a.outputHistories.toArray().then((function(t){e.commit("updateOutputHistories",t)})),f=[d,u,h,m,v],Promise.all(f).then((function(){e.commit("saveDataLoadCompleted",!0)}));case 23:case"end":return t.stop()}}),t,null,[[1,8]])})));function e(e){return t.apply(this,arguments)}return e}(),loadSetting:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.commit("settingLoadCompleted",!1),a=e.state.kcWebDatabase,t.next=5,a.setting.get("setting");case 5:i=t.sent,i?e.commit("updateSetting",new p["a"](i)):e.commit("updateSetting",new p["a"]),e.commit("settingLoadCompleted",!0),t.next=16;break;case 10:t.prev=10,t.t0=t["catch"](0),console.error(t.t0),e.commit("setDisabledDatabase",!0),e.commit("updateSetting",new p["a"]),e.commit("settingLoadCompleted",!0);case 16:case"end":return t.stop()}}),t,null,[[0,10]])})));function e(e){return t.apply(this,arguments)}return e}()},modules:{},getters:{getCompletedAll:function(t){return t.completed&&t.saveDataLoadCompleted&&t.settingLoadCompleted},getExistsTempStock:function(t){return!!t.tempItemStock.length||!!t.tempShipStock.length},getEnemies:function(t){for(var e=t.defaultEnemies.concat(),a=function(a){var i=t.manualEnemies[a],s=e.findIndex((function(t){return t.id===i.id}));s>=0&&(e[s]=i)},i=0;i<t.manualEnemies.length;i+=1)a(i);return e}}})},"07bc":function(t,e,a){"use strict";a.d(e,"a",(function(){return D}));var i=a("d4ec"),s=a("bee2"),r=(a("d3b7"),a("25f0"),a("b0c0"),a("e9c4"),a("4de4"),a("2ca0"),a("d81d"),a("ac1f"),a("5319"),a("99af"),a("4e827"),a("4d90"),a("fb6a"),a("a434"),a("7db0"),a("0644")),n=a.n(r),o=a("abdd"),l=a.n(o),c=a("eb11"),d=a.n(c),u=a("bce2"),h=a("d606"),m=a("8292"),v=a("b615"),f=a("f463"),p=a("dc58"),g=a("848d"),b=a("4715"),A=a("c3af"),y=a("0f16"),k=a("9f87"),w=a("14ed"),S=a("7970"),D=function(){function t(e){Object(i["a"])(this,t),this.childItems=[],this.highlight=!1,this.id=e||(new Date).getTime().toString(16)+Math.floor(1e4*Math.random()),this.name="無題",this.remarks="",this.isDirectory=!1,this.isOpen=!1,this.selected=!1,this.isActive=!1,this.isMain=!1,this.manager="",this.childItems=[],this.tempData=[],this.tempIndex=-1,this.isUnsaved=!0,this.tempSavedIndex=-1,this.isReadonly=!1,this.editedDate=Date.now()}return Object(s["a"])(t,[{key:"getMinifyData",value:function(){var e=function(e,a){return a instanceof t?{id:a.id,name:a.name,remarks:a.remarks,manager:a.manager,isDirectory:a.isDirectory,childItems:a.childItems,isOpen:a.isOpen,isActive:a.isActive,editedDate:a.editedDate}:a},a=JSON.stringify(this,e);return JSON.parse(a)}},{key:"isEdited",get:function(){return this.tempSavedIndex!==this.tempIndex}},{key:"getNewSaveDataName",value:function(){if(!this.isDirectory)return"";var t=this.childItems.filter((function(t){return t.name.startsWith("新規データ")})),e=l()(t.map((function(t){return+t.name.replace(/[^0-9]/g,"")})));return void 0!==e&&e>=0?"新規データ".concat(e+1):"新規データ1"}},{key:"clearSelection",value:function(){this.selected=!1;for(var t=0;t<this.childItems.length;t+=1)this.childItems[t].clearSelection()}},{key:"clearHighlight",value:function(){this.highlight=!1;for(var t=0;t<this.childItems.length;t+=1)this.childItems[t].clearHighlight()}},{key:"closeDirectory",value:function(){this.isOpen=!1;for(var t=0;t<this.childItems.length;t+=1)this.childItems[t].closeDirectory()}},{key:"openDirectory",value:function(){if(this.isDirectory){this.isOpen=!0;for(var t=0;t<this.childItems.length;t+=1)this.childItems[t].openDirectory()}}},{key:"disabledMain",value:function(){this.isMain=!1;for(var t=0;t<this.childItems.length;t+=1)this.childItems[t].disabledMain()}},{key:"getSelectedData",value:function(){if(this.selected)return this;for(var t=0;t<this.childItems.length;t+=1){var e=this.childItems[t].getSelectedData();if(e)return e}}},{key:"fetchActiveData",value:function(){var t=[];this.isActive&&t.push(this);for(var e=0;e<this.childItems.length;e+=1){var a=this.childItems[e].fetchActiveData();a.length&&(t=t.concat(a))}return t}},{key:"sortChild",value:function(){if("root"!==this.name&&this.isDirectory){this.childItems.sort((function(t,e){if(t.isDirectory&&!e.isDirectory)return-1;if(!t.isDirectory&&e.isDirectory)return 1;var a=String(t.name).replace(/(\d+)/g,(function(t){return t.padStart(30,"0")})),i=String(e.name).replace(/(\d+)/g,(function(t){return t.padStart(30,"0")}));return a<i?-1:a>i?1:0}));for(var t=0;t<this.childItems.length;t+=1)this.childItems[t].sortChild()}}},{key:"getMainData",value:function(){if(this.isMain&&!this.isDirectory)return this;for(var t=0;t<this.childItems.length;t+=1){var e=this.childItems[t].getMainData();if(e)return e}}},{key:"addNewFileToSelectedData",value:function(t){if(!this.isDirectory)return!1;if(this.selected)return this.childItems.push(t),this.sortChild(),this.selected=!0,this.isOpen=!0,!0;if(this.childItems.some((function(t){return!t.isDirectory&&t.selected})))return this.childItems.push(t),this.sortChild(),this.isOpen=!0,!0;for(var e=0;e<this.childItems.length;e+=1)if(this.childItems[e].addNewFileToSelectedData(t))return!0;return!1}},{key:"getAllDataId",value:function(){for(var t=[this.id],e=0;e<this.childItems.length;e+=1)t=t.concat(this.childItems[e].getAllDataId());return t}},{key:"putHistory",value:function(t){this.tempIndex<this.tempData.length-1&&(this.tempData=this.tempData.slice(0,this.tempIndex+1),this.tempSavedIndex>=this.tempData.length&&(this.tempSavedIndex=-1)),this.tempData.push(n()(t)),this.tempIndex+=1;var e=20;this.tempData.length>e&&(this.tempData=this.tempData.splice(-e),this.tempIndex=e-1,this.tempSavedIndex-=1)}},{key:"saveManagerData",value:function(){this.manager=this.createSaveDataString(),this.tempSavedIndex=this.tempIndex}},{key:"createSaveDataString",value:function(){var t=function(t,e){if(e instanceof y["a"]){var a={i:e.data.id};return e.level&&(a.l=e.level),e.remodel&&(a.r=e.remodel),e.fullSlot&&(a.s=e.fullSlot),a}if(e instanceof S["a"]||e instanceof w["a"]||e instanceof k["a"])return{id:e.id};if(e instanceof b["a"]){var i={i:e.data.id};return e.isEscort&&(i.es=e.isEscort),i}if(e instanceof A["a"]){var s={i:e.data.id,is:e.items,ac:e.isActive,es:e.isEscort};return e.luck&&(s.lu=e.luck),e.level&&(s.lv=e.level),e.area>0&&(s.ar=e.area),e.exItem&&(s.ex=e.exItem),e.antiAir&&(s.aa=e.antiAir),s}return e instanceof f["a"]?{enemies:e.enemies,cellType:e.cellType,formation:e.formation,range:e.range,area:e.area,nodeName:e.nodeName,mainFleetFormation:e.mainFleetFormation}:e instanceof g["a"]?{ships:e.ships,isUnion:e.isUnion}:e instanceof h["a"]?{items:e.items,battleTarget:e.battleTarget,mode:e.mode}:e instanceof m["a"]?{airbases:e.airbases,difficultyLevel:e.difficultyLevel,isDefense:e.isDefense}:e instanceof v["a"]?{fleets:e.fleets,battleCount:e.battleCount,airRaidFleet:e.airRaidFleet}:e instanceof p["a"]?{fleets:e.fleets,admiralLevel:e.admiralLevel,isUnion:e.isUnion}:e},e=this.tempData[this.tempIndex];if(!e)return"";var a=JSON.stringify(e,t);return JSON.parse(a),a}},{key:"createURLSaveDataString",value:function(){return d.a.compressToEncodedURIComponent(this.createSaveDataString())}},{key:"loadManagerData",value:function(e,a,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:120;if(this.tempData.length)return this.tempIndex>=this.tempData.length&&(this.tempIndex=this.tempData.length-1),n()(this.tempData[this.tempIndex]);if(!this.manager){var r=new u["a"];return r.fleetInfo=new p["a"]({admiralLevel:s}),r.resetAll=!0,this.tempData=[n()(r)],this.tempIndex=0,this.tempSavedIndex=0,r}var o=t.loadSaveDataManagerString(this.manager,e,a,i);return this.tempData=[n()(o)],this.tempIndex=0,this.tempSavedIndex=0,o}},{key:"updateEnemyMasterInCalcData",value:function(t,e){if(this.isDirectory)for(var a=0;a<this.childItems.length;a+=1)this.childItems[a].updateEnemyMasterInCalcData(t,e);else if(this.tempData.length)for(var i=this.tempData,s=0;s<i.length;s+=1){var r=i[s];if(r&&r.battleInfo.fleets.length){for(var n=0;n<r.battleInfo.fleets.length;n+=1){for(var o=r.battleInfo.fleets[n],l=[],c=!1,d=0;d<o.enemies.length;d+=1){var u=o.enemies[d];if(u.data.id===t.id){var h=b["a"].createEnemyFromMaster(t,u.isEscort,e);l.push(h),c=!0}else l.push(u)}c&&(r.battleInfo.fleets[n]=new f["a"]({fleet:o,enemies:l}))}if(r.battleInfo.airRaidFleet.enemies.length){for(var m=r.battleInfo.airRaidFleet,p=[],g=!1,A=0;A<m.enemies.length;A+=1){var y=m.enemies[A];if(y.data.id===t.id){var k=b["a"].createEnemyFromMaster(t,y.isEscort,e);p.push(k),g=!0}else p.push(y)}g&&(r.battleInfo=new v["a"]({info:r.battleInfo,airRaidFleet:new f["a"]({fleet:m,enemies:p})}))}}}}}],[{key:"getInstance",value:function(e){var a=new t(e.id);a.name=e.name,a.remarks=e.remarks,a.isDirectory=e.isDirectory,a.manager=e.manager,a.isActive=e.isActive,a.isOpen=e.isOpen,a.isUnsaved=!1,a.editedDate=e.editedDate;for(var i=0;i<e.childItems.length;i+=1)a.childItems.push(t.getInstance(e.childItems[i]));return a}},{key:"IsSaveData",value:function(e){if(void 0===e.id||void 0===e.name||void 0===e.manager||void 0===e.isDirectory||void 0===e.childItems||void 0===e.childItems.length)return!1;for(var a=0;a<e.childItems.length;a+=1)if(!t.IsSaveData(e.childItems[a]))return!1;return!0}},{key:"createInitialSaveData",value:function(){var e=new t("root");e.isDirectory=!0,e.isReadonly=!0;var a=new t;a.name="保存されたデータ",a.isDirectory=!0,a.isReadonly=!0,a.isOpen=!0,e.childItems.push(a);for(var i=[{value:1,text:"1: 鎮守府海域"},{value:2,text:"2: 南西諸島海域"},{value:3,text:"3: 北方海域"},{value:7,text:"7: 南西海域"},{value:4,text:"4: 西方海域"},{value:5,text:"5: 南方海域"},{value:6,text:"6: 中部海域"}],s=function(e){var s=i.find((function(t){return t.value===e}));if(s){var r=new t;r.name=s.text,r.isDirectory=!0,r.isUnsaved=!1,a.childItems.push(r)}},r=1;r<=7;r+=1)s(r);return a.sortChild(),e}},{key:"decodeURLSaveData",value:function(e){var a=new t;a.name="外部データ";var i=d.a.decompressFromEncodedURIComponent(e);return i&&(a.manager=i),a}},{key:"loadSaveDataManagerString",value:function(t,e,a,i){if(!t||!t.length)return new u["a"];for(var s=JSON.parse(t),r=[],n=s.airbaseInfo.airbases,o=0;o<n.length;o+=1){for(var l=n[o],c=l.items,d=[],k=function(t){var a=c[t],i=e.find((function(t){return t.id===a.i}));i?d.push(new y["a"]({master:i,slot:a.s,level:a.l,remodel:a.r})):d.push(new y["a"]({slot:a.s}))},w=0;w<c.length;w+=1)k(w);r.push(new h["a"]({airbase:l,items:d}))}s.airbaseInfo=new m["a"]({info:s.airbaseInfo,airbases:r});for(var S=[],D=s.fleetInfo.fleets,I=0;I<D.length;I+=1){for(var C=D[I],x=C.ships,_=[],R=function(t){for(var i=x[t],s=i.is,r=[],n=function(t){var a=s[t],i=e.find((function(t){return t.id===a.i}));i?r.push(new y["a"]({master:i,slot:a.s,level:a.l,remodel:a.r})):r.push(new y["a"]({slot:a.s}))},o=0;o<s.length;o+=1)n(o);var l=i.ex,c=e.find((function(t){return t.id===l.i})),d=void 0;d=c?new y["a"]({master:c,level:l.l,remodel:l.r}):new y["a"];var u=a.find((function(t){return t.id===i.i})),h=i.ar&&i.ar>0?i.ar:void 0;u?_.push(new A["a"]({master:u,items:r,exItem:d,antiAir:i.aa,luck:i.lu,level:i.lv,isActive:i.ac,isEscort:i.es,area:h})):_.push(new A["a"]({items:r,exItem:d,level:i.lv,isEscort:i.es,area:h}))},T=0;T<x.length;T+=1)R(T);S.push(new g["a"]({fleet:C,ships:_,formation:1}))}s.fleetInfo=new p["a"]({info:s.fleetInfo,fleets:S,mainFleetIndex:0});for(var P=[],B=s.battleInfo.fleets,E=0;E<B.length;E+=1){for(var M=B[E],O=M.enemies,L=[],F=0;F<O.length;F+=1){var N=O[F];L.push(b["a"].createEnemyFromMasterId(N.i,!!N.es,i,e))}P.push(new f["a"]({fleet:M,enemies:L}))}if(s.battleInfo.airRaidFleet){for(var U=[],q=s.battleInfo.airRaidFleet,H=q.enemies,V=q.formation,j=q.cellType,$=0;$<H.length;$+=1){var K=H[$];U.push(b["a"].createEnemyFromMasterId(K.i,!!K.es,i,e))}var J=new f["a"]({enemies:U,formation:V,cellType:j});s.battleInfo=new v["a"]({info:s.battleInfo,fleets:P,airRaidFleet:J})}else s.battleInfo=new v["a"]({info:s.battleInfo,fleets:P,airRaidFleet:new f["a"]});var W=new u["a"];return W.airbaseInfo=s.airbaseInfo,W.fleetInfo=s.fleetInfo,W.battleInfo=s.battleInfo,W.resetAll=!0,W}}]),t}()},"0f16":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var i=a("d4ec"),s=a("bee2"),r=(a("caad"),a("fc09")),n=a("7970"),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(i["a"])(this,t),this.attackerTorpedoBonus=0,this.slotResult=0,this.deathRate=0,this.isEscortItem=!1,this.needRecord=!1,this.dist=[],e.item?(this.data=e.master?e.master:e.item.data,this.fullSlot=void 0!==e.slot?e.slot:e.item.fullSlot,this.remodel=void 0!==e.remodel?e.remodel:e.item.remodel,this.level=void 0!==e.level?e.level:e.item.level):(this.data=e.master?e.master:new n["a"],this.fullSlot=void 0!==e.slot?e.slot:0,this.remodel=void 0!==e.remodel?e.remodel:0,this.level=void 0!==e.level?e.level:0),this.slot=this.fullSlot,this.bonusAirPower=this.getBonusAirPower(),this.antiAirWeight=this.getAntiAirWeight(),this.bonusFire=this.getBonusFire(),this.bonusTorpedo=this.getBonusTorpedo(),this.bonusBomber=this.getBonusBomber(),this.bonusAntiAir=this.getBonusAntiAir(),this.bonusAccuracy=this.getBonusAccuracy(),this.bonusAsw=this.getBonusAsw(),this.bonusScout=this.getBonusScout(),this.antiAirBonus=this.getAntiAirBonus(),this.tp=this.getTransportPower(),this.reconCorr=this.getReconCorr(),this.reconCorrDefense=this.getReconCorrDefense(),this.contactSelectRates=this.getContactSelectRates(),this.itemScout=(this.data.scout+this.bonusScout)*this.getItemScoutCoefficient(),this.actualFire=this.data.fire+this.bonusFire,this.actualTorpedo=this.data.torpedo+this.bonusTorpedo,this.actualBomber=this.data.bomber+this.bonusBomber,this.actualAsw=this.data.asw+this.bonusAsw,this.actualAccuracy=this.data.accuracy+this.bonusAccuracy,this.actualScout=this.data.scout+this.bonusScout,this.calculatedAirPower=[],this.calculatedDefenseAirPower=[],this.data.isPlane){if(this.actualAntiAir=this.data.antiAir+1.5*this.data.interception+this.bonusAntiAir,this.actualDefenseAntiAir=this.data.antiAir+this.data.interception+2*this.data.antiBomber+this.bonusAntiAir,this.fuel=this.fullSlot,this.ammo=Math.ceil(.6*this.fullSlot),this.bauxite=this.data.cost*(this.data.isRecon?4:18),this.steel=this.data.isJet?Math.round(this.fullSlot*this.data.cost*.2):0,this.data.isABAttacker?(this.fuel=Math.ceil(this.fullSlot*(this.data.isShinzan?2:1.5)),this.ammo=this.data.isShinzan?2*this.fullSlot:Math.floor(.7*this.fullSlot),this.bauxite=this.data.cost*(this.data.isShinzan?9:18)):41===this.data.apiTypeId&&(this.fuel=3*this.fullSlot,this.ammo=this.fullSlot),this.data.isPlane?(this.fullAirPower=Math.floor(this.actualAntiAir*Math.sqrt(this.fullSlot)+this.bonusAirPower),this.fullDefenseAirPower=Math.floor(this.actualDefenseAntiAir*Math.sqrt(this.fullSlot)+this.bonusAirPower),this.supportAirPower=Math.floor(this.data.antiAir*Math.sqrt(this.fullSlot))):(this.fullAirPower=0,this.fullDefenseAirPower=0,this.defenseAirPower=0,this.supportAirPower=0),this.airPower=this.fullAirPower,this.defenseAirPower=this.fullDefenseAirPower,this.fullSlot>0&&this.data.isPlane)for(var a=0;a<=this.fullSlot;a+=1)this.calculatedAirPower.push(Math.floor(this.actualAntiAir*Math.sqrt(a)+this.bonusAirPower)),this.calculatedDefenseAirPower.push(Math.floor(this.actualDefenseAntiAir*Math.sqrt(a)+this.bonusAirPower))}else this.actualAntiAir=0,this.actualDefenseAntiAir=0,this.fuel=0,this.ammo=0,this.bauxite=0,this.steel=0,this.fullAirPower=0,this.fullDefenseAirPower=0,this.supportAirPower=0,this.airPower=0,this.defenseAirPower=0;this.slotHistories=[]}return Object(s["a"])(t,[{key:"levelAlt",get:function(){return r["a"].getProfLevel(this.level)}},{key:"getBonusAirPower",value:function(){if(0===this.data.id||0===this.fullSlot||!this.data.isPlane)return 0;var t=this.data.apiTypeId,e=0;return this.level>=100?this.data.isFighter?e+=22:11===t&&(e+=6):this.level>=70?this.data.isFighter?e+=14:11===t&&(e+=3):this.level>=55?this.data.isFighter?e+=9:11===t&&(e+=1):this.level>=40?this.data.isFighter?e+=5:11===t&&(e+=1):this.level>=25&&(this.data.isFighter?e+=2:11===t&&(e+=1)),e+=Math.sqrt(this.level/10),49===t?e+=this.remodel>=2&&4===this.fullSlot?1:0:138===this.data.id&&(e+=this.remodel>=4&&4===this.fullSlot?1:0),e}},{key:"getBonusFire",value:function(){return 3===this.data.apiTypeId?1.5*Math.sqrt(this.remodel):[1,2,4,19,21,24,29,36,42].includes(this.data.apiTypeId)?[10,66,220,275].includes(this.data.id)?.2*this.remodel:[12,234,247].includes(this.data.id)?.3*this.remodel:Math.sqrt(this.remodel):[14,15].includes(this.data.apiTypeId)?.75*Math.sqrt(this.remodel):0}},{key:"getBonusTorpedo",value:function(){return 8===this.data.apiTypeId?.2*this.remodel:this.data.isABAttacker?.7*Math.sqrt(this.remodel):5===this.data.apiTypeId||21===this.data.apiTypeId?1.2*Math.sqrt(this.remodel):0}},{key:"getBonusBomber",value:function(){var t=this.data.apiTypeId;return 7!==t||this.data.isBakusen?11===t?.2*this.remodel:0:.2*this.remodel}},{key:"getBonusAntiAir",value:function(){return this.data.isFighter?.2*this.remodel:7===this.data.apiTypeId&&this.data.isBakusen?.25*this.remodel:this.data.isABAttacker?.5*Math.sqrt(this.remodel):0}},{key:"getBonusAsw",value:function(){var t=this.data.apiTypeId;return[14,15].includes(t)?Math.sqrt(this.remodel):8===t?.2*this.remodel:7!==t||this.data.isBakusen?0:.2*this.remodel}},{key:"getBonusAccuracy",value:function(){return[28,29,31,32,88,89,141,240,278,279,315].includes(this.data.id)?1.7*Math.sqrt(this.remodel):[1,2,3,4,12,13,19,29,36,42].includes(this.data.apiTypeId)?Math.sqrt(this.remodel):0}},{key:"getBonusScout",value:function(){var t=0;return 12===this.data.apiTypeId?t=1.25*Math.sqrt(this.remodel):13===this.data.apiTypeId?t=1.4*Math.sqrt(this.remodel):this.data.isRecon?t=1.2*Math.sqrt(this.remodel):11===this.data.apiTypeId&&(t=1.15*Math.sqrt(this.remodel)),t}},{key:"getItemScoutCoefficient",value:function(){var t=.6;return 8===this.data.apiTypeId?t=.8:9===this.data.apiTypeId?t=1:10===this.data.apiTypeId?t=1.2:11===this.data.apiTypeId&&(t=1.1),t}},{key:"getAntiAirWeight",value:function(){var t=0;return 16===this.data.iconTypeId||36===this.data.apiTypeId?t=2*this.data.antiAir:21===this.data.apiTypeId?t=3*this.data.antiAir:11===this.data.iconTypeId&&(t=1.5*this.data.antiAir),(16===this.data.iconTypeId||36===this.data.apiTypeId)&&this.data.antiAir<=7?t+=1*Math.sqrt(this.remodel):(16===this.data.iconTypeId||36===this.data.apiTypeId)&&this.data.antiAir>7?t+=1.5*Math.sqrt(this.remodel):21===this.data.apiTypeId&&this.data.antiAir<=7?t+=2*Math.sqrt(this.remodel):21===this.data.apiTypeId&&this.data.antiAir>7&&(t+=3*Math.sqrt(this.remodel)),t}},{key:"getAntiAirBonus",value:function(){var t=0;return t=16===this.data.iconTypeId||36===this.data.apiTypeId?.35*this.data.antiAir:18===this.data.apiTypeId?.6*this.data.antiAir:11===this.data.iconTypeId?.4*this.data.antiAir:9===this.data.id?.25*this.data.antiAir:.2*this.data.antiAir,(16===this.data.iconTypeId||36===this.data.apiTypeId)&&this.data.antiAir<=7?t+=2*Math.sqrt(this.remodel):16===this.data.iconTypeId||36===this.data.apiTypeId?t+=3*Math.sqrt(this.remodel):11===this.data.iconTypeId&&this.data.antiAir>1&&(t+=1.5*Math.sqrt(this.remodel)),t}},{key:"getTransportPower",value:function(){switch(this.data.apiTypeId){case 24:return 8;case 30:return 5;case 43:return 1;case 46:return 2;default:return 0}}},{key:"getReconCorr",value:function(){if(49===this.data.apiTypeId)switch(this.data.scout){case 9:return 1.18;case 8:return 1.15;default:return 1}return 1}},{key:"getReconCorrDefense",value:function(){return 49===this.data.apiTypeId?9===this.data.scout?1.24:1.18:9===this.data.apiTypeId?this.data.scout>8?1.3:1.2:this.data.isRecon?this.data.scout>8?1.16:8===this.data.scout?1.13:1.1:1}},{key:"getContactSelectRates",value:function(){if([8,9,10,41,49].includes(this.data.apiTypeId)){var t=this.remodel,e=this.data.scout;switch(this.data.id){case 102:e=Math.ceil(e+.1*t);break;case 25:case 138:case 163:case 304:case 370:case 239:e=Math.ceil(e+.14*t);break;case 59:e=Math.ceil(e+.2*t);break;case 61:e=Math.ceil(e+.25*t);break;case 151:e=Math.ceil(e+.4*t);break;default:break}return[e/14,e/16,e/18]}return[0,0,0]}},{key:"getProfCriticalBonus",value:function(){var t=0;if(this.slot>0&&(this.data.isAttacker||41===this.data.apiTypeId)){var e=[0,1,2,3,4,5,7,10][this.levelAlt];t+=Math.floor(Math.sqrt(this.level)+e)/100}return 1+t}}],[{key:"updateAirPower",value:function(t){t.slot<=0?(t.airPower=0,t.slot=0):t.airPower=t.calculatedAirPower[t.slot]}},{key:"updateDefenseAirPower",value:function(t){t.slot<=0?(t.defenseAirPower=0,t.slot=0):t.defenseAirPower=t.calculatedDefenseAirPower[t.slot]}},{key:"supply",value:function(t){t.needRecord&&t.dist.push(t.slot),t.slot=t.fullSlot,t.airPower=t.fullAirPower,t.defenseAirPower=t.fullDefenseAirPower}},{key:"getContactRates",value:function(t){for(var e=0,a=[[],[],[]],i=[[],[],[]],s=[[],[],[]],r=0;r<t.length;r+=1){var n=t[r];n.data.isRecon&&(e+=Math.floor(n.data.scout*Math.sqrt(n.fullSlot)));for(var o=0;o<3;o+=1)n.data.accuracy>=3?a[o].push(n.contactSelectRates[o]):2===n.data.accuracy?i[o].push(n.contactSelectRates[o]):s[o].push(n.contactSelectRates[o])}for(var l=Math.floor(e)+1,c=[Math.min(l/25,1),Math.min(l/40,1),Math.min(l/55,1)],d=[{contact120:0,contact117:0,contact112:0},{contact120:0,contact117:0,contact112:0},{contact120:0,contact117:0,contact112:0}],u=1,h=0;h<3;h+=1){var m=c[h];if(a[h].length){u=1;for(var v=0;v<a[h].length;v+=1)u*=1-a[h][v];var f=m*(1-u);d[h].contact120=f,m-=f}if(i[h].length){u=1;for(var p=0;p<i[h].length;p+=1)u*=1-i[h][p];var g=m*(1-u);d[h].contact117=g,m-=g}if(s[h].length){u=1;for(var b=0;b<s[h].length;b+=1)u*=1-s[h][b];var A=m*(1-u);d[h].contact112=A}}for(var y=[{startRate:0,contact120:0,contact117:0,contact112:0,sumRate:0},{startRate:0,contact120:0,contact117:0,contact112:0,sumRate:0},{startRate:0,contact120:0,contact117:0,contact112:0,sumRate:0}],k=0;k<3;k+=1){var w=d[k],S=w.contact120+w.contact117+w.contact112;y[k].startRate=100*c[k],y[k].contact120=100*w.contact120,y[k].contact117=100*w.contact117,y[k].contact112=100*w.contact112,y[k].sumRate=Math.min(100*S,100)}return y}}]),t}()},"14ed":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var i=a("bee2"),s=a("d4ec"),r=(a("b0c0"),Object(i["a"])((function t(e){Object(s["a"])(this,t),this.id=0,this.name="",this.type=0,this.type2=0,this.version=0,this.hp=0,this.antiAir=0,this.armor=0,this.slotCount=0,this.slots=[],this.items=[],this.isLandBase=!1,this.isUnknown=!1,e&&(this.id=e.id?+e.id:0,this.name=e.name?e.name:"",this.type=e.type?+e.type:0,this.hp=e.hp?+e.hp:0,this.antiAir=e.aa?+e.aa:0,this.armor=e.armor?+e.armor:0,this.slotCount=e.slot_count?+e.slot_count:0,this.isLandBase=!!e.landbase,this.isUnknown=!!e.unknown,this.slots=e.slots?e.slots:[],this.items=e.items?e.items:[])})))},2798:function(t,e,a){},"30e9":function(t,e,a){"use strict";a("5b84")},"331b":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var i=a("bee2"),s=a("d4ec"),r=Object(i["a"])((function t(){Object(s["a"])(this,t),this.id=0,this.uniqueId=0,this.level=1,this.exp=0,this.improvement={hp:0,asw:0,luck:0},this.releaseExpand=!1,this.area=0}))},"349a":function(t,e,a){},"35e4":function(t,e,a){"use strict";a("2798")},"452c":function(t,e,a){},4715:function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));var i=a("d4ec"),s=a("bee2"),r=(a("99af"),a("7db0"),a("d3b7"),a("4de4"),a("14ed")),n=a("0f16"),o=a("522d"),l=a("aec1"),c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r["a"],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(i["a"])(this,t),this.data=e,this.items=a,this.isEscort=s,this.actualArmor=this.data.armor,this.hp=this.data.hp,this.sumItemAccuracy=0,this.fullLBAirPower=0,this.fullAirPower=0,this.antiAirBonus=0,this.exItem=new n["a"],this.hasPlane=!1,this.antiAir=this.data.antiAir,this.specialKokakuCount=0,this.kokakuCount=0,this.kijuCount=0,this.specialKijuCount=0,this.antiAirRadarCount=0,this.koshaCount=0;for(var c=this.items.concat(this.exItem),d=0;d<c.length;d+=1){var u=c[d];this.sumItemAccuracy+=u.data.accuracy,this.antiAirBonus+=u.antiAirBonus,this.actualArmor+=u.data.armor,u.fullSlot>0&&(this.fullLBAirPower+=u.fullAirPower,u.data.isRecon||u.data.isABAttacker||(this.fullAirPower+=u.fullAirPower)),!this.hasPlane&&u.data.isPlane&&(this.hasPlane=!0),16!==u.data.iconTypeId||u.data.isSpecial||(this.kokakuCount+=1),16===u.data.iconTypeId&&u.data.isSpecial&&(this.specialKokakuCount+=1),21!==u.data.apiTypeId||u.data.isSpecial||(this.kijuCount+=1),21===u.data.apiTypeId&&u.data.isSpecial&&(this.specialKijuCount+=1),11===u.data.iconTypeId&&u.data.antiAir>0&&(this.antiAirRadarCount+=1),36===u.data.apiTypeId&&(this.koshaCount+=1)}this.isSubmarine=this.data.type===o["g"].SS||this.data.type===o["g"].SSV,this.antiAirBonus=Math.floor(this.antiAirBonus),this.antiAirCutIn=l["a"].getAntiAirCutIn(this)}return Object(s["a"])(t,null,[{key:"createEnemyFromMasterId",value:function(e,a,i,s){var r=i.find((function(t){return t.id===e}));return r?t.createEnemyFromMaster(r,a,s):new t}},{key:"createEnemyFromMaster",value:function(e,a,i){if(!e)return new t;for(var s=[],r=Math.max(e.items.filter((function(t){return t>0})).length,e.slotCount),o=function(t){var a=i.find((function(a){return a.id===e.items[t]}));if(a){var r=e.slots[t]>0?e.slots[t]:0,o={master:a,slot:r};s.push(new n["a"](o))}else s.push(new n["a"])},l=0;l<r;l+=1)o(l);return new t(e,s,a)}}]),t}()},4811:function(t,e,a){},"4a34":function(t,e,a){"use strict";a("c364")},"522d":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"g",(function(){return n})),a.d(e,"a",(function(){return o})),a.d(e,"f",(function(){return l})),a.d(e,"d",(function(){return c})),a.d(e,"e",(function(){return d})),a.d(e,"c",(function(){return u})),a.d(e,"h",(function(){return h})),a.d(e,"i",(function(){return m}));var i=a("d4ec"),s=a("bee2"),r=(a("99af"),a("caad"),a("2532"),{KAKUHO:0,YUSEI:1,KINKO:2,RESSEI:3,SOSHITSU:4,NONE:5}),n={DE:1,DD:2,CL:3,CLT:4,CA:5,CAV:6,CVL:7,FBB:8,BB:9,BBV:10,CV:11,BBB:12,SS:13,SSV:14,AO_2:15,AV:16,LHA:17,CVB:18,AR:19,AS:20,CT:21,AO:22},o={WAIT:0,BATTLE:1,DEFENSE:2},l={LINE_AHEAD:1,DOUBLE_LINE:2,DIAMOND:3,ECHELON:4,LINE_ABREAST:5,VANGUARD:6,FORMATION1:15,FORMATION2:12,FORMATION3:13,FORMATION4:11},c={NORMAL:1,GRAND:2,AIR_RAID:3,NIGHT:4,HIGH_AIR_RAID:5,AERIAL_COMBAT:6,SUPER_HIGH_AIR_RAID:7},d={HARD:0,MEDIUM:1,EASY:2,CASUAL:3},u={AS:170,BATTLE:170,NIGHT:350},h={SHELLING:0,AIRSTRIKE:1,ANTI_SUBMARINE:2,LONG_RANGE_TORPEDO:3,NOT_FOUND_DD:4,NONE:5},m=function(){function t(){Object(i["a"])(this,t)}return Object(s["a"])(t,null,[{key:"isJPN",value:function(e){var a=t.USA.concat();return a=a.concat(t.ITA),a=a.concat(t.GBR),a=a.concat(t.DEU),a=a.concat(t.FRA),a=a.concat(t.RUS),a=a.concat(t.SWE),a=a.concat(t.AUS),a=a.concat(t.NLD),!a.includes(e)}}]),t}();m.AIR_STATUS=[{text:"確保",value:r.KAKUHO,color:"green"},{text:"優勢",value:r.YUSEI,color:"light-green"},{text:"拮抗",value:r.KINKO,color:"yellow"},{text:"劣勢",value:r.RESSEI,color:"deep-orange"},{text:"喪失",value:r.SOSHITSU,color:"red"},{text:"不発",value:r.NONE,color:"secondary"}],m.AB_MODE_ITEMS=[{text:"出撃",value:o.BATTLE},{text:"防空",value:o.DEFENSE},{text:"待機",value:o.WAIT}],m.PLANE_TYPES=[6,7,8,9,10,11,41,45,47,48,49,53,57],m.CB_PLANE_TYPES=[6,7,8,9,57],m.SP_PLANE_TYPES=[10,11,41,45],m.AB_PLANE_TYPES=[47,48,49,53],m.FIGHTERS=[6,45,48],m.ATTACKERS=[7,8,11,47,53,57],m.RECONNAISSANCES=[9,10,41,49],m.AB_ATTACKERS=[47,53],m.AB_ATTACKERS_LARGE=[53],m.ROCKET=[350,351,352],m.BAKUSEN=[60,154,219,447],m.ENABLED_LAND_BASE_ATTACK=[64,148,233,277,305,306,319,320,391,392,420,421],m.ENABLED_ASW_SUPPORT=[7,8,10,11,45,41,25,26],m.ITEM_API_TYPE=[{id:6,name:"艦上戦闘機",sortKey:["antiAir","avoid","accuracy","scout","radius","cost"]},{id:7,name:"艦上爆撃機",sortKey:["bomber","antiAir","accuracy","asw","avoid","scout","radius","avoidId","cost"]},{id:8,name:"艦上攻撃機",sortKey:["torpedo","antiAir","accuracy","asw","avoid","scout","radius","avoidId","cost"]},{id:9,name:"艦上偵察機",sortKey:["scout","accuracy","avoid","antiAir","radius","avoidId","cost"]},{id:57,name:"噴式戦闘爆撃機",sortKey:["bomber","antiAir","accuracy","avoid","scout","radius","avoidId","cost"]},{id:10,name:"水上偵察機",sortKey:["scout","accuracy","avoid","antiAir","radius","avoidId","cost"]},{id:11,name:"水上爆撃機",sortKey:["bomber","antiAir","accuracy","avoid","scout","radius","avoidId","cost"]},{id:45,name:"水上戦闘機",sortKey:["antiAir","avoid","accuracy","scout","radius","cost"]},{id:41,name:"大型飛行艇",sortKey:["scout","accuracy","avoid","antiAir","radius","avoidId","cost"]},{id:47,name:"陸上攻撃機",sortKey:["torpedo","bomber","antiAir","asw","accuracy","avoid","scout","radius","avoidId","cost"]},{id:53,name:"大型陸上機",sortKey:["torpedo","bomber","antiAir","accuracy","avoid","scout","radius","avoidId","cost"]},{id:48,name:"局地戦闘機",sortKey:["antiAir","antiBomber","interception","radius","cost"]},{id:49,name:"陸上偵察機",sortKey:["scout","accuracy","avoid","antiAir","radius","avoidId","cost"]},{id:1,name:"小口径主砲",sortKey:["fire","accuracy","antiAir","armor","range"]},{id:2,name:"中口径主砲",sortKey:["fire","accuracy","antiAir","armor","range"]},{id:3,name:"大口径主砲",sortKey:["fire","accuracy","antiAir","armor","range"]},{id:4,name:"副砲",sortKey:["fire","accuracy","antiAir","armor","range"]},{id:5,name:"魚雷",sortKey:["torpedo","accuracy","armor"]},{id:12,name:"小型電探",sortKey:["antiAir","accuracy","scout","fire","armor"]},{id:13,name:"大型電探",sortKey:["antiAir","accuracy","scout","fire","armor"]},{id:14,name:"ソナー",sortKey:["asw","accuracy","scout"]},{id:15,name:"爆雷",sortKey:["asw","accuracy"]},{id:17,name:"機関部強化"},{id:18,name:"対空強化弾"},{id:19,name:"対艦強化弾"},{id:21,name:"対空機銃",sortKey:["antiAir","accuracy","fire","armor","avoid"]},{id:22,name:"特殊潜航艇",sortKey:["torpedo","accuracy","avoid","scout"]},{id:23,name:"応急修理要員"},{id:24,name:"上陸用舟艇",sortKey:["fire","antiAir","armor","avoid","scout","tp"]},{id:25,name:"オートジャイロ"},{id:26,name:"対潜哨戒機"},{id:27,name:"追加装甲(中型)"},{id:28,name:"追加装甲(大型)"},{id:29,name:"探照灯"},{id:30,name:"簡易輸送部材"},{id:31,name:"艦艇修理施設"},{id:32,name:"潜水艦魚雷",sortKey:["torpedo","accuracy","avoid"]},{id:33,name:"照明弾"},{id:34,name:"司令部施設"},{id:35,name:"航空要員"},{id:36,name:"高射装置"},{id:37,name:"対地装備"},{id:39,name:"水上艦要員"},{id:40,name:"大型ソナー"},{id:42,name:"大型探照灯"},{id:43,name:"戦闘糧食"},{id:44,name:"補給物資"},{id:46,name:"特型内火艇"},{id:50,name:"輸送機材"},{id:51,name:"潜水艦装備"}],m.SHIP_TYPES_INFO=[{id:n.DE,name:"海防艦",itemType:[1,12,14,15,21,23,36,37,39,43]},{id:n.DD,name:"駆逐艦",itemType:[1,5,12,14,15,17,21,23,29,30,33,36,37,39,43]},{id:n.CL,name:"軽巡洋艦",itemType:[1,2,4,5,10,12,13,14,15,17,21,23,29,30,33,34,36,37,39,43]},{id:n.CLT,name:"重雷装巡洋艦",itemType:[1,2,4,5,12,13,14,15,17,21,22,23,33,34,36,39,43]},{id:n.CA,name:"重巡洋艦",itemType:[2,4,5,10,12,13,17,18,21,23,27,29,33,34,36,39,40,43]},{id:n.CAV,name:"航空巡洋艦",itemType:[2,4,5,10,11,12,13,17,18,21,23,25,27,29,30,33,34,35,36,37,39,40,43,45,50]},{id:n.CVL,name:"軽空母",itemType:[4,6,7,8,9,12,13,17,21,23,25,26,27,34,35,36,40,43,50]},{id:n.FBB,name:"高速戦艦",itemType:[3,4,10,12,13,17,18,19,21,23,28,29,33,34,36,39,40,42,43]},{id:n.BB,name:"戦艦",itemType:[2,3,4,10,12,13,17,18,19,21,23,28,29,33,34,36,39,40,42,43]},{id:n.BBV,name:"航空戦艦",itemType:[2,3,4,10,11,12,13,17,18,19,21,23,25,28,29,33,34,35,36,37,39,40,42,43,45,50]},{id:n.CV,name:"正規空母",itemType:[4,6,7,8,9,12,13,17,21,23,28,34,35,36,40,43,50]},{id:n.BBB,name:"超弩級戦艦",itemType:[2,3,4,10,12,13,17,18,19,21,23,28,29,33,34,36,39,40,42,43]},{id:n.SS,name:"潜水艦",itemType:[5,14,17,22,23,32,37,43,46,51]},{id:n.SSV,name:"潜水空母",itemType:[5,10,11,14,17,22,23,32,37,43,45,46,51]},{id:n.AO_2,name:"補給艦",itemType:[0]},{id:n.AV,name:"水上機母艦",itemType:[1,4,10,11,12,13,15,17,21,22,23,24,27,29,30,33,34,36,37,39,40,43,45,46,50]},{id:n.LHA,name:"揚陸艦",itemType:[1,4,12,15,17,21,23,24,25,26,30,34,36,37,40,43,46,50]},{id:n.CVB,name:"装甲空母",itemType:[4,6,7,8,9,12,13,17,21,23,28,34,35,36,40,43,50]},{id:n.AR,name:"工作艦",itemType:[1,4,12,17,21,23,25,27,31,33,36,43,50]},{id:n.AS,name:"潜水母艦",itemType:[1,4,10,12,17,21,23,25,27,33,34,36,37,39,40,43,45]},{id:n.CT,name:"練習巡洋艦",itemType:[1,2,4,5,10,12,13,14,15,17,21,23,27,34,36,39,43]},{id:n.AO,name:"補給艦",itemType:[1,10,11,12,17,21,23,25,30,35,36,43,44,45]}],m.SHIP_TYPES_ALT_INFO=[{id:6,name:"金剛型"},{id:26,name:"扶桑型"},{id:2,name:"伊勢型"},{id:19,name:"長門型"},{id:37,name:"大和型"},{id:14,name:"赤城型"},{id:3,name:"加賀型"},{id:17,name:"蒼龍型"},{id:25,name:"飛龍型"},{id:33,name:"翔鶴型"},{id:53,name:"雲龍型"},{id:43,name:"大鳳型"},{id:27,name:"鳳翔型"},{id:32,name:"龍驤型"},{id:51,name:"龍鳳型"},{id:11,name:"祥鳳型"},{id:24,name:"飛鷹型"},{id:15,name:"千歳型"},{id:76,name:"大鷹型"},{id:75,name:"春日丸級"},{id:72,name:"神威型"},{id:62,name:"瑞穂型"},{id:90,name:"日進型"},{id:59,name:"秋津洲型"},{id:100,name:"迅鯨型"},{id:50,name:"大鯨型"},{id:60,name:"改風早型"},{id:49,name:"工作艦"},{id:111,name:"PL10"},{id:7,name:"古鷹型"},{id:13,name:"青葉型"},{id:29,name:"妙高型"},{id:8,name:"高雄型"},{id:9,name:"最上型"},{id:31,name:"利根型"},{id:21,name:"天龍型"},{id:4,name:"球磨型"},{id:20,name:"長良型"},{id:16,name:"川内型"},{id:34,name:"夕張型"},{id:41,name:"阿賀野型"},{id:52,name:"大淀型"},{id:56,name:"香取型"},{id:66,name:"神風型"},{id:28,name:"睦月型"},{id:12,name:"吹雪型"},{id:1,name:"綾波型"},{id:5,name:"暁型"},{id:10,name:"初春型"},{id:23,name:"白露型"},{id:18,name:"朝潮型"},{id:30,name:"陽炎型"},{id:38,name:"夕雲型"},{id:54,name:"秋月型"},{id:22,name:"島風型"},{id:101,name:"松型"},{id:74,name:"占守型"},{id:77,name:"択捉型"},{id:94,name:"御蔵型"},{id:85,name:"日振型"},{id:104,name:"丁型海防艦"},{id:71,name:"巡潜甲型改二"},{id:44,name:"潜特型(伊400型潜水艦)"},{id:35,name:"海大VI型"},{id:40,name:"巡潜3型"},{id:39,name:"巡潜乙型"},{id:103,name:"巡潜丙型"},{id:36,name:"巡潜乙型改二"},{id:109,name:"潜高型"},{id:80,name:"Guglielmo Marconi級"},{id:57,name:"UボートIXC型"},{id:86,name:"呂号潜水艦"},{id:46,name:"三式潜航輸送艇"},{id:97,name:"陸軍特種船(R1)"},{id:45,name:"特種船丙型"},{id:115,name:"特2TL型"},{id:47,name:"Bismarck級"},{id:55,name:"Admiral Hipper級"},{id:63,name:"Graf Zeppelin級"},{id:48,name:"Z1型"},{id:58,name:"V.Veneto級"},{id:68,name:"Aquila級"},{id:64,name:"Zara級"},{id:92,name:"L.d.S.D.d.Abruzzi級"},{id:61,name:"Maestrale級"},{id:113,name:"Conte di Cavour級"},{id:93,name:"Colorado級"},{id:107,name:"North Carolina級"},{id:102,name:"South Dakota級"},{id:65,name:"Iowa級"},{id:69,name:"Lexington級"},{id:105,name:"Yorktown級"},{id:84,name:"Essex級"},{id:83,name:"Casablanca級"},{id:95,name:"Northampton級"},{id:110,name:"Brooklyn級"},{id:106,name:"St.Louis級"},{id:99,name:"Atlanta級"},{id:91,name:"Fletcher級"},{id:87,name:"John C.Butler級"},{id:114,name:"Gato級"},{id:67,name:"Queen Elizabeth級"},{id:88,name:"Nelson級"},{id:78,name:"Ark Royal級"},{id:112,name:"Illustrious級"},{id:108,name:"Town級"},{id:82,name:"J級"},{id:79,name:"Richelieu級"},{id:70,name:"C.Teste級"},{id:73,name:"Гангут級"},{id:81,name:"Ташкент級"},{id:89,name:"Gotland級"},{id:98,name:"De Ruyter級"},{id:96,name:"Perth級"},{id:42,name:"(霧の艦隊?)"}],m.EXPANDED_ITEM_TYPE=[17,21,23,27,28,36,39,43,44,51],m.FORBIDDEN_LINK_SHIP_ITEM=[{shipId:553,index:[3,4,5],itemType:[2,3],itemIDs:[0]},{shipId:554,index:[3,4,5],itemType:[2,3],itemIDs:[0]},{shipId:622,index:[4],itemType:[1,2,5],itemIDs:[0]},{shipId:623,index:[4],itemType:[1,2,5,22],itemIDs:[0]},{shipId:624,index:[4],itemType:[1,2,5],itemIDs:[0]},{shipId:622,index:[5],itemType:[1,2,5,14,15,17,20,22,23,24,27,29,30,33,34,36,37,39,40,46],itemIDs:[0]},{shipId:623,index:[5],itemType:[1,2,5,14,15,17,20,22,23,24,27,29,30,33,34,36,37,39,40,46],itemIDs:[0]},{shipId:624,index:[5],itemType:[1,2,5,14,15,17,20,22,23,24,27,29,30,33,34,36,37,39,40,46],itemIDs:[0]},{shipId:662,index:[4],itemType:[5,22],itemIDs:[0]},{shipId:663,index:[4],itemType:[5,22],itemIDs:[0]},{shipId:668,index:[4],itemType:[5],itemIDs:[0]},{shipId:392,index:[1,2,3,4,5],itemType:[0],itemIDs:[26,62,79,80,81,207,208,237,322,323,367,368,369]}],m.SHIP_TYPES_ALT=[{text:"空母",types:[11,18]},{text:"軽空",types:[7]},{text:"戦艦",types:[8,9]},{text:"航戦",types:[10]},{text:"重巡",types:[5]},{text:"航巡",types:[6]},{text:"軽巡",types:[3,4,21]},{text:"駆逐",types:[2]},{text:"海防",types:[1]},{text:"潜水",types:[13,14]},{text:"その他",types:[15,16,17,19,20,22]}],m.SHIP_TYPES_ALT2=[{text:"正規空母",types:[11,18]},{text:"軽空母",types:[7]},{text:"戦艦級",types:[8,9,10]},{text:"重巡級",types:[5,6]},{text:"軽巡級",types:[3,4,21]},{text:"駆逐艦",types:[2]},{text:"海防艦",types:[1]},{text:"潜水艦",types:[13,14]},{text:"補助艦艇",types:[15,16,17,19,20,22]}],m.USA=[65,69,83,84,87,91,93,95,99,102,105,106,107,110,114],m.ITA=[58,61,64,68,80,92,113],m.GBR=[67,78,82,88,108,112],m.DEU=[47,48,55,57,63],m.FRA=[70,79],m.RUS=[73,81],m.SWE=[89],m.AUS=[96],m.NLD=[98],m.FORMATIONS=[{text:"単縦陣",value:l.LINE_AHEAD,correction:1},{text:"複縦陣",value:l.DOUBLE_LINE,correction:1.2},{text:"輪形陣",value:l.DIAMOND,correction:1.6},{text:"梯形陣",value:l.ECHELON,correction:1},{text:"単横陣",value:l.LINE_ABREAST,correction:1},{text:"警戒陣",value:l.VANGUARD,correction:1.1},{text:"第一警戒",value:l.FORMATION1,correction:1.1},{text:"第二警戒",value:l.FORMATION2,correction:1},{text:"第三警戒",value:l.FORMATION3,correction:1.5},{text:"第四警戒",value:l.FORMATION4,correction:1}],m.SUPPORTS=[{text:"支援射撃",value:h.SHELLING},{text:"航空支援",value:h.AIRSTRIKE},{text:"対潜支援哨戒",value:h.ANTI_SUBMARINE},{text:"支援長距離雷撃",value:h.LONG_RANGE_TORPEDO},{text:"支援不可(要駆逐2)",value:h.NOT_FOUND_DD},{text:"不発",value:h.NONE}],m.ITEM_TYPES_ALT=[{id:1,text:"小口径主砲",viewStatus:["actualFire","antiAir","actualAccuracy","armor","antiAirWeight","antiAirBonus"],types:[1]},{id:2,text:"中口径主砲",viewStatus:["actualFire","antiAir","actualAccuracy","armor","antiAirWeight","antiAirBonus"],types:[2]},{id:3,text:"大口径主砲",viewStatus:["actualFire","antiAir","actualAccuracy","armor","antiAirWeight","antiAirBonus"],types:[3]},{id:6,text:"艦戦",viewStatus:["antiAir","actualAntiAir","actualAccuracy","avoid","airPower","radius"],types:[6]},{id:7,text:"艦爆",viewStatus:["actualBomber","actualAntiAir","actualAccuracy","actualAsw","avoidId","radius"],types:[7]},{id:8,text:"艦攻",viewStatus:["actualTorpedo","actualAntiAir","actualAccuracy","asw","avoidId","radius"],types:[8]},{id:9,text:"艦偵",viewStatus:["actualScout","actualFire","actualAccuracy","actualAntiAir","radius","cost"],types:[9]},{id:57,text:"噴式機",viewStatus:["actualBomber","actualAccuracy","actualAntiAir","avoidId","airPower","cost"],types:[57]},{id:5,text:"魚雷",viewStatus:["actualTorpedo","actualFire","actualAccuracy","avoid","armor"],types:[5,22,32]},{id:10,text:"水上機",viewStatus:["actualScout","actualFire","actualAccuracy","actualAsw","radius","cost"],types:[10]},{id:1100,text:"水爆",viewStatus:["actualBomber","actualAntiAir","actualAccuracy","actualAsw","radius","avoidId"],types:[11]},{id:45,text:"水戦",viewStatus:["antiAir","actualAntiAir","actualScout","actualAccuracy","radius","airPower"],types:[45]},{id:41,text:"大型飛行艇",viewStatus:["actualScout","actualAccuracy","actualAsw","radius","cost"],types:[41]},{id:12,text:"電探",viewStatus:["actualFire","antiAir","actualAccuracy","actualScout","antiAirWeight","antiAirBonus"],types:[12,13]},{id:14,text:"対潜装備",viewStatus:["actualAsw","actualAccuracy","armor","avoid","actualScout"],types:[14,15,40]},{id:4,text:"副砲",viewStatus:["actualFire","antiAir","actualAccuracy","armor","antiAirWeight","antiAirBonus"],types:[4]},{id:21,text:"機銃",viewStatus:["actualFire","antiAir","actualAccuracy","antiAirWeight","antiAirBonus"],types:[21]},{id:24,text:"上陸用舟艇",viewStatus:["actualFire","antiAir","actualScout","avoid","armor","tp"],types:[24,30,46]},{id:47,text:"陸攻",viewStatus:["actualTorpedo","actualBomber","actualAntiAir","radius","avoidId","cost"],types:[47,53]},{id:48,text:"局戦",viewStatus:["antiBomber","actualAntiAir","radius","actualDefenseAntiAir","airPower","defenseAirPower"],types:[48]},{id:49,text:"陸偵",viewStatus:["actualAntiAir","actualScout","actualAccuracy","radius","armor","cost"],types:[49]},{id:17,text:"その他",viewStatus:["actualFire","antiAir","actualAccuracy","actualScout","asw","armor"],types:[17,18,19,23,25,26,27,28,29,31,33,34,35,36,37,39,42,43,44,50,51]}],m.CELL_TYPES=[{text:"通常",value:c.NORMAL},{text:"連合",value:c.GRAND},{text:"空襲",value:c.AIR_RAID},{text:"夜戦",value:c.NIGHT},{text:"重爆",value:c.HIGH_AIR_RAID},{text:"航空戦",value:c.AERIAL_COMBAT},{text:"超重爆",value:c.SUPER_HIGH_AIR_RAID}],m.DIFFICULTY_LEVELS=[{text:"甲",value:d.HARD},{text:"乙",value:d.MEDIUM},{text:"丙",value:d.EASY},{text:"丁",value:d.CASUAL}],m.PROF_LEVEL_BORDER=[0,10,25,40,55,70,85,100,120],m.MANUAL_AVOID=99,m.EXPAND_SLOT_INDEX=99,m.AVOID_TYPE=[{value:0,text:"なし",c1:1,c2:1,c3:1,c4:1},{value:1,text:"弱",c1:.6,c2:1,c3:1,c4:1},{value:2,text:"中",c1:.6,c2:.7,c3:1,c4:1},{value:3,text:"強",c1:.5,c2:.7,c3:1,c4:1},{value:4,text:"超",c1:.5,c2:.5,c3:1,c4:1},{value:m.MANUAL_AVOID,text:"任意",c1:1,c2:1,c3:1,c4:1}],m.ANTI_AIR_CUTIN=[{id:0,text:"不発",rateBonus:1,c1:1,c2:0,rate:100,remarks:""},{id:1,text:"1種",rateBonus:1.7,c1:3,c2:5,rate:65,remarks:"秋月型"},{id:2,text:"2種",rateBonus:1.7,c1:3,c2:4,rate:58,remarks:"秋月型"},{id:3,text:"3種",rateBonus:1.6,c1:2,c2:3,rate:50,remarks:"秋月型"},{id:4,text:"4種",rateBonus:1.5,c1:5,c2:2,rate:52,remarks:"戦艦"},{id:5,text:"5種",rateBonus:1.5,c1:2,c2:3,rate:55,remarks:"汎用"},{id:6,text:"6種",rateBonus:1.45,c1:4,c2:1,rate:40,remarks:"戦艦"},{id:7,text:"7種",rateBonus:1.35,c1:2,c2:2,rate:45,remarks:"汎用"},{id:8,text:"8種",rateBonus:1.4,c1:2,c2:3,rate:50,remarks:"汎用"},{id:9,text:"9種",rateBonus:1.3,c1:1,c2:2,rate:40,remarks:"汎用"},{id:10,text:"10種",rateBonus:1.65,c1:3,c2:6,rate:60,remarks:"摩耶改二"},{id:11,text:"11種",rateBonus:1.5,c1:2,c2:5,rate:55,remarks:"摩耶改二"},{id:12,text:"12種",rateBonus:1.25,c1:1,c2:3,rate:45,remarks:"汎用"},{id:14,text:"14種",rateBonus:1.45,c1:4,c2:1,rate:63,remarks:"五十鈴改二"},{id:15,text:"15種",rateBonus:1.3,c1:3,c2:1,rate:54,remarks:"五十鈴改二"},{id:16,text:"16種",rateBonus:1.4,c1:4,c2:1,rate:62,remarks:"霞改二乙 / 夕張改二"},{id:17,text:"17種",rateBonus:1.25,c1:2,c2:1,rate:57,remarks:"霞改二乙 / 夕張改二"},{id:18,text:"18種",rateBonus:1.2,c1:2,c2:1,rate:59,remarks:"皐月改二"},{id:19,text:"19種",rateBonus:1.45,c1:5,c2:1,rate:60,remarks:"鬼怒改二"},{id:20,text:"20種",rateBonus:1.25,c1:3,c2:1,rate:65,remarks:"鬼怒改二"},{id:21,text:"21種",rateBonus:1.45,c1:5,c2:1,rate:60,remarks:"由良改二"},{id:22,text:"22種",rateBonus:1.2,c1:2,c2:1,rate:65,remarks:"文月改二"},{id:23,text:"23種",rateBonus:1.05,c1:1,c2:1,rate:80,remarks:"UIT-25 / 伊504"},{id:24,text:"24種",rateBonus:1.25,c1:3,c2:1,rate:62,remarks:"天龍型改二"},{id:25,text:"25種",rateBonus:1.55,c1:7,c2:1,rate:60,remarks:"伊勢型"},{id:26,text:"26種",rateBonus:1.4,c1:6,c2:1,rate:60,remarks:"武蔵改二"},{id:28,text:"28種",rateBonus:1.4,c1:4,c2:1,rate:56,remarks:"伊勢型 / 武蔵"},{id:29,text:"29種",rateBonus:1.55,c1:5,c2:1,rate:60,remarks:"磯風乙改 / 浜風乙改"},{id:30,text:"30種",rateBonus:1.3,c1:3,c2:1,rate:50,remarks:"天龍改二"},{id:31,text:"31種",rateBonus:1.25,c1:2,c2:1,rate:50,remarks:"天龍改二"},{id:32,text:"32種",rateBonus:1.2,c1:3,c2:1,rate:60,remarks:"金剛型改二 / 英艦"},{id:33,text:"33種",rateBonus:1.35,c1:3,c2:1,rate:42,remarks:"Gotland"},{id:34,text:"34種",rateBonus:1.6,c1:7,c2:1,rate:60,remarks:"Fletcher級"},{id:35,text:"35種",rateBonus:1.55,c1:6,c2:1,rate:55,remarks:"Fletcher級"},{id:36,text:"36種",rateBonus:1.55,c1:6,c2:1,rate:50,remarks:"Fletcher級"},{id:37,text:"37種",rateBonus:1.45,c1:2,c2:3,rate:40,remarks:"Fletcher級"},{id:38,text:"38種",rateBonus:1.85,c1:6,c2:5,rate:60,remarks:"Atlanta"},{id:39,text:"39種",rateBonus:1.7,c1:6,c2:5,rate:60,remarks:"Atlanta"},{id:40,text:"40種",rateBonus:1.7,c1:6,c2:5,rate:60,remarks:"Atlanta"},{id:41,text:"41種",rateBonus:1.65,c1:5,c2:5,rate:60,remarks:"Atlanta"},{id:42,text:"42種",rateBonus:1.65,c1:10,c2:1,rate:65,remarks:"大和型改二"},{id:43,text:"43種",rateBonus:1.6,c1:8,c2:1,rate:60,remarks:"大和型改二"},{id:44,text:"44種",rateBonus:1.6,c1:6,c2:1,rate:55,remarks:"大和型改二"},{id:45,text:"45種",rateBonus:1.55,c1:5,c2:1,rate:50,remarks:"大和型改二"}],m.LEVEL_BORDERS=[{lv:175,req:1095e4},{lv:174,req:10266e3},{lv:173,req:9705e3},{lv:172,req:9248e3},{lv:171,req:8875e3},{lv:170,req:858e4},{lv:169,req:835e4},{lv:168,req:8172e3},{lv:167,req:8033e3},{lv:166,req:792e4},{lv:165,req:782e4},{lv:164,req:732e4},{lv:163,req:691e4},{lv:162,req:658e4},{lv:161,req:632e4},{lv:160,req:612e4},{lv:159,req:597e4},{lv:158,req:586e4},{lv:157,req:578e4},{lv:156,req:572e4},{lv:155,req:547e4},{lv:154,req:523e4},{lv:153,req:4999e3},{lv:152,req:4777e3},{lv:151,req:4564e3},{lv:150,req:436e4},{lv:149,req:4165e3},{lv:148,req:3978e3},{lv:147,req:3799e3},{lv:146,req:3628e3},{lv:145,req:3465e3},{lv:144,req:331e4},{lv:143,req:3162e3},{lv:142,req:3021e3},{lv:141,req:2887e3},{lv:140,req:276e4},{lv:139,req:264e4},{lv:138,req:2525e3},{lv:137,req:2415e3},{lv:136,req:231e4},{lv:135,req:221e4},{lv:134,req:2115e3},{lv:133,req:2025e3},{lv:132,req:194e4},{lv:131,req:186e4},{lv:130,req:1785e3},{lv:129,req:1714e3},{lv:128,req:1647e3},{lv:127,req:1584e3},{lv:126,req:1525e3},{lv:125,req:147e4},{lv:124,req:1419e3},{lv:123,req:1372e3},{lv:122,req:1329e3},{lv:121,req:129e4},{lv:120,req:1255e3},{lv:119,req:1223e3},{lv:118,req:1194e3},{lv:117,req:1168e3},{lv:116,req:1145e3},{lv:115,req:1125e3},{lv:114,req:1107e3},{lv:113,req:1091e3},{lv:112,req:1077e3},{lv:111,req:1065e3},{lv:110,req:1055e3},{lv:109,req:1046e3},{lv:108,req:1038e3},{lv:107,req:1031e3},{lv:106,req:1025e3},{lv:105,req:102e4},{lv:104,req:1016e3},{lv:103,req:1013e3},{lv:102,req:1011e3},{lv:101,req:101e4},{lv:100,req:1e6},{lv:99,req:1e6},{lv:98,req:851500},{lv:97,req:761500},{lv:96,req:701500},{lv:95,req:661500},{lv:94,req:631500},{lv:93,req:606500},{lv:92,req:584500},{lv:91,req:564500},{lv:90,req:545500},{lv:89,req:527e3},{lv:88,req:509e3},{lv:87,req:491500},{lv:86,req:474500},{lv:85,req:458e3},{lv:84,req:442e3},{lv:83,req:426500},{lv:82,req:411500},{lv:81,req:397e3},{lv:80,req:383e3},{lv:79,req:369400},{lv:78,req:356200},{lv:77,req:343400},{lv:76,req:331e3},{lv:75,req:319e3},{lv:74,req:307400},{lv:73,req:296200},{lv:72,req:285400},{lv:71,req:275e3},{lv:70,req:265e3},{lv:69,req:255300},{lv:68,req:245900},{lv:67,req:236800},{lv:66,req:228e3},{lv:65,req:219500},{lv:64,req:211300},{lv:63,req:203400},{lv:62,req:195800},{lv:61,req:188500},{lv:60,req:181500},{lv:59,req:174700},{lv:58,req:168100},{lv:57,req:161700},{lv:56,req:155500},{lv:55,req:149500},{lv:54,req:143700},{lv:53,req:138100},{lv:52,req:132700},{lv:51,req:127500},{lv:50,req:122500},{lv:49,req:117600},{lv:48,req:112800},{lv:47,req:108100},{lv:46,req:103500},{lv:45,req:99e3},{lv:44,req:94600},{lv:43,req:90300},{lv:42,req:86100},{lv:41,req:82e3},{lv:40,req:78e3},{lv:39,req:74100},{lv:38,req:70300},{lv:37,req:66600},{lv:36,req:63e3},{lv:35,req:59500},{lv:34,req:56100},{lv:33,req:52800},{lv:32,req:49600},{lv:31,req:46500},{lv:30,req:43500},{lv:29,req:40600},{lv:28,req:37800},{lv:27,req:35100},{lv:26,req:32500},{lv:25,req:3e4},{lv:24,req:27600},{lv:23,req:25300},{lv:22,req:23100},{lv:21,req:21e3},{lv:20,req:19e3},{lv:19,req:17100},{lv:18,req:15300},{lv:17,req:13600},{lv:16,req:12e3},{lv:15,req:10500},{lv:14,req:9100},{lv:13,req:7800},{lv:12,req:6600},{lv:11,req:5500},{lv:10,req:4500},{lv:9,req:3600},{lv:8,req:2800},{lv:7,req:2100},{lv:6,req:1500},{lv:5,req:1e3},{lv:4,req:600},{lv:3,req:300},{lv:2,req:100},{lv:1,req:0}]},5802:function(t,e,a){"use strict";a.d(e,"a",(function(){return I}));var i=a("d4ec"),s=a("bee2"),r=(a("d3b7"),a("159b"),a("b64b"),a("d9e2"),a("7db0"),a("caad"),a("2532"),a("b0c0"),a("ac1f"),a("1276"),a("e9c4"),a("4de4"),a("99af"),a("d81d"),a("5319"),a("25f0"),a("fb6a"),a("bce2")),n=a("522d"),o=a("848d"),l=a("dc58"),c=a("0f16"),d=a("7970"),u=a("d606"),h=a("8292"),m=a("c3af"),v=a("9f87"),f=a("01fd"),p=a("331b"),g=a("fc09"),b=a("07bc"),A=(a("a15b"),function(){function t(){Object(i["a"])(this,t)}return Object(s["a"])(t,null,[{key:"decompressFromEncodedURIComponent",value:function(e){if(null===e)return"";if(""===e)return"";for(var a={},i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_$",s=0;s<i.length;s+=1)a[i.charAt(s)]=s;return e=e.replace(/ /g,"+"),t.decompress(e.length,32,(function(t){return a[e.charAt(t)]}))}},{key:"decompress",value:function(t,e,a){var i,s,r,n,o,l,c,d=String.fromCharCode,u=[],h=4,m=4,v=3,f="",p=[],g={val:a(0),position:e,index:1};for(i=0;i<3;i+=1)u[i]=i;r=0,o=Math.pow(2,2),l=1;while(l!=o)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=e,g.val=a(g.index++)),r|=(n>0?1:0)*l,l<<=1;switch(r){case 0:r=0,o=Math.pow(2,8),l=1;while(l!=o)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=e,g.val=a(g.index++)),r|=(n>0?1:0)*l,l<<=1;c=d(r);break;case 1:r=0,o=Math.pow(2,16),l=1;while(l!=o)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=e,g.val=a(g.index++)),r|=(n>0?1:0)*l,l<<=1;c=d(r);break;case 2:return"";default:}u[3]=c,s=c,p.push(c);while(1){if(g.index>t)return"";r=0,o=Math.pow(2,v),l=1;while(l!=o)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=e,g.val=a(g.index++)),r|=(n>0?1:0)*l,l<<=1;switch(c=r){case 0:r=0,o=Math.pow(2,8),l=1;while(l!=o)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=e,g.val=a(g.index++)),r|=(n>0?1:0)*l,l<<=1;u[m++]=d(r),c=m-1,h--;break;case 1:r=0,o=Math.pow(2,16),l=1;while(l!=o)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=e,g.val=a(g.index++)),r|=(n>0?1:0)*l,l<<=1;u[m++]=d(r),c=m-1,h--;break;case 2:return p.join("");default:}if(0==h&&(h=Math.pow(2,v),v++),u[c])f=u[c];else{if(c!==m)return"";f=s+s.charAt(0)}p.push(f),u[m++]=s+f.charAt(0),h--,s=f,0==h&&(h=Math.pow(2,v),v++)}}}]),t}()),y=Object(s["a"])((function t(e){Object(i["a"])(this,t),this.id=0,this.level=0,this.remodel=0,this.slot=0,this.index=0,this.id=e[0]?+e[0]:0,this.level=e[1]?+e[1]:0,this.remodel=e[2]?+e[2]:0,this.slot=e[3]?+e[3]:0,this.index=e[4]?+e[4]:0,this.level<n["i"].PROF_LEVEL_BORDER.length&&(this.level=n["i"].PROF_LEVEL_BORDER[this.level])})),k=Object(s["a"])((function t(e){Object(i["a"])(this,t),this.albumId=0,this.items=[],this.isActive=!1,this.albumId=e[0]?+e[0]:0;for(var a=0;a<e[1].length;a+=1)this.items.push(new y(e[1][a]));this.index=e[2]?+e[2]:0,this.isActive=!e[3],this.level=e[4]?+e[4]:99,this.isUnion=1===+e[5],this.isYugeki=2===+e[5],this.luck=e[6]?+e[6]:void 0})),w=a("b615"),S=a("4715"),D=a("f463"),I=function(){function t(e,a){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object(i["a"])(this,t),this.itemMasters=e,this.shipMasters=a,this.enemyMasters=s}return Object(s["a"])(t,[{key:"loadDeckBuilder",value:function(t){var e=this;try{var a=JSON.parse(t);if(!(a.a1||a.a2||a.a3||a.f1||a.f2||a.f3||a.f4))return;var i=[];a.a1&&i.push(this.convertDeckToAirbase(a.a1)),a.a2&&i.push(this.convertDeckToAirbase(a.a2)),a.a3&&i.push(this.convertDeckToAirbase(a.a3));var s=[];if(a.f1){var n=a.f1,c=[];Object.keys(n).forEach((function(t){return c.push(e.convertDeckToShip(n[t]))}));for(var d=6-c.length,u=0;u<d;u+=1)c.push(new m["a"]);s.push(new o["a"]({ships:c}))}else s.push(new o["a"]);if(a.f2){var v=a.f2,f=[];Object.keys(v).forEach((function(t){return f.push(e.convertDeckToShip(v[t]))})),s.push(new o["a"]({ships:f}))}else s.push(new o["a"]);if(a.f3){var p=[],g=a.f3;Object.keys(g).forEach((function(t){return p.push(e.convertDeckToShip(g[t]))})),s.push(new o["a"]({ships:p}))}else s.push(new o["a"]);if(a.f4){var b=a.f4,A=[];Object.keys(b).forEach((function(t){return A.push(e.convertDeckToShip(b[t]))})),s.push(new o["a"]({ships:A}))}else s.push(new o["a"]);if(!i.length&&!s.length)return;var y=new r["a"];return y.airbaseInfo=new h["a"]({airbases:i}),y.fleetInfo=new l["a"]({fleets:s,admiralLevel:a.hqlv?a.hqlv:120}),y}catch(k){throw console.error(k),new Error("デッキビルダー形式ではありませんでした。")}}},{key:"convertDeckToAirbase",value:function(t){for(var e=this,a=[],i=function(i){var s="i".concat(i),r=t.items[s]||{id:0,rf:0,mas:0},o=e.itemMasters.find((function(t){return t.id===r.id}))||new d["a"],l=18;n["i"].RECONNAISSANCES.includes(null===o||void 0===o?void 0:o.apiTypeId)?l=4:n["i"].AB_ATTACKERS_LARGE.includes(null===o||void 0===o?void 0:o.apiTypeId)&&(l=9),a.push(new c["a"]({master:o,remodel:r.rf,level:n["i"].PROF_LEVEL_BORDER[r.mas],slot:l}))},s=1;s<=4;s+=1)i(s);return new u["a"]({mode:t.mode,items:a})}},{key:"convertDeckToShip",value:function(t){for(var e=this,a=this.shipMasters.find((function(e){return e.id===+t.id}))||new v["a"],i=t.lv||99,s=t.luck&&t.luck>0?t.luck:a.luck,r=i>99?a.hp2:a.hp,o=t.hp&&t.hp>0?t.hp:r,l=t.asw&&t.asw>0?t.asw:m["a"].getStatusFromLevel(i,a.maxAsw,a.minAsw),d=[],u=new c["a"],h=function(i){var s="i".concat(i+1),r=t.items[s]||{id:0,rf:0,mas:0},o=e.itemMasters.find((function(t){return t.id===r.id})),l=n["i"].PROF_LEVEL_BORDER[r.mas];o&&41===o.apiTypeId&&90===a.type2?d.push(new c["a"]({master:o,remodel:r.rf,level:l,slot:1})):d.push(new c["a"]({master:o,remodel:r.rf,level:l,slot:a.slots[i]}))},f=0;f<a.slotCount;f+=1)h(f);if(Object.keys(t.items).includes("ix")||Object.keys(t.items).includes("i".concat(a.slotCount+1))){var p=t.items.ix||t.items["i".concat(a.slotCount+1)]||{id:0,rf:0,mas:0},g=this.itemMasters.find((function(t){return t.id===p.id})),b=n["i"].PROF_LEVEL_BORDER[p.mas];u=new c["a"]({master:g,remodel:p.rf,level:b})}return new m["a"]({master:a,level:i,luck:s,items:d,exItem:u,asw:l,hp:o})}},{key:"convertOldSimulatorToSaveData",value:function(t,e){var a=this;if(t.length){var i=new b["a"];i.isDirectory=!0,i.isUnsaved=!1,i.isOpen=!0,i.highlight=!0;for(var s=e&&e.presetFolders?e.presetFolders:[],r=[],n=0;n<s.length;n+=1)r.push({id:s[n].id,name:s[n].name,data:[]});for(var o=0;o<t.length;o+=1){var l=new b["a"];l.name=t[o].length>=2?t[o][1]:"旧データ",l.remarks=t[o].length>=4?t[o][3]:"",l.isUnsaved=!1;var c=t[o].length>=5?Date.parse(t[o][4]):"";c&&(l.editedDate=c);var d=t[o].length>=3?t[o][2]:"";if(d){var u=function(){var e=a.restoreOldSaveData(d);if(!e)return"continue";l.tempData=[e],l.tempIndex=0,l.saveManagerData();var s=t[o].length>=6?+t[o][5]:0,n=r.find((function(t){return t.id===s}));n?n.data.push(l):i.childItems.push(l)}();if("continue"===u)continue}}for(var h=0;h<r.length;h+=1)if(r[h].data.length){var m=new b["a"];m.name=r[h].name,m.isDirectory=!0,m.isUnsaved=!1,m.childItems=r[h].data,i.childItems.push(m)}return i}}},{key:"restoreOldSaveData",value:function(t){var e=A.decompressFromEncodedURIComponent(t);if(e){var a=JSON.parse(e),i=new r["a"],s=!!a[4],n=a[6]?+a[6]:void 0;return i.airbaseInfo=this.restoreAirbase(a[0],s),i.fleetInfo=this.restoreFleet(a[1],n),i.battleInfo=this.restoreEnemies(a[2],a[5]),i}}},{key:"restoreAirbase",value:function(t){for(var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t[0],s=t[1],r=t[2],n=new h["a"],o=function(t){var a=new y(i[t]),s=a.index,r=n.airbases[Math.floor(s/4)];if(r){var o=e.itemMasters.find((function(t){return t.id===a.id})),l=new c["a"]({master:o,level:a.level,remodel:a.remodel,slot:a.slot});r.items[s%4]=l}},l=0;l<i.length;l+=1)o(l);for(var d=[],m=0;m<n.airbases.length;m+=1){var v=s[m],f=0;if(2===v?f=1:0===v&&(f=2),r){var p=r.length?[r[2*m],r[2*m+1]]:[0,0];d.push(new u["a"]({airbase:n.airbases[m],battleTarget:p,mode:f}))}else d.push(new u["a"]({airbase:n.airbases[m],mode:f}))}return new h["a"]({airbases:d,isDefense:a})}},{key:"restoreFleet",value:function(t){for(var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:120,i=new l["a"],s=[],r=[],n=!1,d=function(a){var i=new k(t[a]),o=e.shipMasters.find((function(t){return t.albumId===i.albumId}));if(!o)return"continue";for(var l=new m["a"]({master:o,level:i.level,isActive:i.isActive,luck:i.luck}),d=l.items,u=new c["a"],h=i.items,v=function(t){var a=h[t],i=e.itemMasters.find((function(t){return t.id===a.id})),s=new c["a"]({master:i,level:a.level,remodel:a.remodel,slot:a.slot});a.index>=0&&a.index<d.length?d[a.index]=s:-1===a.index&&(u=s)},f=0;f<h.length;f+=1)v(f);i.index<6||i.isYugeki&&i.index<7?s.push(new m["a"]({ship:l,items:d,exItem:u})):r.push(new m["a"]({ship:l,items:d,exItem:u})),i.isUnion&&(n=!0)},u=0;u<t.length;u+=1)d(u);var h=new o["a"]({ships:s}),v=new o["a"]({ships:r});return new l["a"]({info:i,fleets:[h,v],isUnion:n,admiralLevel:a})}},{key:"restoreEnemies",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[],i=0;i<t.length;i+=1){for(var s=[],r=t[i],o=r[1],l=0;l<o.length;l+=1){var c=S["a"].createEnemyFromMasterId(1500+o[l],l>5,this.enemyMasters,this.itemMasters);c.data.id&&s.push(c)}var d=r[2]?r[2].split("_"):"",u=d.length>1?d[1]:"-",h=r[3]?+r[3]:n["d"].NORMAL,m=r[4]?+r[4]:n["f"].LINE_AHEAD,v=r[5]?+r[5]:0;s.length&&a.push(new D["a"]({enemies:s,formation:m,cellType:h,range:v,nodeName:u}))}if(e.length&&e[0].some((function(t){return 0!==t}))){for(var f=[],p=e[0],g=0;g<p.length;g+=1){var b=S["a"].createEnemyFromMasterId(1500+p[g],g>5,this.enemyMasters,this.itemMasters);b.data.id&&f.push(b)}if(f.length){var A=e[1]?+e[1]:n["d"].HIGH_AIR_RAID,y=e[2]?+e[2]:n["f"].DIAMOND,k=new D["a"]({enemies:f,cellType:A,formation:y});return new w["a"]({fleets:a,airRaidFleet:k,battleCount:a.length})}}return new w["a"]({fleets:a,battleCount:a.length})}}],[{key:"readItemStockJson",value:function(t){if(!t)return[];var e=JSON.parse(t);if(!e.length)return[];for(var a=[],i=0;i<e.length;i+=1){var s=e[i];"api_slotitem_id"in s&&"api_level"in s?function(){var t=s.api_slotitem_id,e=Math.min(s.api_level,10),i=a.find((function(e){return e.id===t}));i?i.num[e]+=1:a.push(new f["a"](t,e))}():"id"in s&&"lv"in s&&function(){var t=s.id,e=Math.min(s.lv,10),i=a.find((function(e){return e.id===t}));i?i.num[e]+=1:a.push(new f["a"](t,e))}()}return a}},{key:"readShipStockJson",value:function(t){if(!t)return[];var e=JSON.parse(t);if(!e.length)return[];for(var a=[],i=1,s=0;s<e.length;s+=1){var r=e[s],n=new p["a"];if("api_ship_id"in r&&"api_lv"in r)n.id=+r.api_ship_id,n.level=+r.api_lv,n.exp=+r.api_exp[0];else{if(!("id"in r&&"lv"in r&&"exp"in r))continue;n.id=+r.id,n.level=+r.lv,n.exp=+r.exp[0]}n.id&&(n.uniqueId=i,i+=1,"api_slot_ex"in r?n.releaseExpand=void 0!==r.api_slot_ex&&0!==r.api_slot_ex:"ex"in r&&(n.releaseExpand=void 0!==r.ex&&0!==r.ex),"api_kyouka"in r&&r.api_kyouka.length>=7?(n.improvement.fire=+r.api_kyouka[0],n.improvement.torpedo=+r.api_kyouka[1],n.improvement.antiAir=+r.api_kyouka[2],n.improvement.armor=+r.api_kyouka[3],n.improvement.luck=+r.api_kyouka[4],n.improvement.hp=+r.api_kyouka[5],n.improvement.asw=+r.api_kyouka[6]):"st"in r&&r.st.length>=7&&(n.improvement.fire=+r.st[0],n.improvement.torpedo=+r.st[1],n.improvement.antiAir=+r.st[2],n.improvement.armor=+r.st[3],n.improvement.luck=+r.st[4],n.improvement.hp=+r.st[5],n.improvement.asw=+r.st[6]),"api_sally_area"in r?n.area=r.api_sally_area:"area"in r&&(n.area=r.area),n.level||(n.level=1),n.exp||(n.exp=0),n.improvement.fire||(n.improvement.fire=0),n.improvement.torpedo||(n.improvement.torpedo=0),n.improvement.antiAir||(n.improvement.antiAir=0),n.improvement.armor||(n.improvement.armor=0),n.improvement.luck||(n.improvement.luck=0),n.improvement.hp||(n.improvement.hp=0),n.improvement.asw||(n.improvement.asw=0),n.area||(n.area=0),a.push(n))}return a}},{key:"createDeckBuilderToString",value:function(e){return JSON.stringify(t.createDeckBuilder(e))}},{key:"createDeckBuilder",value:function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i={version:4,hqlv:e.fleetInfo.admiralLevel,f1:{},f2:{},f3:{},f4:{}};try{for(var s=e.fleetInfo.fleets,r=0;r<s.length;r+=1){var n=s[r].ships.filter((function(t){return t.isActive&&!t.isEmpty}));0===r&&(i.f1={},t.setDeckBuilderFleet(i.f1,n,a)),1===r&&(i.f2={},t.setDeckBuilderFleet(i.f2,n,a)),2===r&&(i.f3={},t.setDeckBuilderFleet(i.f3,n,a)),3===r&&(i.f4={},t.setDeckBuilderFleet(i.f4,n,a))}for(var o=e.airbaseInfo.airbases,l=0;l<o.length;l+=1){var c=o[l];if(0===l){var d=t.getDeckBuilderItems(c.items);i.a1={mode:c.mode,items:d}}if(1===l){var u=t.getDeckBuilderItems(c.items);i.a2={mode:c.mode,items:u}}if(2===l){var h=t.getDeckBuilderItems(c.items);i.a3={mode:c.mode,items:h}}}return i}catch(m){return console.error(m),i}}},{key:"setDeckBuilderFleet",value:function(e,a){for(var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=0;s<a.length;s+=1){var r=a[s],n=t.getDeckBuilderItems(r.items);if(r.exItem.data.id){var o=g["a"].getProfLevel(r.exItem.level);n.ix={id:r.exItem.data.id,mas:o,rf:r.exItem.remodel}}for(var l=0,c=0,d=0,u=0,h=0,v=0,f=r.items.concat(r.exItem),p=0;p<f.length;p+=1){var b=f[p];l+=b.data.fire,c+=b.data.torpedo,d+=b.data.antiAir,u+=b.data.armor,h+=b.data.avoid,v+=b.data.scout}var A={id:r.data.id,lv:r.level,hp:r.hp,luck:r.luck,items:n};if(i){var y=m["a"].getStatusFromLevel(r.level,r.data.maxScout,r.data.minScout),k=m["a"].getStatusFromLevel(r.level,r.data.maxAvoid,r.data.minAvoid);A.fp=r.data.fire+l,A.tp=r.data.torpedo+c,A.aa=r.antiAir+d,A.ar=r.data.armor+u,A.asw=r.actualAsw,A.los=y+r.bonusScout+v,A.ev=k+h}e["s".concat(s+1)]=A}}},{key:"getDeckBuilderItems",value:function(t){for(var e={},a=0;a<t.length;a+=1){var i=t[a];i.data.id&&(e["i".concat(a+1)]={id:i.data.id,mas:g["a"].getProfLevel(i.level),rf:i.remodel})}return e}},{key:"createDeckBuilderForJervis",value:function(t,e){for(var a={version:1,name:t,hqLevel:e.fleetInfo.admiralLevel,side:"Player",fleetType:e.fleetInfo.isUnion?"CarrierTaskForce":"Single",fleets:[{ships:[]},{ships:[]},{ships:[]},{ships:[]}],landBase:[]},i=e.fleetInfo.fleets,s=0;s<i.length;s+=1)for(var r=i[s].ships.filter((function(t){return t.isActive&&!t.isEmpty})),n=0;n<r.length;n+=1){for(var o=r[n],l=o.items,c=[],d=0;d<l.length;d+=1){var u=l[d];c.push({masterId:u.data.id,improvement:u.remodel,proficiency:u.level})}c.push({masterId:o.exItem.data.id,improvement:o.exItem.remodel,proficiency:o.exItem.level});var h={masterId:o.data.id,level:o.level,slots:l.map((function(t){return t.fullSlot})),increased:{luck:o.luck-o.data.luck},equipments:c};a.fleets[s].ships.push(h)}for(var m=e.airbaseInfo.airbases,v=0;v<m.length;v+=1){for(var f=m[v].items.filter((function(t){return t.data.id>0})),p=[],g=0;g<f.length;g+=1){var b=f[g];p.push({masterId:b.data.id,improvement:b.remodel,proficiency:b.level})}var A={slots:f.map((function(t){return t.fullSlot})),equipments:p};a.landBase.push(A)}return JSON.stringify(a)}},{key:"formatDate",value:function(t,e){return e=e.replace(/yyyy/g,t.getFullYear().toString()),e=e.replace(/yy/g,(t.getFullYear()%100).toString()),e=e.replace(/MM/g,"0".concat(t.getMonth()+1).slice(-2)),e=e.replace(/dd/g,"0".concat(t.getDate()).slice(-2)),e=e.replace(/HH/g,"0".concat(t.getHours()).slice(-2)),e=e.replace(/mm/g,"0".concat(t.getMinutes()).slice(-2)),e=e.replace(/ss/g,"0".concat(t.getSeconds()).slice(-2)),e=e.replace(/SSS/g,"00".concat(t.getMilliseconds()).slice(-3)),e}},{key:"convertAttributeString",value:function(t){switch(t){case"fire":return"火力";case"torpedo":return"雷装";case"bomber":return"爆装";case"antiAir":return"対空";case"accuracy":return"命中";case"scout":return"索敵";case"avoid":return"回避";case"antiBomber":return"対爆";case"interception":return"迎撃";case"armor":return"装甲";case"asw":return"対潜";case"range":return"射程";case"radius":return"半径";case"cost":return"配置コスト";case"avoidId":return"射撃回避";default:return t}}},{key:"encode64",value:function(t){for(var e=["0000","0001","0010","0011","0100","0101","0110","0111","1000","1001","1010","1011","1100","1101"],a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-",i="",s="",r=0;r<t.length;r+=1){var n=t.charAt(r),o=void 0;if(o=","===n?10:"|"===n?11:"."===n?12:":"===n?13:parseInt(n),i+=e[o],i.length>=6){var l=i.slice(0,6);s+=a.charAt(parseInt(l,2)),i=i.slice(6)}}if(i.length>0){while(i.length<6)i+="1";s+=a.charAt(parseInt(i,2))}return s}},{key:"decode64",value:function(t){for(var e=["0000","0001","0010","0011","0100","0101","0110","0111","1000","1001","1010","1011","1100","1101"],a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-",i="",s="",r=0;r<t.length;r+=1){var n=a.indexOf(t[r]).toString(2);while(n.length<6)n="0".concat(n);s+=n;while(s.length>=4){var o=s.slice(0,4),l=e.indexOf(o);-1===l||(i+=10===l?",":11===l?"|":12===l?".":13===l?":":l),s=s.slice(4)}}return i}},{key:"restoreShipStock",value:function(t,e){for(var a=[],i=1,s=function(s){var r=t[s].id,n=t[s].details,o=e.find((function(t){return t.albumId===r}));if(!o)return"continue";for(var l=0;l<n.length;l+=1){var c=n[l],d=new p["a"];if(d.uniqueId=i,d.id=o.id,d.area=c.area&&c.area>0?c.area:0,d.exp=c.exp?c.exp:0,d.level=c.lv?c.lv:1,d.releaseExpand=!!c.ex,c.st&&c.st.length){var u=c.st;d.improvement.fire=u[0]?u[0]:0,d.improvement.torpedo=u[1]?u[1]:0,d.improvement.antiAir=u[2]?u[2]:0,d.improvement.armor=u[3]?u[3]:0,d.improvement.luck=u[4]?u[4]:0,d.improvement.hp=u[5]?u[5]:0,d.improvement.asw=u[6]?u[6]:0}a.push(d),i+=1}},r=0;r<t.length;r+=1)s(r);return a}},{key:"restoreItemStock",value:function(t){for(var e=[],a=0;a<t.length;a+=1){var i=t[a];if(i.id&&i.num&&i.num.length&&11===i.num.length){var s=new f["a"](i.id);s.num=i.num.concat(),e.push(s)}}return e}}]),t}()},"5b84":function(t,e,a){},"5dfc":function(t,e,a){"use strict";a("61fb")},"61fb":function(t,e,a){},"70b6":function(t,e,a){},7970:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var i=a("bee2"),s=a("d4ec"),r=(a("b0c0"),a("caad"),a("2532"),a("522d")),n=Object(i["a"])((function t(e){Object(s["a"])(this,t),e?(this.id=e.id?e.id:0,this.apiTypeId=e.type?+e.type:0,this.iconTypeId=e.itype?+e.itype:0,this.name=e.name?e.name:"",this.abbr=e.abbr?e.abbr:"",this.fire=e.fire?+e.fire:0,this.torpedo=e.torpedo?+e.torpedo:0,this.bomber=e.bomber?+e.bomber:0,this.antiAir=e.antiAir?+e.antiAir:0,this.armor=e.armor?+e.armor:0,this.asw=e.asw?+e.asw:0,this.antiBomber=e.antiBomber?+e.antiBomber:0,this.accuracy=e.accuracy?+e.accuracy:0,this.interception=e.interception?+e.interception:0,this.avoid=e.avoid2?+e.avoid2:0,this.scout=e.scout?+e.scout:0,this.range=e.range?+e.range:0,this.radius=e.radius?+e.radius:0,this.cost=e.cost?+e.cost:0,this.canRemodel=!!e.canRemodel,this.avoidId=e.avoid?+e.avoid:0,this.grow=e.grow?+e.grow:0):(this.id=0,this.apiTypeId=0,this.iconTypeId=0,this.name="",this.abbr="",this.fire=0,this.torpedo=0,this.bomber=0,this.antiAir=0,this.armor=0,this.asw=0,this.antiBomber=0,this.accuracy=0,this.interception=0,this.avoid=0,this.scout=0,this.range=0,this.radius=0,this.cost=0,this.canRemodel=!1,this.avoidId=0,this.grow=0),this.isSpecial=21===this.apiTypeId&&this.antiAir>8||16===this.iconTypeId&&this.antiAir>7,this.isPlane=r["i"].PLANE_TYPES.includes(this.apiTypeId),this.isFighter=r["i"].FIGHTERS.includes(this.apiTypeId),this.isAttacker=r["i"].ATTACKERS.includes(this.apiTypeId),this.isRecon=r["i"].RECONNAISSANCES.includes(this.apiTypeId),this.isABAttacker=r["i"].AB_ATTACKERS.includes(this.apiTypeId),this.isBakusen=r["i"].BAKUSEN.includes(this.id),this.isRocket=r["i"].ROCKET.includes(this.id),this.isShinzan=r["i"].AB_ATTACKERS_LARGE.includes(this.apiTypeId),this.isJet=57===this.apiTypeId,this.enabledAttackLandBase=r["i"].ENABLED_LAND_BASE_ATTACK.includes(this.id),this.isSpecial||(this.isSpecial=this.isRocket||this.enabledAttackLandBase)}))},"7d04":function(t,e,a){"use strict";a("0341")},8292:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var i=a("bee2"),s=a("d4ec"),r=(a("99af"),a("b947")),n=a("522d"),o=a("d606"),l=Object(i["a"])((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(s["a"])(this,t),this.calculated=!1,this.ignoreHistory=!1,e.info?(this.airbases=void 0!==e.airbases?e.airbases:e.info.airbases.concat(),this.isDefense=void 0!==e.isDefense?e.isDefense:e.info.isDefense,this.difficultyLevel=void 0!==e.difficultyLevel?e.difficultyLevel:e.info.difficultyLevel):(this.isDefense=void 0!==e.isDefense&&e.isDefense,this.airbases=void 0!==e.airbases?e.airbases:[],this.difficultyLevel=void 0!==e.difficultyLevel?e.difficultyLevel:0),this.airbases.length<3)for(var a=3-this.airbases.length,i=0;i<a;i+=1)this.airbases.push(new o["a"]);this.defenseAirPower=0,this.highDefenseAirPower=0,this.superHighDefenseAirPower=0,this.superHighAirRaidRocketCoefficientA=0,this.superHighAirRaidRocketCoefficientB=0;for(var l=0,c=0,d=0,u=0,h=0;h<this.airbases.length;h+=1){var m=this.airbases[h];m.mode===n["a"].DEFENSE&&(this.defenseAirPower+=m.defenseAirPower,l+=m.rocketCount,c+=m.superHighAirRaidTypeAItemCount,d+=m.superHighAirRaidTypeBItemCount,u+=m.superHighAirRaidTypeCItemCount)}this.highDefenseCoefficient=1;var v=this.difficultyLevel===n["e"].HARD||this.difficultyLevel===n["e"].MEDIUM;switch(l>=3?this.highDefenseCoefficient=1.2:2===l?this.highDefenseCoefficient=1.1:1===l&&v?this.highDefenseCoefficient=.8:0===l&&v&&(this.highDefenseCoefficient=.5),this.highDefenseAirPower=Math.floor(this.defenseAirPower*this.highDefenseCoefficient),this.superHighAirRaidCorrA=.07*c,d){case 0:this.superHighAirRaidCorrB=0;break;case 1:this.superHighAirRaidCorrB=.11;break;case 2:this.superHighAirRaidCorrB=.14;break;default:this.superHighAirRaidCorrB=.14;break}switch(u){case 0:this.superHighAirRaidCorrC=0;break;case 1:this.superHighAirRaidCorrC=.177;break;case 2:this.superHighAirRaidCorrC=.287;break;default:this.superHighAirRaidCorrC=.397;break}switch(l){case 0:this.superHighAirRaidRocketCoefficientA=.5,this.superHighAirRaidRocketCoefficientB=.3;break;case 1:this.superHighAirRaidRocketCoefficientA=.95,this.superHighAirRaidRocketCoefficientB=.55;break;case 2:this.superHighAirRaidRocketCoefficientA=1,this.superHighAirRaidRocketCoefficientB=.85;break;case 3:this.superHighAirRaidRocketCoefficientA=1,this.superHighAirRaidRocketCoefficientB=1;break;case 4:this.superHighAirRaidRocketCoefficientA=1,this.superHighAirRaidRocketCoefficientB=1.07;break;default:this.superHighAirRaidRocketCoefficientA=1,this.superHighAirRaidRocketCoefficientB=1.11;break}this.superHighAirRaidCoefficient=(this.superHighAirRaidCorrA+this.superHighAirRaidCorrB+this.superHighAirRaidCorrC)*this.superHighAirRaidRocketCoefficientA+this.superHighAirRaidRocketCoefficientB,this.superHighDefenseAirPower=Math.floor(this.defenseAirPower*this.superHighAirRaidCoefficient),this.fullSuperHighDefenseAirPower=this.superHighDefenseAirPower,this.superHighAirRaidResults=[new r["a"],new r["a"],new r["a"]]}))},"848d":function(t,e,a){"use strict";a.d(e,"a",(function(){return u}));var i=a("d4ec"),s=a("bee2"),r=(a("99af"),a("7db0"),a("d3b7"),a("4de4"),a("4e827"),a("d81d"),a("c740"),a("a15b"),a("c3af")),n=a("522d"),o=a("0f16"),l=a("b947"),c=a("ba7d"),d=a("aec1"),u=function(){function t(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(i["a"])(this,t),this.results=[new l["a"]],this.mainResult=new l["a"],this.escortAirPower=0,a.fleet)this.ships=a.ships?a.ships.concat():a.fleet.ships.concat(),this.formation=void 0!==a.formation?a.formation:a.fleet.formation,this.isUnion=void 0!==a.isUnion?a.isUnion:a.fleet.isUnion,this.formation=void 0!==a.formation?a.formation:a.fleet.formation;else if(this.ships=a.ships?a.ships.concat():[],this.formation=void 0!==a.formation?a.formation:1,this.isUnion=void 0!==a.isUnion&&a.isUnion,this.formation=void 0!==a.formation?a.formation:n["f"].LINE_AHEAD,0===this.ships.length)for(var s=0;s<6;s+=1)this.ships.push(new r["a"]);var o=n["i"].FORMATIONS.find((function(t){return t.value===e.formation}));this.fleetAntiAir=this.getFleetAntiAir(o),this.tp=0,this.fullAirPower=0,this.supportAirPower=0,this.fleetRosCorr=0,this.hasJet=!1,this.hasPlane=!1,this.allPlanes=[];for(var u=[],h=[],m=this.ships.filter((function(t){return t.isActive&&!t.isEmpty})),v=0,f=0,p=1,g=0;g<m.length;g+=1){var b=m[g];if(b.isActive&&!b.isEmpty){this.fullAirPower+=b.fullAirPower,this.supportAirPower+=b.supportAirPower,this.tp+=b.tp,v+=b.scout,f+=b.sumSPRos,(!this.isUnion||this.isUnion&&b.isEscort)&&(p-=p*b.nightContactRate);for(var A=0;A<b.antiAirCutIn.length;A+=1){var y=b.antiAirCutIn[A];y.id>=34&&36!==y.id?h.push(y):u.push(y)}var k=b.items.filter((function(t){return t.data.isPlane&&t.fullSlot>0}));if(k.length){if(this.isUnion&&b.isEscort)for(var w=0;w<k.length;w+=1)k[w].isEscortItem=!0;else for(var S=0;S<k.length;S+=1)k[S].isEscortItem=!1;this.allPlanes=this.allPlanes.concat(k),!this.hasPlane&&this.allPlanes.find((function(t){return!t.data.isRecon}))&&(this.hasPlane=!0)}!this.hasJet&&b.hasJet&&(this.hasJet=!0)}}this.nightContactRate=1-p;var D=v+f;this.fleetRosCorr=Math.floor(Math.sqrt(D)+.1*D),this.airPower=this.fullAirPower,h.sort((function(t,e){return t.id>41&&e.id<=41?-1:t.id<=41&&e.id>41?1:t.id<=41&&e.id<=41?t.rateCorr!==e.rateCorr?e.rateCorr-t.rateCorr:e.fixCorrA-t.fixCorrA:t.id-e.id})),u.sort((function(t,e){return e.id-t.id})),this.allAntiAirCutIn=h.concat(u),this.shootDownList=[],this.shootDownListAirRaid=[];for(var I=1,C=0,x=0;x<this.allAntiAirCutIn.length;x+=1){var _=this.allAntiAirCutIn[x],R=I*_.rate;I-=R,C+=R,this.shootDownList.push(new d["a"](m,!1,this.isUnion,_,C,o)),this.shootDownListAirRaid.push(new d["a"](m,!1,this.isUnion,_,C,o,!0))}var T=new d["a"](m,!1,this.isUnion,new c["a"],1,o);this.shootDownList.push(T),this.shootDownListAirRaid.push(new d["a"](m,!1,this.isUnion,new c["a"],1,o,!0));for(var P=0;P<m.length;P+=1)m[P].fixDown=T.shootDownStatusList[0].fixDownList[P],m[P].rateDown=T.shootDownStatusList[0].rateDownList[P];this.supportTypes=this.getSupportTypes()}return Object(s["a"])(t,[{key:"getFleetAntiAir",value:function(t,e){for(var a=0,i=this.ships.filter((function(t){return t.isActive&&!t.isEmpty})),s=i.length,r=0;r<s;r+=1)a+=i[r].antiAirBonus;a=Math.floor(a);var n=Math.floor(a*(t?t.correction:1))/1.3;return e&&1!==e.c2?2*Math.floor(n*e.c2):2*n}},{key:"getUnionScoutScore",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:120,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,i=this.ships.filter((function(t){return!t.isEscort})),s=t.getScoutScore(i,e,a),r=this.ships.filter((function(t){return t.isEscort})),n=t.getScoutScore(r,e,a),o=[],l=0;l<a;l+=1)o.push(s[l]+n[l]);return o}},{key:"getContactRates",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=t?this.allPlanes:this.allPlanes.filter((function(t){return!t.isEscortItem}));return o["a"].getContactRates(e)}},{key:"getSupportTypes",value:function(){if(this.ships.filter((function(t){return t.data.type===n["g"].DD})).length<2)return[n["h"].NOT_FOUND_DD];var t=this.ships.map((function(t){return t.data.type})),e=t.filter((function(t){return t===n["g"].CV||t===n["g"].CVB||t===n["g"].CVL})).length,a=t.filter((function(t){return t===n["g"].AV||t===n["g"].LHA})).length,i=t.filter((function(t){return t===n["g"].BBV||t===n["g"].CAV||t===n["g"].AO||t===n["g"].AO_2})).length,s=t.some((function(t){return t===n["g"].BB||t===n["g"].FBB||t===n["g"].BBB||t===n["g"].CA}));if(s&&e+a<2)return[n["h"].SHELLING];if(e||a>=2||i>=2){var r=[],o=this.ships.findIndex((function(t){return t.data.type===n["g"].CVL}));return o>=0&&this.ships.filter((function(t,e){return e!==o&&t.enabledASWSupport})).length&&r.push(n["h"].ANTI_SUBMARINE),o>=0&&this.ships.filter((function(t){return t.data.type===n["g"].DE})).length>=2&&r.push(n["h"].ANTI_SUBMARINE),this.allPlanes.some((function(t){return t.data.isAttacker}))&&r.push(n["h"].AIRSTRIKE),r.length?r:[n["h"].NONE]}return[n["h"].LONG_RANGE_TORPEDO]}},{key:"getSupportTypeName",value:function(){var t=n["i"].SUPPORTS,e=this.supportTypes.map((function(e){var a=t.find((function(t){return t.value===e}));return a?a.text:"-"}));return e.join(" / ")}}],[{key:"getScoutScore",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:120,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=[],s=.4*e,r=t.filter((function(t){return t.isActive&&!t.isEmpty})),n=1;n<=a;n+=1){for(var o=0,l=0,c=0;c<r.length;c+=1){var d=r[c];o+=Math.sqrt(d.scout+d.bonusScout),l+=d.itemsScout*n}i.push(o+l-Math.ceil(s)+2*(6-r.length))}return i}}]),t}()},"8dba":function(t,e,a){"use strict";a("349a")},"9f87":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var i=a("bee2"),s=a("d4ec"),r=(a("b0c0"),a("4e827"),Object(i["a"])((function t(e){Object(s["a"])(this,t),e?(this.id=e.id?e.id:0,this.albumId=e.album?e.album:0,this.name=e.name?e.name:"",this.type=e.type?e.type:0,this.type2=e.type2?e.type2:0,this.slotCount=e.s_count?e.s_count:4,this.version=e.ver?e.ver:0,this.isFinal=!!e.final,this.range=e.range?e.range:0,this.hp=e.hp?e.hp:0,this.hp2=e.hp2?e.hp2:0,this.maxHp=e.max_hp?e.max_hp:0,this.fire=e.fire?e.fire:0,this.torpedo=e.torpedo?e.torpedo:0,this.antiAir=e.anti_air?e.anti_air:0,this.armor=e.armor?e.armor:0,this.luck=e.luck?e.luck:0,this.maxLuck=e.max_luck?e.max_luck:0,this.minScout=e.min_scout?e.min_scout:0,this.maxScout=e.scout?e.scout:0,this.minAsw=e.min_asw?e.min_asw:0,this.maxAsw=e.asw?e.asw:0,this.minAvoid=e.min_avoid?e.min_avoid:0,this.maxAvoid=e.avoid?e.avoid:0,this.beforeId=e.befor?e.befor:0,this.nextLv=e.next_lv?e.next_lv:0,this.sort=e.sort?e.sort:0,this.slots=e.slots?e.slots:[],this.originalId=e.orig?e.orig:0,this.fuel=e.fuel?e.fuel:0,this.ammo=e.ammo?e.ammo:0):(this.id=0,this.albumId=0,this.name="",this.type=0,this.type2=0,this.slotCount=0,this.version=0,this.isFinal=!1,this.range=0,this.hp=0,this.hp2=0,this.maxHp=0,this.fire=0,this.torpedo=0,this.antiAir=0,this.armor=0,this.luck=0,this.maxLuck=0,this.minScout=0,this.maxScout=0,this.minAsw=0,this.maxAsw=0,this.minAvoid=0,this.maxAvoid=0,this.beforeId=0,this.nextLv=0,this.sort=0,this.slots=[],this.originalId=0,this.fuel=0,this.ammo=0)})))},ac07:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var i=a("bee2"),s=a("d4ec"),r=Object(i["a"])((function t(e){Object(s["a"])(this,t),e?(this.id=e.id,this.confirmCloseTab=!!e.confirmCloseTab,this.fixedDrawer=!!e.fixedDrawer,this.isMultiLineForItemList=!!e.isMultiLineForItemList,this.isMultiLineForShipList=!!e.isMultiLineForShipList,this.isStockOnlyForItemList=!!e.isStockOnlyForItemList,this.isStockOnlyForShipList=!!e.isStockOnlyForShipList,this.viewTableMode=!!e.viewTableMode,this.isMinimizedAirbase=!!e.isMinimizedAirbase,this.isMinimizedFleet=!!e.isMinimizedFleet,this.isMinimizedEnemy=!!e.isMinimizedEnemy,this.isMinimizedResult=!!e.isMinimizedResult,this.simulationCount=e.simulationCount?e.simulationCount:5e3,this.admiralLevel=e.admiralLevel?e.admiralLevel:120,this.userName=e.userName?e.userName:"",this.themeDetail=e.themeDetail?e.themeDetail:"dark",this.visibleItemStockAllCount=!!e.visibleItemStockAllCount,this.isShipView2Line=!!e.isShipView2Line,this.visibleAirCalcMenuButton=!!e.visibleAirCalcMenuButton,this.itemUI=e.itemUI?e.itemUI:{border:!1,bold:!0,radius:!0},this.disabledItemTooltip=!!e.disabledItemTooltip,this.importAllDeck=!!e.importAllDeck,this.savedItemListFilter=e.savedItemListFilter?e.savedItemListFilter:[{parent:"ship",key:"actualFire",value:0},{parent:"airbase",key:"radius",value:0}],this.savedShipListFilter=e.savedShipListFilter?e.savedShipListFilter:{isFinalOnly:!0},e.planeInitialLevels&&e.planeInitialLevels.length?this.planeInitialLevels=e.planeInitialLevels:(this.planeInitialLevels=[{id:6,level:100},{id:7,level:0},{id:8,level:0},{id:9,level:100},{id:57,level:0},{id:10,level:100},{id:11,level:0},{id:45,level:100},{id:41,level:100},{id:47,level:0},{id:53,level:0},{id:48,level:100},{id:49,level:25}],this.contentOrder=[]),this.contentOrder=e.contentOrder?e.contentOrder:[]):(this.id="setting",this.confirmCloseTab=!0,this.fixedDrawer=!1,this.isMultiLineForItemList=!0,this.isMultiLineForShipList=!0,this.isStockOnlyForItemList=!1,this.isStockOnlyForShipList=!1,this.viewTableMode=!0,this.isMinimizedAirbase=!1,this.isMinimizedFleet=!1,this.isMinimizedEnemy=!1,this.isMinimizedResult=!1,this.simulationCount=5e3,this.admiralLevel=120,this.userName="",this.themeDetail="dark",this.visibleItemStockAllCount=!1,this.isShipView2Line=!1,this.visibleAirCalcMenuButton=!1,this.itemUI={border:!1,bold:!0,radius:!0},this.disabledItemTooltip=!1,this.importAllDeck=!1,this.savedItemListFilter=[{parent:"ship",key:"actualFire",value:0},{parent:"airbase",key:"radius",value:0}],this.savedShipListFilter={isFinalOnly:!0},this.planeInitialLevels=[{id:6,level:100},{id:7,level:0},{id:8,level:0},{id:9,level:100},{id:57,level:0},{id:10,level:100},{id:11,level:0},{id:45,level:100},{id:41,level:100},{id:47,level:0},{id:53,level:0},{id:48,level:100},{id:49,level:25}],this.contentOrder=[])}))},aec1:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var i=a("d4ec"),s=a("bee2"),r=(a("99af"),a("d3b7"),a("4de4"),a("caad"),a("2532"),a("7db0"),a("522d")),n=a("ba7d"),o=function(){function t(e,a,s,n,o,l){var c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Object(i["a"])(this,t),this.shootDownStatusList=l?t.getStage2(e,a,s,l,n,c):t.getStage2(e,a,s,r["i"].FORMATIONS[0],n,c),this.maxRange=e.length,this.border=o}return Object(s["a"])(t,null,[{key:"getStage2",value:function(t,e,a,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new n["a"],o=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,c=[],d=t.length;if(0===d){for(var u=0;u<r["i"].AVOID_TYPE.length;u+=1)c.push({fixDownList:[0],rateDownList:[0],minimumDownList:[0]});return c}for(var h=0;h<r["i"].AVOID_TYPE.length;h+=1)c.push({fixDownList:[],rateDownList:[],minimumDownList:[]});for(var m=i.correction,v=0,f=0;f<d;f+=1)v+=t[f].antiAirBonus;v=Math.floor(v);for(var p=Math.floor(v*m/(e?1:1.3)),g=s.rateCorr,b=e&&0===s.id?0:s.fixCorrA,A=s.fixCorrB,y=0;y<d;y+=1){for(var k=t[y],w=0,S=0,D=0;D<k.items.length;D+=1)w+=k.items[D].antiAirWeight,S+=k.items[D].data.antiAir;w+=k.exItem.antiAirWeight,S+=k.exItem.data.antiAir;var I=1;a&&k.isEscort?I=.48:a&&!k.isEscort&&(I=.8,o&&(I=.72));for(var C=e?.75:.8,x=0;x<r["i"].AVOID_TYPE.length;x+=1){var _=r["i"].AVOID_TYPE[x],R=_.c1,T=_.c2,P=_.c1,B=1;x===r["i"].AVOID_TYPE.length-1&&l&&(R=l.c1,T=l.c2,P=l.c1);var E=0;E=e?Math.floor((Math.floor(Math.sqrt(k.antiAir+S))+w)*R):Math.floor(Math.floor(k.antiAir/2+w)*R);var M=Math.floor(p*T);c[x].rateDownList.push(.005*E*I),c[x].fixDownList.push(Math.floor(.25*(E+M)*C*I*g));var O=Math.floor(b*P+A*B)+(e&&s.id>0?1:0);c[x].minimumDownList.push(O)}}return c}},{key:"getAntiAirCutIn",value:function(t){var e=[],a=t.items.concat(t.exItem),i=t.kokakuCount,s=t.specialKijuCount,o=t.specialKokakuCount,l=t.antiAirRadarCount,c=t.koshaCount,d=t.kijuCount,u=t.data.type2,h=t.data.id,m=i+o,v=m>0,f=a.some((function(t){return 18===t.data.apiTypeId}));if(54===u){var p=a.some((function(t){return 11===t.data.iconTypeId}));m>=2&&p?e.push(1):v&&p?e.push(2):m>=2&&e.push(3)}else{if(99===u){var g=a.some((function(t){return 307===t.data.id}));a.filter((function(t){return 363===t.data.id})).length>=2&&(e.push(38),g&&e.push(40),e.push(41)),a.some((function(t){return 363===t.data.id}))&&a.some((function(t){return 362===t.data.id}))&&(e.push(39),g&&!e.includes(40)&&e.push(40),e.includes(41)||e.push(41)),a.filter((function(t){return 362===t.data.id})).length>=2&&(g&&!e.includes(40)&&e.push(40),e.includes(41)||e.push(41))}else if(91===u){var b=a.some((function(t){return 307===t.data.id}));a.filter((function(t){return 308===t.data.id})).length>=2&&e.push(34),a.some((function(t){return 308===t.data.id}))&&a.some((function(t){return 284===t.data.id||313===t.data.id}))&&e.push(35),a.filter((function(t){return 284===t.data.id||313===t.data.id})).length>=2&&b&&e.push(36),a.filter((function(t){return 313===t.data.id})).length>=2&&e.push(37)}else if(428===h)v&&s&&l&&e.push(10),v&&s&&e.push(11);else if(141===h)v&&d&&l&&e.push(14),v&&d&&e.push(15);else if(470===h||622===h)v&&d&&l&&e.push(16),v&&d&&e.push(17);else if(487===h)i>0&&s&&e.push(19);else if(488===h)v&&l&&e.push(21);else if([82,88,553,554].includes(h))l&&f&&a.some((function(t){return 274===t.data.id}))&&e.push(25);else if([911,916,546].includes(h)&&a.some((function(t){return 142===t.data.id||460===t.data.id}))){var A=a.filter((function(t){return 464===t.data.id})).length,y=a.some((function(t){return 21===t.data.apiTypeId&&t.data.antiAir>=6}));A>=2&&y&&e.push(42),A>=2&&e.push(43),A&&y&&e.push(44),A&&e.push(45)}a.some((function(t){return 3===t.data.apiTypeId}))&&f&&c&&l&&e.push(4),o>=2&&l&&e.push(5),a.some((function(t){return 3===t.data.apiTypeId}))&&f&&c&&e.push(6),o&&l&&e.push(8),v&&c&&l&&e.push(7),148===h||546===h||911===h||916===h?((546===h||911===h||916===h)&&l&&a.some((function(t){return 275===t.data.id}))&&e.push(26),l&&a.some((function(t){return 274===t.data.id}))&&e.push(28)):[82,88,553,554].includes(h)?l&&a.some((function(t){return 274===t.data.id}))&&e.push(28):557!==h&&558!==h||v&&l&&e.push(29),v&&c&&e.push(9),579!==h&&630!==h||v&&a.some((function(t){return 21===t.data.apiTypeId&&t.data.antiAir>=4}))&&e.push(33),s&&a.filter((function(t){return 21===t.data.apiTypeId&&t.data.antiAir>=3})).length>=2&&l&&e.push(12),418===h?s&&e.push(18):487===h?s&&e.push(20):548===h?s&&e.push(22):329===h||530===h?d&&e.push(23):478===h?m&&d&&e.push(24):477===h?(m&&d&&e.push(24),m>=3&&e.push(30),m>=2&&e.push(31)):539===h||630===h?m>=3&&e.push(30):(r["i"].GBR.includes(u)||6===u&&t.data.version>=2)&&(a.some((function(t){return 300===t.data.id}))&&a.some((function(t){return 191===t.data.id}))||a.some((function(t){return 301===t.data.id}))&&a.some((function(t){return 191===t.data.id}))||a.filter((function(t){return 301===t.data.id})).length>=2)&&e.push(32)}for(var k=[],w=0,S=function(t){var a=e[t],i=r["i"].ANTI_AIR_CUTIN.find((function(t){return t.id===a}));if(!i)return"continue";var s=i.rate/101;i.id>=34&&i.id<=41?k.push(new n["a"](i.id,i.rateBonus,i.c1,i.c2,s)):s>w&&(k.push(new n["a"](i.id,i.rateBonus,i.c1,i.c2,s-w)),w=s)},D=0;D<e.length;D+=1)S(D);return k}}]),t}()},b0a0:function(t,e,a){"use strict";a("452c")},b615:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var i=a("d4ec"),s=a("bee2"),r=(a("99af"),a("fb6a"),a("d3b7"),a("caad"),a("2532"),a("522d")),n=a("f463"),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(i["a"])(this,t),this.calculated=!1,this.ignoreHistory=!1,e.info?(this.battleCount=void 0!==e.battleCount?e.battleCount:e.info.battleCount,this.fleets=void 0!==e.fleets?e.fleets.concat():e.info.fleets.concat(),this.airRaidFleet=void 0!==e.airRaidFleet?e.airRaidFleet:e.info.airRaidFleet):(this.battleCount=void 0!==e.battleCount?e.battleCount:1,this.fleets=void 0!==e.fleets?e.fleets.concat():[],this.airRaidFleet=void 0!==e.airRaidFleet?e.airRaidFleet:new n["a"]),this.battleCount<1&&(this.battleCount=1),this.fleets.length>this.battleCount)this.fleets=this.fleets.slice(0,this.battleCount);else if(this.fleets.length<this.battleCount)for(var a=this.battleCount-this.fleets.length,s=0;s<a;s+=1)this.fleets.push(new n["a"])}return Object(s["a"])(t,[{key:"getResourceConsumptions",value:function(t){for(var e=this,a=[],i=function(i){var s=e.fleets[i],n=s.cellType,o=s.isAllSubmarine,l=s.isAllPT,c=s.area,d=s.nodeName,u=t.some((function(t){return t.area===c&&t.boss.includes(d)})),h=c?Math.floor(c/10):1;n===r["d"].AIR_RAID?6===h?a.push([4,8]):a.push([6,4]):l?a.push([4,8]):n===r["d"].NIGHT?a.push([10,10]):o&&!u&&41!==c&&43!==c?a.push([8,0]):a.push([20,20])},s=0;s<this.fleets.length;s+=1)i(s);return a}}]),t}()},b947:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var i=a("3835"),s=a("2909"),r=a("d4ec"),n=a("bee2"),o=(a("7db0"),a("d3b7"),a("d81d"),a("522d")),l=function(){function t(){Object(r["a"])(this,t),this.airState=o["i"].AIR_STATUS[o["i"].AIR_STATUS.length-1],this.airStateText="",this.airStateBarWidth=0,this.rates=[0,0,0,0,0,0],this.supportRates=[0,0,0,0,0,0],this.loopSumAirPower=0,this.loopSumEnemyAirPower=0,this.loopSumEnemySupportAirPower=0,this.avgAirPower=0,this.avgEnemyAirPower=0,this.avgDownSlot=0,this.avgUsedSteels=0,this.isUnknownEnemyAirPower=!1}return Object(n["a"])(t,[{key:"addRates",value:function(t){this.rates[t]+=1}},{key:"addSupportRates",value:function(t){this.supportRates[t]+=1}}],[{key:"formatResult",value:function(e,a){var r=e.rates.indexOf(Math.max.apply(Math,Object(s["a"])(e.rates))),n=o["i"].AIR_STATUS.find((function(t){return t.value===r}));e.airState=n||o["i"].AIR_STATUS[o["i"].AIR_STATUS.length-1],e.avgAirPower=Math.round(e.loopSumAirPower/a),e.avgEnemyAirPower=Math.round(e.loopSumEnemyAirPower/a);var l=t.getBorders(e.avgEnemyAirPower),c=Object(i["a"])(l,4),d=c[0],u=c[1],h=c[2],m=c[3];d<=0?e.airStateBarWidth=100:e.avgAirPower>=d||e.avgAirPower>=u?e.airStateBarWidth=e.avgAirPower/d*100*.9:e.avgAirPower>=h?e.airStateBarWidth=e.avgAirPower/u*100*.45:e.avgAirPower>=m?e.airStateBarWidth=e.avgAirPower/h*100*.2:e.airStateBarWidth=e.avgAirPower/m*100*.1,e.airStateBarWidth=Math.min(e.airStateBarWidth,100),e.rates=e.rates.map((function(t){return Math.floor(100*t/a*100)/100}))}},{key:"getBorders",value:function(t){return[3*t,Math.ceil(1.5*t),Math.floor(t/1.5)+1,Math.floor(t/3)+1,0]}}]),t}()},ba71:function(t,e,a){"use strict";a("70b6")},ba7d:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var i=a("bee2"),s=a("d4ec"),r=Object(i["a"])((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;Object(s["a"])(this,t),this.id=e,this.rateCorr=a,this.fixCorrA=i,this.fixCorrB=r,this.rate=n}))},bce2:function(t,e,a){"use strict";a.d(e,"a",(function(){return p}));var i=a("3835"),s=a("1da1"),r=a("d4ec"),n=a("bee2"),o=(a("4e827"),a("e9c4"),a("4de4"),a("d3b7"),a("7db0"),a("c740"),a("99af"),a("d81d"),a("96cf"),a("522d")),l=a("b947"),c=a("b615"),d=a("dc58"),u=a("d606"),h=a("8292"),m=a("0f16"),v=a("fc09"),f=function(){function t(){Object(r["a"])(this,t)}return Object(n["a"])(t,null,[{key:"calculateAirbasePhase",value:function(e,a,i){for(var s=0;s<e.length;s+=1){var r=e[s],n=r.battleTarget[0],o=r.battleTarget[1];if(n===i||o===i){if(n===i){r.hasJet&&t.ShootDownAirbaseJet(r,a.noCutInStage2);var l=v["a"].getAirState(r.airPower,a.airbaseAirPower);r.resultWave1.rates[l]+=1,r.resultWave1.loopSumAirPower+=r.airPower,r.resultWave1.loopSumEnemyAirPower+=a.airbaseAirPower,t.shootDownEnemy(l,a,[],!0),r.isSeparate&&t.ShootDownAirbase(l,r,a)}if(o===i){r.hasJet&&r.isSeparate&&t.ShootDownAirbaseJet(r,a.noCutInStage2);var c=v["a"].getAirState(r.airPower,a.airbaseAirPower);r.resultWave2.rates[c]+=1,r.resultWave2.loopSumAirPower+=r.airPower,r.resultWave2.loopSumEnemyAirPower+=a.airbaseAirPower,t.shootDownEnemy(c,a,[],!0),(r.isSeparate||r.needShootDown)&&t.ShootDownAirbase(c,r,a)}}}}},{key:"calculateMainPhase",value:function(e,a,i){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e.results[i],n=a.isUnion?e.airPower+e.escortAirPower:e.airPower,o=v["a"].getAirState(n,a.airPower,e.hasPlane||a.hasPlane);r.addRates(o),r.loopSumAirPower+=n,r.loopSumEnemyAirPower+=a.airPower,s&&(a.isAirRaidCell?t.shootDownEnemy(o,a,e.shootDownListAirRaid):t.shootDownEnemy(o,a,e.shootDownList)),t.shootDownFleet(o,e,a,i)}},{key:"calculateAerialCombatCellPhase",value:function(e,a){var i=v["a"].getAirState(e.airPower,a.airPower,e.hasPlane);t.shootDownFleet(i,e,a)}},{key:"calculateAerialSupportPhase",value:function(t,e,a){for(var i=0;i<t.length;i+=1){var s=t[i];if(s.hasPlane){var r=v["a"].getAirState(s.supportAirPower,e.airPower),n=s.results[a];n.addSupportRates(r),n.loopSumEnemySupportAirPower+=e.airPower}}}},{key:"shootDownFleetJet",value:function(e,a){if(e.hasJet&&a.isSurfaceCell&&!a.isAllSubmarine){var i=t.shootDownJetPhase(e.allPlanes,a.noCutInStage2);return e.airPower=Math.floor(i.sumAirPower),e.isUnion&&(e.escortAirPower=Math.floor(i.escortAirPower)),i.usedSteel}return 0}},{key:"ShootDownAirbaseJet",value:function(e,a){var i=t.shootDownJetPhase(e.items,a);e.airPower=Math.floor(i.sumAirPower*e.reconCorr),e.needSupply=!0}},{key:"ShootDownAirbase",value:function(t,e,a){for(var i=0,s=a.noCutInStage2,r=s[0].fixDownList.length,n=e.items,o=0;o<n.length;o+=1){var l=n[o];if(l.slot-=Math.floor(v["a"].getStage1ShootDownValue(t,l.slot)*(l.data.isJet?.6:1)),l.data.isAttacker){var c=Math.floor(Math.random()*r);Math.random()>=.5&&(l.slot-=Math.floor(s[l.data.avoidId].rateDownList[c]*l.slot)),Math.random()>=.5&&(l.slot-=s[l.data.avoidId].fixDownList[c]),l.slot-=s[l.data.avoidId].minimumDownList[c]}m["a"].updateAirPower(l),i+=l.airPower}e.airPower=Math.floor(i*e.reconCorr),e.needSupply=!0}},{key:"shootDownJetPhase",value:function(t,e){for(var a=0,i=0,s=0,r=e[0].fixDownList.length,n=0;n<t.length;n+=1){var l=t[n];if(l.data.isJet&&!l.isEscortItem){s+=Math.round(l.slot*l.data.cost*.2),l.slot-=Math.floor(.6*v["a"].getStage1ShootDownValue(o["b"].KAKUHO,l.slot));var c=Math.floor(Math.random()*r);Math.random()>=.5&&(l.slot-=Math.floor(e[l.data.avoidId].rateDownList[c]*l.slot)),Math.random()>=.5&&(l.slot-=e[l.data.avoidId].fixDownList[c]),m["a"].updateAirPower(l),a+=l.airPower}else l.data.isRecon||(l.isEscortItem?i+=l.airPower:a+=l.airPower)}return{sumAirPower:a,escortAirPower:i,usedSteel:s}}},{key:"shootDownFleet",value:function(t,e,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=e.allPlanes,r=s.length,n=a.noCutInStage2,o=n[0].fixDownList.length;if(a.shootDownList.length>1){var l=Math.random(),c=a.shootDownList.find((function(t){return t.border>l}));c&&(n=c.shootDownStatusList,o=c.maxRange)}for(var d=0,u=0,h=0;h<r;h+=1){var f=s[h];if(i>=0&&(f.slotHistories[i]+=f.slot),a.isSkipAerialCombatCell||f.data.isRecon||f.isEscortItem&&!a.isUnion)f.data.isRecon||(f.isEscortItem?u+=f.airPower:d+=f.airPower);else{if(f.slot-=Math.floor(v["a"].getStage1ShootDownValue(t,f.slot)*(f.data.isJet?.6:1)),!a.isAirRaidCell&&n.length&&f.data.isAttacker){var p=Math.floor(Math.random()*o),g=n[f.data.avoidId];Math.random()>=.5&&(f.slot-=Math.floor(g.rateDownList[p]*f.slot)),Math.random()>=.5&&(f.slot-=g.fixDownList[p]),f.slot-=g.minimumDownList[p]}m["a"].updateAirPower(f),f.isEscortItem?u+=f.airPower:d+=f.airPower}}e.airPower=d,e.escortAirPower=u}},{key:"shootDownEnemy",value:function(t,e,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=e.allPlanes,r=s.length,n=[],o=0;if(a){var l=Math.random(),c=a.find((function(t){return t.border>l}));c&&(n=c.shootDownStatusList,o=c.maxRange)}for(var d=0,u=0,h=0;h<r;h+=1){var f=s[h];if((i||!i&&!f.data.isABAttacker&&!f.data.isRecon)&&(f.slot-=v["a"].getStage1ShootDownValueEnemy(t,f.slot),o&&f.data.isAttacker)){var p=Math.floor(Math.random()*o),g=n[f.data.avoidId];Math.random()>=.5&&(f.slot-=Math.floor(g.rateDownList[p]*f.slot)),Math.random()>=.5&&(f.slot-=g.fixDownList[p]),f.slot-=g.minimumDownList[p]}m["a"].updateAirPower(f),f.data.isRecon||f.data.isABAttacker||(d+=f.airPower),u+=f.airPower}e.airPower=d,e.airbaseAirPower=u,e.needSupply=!0}},{key:"calculateSuperAirRaid",value:function(e,a,i){var s=v["a"].getAirState(e.superHighDefenseAirPower,a.airbaseAirPower);i.rates[s]+=1,i.loopSumAirPower+=e.superHighDefenseAirPower,i.loopSumEnemyAirPower+=a.airbaseAirPower,t.ShootDownAirbaseAirRaid(s,e)}},{key:"ShootDownAirbaseAirRaid",value:function(t,e){for(var a=0,i=0;i<e.airbases.length;i+=1){var s=e.airbases[i];if(s.mode===o["a"].DEFENSE){for(var r=s.items,n=0,l=0;l<r.length;l+=1){var c=r[l];c.slot-=Math.floor(v["a"].getStage1ShootDownValue(t,c.slot)*(c.data.isJet?.6:1)),m["a"].updateDefenseAirPower(c),n+=c.defenseAirPower}a+=Math.floor(n*s.reconCorrDefense)}}e.superHighDefenseAirPower=Math.floor(a*e.superHighAirRaidCoefficient)}}]),t}(),p=function(){function t(){Object(r["a"])(this,t),this.airbaseInfo=new h["a"],this.battleInfo=new c["a"],this.fleetInfo=new d["a"],this.isDefense=!1,this.mainBattle=0,this.resetAll=!1}return Object(n["a"])(t,[{key:"updateInfo",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=a.length>0&&void 0!==a[0]?a[0]:1e4,this.isDefense=this.airbaseInfo.isDefense,this.mainBattle=this.mainBattle<0?0:this.mainBattle,this.isDefense?this.calculateDefenseMode(e):this.calculate(e);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"calculate",value:function(t){for(var e=this.mainBattle,a=0;a<this.airbaseInfo.airbases.length;a+=1)this.airbaseInfo.airbases[a].battleTarget.sort((function(t,e){return t-e}));var i=JSON.stringify(this),s=JSON.parse(i),r=s.airbaseInfo.airbases.filter((function(t){return t.mode===o["a"].BATTLE&&t.items.find((function(t){return t.data.id>0}))})),n=s.fleetInfo,c=n.fleets[s.fleetInfo.mainFleetIndex];n.isUnion&&n.mainFleetIndex<=1&&(c=n.unionFleet);for(var d=c.airPower,h=c.escortAirPower,v=s.battleInfo.fleets,p=v.length,g=0,b=0,A=0;A<r.length;A+=1)r[A].resultWave1=new l["a"],r[A].resultWave2=new l["a"];for(var y=0;y<n.fleets.length;y+=1){var k=n.fleets[y];k.results=[];for(var w=0;w<p;w+=1)k.results.push(new l["a"])}c.results=[];for(var S=0;S<p;S+=1)c.results.push(new l["a"]);for(var D=0;D<c.allPlanes.length;D+=1){var I=c.allPlanes[D];I.slotHistories=[],I.slotResult=0,I.deathRate=0;for(var C=0;C<p;C+=1)I.slotHistories.push(0)}for(var x=0;x<v.length;x+=1)for(var _=v[x].allPlanes,R=0;R<_.length;R+=1){var T=_[R];T.slotResult=0,T.deathRate=0}for(var P=0;P<t;P+=1){for(var B=0;B<p;B+=1){var E=v[B],M=e===B;if(f.calculateAirbasePhase(r,E,B),b+=f.shootDownFleetJet(c,E),f.calculateMainPhase(c,E,B,M),E.isAerialCombatCell&&f.calculateAerialCombatCellPhase(c,E),M&&f.calculateAerialSupportPhase(n.fleets,E,B),E.needSupply){for(var O=0;O<E.allPlanes.length;O+=1){var L=E.allPlanes[O];L.slotResult+=L.slot,L.deathRate+=L.slot?0:1,m["a"].supply(E.allPlanes[O])}E.airPower=E.fullAirPower,E.airbaseAirPower=E.fullAirbaseAirPower,E.needSupply=!1}}for(var F=0;F<r.length;F+=1){var N=r[F];N.needSupply&&(u["a"].supply(r[F]),N.needSupply=!1)}for(var U=0;U<c.allPlanes.length;U+=1){var q=c.allPlanes[U];q.slotResult+=q.slot,q.deathRate+=0===q.slot?1:0,g+=q.fullSlot-q.slot,m["a"].supply(q)}c.airPower=d,c.escortAirPower=h}for(var H=0;H<s.airbaseInfo.airbases.length;H+=1){var V=s.airbaseInfo.airbases[H];if(V.mode===o["a"].BATTLE&&V.items.find((function(t){return t.data.id>0}))){l["a"].formatResult(V.resultWave1,t),l["a"].formatResult(V.resultWave2,t),this.airbaseInfo.airbases[H].resultWave1=V.resultWave1,this.airbaseInfo.airbases[H].resultWave2=V.resultWave2;var j=V.items.findIndex((function(t){return t.needRecord}));if(j>=0){var $=this.airbaseInfo.airbases[H].items[j];$.dist=V.items[j].dist.concat(),$.needRecord=!1}}}for(var K=this.fleetInfo.mainFleet,J=0;J<p;J+=1)l["a"].formatResult(c.results[J],t),c.results[J].isUnknownEnemyAirPower=v[J].existUnknownEnemy,K.results=c.results;K.mainResult=c.results[e],K.mainResult.avgDownSlot=g/t,K.mainResult.avgUsedSteels=b/t;for(var W=0;W<c.allPlanes.length;W+=1){var G=c.allPlanes[W],Y=K.allPlanes[W];Y.slotHistories=G.slotHistories.map((function(e){return Math.round(e/t)})),Y.slotResult=Math.round(G.slotResult/t);var z=100*G.deathRate/t;Y.deathRate=z>=1?Math.round(z):Math.ceil(z),Y.needRecord&&(Y.dist=G.dist)}for(var X=this.battleInfo.fleets[e].allPlanes,Z=v[e].allPlanes,Q=0;Q<X.length;Q+=1){var tt=Z[Q],et=X[Q];et.slotResult=Math.round(tt.slotResult/t),et.deathRate=100*tt.deathRate/t,et.needRecord&&(et.dist=tt.dist)}for(var at=0;at<n.fleets.length;at+=1){var it=n.fleets[at];if(!this.fleetInfo.fleets[at].results[e]){this.fleetInfo.fleets[at].results=[];for(var st=0;st<=e;st+=1)this.fleetInfo.fleets[at].results.push(new l["a"])}this.fleetInfo.fleets[at].results[e].supportRates=it.results[e].supportRates.map((function(e){return 100*e/t})),this.fleetInfo.fleets[at].results[e].loopSumEnemySupportAirPower=it.results[e].loopSumEnemySupportAirPower/t}}},{key:"calculateDefenseMode",value:function(t){var e=this.airbaseInfo,a=this.battleInfo.airRaidFleet,s=a.airbaseAirPower,r=v["a"].getAirStatusBorder(s),n=Object(i["a"])(r,4),c=n[0],d=n[1],u=n[2],h=n[3],m=e.defenseAirPower;if(a.cellType===o["d"].HIGH_AIR_RAID)m=e.highDefenseAirPower,e.superHighAirRaidResults=[];else if(a.cellType===o["d"].SUPER_HIGH_AIR_RAID)return void this.calculateSuperAirRaid(t);var f=new l["a"];f.loopSumAirPower=m,f.loopSumEnemyAirPower=s,s<=0?(f.airState.value=o["b"].KAKUHO,f.rates[0]=1):m>=c?(f.airState.value=o["b"].KAKUHO,f.rates[o["b"].KAKUHO]=1):m>=d?(f.airState.value=o["b"].YUSEI,f.rates[o["b"].YUSEI]=1):m>=u?(f.airState.value=o["b"].KINKO,f.rates[o["b"].KINKO]=1):m>=h?(f.airState.value=o["b"].RESSEI,f.rates[o["b"].RESSEI]=1):(f.airState.value=o["b"].SOSHITSU,f.rates[o["b"].SOSHITSU]=1),l["a"].formatResult(f,1);for(var p=0;p<e.airbases.length;p+=1)e.airbases[p].resultWave1=f,e.airbases[p].resultWave2=f}},{key:"calculateSuperAirRaid",value:function(t){for(var e=JSON.stringify(this),a=JSON.parse(e),i=a.airbaseInfo,s=new l["a"],r=new l["a"],n=new l["a"],o=a.battleInfo.airRaidFleet,c=0;c<t;c+=1){f.calculateSuperAirRaid(i,o,s),f.calculateSuperAirRaid(i,o,r),f.calculateSuperAirRaid(i,o,n);for(var d=0;d<i.airbases.length;d+=1){var h=i.airbases[d];u["a"].supply(i.airbases[d]),h.needSupply=!1}i.superHighDefenseAirPower=i.fullSuperHighDefenseAirPower}l["a"].formatResult(s,t),l["a"].formatResult(r,t),l["a"].formatResult(n,t),this.airbaseInfo.superHighAirRaidResults=[s,r,n]}}]),t}()},c364:function(t,e,a){},c3af:function(t,e,a){"use strict";a.d(e,"a",(function(){return h}));var i=a("2909"),s=a("d4ec"),r=a("bee2"),n=(a("99af"),a("fb6a"),a("caad"),a("2532"),a("4e827"),a("d3b7"),a("d81d"),a("4de4"),a("b0c0"),a("d180")),o=a.n(n),l=a("9f87"),c=a("0f16"),d=a("522d"),u=a("aec1"),h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(s["a"])(this,t),this.fixDown=0,this.rateDown=0,e.ship?(this.data=void 0!==e.master?e.master:e.ship.data,this.level=void 0!==e.level?e.level:e.ship.level,this.luck=void 0!==e.luck?e.luck:e.ship.luck,this.asw=void 0!==e.asw?e.asw:e.ship.asw,this.antiAir=void 0!==e.antiAir?e.antiAir:e.ship.antiAir,this.items=void 0!==e.items?e.items.concat():e.ship.items.concat(),this.exItem=void 0!==e.exItem?e.exItem:e.ship.exItem,this.isActive=void 0!==e.isActive?e.isActive:e.ship.isActive,this.isEscort=void 0!==e.isEscort?e.isEscort:e.ship.isEscort,this.hp=void 0!==e.hp?e.hp:e.ship.hp,this.area=void 0!==e.area?Math.max(e.area):Math.max(e.ship.area)):(this.data=void 0!==e.master?e.master:new l["a"],this.level=void 0!==e.level?e.level:99,this.luck=void 0!==e.luck?e.luck:this.data.luck,this.asw=void 0!==e.asw?e.asw:t.getStatusFromLevel(this.level,this.data.maxAsw,this.data.minAsw),this.antiAir=void 0!==e.antiAir?e.antiAir:this.data.antiAir,this.items=void 0!==e.items?e.items.concat():[],this.exItem=void 0!==e.exItem?e.exItem:new c["a"],this.isActive=void 0===e.isActive||e.isActive,this.isEscort=void 0!==e.isEscort&&e.isEscort,this.hp=void 0!==e.hp?e.hp:this.data.hp,this.area=void 0!==e.area?Math.max(e.area):0),this.items.length<this.data.slotCount)for(var a=this.items.length;a<this.data.slotCount;a+=1)this.items.push(new c["a"]({slot:this.data.slots[a]}));else this.items.length>this.data.slotCount&&(this.items=this.items.slice(0,this.data.slotCount));for(var i=0;i<this.data.slotCount;i+=1){var r=this.data.slots[i],n=this.items[i];0===n.data.id&&r>0&&(this.items[i]=new c["a"]({slot:r}))}this.level>99&&this.hp<this.data.hp2?this.hp=this.data.hp2:this.level<=99&&(this.hp===this.data.hp2||0===this.hp)&&(this.hp=this.data.hp),this.fullAirPower=0,this.supportAirPower=0,this.antiAirBonus=0,this.itemsScout=0,this.itemAsw=0,this.hasJet=!1,this.specialKokakuCount=0,this.kokakuCount=0,this.kijuCount=0,this.actualArmor=this.data.armor,this.specialKijuCount=0,this.antiAirRadarCount=0,this.surfaceRadarCount=0,this.koshaCount=0,this.hunshinRate=0,this.enabledTSBK=!1,this.enabledASWSupport=!1,this.sumSPRos=0,this.scout=t.getStatusFromLevel(this.level,this.data.maxScout,this.data.minScout),this.avoid=t.getStatusFromLevel(this.level,this.data.maxAvoid,this.data.minAvoid),this.improveAsw=Math.max(this.asw-t.getStatusFromLevel(this.level,this.data.maxAsw,this.data.minAsw),0),this.bonusScout=this.getBonusScout(),this.itemBonusAsw=this.getBonusAsw(),this.tp=this.getTransportPower(),this.actualRange=Math.max(this.data.range,1),this.torpedoBonuses=[];for(var o=new c["a"],h=[d["g"].CVL,d["g"].AV,d["g"].AO,d["g"].AO_2,d["g"].LHA,d["g"].CL,+d["g"].CT].includes(this.data.type),m=1,v=this.items.concat(this.exItem),f=0;f<v.length;f+=1){var p=v[f];if(this.antiAirBonus+=p.antiAirBonus,this.itemsScout+=p.itemScout,this.itemAsw+=p.data.asw,this.tp+=p.tp,this.actualArmor+=p.data.armor,p.data.range>this.actualRange&&(this.actualRange=p.data.range),p.fullSlot>0&&p.data.isPlane&&!p.data.isRecon&&!p.data.isABAttacker&&(this.fullAirPower+=p.fullAirPower,this.supportAirPower+=p.supportAirPower),!this.hasJet&&p.data.isJet&&(this.hasJet=!0),p.fullSlot>0&&(10===p.data.apiTypeId||11===p.data.apiTypeId)&&(this.sumSPRos+=p.data.scout*Math.floor(Math.sqrt(p.fullSlot))),p.data.isAttacker){this.torpedoBonuses.push(this.getAttackerTorpedoBonus(p)),p.attackerTorpedoBonus=0;var g=Math.max(o.data.torpedo,o.data.bomber),b=Math.max(p.data.torpedo,p.data.bomber);g<b&&(o=p)}16!==p.data.iconTypeId||p.data.isSpecial||(this.kokakuCount+=1),16===p.data.iconTypeId&&p.data.isSpecial&&(this.specialKokakuCount+=1),21!==p.data.apiTypeId||p.data.isSpecial||(this.kijuCount+=1),21===p.data.apiTypeId&&p.data.isSpecial&&(this.specialKijuCount+=1),11===p.data.iconTypeId&&p.data.antiAir>0&&(this.antiAirRadarCount+=1),11===p.data.iconTypeId&&p.data.scout>4&&(this.surfaceRadarCount+=1),36===p.data.apiTypeId&&(this.koshaCount+=1),!this.enabledASWSupport&&h&&d["i"].ENABLED_ASW_SUPPORT.includes(p.data.apiTypeId)&&(this.enabledASWSupport=!0),p.fullSlot&&50===p.data.iconTypeId&&(m-=m*(Math.floor(Math.sqrt(p.data.scout)*Math.sqrt(this.level))/25))}this.nightContactRate=1-m,this.torpedoBonuses.length&&(o.attackerTorpedoBonus=+this.torpedoBonuses.sort((function(t,e){return e-t}))[0]),this.items.some((function(t){return 61===t.data.id}))&&[553,554,196,197].includes(this.data.id)&&(this.actualRange+=1),87!==this.data.type2&&91!==this.data.type2&&651!==this.data.id&&656!==this.data.id||(this.items.some((function(t){return 315===t.data.id}))&&(this.actualRange+=1),this.items.some((function(t){return 456===t.data.id}))&&(this.actualRange+=1)),this.antiAirCutIn=u["a"].getAntiAirCutIn(this),this.antiAirBonus=Math.floor(this.antiAirBonus),this.kijuCount&&(this.hunshinRate=this.getHunshinRate()),this.actualAsw=this.asw+this.itemAsw+this.itemBonusAsw,this.enabledTSBK=this.getEnabledTSBK(),this.isEmpty=0===this.data.id&&!this.items.some((function(t){return t.data.id>0}))}return Object(r["a"])(t,[{key:"getProfCriticalBonus",value:function(){for(var t=0,e=0;e<this.items.length;e+=1){var a=this.items[e];if(a.slot>0&&(a.data.isAttacker||41===a.data.apiTypeId)){var i=[0,1,2,3,4,5,7,10][a.levelAlt],s=0===e?100:200;t+=Math.floor(Math.sqrt(a.level)+i)/s}}return 1+t}},{key:"getBonusScout",value:function(){var t=0,e=this.data,a=e.id,i=e.type,s=e.type2,r=this.items.concat(this.exItem),n=d["i"].USA.includes(s),o=d["i"].isJPN(s);if(r.some((function(t){return 278===t.data.id}))&&n&&(t+=1),r.some((function(t){return 279===t.data.id}))&&(n&&(t+=2),d["i"].GBR.includes(s)&&(t+=1)),r.some((function(t){return 30===t.data.id}))&&(54!==s&&501!==a&&506!==a||(t+=2)),r.some((function(t){return 410===t.data.id}))&&(54!==s&&501!==a&&506!==a||(t+=2)),r.some((function(t){return 171===t.data.id}))&&[8,9,10].includes(i)&&n){var l=Math.max.apply(null,r.filter((function(t){return 171===t.data.id})).map((function(t){return t.remodel})));t+=l>=8?3:l>=3?2:1}if(r.some((function(t){return 414===t.data.id}))&&n)if([8,9,10].includes(i))t+=1;else{var c=Math.max.apply(null,r.filter((function(t){return 414===t.data.id})).map((function(t){return t.remodel})));t+=c>=4?3:2}if(r.some((function(t){return 370===t.data.id}))&&(67===s?t+=3:89===s||d["i"].GBR.includes(s)?t+=2:[62,70,72].includes(s)&&(t+=1)),r.some((function(t){return 371===t.data.id}))&&(630===a?t+=9:89===s?t+=6:88===s?t+=5:70===s?t+=4:67!==s&&79!==s&&108!==s||(t+=3)),630===a&&r.some((function(t){return 368===t.data.id}))&&(t+=1),630===a&&r.some((function(t){return 369===t.data.id}))&&(t+=2),r.some((function(t){return 61===t.data.id}))){var u=Math.max.apply(null,r.filter((function(t){return 61===t.data.id})).map((function(t){return t.remodel})));10===u?t+=3:u>=6?t+=2:u>=2&&(t+=1),17===s?u>=8?t+=4:u>=1&&(t+=3):25===s?u>=1&&(t+=2):[508,509,560].includes(a)&&u>=1&&(t+=1)}if(r.some((function(t){return 54===t.data.id&&t.remodel>=2}))&&(t+=1),r.some((function(t){return 273===t.data.id&&t.remodel>=2}))&&(t+=1),r.some((function(t){return 151===t.data.id&&t.remodel>=2}))){var h=Math.max.apply(null,r.filter((function(t){return 151===t.data.id})).map((function(t){return t.remodel})));10===h?t+=3:h>=6?t+=2:h>=2&&(t+=1)}r.some((function(t){return 408===t.data.id}))&&(97===s?t+=2:45!==s&&2!==i||(t+=1)),r.some((function(t){return 315===t.data.id}))&&(651!==a&&656!==a||(t+=3)),r.some((function(t){return 456===t.data.id}))&&(651!==a&&656!==a||(t+=3));for(var m=0;m<r.length;m+=1){var v=r[m];118===v.data.id&&52===s&&(10===v.remodel?t+=3:t+=2),194===v.data.id&&[62,70,72,79].includes(s)&&(t+=2),367===v.data.id&&[62,70,72,89].includes(s)&&(t+=1),368===v.data.id&&(89===s?t+=3:[62,70,72].includes(s)&&(t+=2)),369===v.data.id&&([70,89].includes(s)?t+=3:[62,72].includes(s)&&(t+=2)),o&&129===v.data.id&&([3,4,5,6].includes(i)?t+=3:2===i&&(t+=1)),o&&412===v.data.id&&([3,4].includes(i)?t+=3:[2,5,6].includes(i)&&(t+=1)),315===v.data.id&&n&&(t+=4),456===v.data.id&&(n?t+=4:d["i"].GBR.includes(this.data.type2)&&(t+=2))}return t}},{key:"getBonusAsw",value:function(){for(var t=0,e=this.data,a=e.type,i=e.type2,s=e.originalId,r=e.id,n=this.items.concat(this.exItem),o=0,l=0,c=0;c<n.length;c+=1){var u=n[c];47===u.data.id?[271,273,80,257,119,225].includes(s)?t+=3:[70,73,214,167,170,327].includes(s)&&(t+=2):149===u.data.id?54===i||[656,141,488,160,622,623].includes(r)?t+=1:624===r?t+=3:662===r&&(t+=2):438===u.data.id?(o+=1,l=Math.max(l,u.remodel)):129===u.data.id&&a===d["g"].DD&&d["i"].isJPN(i)||56===i&&n.some((function(t){return[44,45,287,288].includes(t.data.id)}))?t+=2:287===u.data.id?[656,141,488,160,624].includes(r)?t+=1:662===r&&(t+=2):287===u.data.id?[656,141,488,160,624].includes(r)?t+=2:624===r?t+=3:662===r&&(t+=4):377===u.data.id?629===r?t+=3:d["i"].USA.includes(i)?t+=2:(d["i"].GBR.includes(i)||651===r||656===r||d["i"].AUS.includes(i))&&(t+=1):378===u.data.id?629===r?t+=4:d["i"].USA.includes(i)?t+=3:d["i"].GBR.includes(i)?t+=2:(651===r||656===r||d["i"].AUS.includes(i))&&(t+=1):382===u.data.id?a===d["g"].DE&&(t+=1):229===u.data.id?656===r&&(t+=2):379===u.data.id?[656,141,487,488,160,624].includes(r)||21===i?t+=2:624===r?t+=3:(34===i||[22,219,23,220,56,224,113,289].includes(r))&&(t+=1):380===u.data.id?[141,487,488,160,624].includes(r)||21===i?t+=2:624===r?t+=3:(34===i||[22,219,23,220,56,224,113,289].includes(r))&&(t+=1):310===u.data.id?[622,623,624].includes(r)&&(t+=1):82===u.data.id||302===u.data.id?76===i&&(t+=1):344===u.data.id||345===u.data.id||344===u.data.id||345===u.data.id?[883,888,555,560].includes(r)?t+=2:[282,318].includes(r)&&(t+=1):372===u.data.id?11!==i&&51!==i||(t+=1):373===u.data.id?[883,888,555,560].includes(r)?t+=2:11!==i&&51!==i||(t+=1):374===u.data.id?[883,888,555,560].includes(r)?t+=3:9===i||11===i||51===i?t+=2:296!==r&&297!==r||(t+=1):425===u.data.id?u.remodel>=2&&d["i"].GBR.includes(i)&&(t+=u.remodel>=6?4:3):389===u.data.id?646===r?t+=4:d["i"].USA.includes(i)&&(t+=3):305===u.data.id||305===u.data.id||305===u.data.id?324===s?t+=3:76===i&&(t+=1):19===u.data.id?76===i?t+=3:25===s&&(t+=2):228===u.data.id?76===i?t+=7:25===s?t+=6:a===d["g"].CVL&&(t+=2):375===u.data.id?7===s?t+=4:d["i"].USA.includes(i)&&(t+=3):304===u.data.id?[4,16,20,41].includes(i)?t+=1:89===i&&(t+=2):370===u.data.id?d["i"].GBR.includes(i)||70===i||89===i?t+=3:62!==i&&72!==i||(t+=2):371===u.data.id?89===i?t+=2:d["i"].GBR.includes(i)&&(t+=1):322===u.data.id?553!==r&&554!==r||(t+=1):323===u.data.id?553!==r&&554!==r||(t+=2):367===u.data.id?70!==i&&89!==i||(t+=1):368===u.data.id?70===i||89===i?t+=3:62!==i&&72!==i||(t+=2):369===u.data.id?89===i?t+=4:70===i?t+=3:62!==i&&72!==i||(t+=2):69===u.data.id?553===r?t+=1:554!==r&&646!==r||(t+=2):324===u.data.id||325===u.data.id?553===r?t+=2:554!==r&&646!==r||(t+=3):326===u.data.id?553===r?t+=3:554===r?t+=4:646===r&&(t+=5):327===u.data.id?553===r?t+=4:554===r?t+=5:646===r&&(t+=6):408===u.data.id||408===u.data.id||409===u.data.id?45===i&&(t+=1):455===u.data.id&&647===r&&(t+=1)}return n.some((function(t){return 412===t.data.id}))&&a===d["g"].DD&&d["i"].isJPN(i)&&(t+=2),56===i&&n.some((function(t){return[46,47,149,438].includes(t.data.id)}))?t+=2:o&&(l>=8?[476,363,145,588,667,578].includes(r)&&(t+=2):l>=4&&[476,363,145,588,667,578].includes(r)&&(t+=1),[271,273,80,257,119].includes(s)?1===o?t+=5:o>=2&&(t+=8):[70,73,214,167,170].includes(s)?1===o?t+=4:o>=2&&(t+=6):225===s?1===o?t+=4:o>=2&&(t+=7):327===s?1===o?t+=3:o>=2&&(t+=5):[258,259,84].includes(s)?t+=2:([141,488,160].includes(r)||[385,411].includes(s)||a===d["g"].DD&&d["i"].isJPN(i))&&(t+=1)),n.some((function(t){return 439===t.data.id}))&&(d["i"].USA.includes(i)||d["i"].GBR.includes(i)?t+=3:a===d["g"].DE||101===i?t+=2:a!==d["g"].DD&&a!==d["g"].CL&&a!==d["g"].CT||(t+=1)),(74===i||77===i)&&n.some((function(t){return 293===t.data.id}))&&this.surfaceRadarCount&&(t+=1),646===r&&n.some((function(t){return 389===t.data.id}))&&n.some((function(t){return 25===t.data.apiTypeId}))&&(n.some((function(t){return 326===t.data.id||327===t.data.id}))?t+=10:t+=6),[662,663,668].includes(r)&&(n.some((function(t){return 10===t.data.apiTypeId}))&&(t+=3),n.some((function(t){return 11===t.data.apiTypeId}))&&(t+=1),662===r&&n.some((function(t){return 25===t.data.apiTypeId}))?t+=4:663!==r&&668!==r||!n.some((function(t){return 25===t.data.apiTypeId}))||(t+=3)),t}},{key:"getEnabledTSBK",value:function(){if([141,478,624,394,893,681].includes(this.data.id)||91===this.data.type2)return!0;var t=this.data.type,e=this.items.concat(this.exItem),a=e.some((function(t){return 14===t.data.apiTypeId||40===t.data.apiTypeId}));if(t===d["g"].DE){if(this.actualAsw>=60&&a)return!0;if(this.actualAsw>=75){for(var i=0,s=0;s<e.length;s+=1)i+=e[s].data.asw;return i>=4}}if(t===d["g"].DD||t===d["g"].CL||t===d["g"].CLT||t===d["g"].CT||t===d["g"].AO||t===d["g"].AO_2)return this.actualAsw>=100&&a;if(76===this.data.type2&&this.data.name.indexOf("改")>=0||646===this.data.id)return e.some((function(t){return t.data.isAttacker&&t.data.asw>=1||25===t.data.apiTypeId||26===t.data.apiTypeId}));if(t===d["g"].CVL){var r=e.some((function(t){return 25===t.data.apiTypeId||26===t.data.apiTypeId}));if(a&&this.actualAsw>=50&&(r||e.some((function(t){return 8===t.data.apiTypeId&&t.data.asw>=7}))))return!0;if(this.actualAsw>=65&&(r||e.some((function(t){return 8===t.data.apiTypeId&&t.data.asw>=7}))))return!0;if(a&&this.actualAsw>=100)return r||e.some((function(t){return t.data.isAttacker&&t.data.asw>=1}))}return 554===this.data.id?!!e.some((function(t){return 326===t.data.id||327===t.data.id}))||e.filter((function(t){return 69===t.data.id||324===t.data.id||325===t.data.id})).length>=2:(t===d["g"].BBV||t===d["g"].LHA)&&(this.actualAsw>=100&&a&&e.some((function(t){return 11===t.data.apiTypeId||25===t.data.apiTypeId||26===t.data.apiTypeId})))}},{key:"getAttackerTorpedoBonus",value:function(t){var e=this.data,a=t.data.id;if(372===a){if(883===e.id||888===e.id)return 2;if([33,43].includes(e.type2))return 1}else if(373===a){if(883===e.id)return 3;if(888===e.id||[9,33,43].includes(e.type2))return 2;if([24,51].includes(e.type2)||[291,292,296,297,282,555,560].includes(e.id))return 1}else if(374===a){if([461,462,466,467,153,156].includes(e.id))return 3;if([883,888,508,509,283,408].includes(e.id))return 2;if([296,297,282,555,560,318].includes(e.id))return 1}else if(424===a){if(d["i"].GBR.includes(e.type2))return 3}else if(425===a){if(d["i"].GBR.includes(e.type2))return 1}else if(368===a){if(630===e.id)return 2}else if(369===a&&630===e.id)return 3;return 0}},{key:"getTransportPower",value:function(){switch(this.data.type){case d["g"].DD:return 5;case d["g"].CL:return 487===this.data.id?10:2;case d["g"].CT:return 6;case d["g"].CAV:return 4;case d["g"].BBV:return 7;case d["g"].AO:case d["g"].AO_2:return 15;case d["g"].AV:return 9;case d["g"].LHA:return 12;case d["g"].SSV:return 1;case d["g"].AS:return 7;default:return 0}}},{key:"getHunshinRate",value:function(){var t=0,e=[].concat(Object(i["a"])(this.items),[this.exItem]),a=e.filter((function(t){return 274===t.data.id})).length;if(a&&[6,7,10,11,16,18].includes(this.data.type)){var s=this.antiAir+2*o()(e.map((function(t){return t.antiAirWeight})));t=(.9*Math.min(this.luck,50)+Math.floor(s))/281,2===a?t+=.15:a>=3&&(t+=.3),2===this.data.type2&&(t+=.25)}return 100*t}},{key:"getDayBattleSpecialAttackRate",value:function(t,e){var a=this.items.concat(this.exItem),i=[];if(a.some((function(t){return 10===t.data.apiTypeId||11===t.data.apiTypeId}))){var s=a.filter((function(t){return[1,2,3].includes(t.data.apiTypeId)})).length,r=a.filter((function(t){return 4===t.data.apiTypeId})).length;s>=2&&(a.some((function(t){return 19===t.data.apiTypeId}))&&i.push({text:"主主CI",value:150}),i.push({text:"連撃",value:130})),s&&r&&a.some((function(t){return 19===t.data.apiTypeId}))&&i.push({text:"主徹CI",value:140}),s&&r&&a.some((function(t){return[12,13].includes(t.data.apiTypeId)}))&&i.push({text:"主電CI",value:130}),s&&r&&i.push({text:"主副CI",value:120})}if(this.items.some((function(t){return 8===t.data.apiTypeId}))){var n=a.filter((function(t){return 7===t.data.apiTypeId})).length;this.items.some((function(t){return 6===t.data.apiTypeId}))&&n&&i.push({text:"FBA",value:125}),n>=2&&i.push({text:"BBA",value:140}),n&&i.push({text:"BA",value:155})}for(var l=e?15:0,c=[],d=o()(a.map((function(t){return t.data.scout}))),u=[Math.floor(Math.floor(Math.sqrt(this.luck)+10)+.7*(t+1.6*d)+10)+l,Math.floor(Math.floor(Math.sqrt(this.luck)+10)+.6*(t+1.2*d))+l],h=[1,1],m=function(t){var e=i[t],a=u.map((function(t,a){return h[a]*Math.ceil(t)/e.value}));h[0]-=a[0],h[1]-=a[1],c.push({text:e.text,rate:a})},v=0;v<i.length;v+=1)m(v);return c}}],[{key:"getStatusFromLevel",value:function(t,e,a){var i=0;return 99===t&&e>0?i=e:e>0&&(i=Math.floor(t/99*(e-a)+a)),i}},{key:"getAccuracyValue",value:function(t,e){return Math.floor(2*Math.sqrt(t)+1.5*Math.sqrt(e))}},{key:"getAvoidValue",value:function(t,e){var a=Math.floor(t+Math.sqrt(2*e));return t>=65?Math.floor(55+2*Math.sqrt(a-65)):t>=45?Math.floor(40+3*Math.sqrt(a-40)):a}},{key:"getCIValue",value:function(t,e){return e>=50?Math.floor(65+Math.sqrt(e-50)+.8*Math.sqrt(t)):Math.floor(15+e+.75*Math.sqrt(t))}}]),t}()},cd11:function(t,e,a){"use strict";a("4811")},cd49:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),s=a("260b"),r=a("a584"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{directives:[{name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}]},[a("v-navigation-drawer",{attrs:{app:"",dark:"",width:"390",permanent:t.drawerFixed,temporary:!t.drawerFixed},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("save-data-view",{attrs:{"root-data":t.saveData,"handle-inform":t.inform,"enabled-fix-drawer":t.enabledFixDrawer,"fixed-drawer":t.setting.fixedDrawer,"handle-close":t.closeSideBar}})],1),a("v-app-bar",{attrs:{app:"",dense:"",dark:""},scopedSlots:t._u([{key:"extension",fn:function(){return[a("save-data-tab",{ref:"saveDataTab",attrs:{"save-data":t.saveData}})]},proxy:!0}])},[t.drawerFixed?t._e():a("v-app-bar-nav-icon",{on:{click:function(e){t.drawer=!t.drawer}}}),a("v-btn",{attrs:{icon:"",disabled:"/"===t.$route.path},on:{click:function(e){"/"!==t.$route.path&&t.$router.push({path:"/"})}}},[a("v-icon",[t._v("mdi-home")])],1),a("v-btn",{staticClass:"header-btn",attrs:{disabled:!t.isAirCalcPage,text:""},on:{click:function(e){return e.stopPropagation(),t.saveCurrentData.apply(null,arguments)}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-content-save")]),a("span",{staticClass:"d-none d-md-inline"},[t._v("編成")]),t._v("保存 ")],1),a("v-btn",{staticClass:"header-btn",attrs:{disabled:!t.isAirCalcPage||t.mainSaveData.isUnsaved,text:""},on:{click:function(e){return e.stopPropagation(),t.handleSaveAndRenameCurrentData.apply(null,arguments)}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-content-duplicate")]),t._v("別名保存 ")],1),a("v-btn",{staticClass:"header-btn",attrs:{disabled:!t.isAirCalcPage,text:""},on:{click:function(e){return e.stopPropagation(),t.clickedShare.apply(null,arguments)}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-share-variant")]),a("span",{staticClass:"d-none d-md-inline"},[t._v("編成")]),t._v("共有 ")],1),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"arrow-btn",attrs:{text:"",disabled:!t.isAirCalcPage||!t.enabledUndo},on:{click:t.undoClicked}},"v-btn",s,!1),i),[a("v-icon",{attrs:{small:""}},[t._v("mdi-undo-variant")])],1)]}}])},[a("span",[t._v("元に戻す")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"arrow-btn",attrs:{text:"",disabled:!t.isAirCalcPage||!t.enabledRedo},on:{click:t.redoClicked}},"v-btn",s,!1),i),[a("v-icon",{attrs:{small:""}},[t._v("mdi-redo-variant")])],1)]}}])},[a("span",[t._v("やり直す")])]),a("div",{staticClass:"no-scroll",attrs:{id:"multipurpose-textarea"}},[a("v-textarea",{attrs:{outlined:"",dense:"","hide-details":"","no-resize":"",placeholder:"デッキビルダー形式データ:{version:4,hqlv:120,f1:{s1:...",rows:"1",color:t.getTextareaColor,"append-icon":t.somethingText?"mdi-send":"","clear-icon":"mdi-close-circle",clearable:"",loading:t.readState},on:{"click:append":t.readSomethingText},model:{value:t.somethingText,callback:function(e){t.somethingText="string"===typeof e?e.trim():e},expression:"somethingText"}})],1),a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{disabled:t.isManagerPage,icon:""},on:{click:function(e){return t.$router.push({path:"/manager"})}}},"v-btn",s,!1),i),[a("v-icon",[t._v("mdi-database-cog")])],1)]}}])},[a("span",[t._v("艦娘 / 装備管理ページ")])]),a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""},on:{click:function(e){t.configDialog=!0}}},"v-btn",s,!1),i),[a("v-icon",[t._v("mdi-cog")])],1)]}}])},[a("span",[t._v("サイト設定")])])],1),a("v-main",[t._e(),t.readOnlyMode?a("div",{class:{"px-2 px-md-4":!t.isManagerPage,"px-6 px-md-8":t.isManagerPage}},[a("v-alert",{class:{"info-container":!t.isManagerPage},attrs:{border:"left",outlined:"",type:"info"}},[a("div",{staticClass:"body-2"},[t._v("URL情報より復元された艦娘在籍情報、装備所持情報が適用されています。")]),a("div",{staticClass:"d-flex body-2"},[a("div",{staticClass:"align-self-center"},[t._v("自分の登録情報に戻す場合は")]),a("v-btn",{staticClass:"mx-1",attrs:{color:"info",small:"",dark:""},on:{click:function(e){return t.resetTempData()}}},[t._v("このボタン")]),a("div",{staticClass:"align-self-center"},[t._v("を押下してください。")])],1)])],1):t._e(),a("div",{class:t.routerViewClass},[a("router-view",{on:{inform:t.inform,openSidebar:function(e){t.drawer=!0}}})],1),a("v-snackbar",{attrs:{color:t.readResultColor,top:""},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{icon:""},on:{click:function(e){t.readInform=!1}}},"v-btn",i,!1),[a("v-icon",[t._v("mdi-close")])],1)]}}]),model:{value:t.readInform,callback:function(e){t.readInform=e},expression:"readInform"}},[t._v(" "+t._s(t.readInformText)+" ")])],2),a("v-footer",{staticClass:"d-flex justify-center",attrs:{app:""}},[a("v-fab-transition",[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.isAirCalcPage,expression:"isAirCalcPage"}],staticClass:"footer-btn",attrs:{color:"grey darken-3",fab:"",small:"",dark:""},on:{click:function(e){return t.toggleMenuButton()}}},[t.showFooterBtn?a("v-icon",{attrs:{small:""}},[t._v("mdi-close")]):a("v-icon",{attrs:{small:""}},[t._v("mdi-menu")])],1)],1),a("v-tooltip",{attrs:{left:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-fab-transition",[a("v-btn",t._g(t._b({directives:[{name:"show",rawName:"v-show",value:t.showFooterBtn,expression:"showFooterBtn"}],staticClass:"footer-btn no-2 white--text",attrs:{color:"grey darken-2",fab:"",small:"",dark:"",disabled:"/"===t.$route.path},on:{click:function(e){"/"!==t.$route.path&&t.$router.push({path:"/"})}}},"v-btn",s,!1),i),[a("v-icon",{attrs:{small:""}},[t._v("mdi-home")])],1)],1)]}}])},[a("span",[t._v("トップ画面へ戻る")])]),a("v-tooltip",{attrs:{left:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-fab-transition",[a("v-btn",t._g(t._b({directives:[{name:"show",rawName:"v-show",value:t.showFooterBtn,expression:"showFooterBtn"}],staticClass:"footer-btn no-3 white--text",attrs:{color:"blue-grey",fab:"",small:"",dark:""},on:{click:function(e){return t.$router.push("manager")}}},"v-btn",s,!1),i),[a("v-icon",{attrs:{small:""}},[t._v("mdi-database-cog")])],1)],1)]}}])},[a("span",[t._v("艦娘 / 装備管理ページ")])]),a("v-tooltip",{attrs:{left:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-fab-transition",[a("v-btn",t._g(t._b({directives:[{name:"show",rawName:"v-show",value:t.showFooterBtn,expression:"showFooterBtn"}],staticClass:"footer-btn no-4 white--text",attrs:{color:"teal darken-1",fab:"",small:"",disabled:!t.isAirCalcPage||!t.enabledRedo},on:{click:function(e){return t.redoClicked()}}},"v-btn",s,!1),i),[a("v-icon",{attrs:{small:""}},[t._v("mdi-redo-variant")])],1)],1)]}}])},[a("span",[t._v("やり直す")])]),a("v-tooltip",{attrs:{left:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-fab-transition",[a("v-btn",t._g(t._b({directives:[{name:"show",rawName:"v-show",value:t.showFooterBtn,expression:"showFooterBtn"}],staticClass:"footer-btn no-5 white--text",attrs:{color:"teal",fab:"",small:"",disabled:!t.isAirCalcPage||!t.enabledUndo},on:{click:function(e){return t.undoClicked()}}},"v-btn",s,!1),i),[a("v-icon",{attrs:{small:""}},[t._v("mdi-undo-variant")])],1)],1)]}}])},[a("span",[t._v("元に戻す")])]),a("v-tooltip",{attrs:{left:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-fab-transition",[a("v-btn",t._g(t._b({directives:[{name:"show",rawName:"v-show",value:t.showFooterBtn,expression:"showFooterBtn"}],staticClass:"footer-btn no-6",attrs:{color:"green",dark:"",fab:"",small:""},on:{click:function(e){return t.clickedShare()}}},"v-btn",s,!1),i),[a("v-icon",{attrs:{small:""}},[t._v("mdi-share-variant")])],1)],1)]}}])},[a("span",[t._v("編成共有")])]),a("v-tooltip",{attrs:{left:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-fab-transition",[a("v-btn",t._g(t._b({directives:[{name:"show",rawName:"v-show",value:t.showFooterBtn,expression:"showFooterBtn"}],staticClass:"footer-btn no-7",attrs:{color:"blue",dark:"",fab:"",small:""},on:{click:function(e){return t.clickCommentButton()}}},"v-btn",s,!1),i),[a("v-icon",{attrs:{small:""}},[t._v("mdi-comment-processing")])],1)],1)]}}])},[a("span",[t._v("編成名 / 補足情報")])]),a("v-tooltip",{attrs:{left:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-fab-transition",[a("v-btn",t._g(t._b({directives:[{name:"show",rawName:"v-show",value:t.showFooterBtn,expression:"showFooterBtn"}],staticClass:"footer-btn no-8",attrs:{color:"indigo lighten-1",dark:"",fab:"",small:""},on:{click:function(e){return t.saveCurrentData()}}},"v-btn",s,!1),i),[a("v-icon",{attrs:{small:""}},[t._v("mdi-content-save")])],1)],1)]}}])},[a("span",[t._v("編成保存")])]),a("span",{staticClass:"d-md-none text-caption"},[a("span",{staticClass:"mr-2"},[t._v("要望・バグ報告:")]),a("a",{staticClass:"blue--text text--accent-1",attrs:{href:"https://odaibako.net/u/noro_006",target:"_blank"}},[t._v("お題箱")]),a("span",{staticClass:"ml-3 mr-2"},[t._v("連絡先:")]),a("a",{staticClass:"blue--text text--accent-1",attrs:{href:"https://twitter.com/noro_006",target:"_blank"}},[t._v("Twitter")]),a("span",{staticClass:"ml-3 mr-2"},[t._v("カンパ:")]),a("a",{staticClass:"blue--text text--accent-1",attrs:{href:"https://www.amazon.jp/hz/wishlist/ls/1OX9QVZF828GD?ref_=wl_share",target:"_blank"}},[t._v("こちら")])]),a("span",{staticClass:"d-none d-md-inline text-caption"},[t._v(" 本サイトに関する質問・要望・バグ報告・感想などは "),a("a",{staticClass:"blue--text text--accent-1",attrs:{href:"https://odaibako.net/u/noro_006",target:"_blank"}},[t._v("お題箱")]),t._v(" へ。その他、作者へのご連絡は "),a("a",{staticClass:"blue--text text--accent-1",attrs:{href:"https://twitter.com/noro_006",target:"_blank"}},[t._v("Twitter")]),t._v(" までお願いします。カンパ等ご支援は "),a("a",{staticClass:"blue--text text--accent-1",attrs:{href:"https://www.amazon.jp/hz/wishlist/ls/1OX9QVZF828GD?ref_=wl_share",target:"_blank"}},[t._v("こちら")]),t._v("から。 ")])],1),a("v-dialog",{attrs:{width:"1000"},on:{input:t.toggleConfigDialog},model:{value:t.configDialog,callback:function(e){t.configDialog=e},expression:"configDialog"}},[a("v-card",[a("div",{staticClass:"site-setting-container px-5 pb-3"},[a("div",{staticClass:"mt-5"},[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"body-2"},[t._v("サイトカラーテーマ")]),a("div",{staticClass:"header-divider"})]),a("div",{staticClass:"ml-3 mt-2"},[a("v-btn",{staticClass:"mr-2",class:{primary:t.isLight,secondary:!t.isLight},on:{click:function(e){return t.changeSiteTheme("light")}}},[t._v("通常")]),a("v-btn",{staticClass:"mr-2",class:{primary:t.isIce,secondary:!t.isIce},on:{click:function(e){return t.changeSiteTheme("ice")}}},[t._v("空色")]),a("v-btn",{staticClass:"mr-2",class:{primary:t.isPink,secondary:!t.isPink},on:{click:function(e){return t.changeSiteTheme("pink")}}},[t._v("桜色")]),a("v-btn",{staticClass:"mr-2",class:{primary:t.isGreen,secondary:!t.isGreen},on:{click:function(e){return t.changeSiteTheme("green")}}},[t._v("翠色")]),a("v-btn",{staticClass:"mr-2",class:{primary:t.isDark,secondary:!t.isDark},on:{click:function(e){return t.changeSiteTheme("dark")}}},[t._v("暗色")]),a("v-btn",{staticClass:"mr-2",class:{primary:t.isDeepSea,secondary:!t.isDeepSea},on:{click:function(e){return t.changeSiteTheme("deep-sea")}}},[t._v("深海")])],1),a("div",{staticClass:"d-flex mt-5"},[a("div",{staticClass:"body-2"},[t._v("装備表示UI調整")]),a("div",{staticClass:"header-divider"})]),a("div",{staticClass:"ml-3 mt-2 d-flex"},[a("v-btn",{staticClass:"mr-2",class:{primary:t.hasItemUIBorder,secondary:!t.hasItemUIBorder},on:{click:function(e){return t.toggleItemUIHasBorder()}}},[t._v(" 枠線 ")]),a("v-btn",{staticClass:"mr-2",class:{primary:t.isItemUIBold,secondary:!t.isItemUIBold},attrs:{disabled:!t.hasItemUIBorder},on:{click:function(e){return t.toggleItemUIIsBold()}}},[t._v(" 太枠 ")]),a("v-btn",{staticClass:"mr-2",class:{primary:t.isItemUIRadius,secondary:!t.isItemUIRadius},attrs:{disabled:!t.hasItemUIBorder},on:{click:function(e){return t.toggleItemUIIsRadius()}}},[t._v(" 角丸 ")]),a("div",{staticClass:"align-self-center flex-grow-1"},[t.hasItemUIBorder?t._e():a("v-divider"),a("div",{staticClass:"item-input my-0 type-6 d-flex"},[a("div",{staticClass:"align-self-center body-2 ml-2"},[t._v("24")]),a("div",{staticClass:"mx-1 item-icon"},[a("v-img",{attrs:{src:"./img/type/icon6.png",height:"30",width:"30"}})],1),a("div",{staticClass:"align-self-center body-2 flex-grow-1 text-truncate"},[t._v("さんぷる")]),a("div",{staticClass:"ml-1 align-self-center"},[a("v-btn",{attrs:{icon:"","x-small":""}},[a("v-icon",{staticClass:"text--secondary",attrs:{small:""}},[t._v("mdi-close")])],1)],1)])],1)],1),a("div",{staticClass:"d-flex mt-5"},[a("div",{staticClass:"body-2"},[t._v("未保存の編成タブを閉じる際の挙動")]),a("div",{staticClass:"header-divider"})]),a("div",{staticClass:"ml-3"},[a("div",{staticClass:"d-flex"},[a("v-checkbox",{attrs:{"hide-details":"",dense:"",label:"確認ダイアログを表示する"},model:{value:t.setting.confirmCloseTab,callback:function(e){t.$set(t.setting,"confirmCloseTab",e)},expression:"setting.confirmCloseTab"}}),a("v-spacer")],1)])]),a("div",{staticClass:"mt-5"},[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"body-2"},[t._v("装備選択時のデフォルト熟練度")]),a("div",{staticClass:"header-divider"})]),a("div",{staticClass:"ml-3"},[a("div",{staticClass:"initial-level-items"},[t._l(t.setting.planeInitialLevels,(function(e,i){return a("setting-initial-level",{key:i,attrs:{index:i,setting:t.setting}})})),a("setting-initial-level",{attrs:{index:-1,setting:t.setting}})],2)])]),a("div",[a("div",{staticClass:"d-flex mt-3"},[a("div",{staticClass:"body-2"},[t._v("装備マウスホバー時の詳細情報表示")]),a("div",{staticClass:"header-divider"})]),a("div",{staticClass:"ml-3 mt-2 d-flex"},[a("v-checkbox",{attrs:{dense:"",label:"詳細情報を表示しない"},model:{value:t.setting.disabledItemTooltip,callback:function(e){t.$set(t.setting,"disabledItemTooltip",e)},expression:"setting.disabledItemTooltip"}})],1)]),a("div",[a("div",{staticClass:"d-flex mt-3"},[a("div",{staticClass:"body-2"},[t._v("デッキビルダー形式データ読込設定")]),a("div",{staticClass:"header-divider"})]),a("div",{staticClass:"ml-3 mt-2 d-flex"},[a("v-checkbox",{attrs:{dense:"",label:"常に全艦隊データを読み込む"},model:{value:t.setting.importAllDeck,callback:function(e){t.$set(t.setting,"importAllDeck",e)},expression:"setting.importAllDeck"}})],1)]),a("div",[a("div",{staticClass:"d-flex mt-3"},[a("div",{staticClass:"body-2"},[t._v("制空計算時のシミュレーション回数")]),a("div",{staticClass:"header-divider"})]),a("div",{staticClass:"ml-3"},[a("v-alert",{staticClass:"mt-3 caption",attrs:{border:"left",outlined:"",type:"warning",dense:""}},[a("div",[t._v("数値が大きいほど計算の精度が上がりますが、")]),a("div",[t._v("計算時のパフォーマンスが低下します。")])]),a("div",{staticClass:"d-flex"},[a("v-text-field",{staticClass:"mt-0 pt-0 text-right",attrs:{type:"number",max:"100000",min:"100",rules:[t.rules.simulationCountRange]},model:{value:t.setting.simulationCount,callback:function(e){t.$set(t.setting,"simulationCount",t._n(e))},expression:"setting.simulationCount"}}),a("div",{staticClass:"ml-3 align-self-center"},[t._v("回")])],1)],1)]),a("div",[a("div",{staticClass:"d-flex mt-3"},[a("div",{staticClass:"body-2"},[t._v("編成データのバックアップ")]),a("div",{staticClass:"header-divider"})]),a("div",{staticClass:"ml-3 mt-2"},[a("div",{staticClass:"d-flex"},[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.downloadBackupFile()}}},[t._v("作成")]),a("div",{staticClass:"caption align-self-center ml-4"},[t._v("… 保存した編成データのバックアップファイルを作成します")])],1),a("div",{staticClass:"d-flex mt-3"},[a("v-btn",{staticClass:"align-self-center mr-2",attrs:{color:"success",disabled:!t.backupString},on:{click:function(e){return t.importBackupData()}}},[t._v("復元")]),a("div",{staticClass:"flex-grow-1 align-self-center mt-3"},[a("v-file-input",{attrs:{label:"復元するバックアップファイルを選択",dense:""},on:{change:t.handleFileSelect},model:{value:t.fileValue,callback:function(e){t.fileValue=e},expression:"fileValue"}})],1)],1)])])])])],1),a("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[a("v-card",{attrs:{dark:""}},[a("v-card-text",[a("div",{staticClass:"pt-2"},[t._v("マスターデータ読込中...")]),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"520"},model:{value:t.disabledIndexedDB,callback:function(e){t.disabledIndexedDB=e},expression:"disabledIndexedDB"}},[a("v-card",{staticClass:"pt-5 pb-3 px-5"},[a("v-alert",{attrs:{border:"left",dense:"",outlined:"",type:"error"}},[t._v("本ブラウザではデータ保存機能が利用できません。")]),a("div",{staticClass:"mt-2 body-2"},[t._v("お使いのブラウザはIndexedDB非対応のようです。")]),a("div",{staticClass:"body-2"},[t._v("編成、設定、艦娘/装備を含む全データは本サイトを閉じた時点で削除されます。")]),a("div",{staticClass:"body-2"},[t._v("別のブラウザのご利用をお勧めします。")]),a("v-divider",{staticClass:"my-3"}),a("div",{staticClass:"d-flex"},[a("v-btn",{staticClass:"ml-auto",attrs:{color:"secondary"},on:{click:function(e){e.stopPropagation(),t.disabledIndexedDB=!1}}},[t._v("OK")])],1)],1)],1),a("v-dialog",{attrs:{width:"800"},model:{value:t.editDialog,callback:function(e){t.editDialog=e},expression:"editDialog"}},[a("v-card",{staticClass:"pa-3"},[a("v-tabs",{on:{change:t.changeUploadTabs},model:{value:t.saveDialogTab,callback:function(e){t.saveDialogTab=e},expression:"saveDialogTab"}},[a("v-tab",{attrs:{href:"#save"}},[t._v("編成保存")]),a("v-tab",{attrs:{href:"#upload",disabled:t.disabledUpload}},[t._v("編成アップロード")])],1),a("v-divider"),a("v-tabs-items",{attrs:{touchless:!0},model:{value:t.saveDialogTab,callback:function(e){t.saveDialogTab=e},expression:"saveDialogTab"}},[a("v-tab-item",{attrs:{value:"save"}},[a("div",{staticClass:"mx-4 mt-4"},[a("v-text-field",{attrs:{dense:"",outlined:"",maxlength:"100",counter:"",label:"編成データ名"},model:{value:t.editedName,callback:function(e){t.editedName=e},expression:"editedName"}}),a("v-textarea",{staticClass:"remarks-input",attrs:{rows:"10",dense:"",outlined:"","hide-details":"",label:"補足情報"},model:{value:t.editedRemarks,callback:function(e){t.editedRemarks="string"===typeof e?e.trim():e},expression:"editedRemarks"}}),a("div",{staticClass:"d-flex mt-3"},[a("v-btn",{staticClass:"ml-auto",attrs:{color:"success",disabled:t.isNameEmpty},on:{click:function(e){return e.stopPropagation(),t.saveAndRenameCurrentData.apply(null,arguments)}}},[t._v("保存")]),a("v-btn",{staticClass:"ml-4",attrs:{color:"secondary"},on:{click:function(e){e.stopPropagation(),t.editDialog=!1}}},[t._v("戻る")])],1)],1)]),a("v-tab-item",{attrs:{value:"upload"}},[a("upload-save-data",{ref:"uploadSaveDataComp",attrs:{dataName:t.editedName,dataRemarks:t.editedRemarks,saveData:t.saveData,cancelDialog:t.closeEditDialog},on:{inform:t.inform}})],1)],1)],1)],1),a("v-dialog",{attrs:{width:"500"},model:{value:t.shareDialog,callback:function(e){t.shareDialog=e},expression:"shareDialog"}},[a("share-dialog",{ref:"shareDialog",attrs:{"handle-close":t.closeShareDialog}})],1),a("v-dialog",{attrs:{width:"760"},on:{input:t.toggleFleetSelectDialog},model:{value:t.fleetSelectDialog,callback:function(e){t.fleetSelectDialog=e},expression:"fleetSelectDialog"}},[t.selectableFleets.length>1?a("v-card",{staticClass:"px-5 py-3"},[a("div",[t._v("艦隊選択")]),a("v-divider",{staticClass:"my-3"}),a("div",{staticClass:"body-2"},[t._v("取り込む艦隊を選択し、取り込みボタンを押してください。")]),t._l(t.selectableFleets,(function(e,i){return a("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],key:"fleet_"+i,staticClass:"selectable-fleet-container",class:{selected:e.selected},on:{click:function(t){t.stopPropagation(),e.selected=!e.selected}}},[a("div",{staticClass:"d-flex mb-1"},[a("div",[e.selected?a("v-icon",{attrs:{color:"info"}},[t._v("mdi-checkbox-outline")]):a("v-icon",{attrs:{color:"secondary"}},[t._v("mdi-checkbox-blank-outline")])],1),a("div",{staticClass:"align-self-end body-2 ml-3"},[t._v("第"+t._s(i+1)+"艦隊")]),a("div",{staticClass:"align-self-end caption ml-auto"},[t._v("支援: "+t._s(e.supportTypeName))])]),a("div",{staticClass:"d-flex flex-wrap"},t._l(e.fleet.ships,(function(e,i){return a("div",{key:"ship_"+i},[e.data.id?a("v-img",{attrs:{src:"./img/ship/"+e.data.id+".png",height:"25",width:"100"}}):t._e()],1)})),0)])})),a("div",{staticClass:"d-flex mt-2"},[a("div",[a("v-checkbox",{attrs:{label:"常に全艦隊取り込む","hide-details":"",dense:""},model:{value:t.setting.importAllDeck,callback:function(e){t.$set(t.setting,"importAllDeck",e)},expression:"setting.importAllDeck"}}),a("div",{staticClass:"caption ml-1"},[t._v("チェックすると、次回以降、常に全ての艦隊を取り込むようになります。")]),a("div",{staticClass:"caption ml-1"},[t._v("この設定は、設定(サイト右上"),a("v-icon",{attrs:{small:""}},[t._v("mdi-cog")]),t._v(")からいつでも変更できます。")],1)],1),a("v-btn",{staticClass:"ml-auto align-self-end",attrs:{color:"info",disabled:!t.selectedAnyFleet},on:{click:function(e){return e.stopPropagation(),t.importSelectedFleet()}}},[t._v("取込")]),a("v-btn",{staticClass:"ml-4 align-self-end",attrs:{color:"secondary"},on:{click:function(e){e.stopPropagation(),t.fleetSelectDialog=!1}}},[t._v("戻る")])],1)],2):t._e()],1)],1)},o=[],l=a("1da1"),c=(a("96cf"),a("8a79"),a("cc71"),a("d3b7"),a("ac1f"),a("841c"),a("b64b"),a("a15b"),a("1276"),a("d81d"),a("4de4"),a("b0c0"),a("7db0"),a("d9e2"),a("fb6a"),a("dca8"),a("e9c4"),a("21a6")),d=a("0644"),u=a.n(d),h=a("fcf4"),m=a("5802"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-sheet",{attrs:{dark:""}},[a("div",{staticClass:"d-flex header"},[t.fixedDrawer?t._e():a("div",[a("v-btn",{attrs:{icon:"",large:""},on:{click:function(e){return t.handleClose()}}},[a("v-icon",[t._v("mdi-menu")])],1)],1),a("div",{staticClass:"align-self-center"},[a("v-tooltip",{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("div",t._g(t._b({directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"home d-flex px-1 flex-grow-1",on:{click:function(e){return t.openGitHub()}}},"div",s,!1),i),[a("v-icon",[t._v("mdi-github")]),a("div",{staticClass:"align-self-center mx-1"},[t._v("制空権シミュレータ")]),a("div",{staticClass:"align-self-center caption"},[t._v("v"+t._s(t.$store.state.siteVersion))])],1)]}}])},[a("span",[t._v("GitHub Repository")])])],1),a("div",{staticClass:"ml-auto btn-icons"},[a("v-tooltip",{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:"",small:""},on:{click:function(e){return e.stopPropagation(),t.addNewFile.apply(null,arguments)}}},"v-btn",s,!1),i),[a("v-icon",{attrs:{color:"blue lighten-3"}},[t._v("mdi-note-plus")])],1)]}}])},[a("span",[t._v("新しい編成を作成")])]),a("v-tooltip",{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:"",small:""},on:{click:function(e){return e.stopPropagation(),t.addNewDirectory.apply(null,arguments)}}},"v-btn",s,!1),i),[a("v-icon",{attrs:{color:"yellow lighten-1"}},[t._v("mdi-folder-plus")])],1)]}}])},[a("span",[t._v("新しいフォルダーを作成")])]),a("v-tooltip",{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:"",small:""},on:{click:function(e){return e.stopPropagation(),t.openAllDirectory.apply(null,arguments)}}},"v-btn",s,!1),i),[a("v-icon",{attrs:{color:"orange lighten-3"}},[t._v("mdi-expand-all")])],1)]}}])},[a("span",[t._v("フォルダーを全て開く")])]),a("v-tooltip",{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:"",small:""},on:{click:function(e){return e.stopPropagation(),t.closeAllDirectory.apply(null,arguments)}}},"v-btn",s,!1),i),[a("v-icon",{attrs:{color:"grey"}},[t._v("mdi-collapse-all")])],1)]}}])},[a("span",[t._v("フォルダーを全て閉じる")])]),a("v-tooltip",{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({directives:[{name:"show",rawName:"v-show",value:t.enabledFixDrawer,expression:"enabledFixDrawer"}],attrs:{color:"grey lighten-2",icon:"",small:""},on:{click:function(e){return t.toggleFixDrawer()}}},"v-btn",s,!1),i),[t.fixedDrawer?a("v-icon",[t._v("mdi-pin")]):a("v-icon",[t._v("mdi-pin-outline")])],1)]}}])},[t.fixedDrawer?a("span",[t._v("サイドバー固定解除")]):a("span",[t._v("サイドバー固定")])])],1)]),a("v-divider"),a("div",{staticClass:"item-container"},t._l(t.rootData.childItems,(function(e,i){return a("save-item",{key:i,attrs:{value:e,index:i,"handle-delete":t.deleteChild}})})),1)],1)},f=[],p=a("07bc"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"save-list",class:{"disabled-drag":t.value.isUnsaved,highlight:t.value.highlight},attrs:{draggable:!t.value.isUnsaved},on:{dragover:function(t){t.preventDefault()},drop:function(e){return e.stopPropagation(),t.dropItem(e)},dragleave:function(e){return e.stopPropagation(),t.dragLeave(e)},dragenter:function(e){return e.stopPropagation(),t.dragEnter(e)},dragstart:function(e){return e.stopPropagation(),t.dragStart(e)},dragend:function(e){return e.stopPropagation(),t.dragEnd(e)}}},[a("div",{directives:[{name:"ripple",rawName:"v-ripple"},{name:"click-outside",rawName:"v-click-outside",value:t.onClickOutside,expression:"onClickOutside"}],staticClass:"save-list-item pl-1",class:{selected:t.value.selected},on:{click:t.itemClicked}},[t.value.isDirectory&&!t.value.isOpen?a("v-icon",{attrs:{color:"yellow lighten-1",small:""}},[t._v("mdi-folder")]):t.value.isDirectory&&t.value.isOpen?a("v-icon",{attrs:{color:"yellow lighten-1",small:""}},[t._v("mdi-folder-open")]):t.value.isUnsaved?a("v-icon",{attrs:{small:""}},[t._v("mdi-file-question")]):t.value.isActive?a("v-icon",{attrs:{small:"",color:"green lighten-3"}},[t._v("mdi-file-eye")]):a("v-icon",{attrs:{small:"",color:"blue lighten-3"}},[t._v("mdi-file")]),a("div",{staticClass:"item-name text-truncate"},[t._v(t._s(t.value.name))]),a("div",{staticClass:"ml-auto file-action-buttons"},[a("v-tooltip",{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[t.value.isUnsaved||t.value.isDirectory?t._e():a("v-btn",t._g(t._b({attrs:{icon:"",small:""},on:{click:function(e){return e.stopPropagation(),t.copyAndOpen.apply(null,arguments)}}},"v-btn",s,!1),i),[a("v-icon",{attrs:{small:""}},[t._v("mdi-content-duplicate")])],1)]}}])},[a("span",[t._v("複製して開く")])]),a("v-tooltip",{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[t.value.isUnsaved?t._e():a("v-btn",t._g(t._b({attrs:{icon:"",small:"",disabled:t.value.isReadonly},on:{click:function(e){return e.stopPropagation(),t.showEditDialog.apply(null,arguments)}}},"v-btn",s,!1),i),[a("v-icon",{attrs:{small:""}},[t._v("mdi-file-document-edit-outline")])],1)]}}])},[a("span",[t._v("情報を変更")])]),a("v-tooltip",{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:"",small:"",disabled:t.value.isReadonly},on:{click:function(e){e.stopPropagation(),t.deleteConfirmDialog=!0}}},"v-btn",s,!1),i),[a("v-icon",{attrs:{small:""}},[t._v("mdi-trash-can-outline")])],1)]}}])},[a("span",[t._v("削除")])])],1)],1),t.value.isOpen?a("div",t._l(t.value.childItems,(function(e,i){return a("div",{key:"item_"+i,staticClass:"d-flex pl-1"},[a("div",{staticClass:"depth-line",class:{"is-last":i===t.value.childItems.length-1}},[a("div",{staticClass:"depth-file-line"})]),a("div",{staticClass:"flex-grow-1"},[a("save-item",{attrs:{value:e,index:i,"handle-delete":t.deleteChild}})],1)])})),0):t._e(),a("v-dialog",{attrs:{transition:"scroll-x-transition",width:"400"},model:{value:t.deleteConfirmDialog,callback:function(e){t.deleteConfirmDialog=e},expression:"deleteConfirmDialog"}},[a("v-card",{staticClass:"pa-3"},[a("div",{staticClass:"ma-4"},[a("div",[t._v("本当にこの"),t.value.isDirectory?a("span",[t._v("フォルダー")]):a("span",[t._v("データ")]),t._v("を削除しますか？")]),t.value.isDirectory?a("div",{staticClass:"caption mt-2"},[t._v("※フォルダー内の全データ、フォルダーが削除されます。")]):t._e()]),a("v-divider",{staticClass:"my-2"}),a("div",{staticClass:"d-flex"},[a("v-btn",{staticClass:"ml-auto",attrs:{color:"red",dark:""},on:{click:function(e){return e.stopPropagation(),t.deleteData.apply(null,arguments)}}},[t._v("削除")]),a("v-btn",{staticClass:"ml-4",attrs:{color:"secondary"},on:{click:function(e){e.stopPropagation(),t.deleteConfirmDialog=!1}}},[t._v("戻る")])],1)],1)],1),a("v-dialog",{attrs:{transition:"scroll-x-transition",width:t.value.isDirectory?600:800},model:{value:t.editDialog,callback:function(e){t.editDialog=e},expression:"editDialog"}},[a("v-card",{staticClass:"pa-3"},[a("div",{staticClass:"mx-1 mt-3"},[a("v-text-field",{attrs:{dense:"",outlined:"",maxlength:"100",counter:"",label:t.value.isDirectory?"フォルダー名":"編成データ名"},model:{value:t.editedName,callback:function(e){t.editedName=e},expression:"editedName"}}),t.value.isDirectory?t._e():a("v-textarea",{staticClass:"remarks-input",attrs:{rows:"10",dense:"",outlined:"","hide-details":"",label:"補足情報"},model:{value:t.editedRemarks,callback:function(e){t.editedRemarks="string"===typeof e?e.trim():e},expression:"editedRemarks"}}),a("div",{staticClass:"d-flex mt-2"},[a("v-btn",{staticClass:"ml-auto",attrs:{color:"success",disabled:t.isNameEmpty},on:{click:function(e){return e.stopPropagation(),t.commitName.apply(null,arguments)}}},[t._v("更新")])],1)],1)])],1),t.enabledTooltip?a("v-tooltip",{attrs:{color:"black",bottom:"",right:"","position-x":t.tooltipX,"position-y":t.tooltipY},model:{value:t.enabledTooltip,callback:function(e){t.enabledTooltip=e},expression:"enabledTooltip"}},[a("save-data-tooltip",{model:{value:t.tooltipData,callback:function(e){t.tooltipData=e},expression:"tooltipData"}})],1):t._e()],1)},b=[],A=(a("a9e3"),a("498a"),a("caad"),a("2532"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"py-2"},[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"data-name"},[t._v(t._s(t.value.name))]),t.editDate?a("div",{staticClass:"ml-auto edited-date"},[t._v("更新日時: "+t._s(t.editDate))]):t._e()]),t.value.isDirectory?t._e():[t.ships1.length?a("div",{staticClass:"mb-2"},[a("v-divider",{staticClass:"mb-2"}),a("div",{staticClass:"caption info--text"},[t._v("第1艦隊")]),a("div",{staticClass:"d-flex"},t._l(t.ships1,(function(t,e){return a("div",{key:"ship1_"+e},[a("v-img",{attrs:{src:"./img/ship/"+t.data.id+".png",height:"30",width:"120"}})],1)})),0)],1):t._e(),t.ships2.length?a("div",{staticClass:"mb-2"},[a("v-divider",{staticClass:"mb-2"}),a("div",{staticClass:"caption success--text"},[t._v("第2艦隊")]),a("div",{staticClass:"d-flex"},t._l(t.ships2,(function(t,e){return a("div",{key:"ship2_"+e},[a("v-img",{attrs:{src:"./img/ship/"+t.data.id+".png",height:"30",width:"120"}})],1)})),0)],1):t._e(),t.value.remarks?a("div",{staticClass:"remarks mt-2"},[t._v(t._s(t.value.remarks))]):t._e()]],2)}),y=[],k=i["default"].extend({name:"SaveDataTooltip",props:{value:{type:p["a"],required:!0}},data:function(){return{ships1:[],ships2:[]}},computed:{editDate:function(){return this.value.editedDate?m["a"].formatDate(new Date(this.value.editedDate),"yyyy/MM/dd HH:mm:ss"):""}},mounted:function(){if(!this.value.isDirectory){var t=this.$store.state.items,e=this.$store.state.ships,a=this.$store.getters.getEnemies,i=this.value.loadManagerData(t,e,a);this.ships1=i.fleetInfo.fleets[0].ships.filter((function(t){return t.data.id>0})),i.fleetInfo.isUnion&&(this.ships2=i.fleetInfo.fleets[1].ships.filter((function(t){return t.data.id>0})))}}}),w=k,S=(a("ba71"),a("2877")),D=a("6544"),I=a.n(D),C=a("ce7e"),x=a("adda"),_=Object(S["a"])(w,A,y,!1,null,"d317148e",null),R=_.exports;I()(_,{VDivider:C["a"],VImg:x["a"]});var T=i["default"].extend({name:"SaveItem",components:{SaveDataTooltip:R},props:{value:{type:p["a"],required:!0},index:{type:Number,required:!0},handleDelete:{type:Function,required:!0}},data:function(){return{editDialog:!1,deleteConfirmDialog:!1,editedName:"",editedRemarks:"",enabledTooltip:!1,tooltipTimer:void 0,tooltipData:new p["a"],tooltipX:0,tooltipY:0}},computed:{saveData:function(){return this.value},isNameEmpty:function(){return this.editedName.length<=0}},updated:function(){var t=this;this.value.highlight&&setTimeout((function(){var e=t.$store.state.saveData;e.clearHighlight(),t.$store.dispatch("updateSaveData",e)}),1600)},methods:{handleUpdateSaveData:function(){var t=this.$store.state.saveData;t.sortChild(),this.$store.dispatch("updateSaveData",t)},itemClicked:function(){var t=this.saveData;if(t.selected=!0,!t.isDirectory){if(t.isActive&&t.isMain)return;var e=this.$store.state.saveData;return e.disabledMain(),t.isActive=!0,t.isMain=!0,this.$store.dispatch("setMainSaveData",t),this.handleUpdateSaveData(),void(this.$route.path.endsWith("/aircalc")||this.$router.push("aircalc"))}t.isOpen=!t.isOpen},copyAndOpen:function(){var t=this.saveData;if(!t.isDirectory){var e=this.$store.state.saveData;e.disabledMain();var a=new p["a"];return a.name="".concat(t.name,"_コピー"),a.manager=t.manager,a.isActive=!0,a.isMain=!0,e.childItems.push(a),this.$store.dispatch("setMainSaveData",a),this.handleUpdateSaveData(),void(this.$route.path.endsWith("/aircalc")||this.$router.push("aircalc"))}t.isOpen=!t.isOpen},onClickOutside:function(){this.saveData.selected=!1},deleteData:function(){this.deleteConfirmDialog=!1,this.handleDelete(this.index)},deleteChild:function(t){this.value.childItems=this.value.childItems.filter((function(e,a){return a!==t})),this.handleUpdateSaveData();var e=this.$store.state.saveData;e.getMainData()||this.$store.dispatch("setMainSaveData",void 0)},showEditDialog:function(){this.editedName=this.value.name,this.editedRemarks=this.value.remarks?this.value.remarks:"",this.editDialog=!0},commitName:function(){this.editDialog=!1,this.value.name=this.editedName.trim(),this.value.remarks=this.editedRemarks?this.editedRemarks.trim():"",this.value.editedDate=Date.now(),this.handleUpdateSaveData()},dragStart:function(t){this.clearTooltip();var e=t.target;e.style.opacity="0.6",e.id="dragging-item",this.$store.dispatch("setDraggingSaveData",this.value);for(var a=document.getElementsByClassName("save-list"),i=0;i<a.length;i+=1)a[i].classList.add("dragging")},dragLeave:function(t){t.target.style.backgroundColor=""},dragEnter:function(t){var e=document.getElementById("dragging-item"),a=t.target;e&&a&&this.value.isDirectory&&(a.style.backgroundColor="rgba(20, 160, 255, 0.8)")},dropItem:function(t){var e=document.getElementById("dragging-item");if(e){var a=t.target;if(a.style.backgroundColor="",!a.id){var i=this.$store.state.draggingSaveData,s=i.getAllDataId();this.value.isDirectory&&!s.includes(this.value.id)&&(this.value.childItems.push(i),e.classList.add("move-ok"))}}},dragEnd:function(t){var e=t.target;e.style.opacity="1",e.id="",e.classList.contains("move-ok")&&(this.deleteData(),e.classList.remove("move-ok"));for(var a=document.getElementsByClassName("save-list"),i=0;i<a.length;i+=1)a[i].classList.remove("dragging")},bootTooltip:function(t,e){var a,i=this;if(!t.isDirectory){var s=null===(a=e.target.closest(".save-list"))||void 0===a?void 0:a.getElementsByClassName("item-name")[0];this.tooltipTimer=window.setTimeout((function(){var e=s.getBoundingClientRect();i.tooltipX=e.x,i.tooltipY=e.y+e.height+30,i.tooltipData=t,i.enabledTooltip=!0}),200)}},clearTooltip:function(){this.enabledTooltip=!1,window.clearTimeout(this.tooltipTimer)}}}),P=T,B=(a("cd11"),a("8336")),E=a("b0af"),M=a("169a"),O=a("132d"),L=a("8654"),F=a("a844"),N=a("3a2f"),U=a("269a"),q=a.n(U),H=a("a293"),V=a("5607"),j=Object(S["a"])(P,g,b,!1,null,"ba1ad6d4",null),$=j.exports;I()(j,{VBtn:B["a"],VCard:E["a"],VDialog:M["a"],VDivider:C["a"],VIcon:O["a"],VTextField:L["a"],VTextarea:F["a"],VTooltip:N["a"]}),q()(j,{ClickOutside:H["a"],Ripple:V["a"]});var K=i["default"].extend({components:{SaveItem:$},name:"SaveDataView",props:{rootData:{type:p["a"],required:!0},handleInform:{type:Function,required:!0},enabledFixDrawer:{type:Boolean,default:!1},fixedDrawer:{type:Boolean,default:!1},handleClose:{type:Function,required:!0}},methods:{addNewFile:function(){var t=new p["a"];t.name="新規データ",t.isUnsaved=!1,this.addNewSaveData(t)},addNewDirectory:function(){var t=new p["a"];t.name="新しいフォルダー",t.isDirectory=!0,t.isUnsaved=!1,this.addNewSaveData(t),this.handleInform("新しいフォルダーを作成しました")},addNewSaveData:function(t){for(var e=this.rootData.childItems,a=0;a<e.length;a+=1)if(e[a].addNewFileToSelectedData(t))return this.$store.dispatch("updateSaveData",this.rootData),void this.handleInform("新しい".concat(t.isDirectory?"フォルダー":"編成","を作成しました。"));var i=this.rootData.childItems.find((function(t){return t.isDirectory}));i&&(t.isDirectory||(t.name=i.getNewSaveDataName()),i.isOpen=!0,i.childItems.push(t),i.sortChild(),this.$store.dispatch("updateSaveData",this.rootData),this.handleInform("新しい".concat(t.isDirectory?"フォルダー":"編成","を作成しました。")))},openAllDirectory:function(){this.rootData.openDirectory()},closeAllDirectory:function(){this.rootData.closeDirectory()},deleteChild:function(t){this.rootData.childItems=this.rootData.childItems.filter((function(e,a){return a!==t})),this.handleInform("削除が完了しました。"),this.$store.dispatch("updateSaveData",this.rootData)},openGitHub:function(){window.open("https://github.com/noro6/kc-web/","_blank")},toggleFixDrawer:function(){var t=this.$store.state.siteSetting;t.fixedDrawer=!t.fixedDrawer,this.$store.dispatch("updateSetting",t)}}}),J=K,W=(a("30e9"),a("8dd9")),G=Object(S["a"])(J,v,f,!1,null,"0c26251c",null),Y=G.exports;I()(G,{VBtn:B["a"],VDivider:C["a"],VIcon:O["a"],VSheet:W["a"],VTooltip:N["a"]}),q()(G,{Ripple:V["a"]});var z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"active-tab-list"},[a("draggable",{staticClass:"d-flex",attrs:{animation:"150",handle:".drag-tab-handle"}},[t._l(t.viewData,(function(e,i){return a("div",{key:i,staticClass:"tab-item",class:{active:e.isMain},on:{mousedown:function(a){return"button"in a&&1!==a.button?null:t.handleCloseTab(e,a)},click:function(a){return t.clickSaveData(e)}}},[a("div",{staticClass:"drag-tab-handle tab-item-icon"},[e.isUnsaved?a("v-icon",{attrs:{small:""}},[t._v("mdi-file-question")]):a("v-icon",{attrs:{color:"green lighten-3",small:""}},[t._v("mdi-file")])],1),a("v-tooltip",{attrs:{bottom:"",color:"black","open-delay":"300"},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on,r=i.attrs;return[a("div",t._g(t._b({staticClass:"tab-item-name text-truncate"},"div",r,!1),s),[t._v(t._s(e.name))])]}}],null,!0)},[a("span",[t._v(t._s(e.name))])]),a("div",{staticClass:"ml-auto btn-close",class:{edited:e.isEdited&&!e.isUnsaved}},[a("v-btn",{attrs:{icon:"","x-small":""},on:{click:function(a){return a.stopPropagation(),t.handleCloseTab(e,a)}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-close")])],1)],1)],1)})),a("div",{staticClass:"tab-add-button"},[a("v-btn",{attrs:{icon:"",small:""},on:{click:function(e){return e.stopPropagation(),t.addNewFile.apply(null,arguments)}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-plus")])],1)],1)],2),a("v-dialog",{attrs:{transition:"scroll-x-transition",width:"520"},model:{value:t.deleteConfirmDialog,callback:function(e){t.deleteConfirmDialog=e},expression:"deleteConfirmDialog"}},[a("v-card",{staticClass:"pa-3"},[a("div",{staticClass:"mx-4 mt-4"},[a("div",{staticClass:"body-2"},[t._v("未保存の変更内容がありますが、このまま編成タブを閉じますか？")]),a("div",{staticClass:"mt-3 caption"},[t._v(" 戻って保存するには、画面上部の「"),a("v-icon",{attrs:{small:""}},[t._v("mdi-content-save")]),t._v("編成保存」を押してください。 ")],1),a("div",{staticClass:"caption"},[t._v("変更内容を破棄してタブを閉じる場合は、このままOKボタンを押してください。")])]),a("v-divider",{staticClass:"mt-4"}),a("div",{staticClass:"d-flex mt-1"},[a("div",{staticClass:"ml-4"},[a("v-checkbox",{attrs:{label:"次回以降表示しない","hide-details":"",dense:""},model:{value:t.disabledConfirm,callback:function(e){t.disabledConfirm=e},expression:"disabledConfirm"}}),a("div",{staticClass:"caption ml-1"},[t._v("設定(サイト右上"),a("v-icon",{attrs:{small:""}},[t._v("mdi-cog")]),t._v(")からいつでも変更できます。")],1)],1),a("v-btn",{staticClass:"ml-auto align-self-end",attrs:{color:"red",dark:""},on:{click:function(e){return e.stopPropagation(),t.closeTab(t.deleteConfirmData)}}},[t._v("続行")]),a("v-btn",{staticClass:"ml-4 align-self-end",attrs:{color:"secondary"},on:{click:function(e){e.stopPropagation(),t.deleteConfirmDialog=!1}}},[t._v("戻る")])],1)],1)],1),a("v-dialog",{attrs:{transition:"scroll-x-transition",width:"800"},model:{value:t.editDialog,callback:function(e){t.editDialog=e},expression:"editDialog"}},[a("v-card",{staticClass:"pa-3"},[a("div",{staticClass:"mx-4 mt-4"},[a("v-text-field",{attrs:{dense:"",outlined:"",maxlength:"100",counter:"",label:"編成データ名"},model:{value:t.editedName,callback:function(e){t.editedName="string"===typeof e?e.trim():e},expression:"editedName"}}),a("v-textarea",{staticClass:"remarks-input",attrs:{rows:"10",outlined:"",dense:"","hide-details":"",label:"補足情報"},model:{value:t.editedRemarks,callback:function(e){t.editedRemarks="string"===typeof e?e.trim():e},expression:"editedRemarks"}}),a("div",{staticClass:"d-flex mt-3"},[a("v-btn",{staticClass:"ml-auto",attrs:{color:"success",disabled:t.isNameEmpty},on:{click:function(e){return e.stopPropagation(),t.commitName.apply(null,arguments)}}},[t._v("更新")])],1)],1)])],1)],1)},X=[],Z=(a("99af"),a("c740"),a("b76a")),Q=a.n(Z),tt=i["default"].extend({name:"SaveDataView",components:{draggable:Q.a},props:{saveData:{type:p["a"],required:!0}},data:function(){return{deleteConfirmDialog:!1,editDialog:!1,editedName:"",editedRemarks:"",editedFile:void 0,deleteConfirmData:void 0,disabledConfirm:!1}},computed:{viewData:function(){for(var t=[],e=this.saveData.childItems,a=0;a<e.length;a+=1){var i=e[a].fetchActiveData();i&&(t=t.concat(i))}return t},isNameEmpty:function(){return this.editedName.length<=0},mainData:function(){return this.saveData.getMainData()}},methods:{showNameEditDialog:function(t){this.editedFile=t,this.editedName=t.name,this.editedRemarks=t.remarks,this.editDialog=!0},handleCloseTab:function(t,e){e.stopPropagation(),e.preventDefault();var a=this.$store.state.siteSetting;if(a.confirmCloseTab&&t.isEdited)return this.deleteConfirmDialog=!0,void(this.deleteConfirmData=t);this.closeTab(t)},closeTab:function(t){if(t){if(this.deleteConfirmDialog=!1,this.deleteConfirmData=void 0,t.isActive=!1,t.tempData=[],t.tempIndex=-1,t.isMain){t.isMain=!1;var e=this.saveData.fetchActiveData();if(e.length){var a=e[e.length-1];a.isMain=!0,this.$store.dispatch("setMainSaveData",a)}}if(t.isUnsaved){var i=this.saveData.childItems.findIndex((function(e){return e===t}));i&&(this.saveData.childItems=this.saveData.childItems.filter((function(t,e){return e!==i})))}var s=this.$store.state.siteSetting;this.disabledConfirm&&s.confirmCloseTab&&(s.confirmCloseTab=!1,this.$store.dispatch("updateSetting",s)),this.$store.dispatch("updateSaveData",this.saveData),this.saveData.getMainData()||"/aircalc"!==this.$route.path||this.$router.push("/")}},commitName:function(){this.editedFile&&(this.editedFile.name=this.editedName,this.editedFile.remarks=this.editedRemarks,this.editedFile.editedDate=Date.now(),this.editedFile=void 0),this.editDialog=!1,this.$store.dispatch("updateSaveData",this.saveData)},clickSaveData:function(t){t.isMain?this.showNameEditDialog(t):(this.saveData.disabledMain(),t.isMain=!0,this.$store.dispatch("setMainSaveData",t),this.$route.path.endsWith("/aircalc")||this.$router.push("aircalc"))},addNewFile:function(){var t=new p["a"];t.name=this.saveData.getNewSaveDataName(),t.isActive=!0,this.saveData.childItems.push(t),this.clickSaveData(t)}}}),et=tt,at=(a("7d04"),a("ac7c")),it=Object(S["a"])(et,z,X,!1,null,"d401fc2e",null),st=it.exports;I()(it,{VBtn:B["a"],VCard:E["a"],VCheckbox:at["a"],VDialog:M["a"],VDivider:C["a"],VIcon:O["a"],VTextField:L["a"],VTextarea:F["a"],VTooltip:N["a"]});var rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"pa-2"},[a("div",{staticClass:"d-flex pb-1 pr-2"},[a("div",{staticClass:"align-self-center ml-3"},[t._v("編成共有")]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:t.close}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("v-divider"),a("div",{staticClass:"pa-4"},[a("div",{staticClass:"mb-8 mt-4"},[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.createdURL,expression:"!createdURL"}],staticClass:"white--text",attrs:{block:"",color:"teal",loading:t.loadingURL,disabled:t.loadingURL},on:{click:function(e){return t.createURL()}}},[a("v-icon",[t._v("mdi-web")]),t._v("共有URLを生成 ")],1),a("v-text-field",{directives:[{name:"show",rawName:"v-show",value:t.createdURL,expression:"createdURL"}],staticClass:"mt-0 ml-1",attrs:{id:"createdURL",readonly:"",dense:"","append-icon":"mdi-content-copy",hint:t.copiedURLHint},on:{"click:append":t.copyURL,blur:t.clearURLHint},model:{value:t.createdURL,callback:function(e){t.createdURL=e},expression:"createdURL"}})],1),a("div",{staticClass:"my-8"},[a("v-btn",{staticClass:"white--text",attrs:{block:"",color:"blue",loading:t.loadingTwitter,disabled:t.loadingTwitter},on:{click:function(e){return t.shareTwitter()}}},[a("v-icon",[t._v("mdi-twitter")]),t._v("Twitterで共有 ")],1)],1),a("div",{staticClass:"my-8"},[a("v-btn",{staticClass:"white--text",attrs:{block:"",color:"blue darken-4",disabled:!t.deckBuilder,href:"https://jervis.vercel.app/?predeck="+encodeURIComponent(t.deckBuilder),target:"_blank"}},[a("v-icon",[t._v("mdi-anchor")]),t._v("作戦室で開く ")],1)],1),a("div",{staticClass:"my-8"},[a("v-btn",{attrs:{block:"",color:"success",disabled:!t.deckBuilder,href:"http://kancolle-calc.net/deckbuilder.html?predeck="+encodeURIComponent(t.deckBuilder),target:"_blank"}},[t._v(" デッキビルダーで開く ")])],1),a("div",{staticClass:"mt-10"},[a("v-textarea",{staticClass:"mt-0 no-scroll",attrs:{readonly:"","append-icon":"mdi-content-copy","no-resize":"",rows:"1",label:"デッキビルダー形式",id:"deck-builder-text",hint:t.copiedDeckHint},on:{"click:append":t.copyDeckBuilder,blur:t.clearDeckHint},model:{value:t.deckBuilder,callback:function(e){t.deckBuilder=e},expression:"deckBuilder"}})],1)])],1)},nt=[],ot=a("ce66"),lt=i["default"].extend({name:"ShareDialog",props:{handleClose:{type:Function,required:!0}},data:function(){return{loadingURL:!1,loadingTwitter:!1,createdURL:"",copiedURLHint:"",copiedDeckHint:""}},computed:{deckBuilder:function(){var t=this.$store.state.mainSaveData;if(!t)return"";var e=t.tempData[t.tempIndex];return e?m["a"].createDeckBuilderToString(e):""},jervisDeckBuilder:function(){var t=this.$store.state.mainSaveData;if(!t)return"";var e=t.tempData[t.tempIndex];return e?m["a"].createDeckBuilderForJervis(t.name,e):""}},methods:{close:function(){this.handleClose()},createURL:function(){var t=this;this.loadingURL=!0;var e=this.getLongSaveDataURL();ot["a"].getShortURL(e).then((function(e){t.createdURL=e||"URLの発行に失敗しました。",t.loadingURL=!1}))},shareTwitter:function(){var t=this;this.loadingTwitter=!0;var e=this.getLongSaveDataURL();ot["a"].getShortURL(e).then((function(e){e&&window.open("https://twitter.com/share?url=".concat(e)),t.loadingTwitter=!1}))},copyURL:function(){var t=document.getElementById("createdURL");t.select(),document.execCommand("copy"),this.copiedURLHint="URLがコピーされました。"},copyDeckBuilder:function(){var t=document.getElementById("deck-builder-text");t.select(),document.execCommand("copy"),this.copiedDeckHint="コピーされました。"},clearURLHint:function(){this.copiedURLHint=""},clearDeckHint:function(){this.copiedDeckHint=""},getLongSaveDataURL:function(){var t=this.$store.state.mainSaveData;if(!t||!t.tempData[t.tempIndex])return"";var e=t.createURLSaveDataString();return e?"".concat(document.location.protocol,"//").concat(document.location.host).concat(document.location.pathname,"?data=").concat(e):""}}}),ct=lt,dt=(a("35e4"),a("2fa4")),ut=Object(S["a"])(ct,rt,nt,!1,null,"0a126745",null),ht=ut.exports;I()(ut,{VBtn:B["a"],VCard:E["a"],VDivider:C["a"],VIcon:O["a"],VSpacer:dt["a"],VTextField:L["a"],VTextarea:F["a"]});var mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mx-4 mt-4"},[a("div",{staticClass:"body-2 mt-2 mb-5"},[t._v("『トップページ > みんなの編成』ページにて公開される編成をアップロードできます。")]),a("v-form",{ref:"uploadForm"},[a("v-text-field",{attrs:{dense:"",outlined:"",counter:"100",label:"編成データ名",rules:t.nameRules,required:""},model:{value:t.editedName,callback:function(e){t.editedName=e},expression:"editedName"}}),a("v-textarea",{staticClass:"remarks-input mt-2",attrs:{rows:"8",dense:"",outlined:"",label:"補足情報",required:"",rules:t.remarksRules},model:{value:t.editedRemarks,callback:function(e){t.editedRemarks="string"===typeof e?e.trim():e},expression:"editedRemarks"}}),a("div",{staticClass:"d-flex mt-2"},[a("div",{staticClass:"flex-grow-1"},[a("v-select",{attrs:{dense:"",outlined:"","hide-details":"",items:t.areaItems,label:"海域","menu-props":{maxHeight:"600px"}},model:{value:t.area,callback:function(e){t.area=e},expression:"area"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isEvent,expression:"isEvent"}],staticClass:"ml-5"},[a("v-select",{attrs:{dense:"",outlined:"","hide-details":"",items:t.levelItems,label:"難易度"},model:{value:t.level,callback:function(e){t.level=e},expression:"level"}})],1)]),a("div",{staticClass:"mt-5"},[a("v-text-field",{attrs:{rules:t.userNameRules,dense:"",outlined:"",counter:"20",label:"投稿者"},model:{value:t.uploadUserName,callback:function(e){t.uploadUserName=e},expression:"uploadUserName"}})],1)],1),a("div",{staticClass:"d-flex"},[a("v-btn",{staticClass:"ml-auto",attrs:{color:"primary"},on:{click:function(e){return e.stopPropagation(),t.validateUpload.apply(null,arguments)}}},[t._v("アップロード")]),a("v-btn",{staticClass:"ml-4",attrs:{color:"secondary"},on:{click:function(e){return e.stopPropagation(),t.cancelDialog()}}},[t._v("戻る")])],1),a("v-dialog",{attrs:{transition:"scroll-x-transition",width:"600"},model:{value:t.uploadConfirmDialog,callback:function(e){t.uploadConfirmDialog=e},expression:"uploadConfirmDialog"}},[a("v-card",{staticClass:"pa-3"},[a("div",{staticClass:"ma-4"},[a("div",[t._v("編成のアップロードを行います。よろしいですか？")]),a("div",{staticClass:"caption mt-5 mx-3"},[a("div",[t._v("海域、難易度の指定が正しいか、アップロード前に今一度確認してください。")]),a("div",[t._v("原則、アップロードした編成をあとから編集・削除することはできません。")]),a("div",[t._v("どうしても削除したい場合、編成名や投稿者、出撃海域、更新日時や編成の特徴など、")]),a("div",[t._v(" 削除対象が特定できる情報を添えて "),a("a",{staticClass:"blue--text text--accent-1",attrs:{href:"https://odaibako.net/u/noro_006",target:"_blank"}},[t._v("こちら")]),t._v(" 等にご連絡ください。 ")])])]),a("v-divider",{staticClass:"my-2"}),a("div",{staticClass:"d-flex"},[a("v-btn",{staticClass:"ml-auto",attrs:{color:"primary",dark:!t.uploadClicked,disabled:t.uploadClicked},on:{click:function(e){return e.stopPropagation(),t.uploadSaveData.apply(null,arguments)}}},[t._v("続行")]),a("v-btn",{staticClass:"ml-4",attrs:{color:"secondary"},on:{click:function(e){e.stopPropagation(),t.uploadConfirmDialog=!1}}},[t._v("戻る")])],1)],1)],1)],1)},vt=[],ft=a("522d"),pt=a("a680"),gt=a("eb11"),bt=a.n(gt),At=i["default"].extend({name:"UploadSaveData",props:{saveData:{type:p["a"],required:!0},dataName:{type:String,required:!0},dataRemarks:{type:String,required:!0},cancelDialog:{type:Function,required:!0}},data:function(){return{areaItems:[],area:11,editedName:"",editedRemarks:"",level:ft["e"].HARD,levelItems:ft["i"].DIFFICULTY_LEVELS,uploadUserName:"",uploadConfirmDialog:!1,uploadClicked:!1,nameRules:[function(t){return!!t||"編成名は必須です。"},function(t){return t.length<=100||"1～100文字以内で入力してください。"}],remarksRules:[function(t){return!!t||"補足情報は必須です。"}],userNameRules:[function(t){return t.length<=20||"0～20文字以内で入力してください。"}]}},mounted:function(){if(!this.areaItems.length){for(var t=[],e=this.$store.state.worlds,a=this.$store.state.maps,i=function(i){var s=e[i],r=a.filter((function(t){return Math.floor(t.area/10)===s.world}));if(!r.length)return"continue";i>0&&t.push({divider:!0}),t.push({header:s.name});for(var n=0;n<r.length;n+=1){var o=r[n],l=o.area,c=o.name,d=s.world>40?"E":"".concat(s.world);t.push({value:l,text:"".concat(d,"-").concat(l%10," : ").concat(c),group:s.name})}},s=0;s<e.length;s+=1)i(s);this.areaItems=t}var r=this.$store.state.siteSetting;this.uploadUserName=r.userName,this.initControl()},computed:{isEvent:function(){return Math.floor(this.area/10)>40}},methods:{initControl:function(){this.editedName=this.dataName,this.editedRemarks=this.dataRemarks;var t=this.saveData.getMainData();if(t&&t.tempData[t.tempIndex]){var e=t.tempData[t.tempIndex],a=e.battleInfo.fleets[e.battleInfo.fleets.length-1].area;a&&(this.area=a)}},validateUpload:function(){var t=this.$refs.uploadForm.validate();t&&(this.uploadConfirmDialog=!0,this.uploadClicked=!1)},uploadSaveData:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a,i,s,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.uploadClicked=!0,a=t.saveData.getMainData(),!a){e.next=20;break}return e.prev=3,i=new p["a"],i.tempData=[u()(a.tempData[a.tempIndex])],i.tempIndex=0,i.saveManagerData(),s={id:i.id,name:t.editedName,data:bt.a.compressToBase64(i.manager),memo:t.editedRemarks,createdAt:Object(pt["h"])(),map:t.area,level:t.area>400?4-t.level:0,user:t.uploadUserName?t.uploadUserName:"",ver:2},r=Object(pt["d"])(),e.next=12,Object(pt["a"])(Object(pt["b"])(r,"presets"),s);case 12:t.$emit("inform","アップロードが完了しました。"),t.uploadUserName&&(n=t.$store.state.siteSetting,n.userName=t.uploadUserName,t.$store.dispatch("updateSetting",n)),e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](3),console.error(e.t0),t.$emit("inform","アップロードに失敗しました。",!0);case 20:t.uploadConfirmDialog=!1;case 21:case"end":return e.stop()}}),e,null,[[3,16]])})))()}}}),yt=At,kt=a("4bd4"),wt=a("b974"),St=Object(S["a"])(yt,mt,vt,!1,null,null,null),Dt=St.exports;I()(St,{VBtn:B["a"],VCard:E["a"],VDialog:M["a"],VDivider:C["a"],VForm:kt["a"],VSelect:wt["a"],VTextField:L["a"],VTextarea:F["a"]});var It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":"",transition:"slide-y-transition",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("div",t._g(t._b({directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],staticClass:"level-setting-container"},"div",s,!1),i),[t.index>=0?[a("div",[a("v-img",{attrs:{src:"./img/type/type"+t.typeId+".png",height:"30",width:"30"}})],1),a("div",{staticClass:"ml-1 item-name text-truncate"},[t._v(t._s(t.typeName))]),a("div",{staticClass:"item-level"},[a("v-img",{attrs:{src:"./img/util/prof"+t.levelValue+".png",height:"24",width:"18"}}),a("span",{staticClass:"level-value"},[t._v(t._s(t.level))])],1)]:[a("div",{staticClass:"mx-auto"},[t._v("一括変更")])]],2)]}}])},[a("v-card",[a("div",{staticClass:"d-flex"},t._l(9,(function(e){return a("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],key:e-1,staticClass:"level-list-item",on:{click:function(a){return t.setLevel(e-1)}}},[a("v-img",{attrs:{src:"./img/util/prof"+(e-1)+".png",width:"18",height:"24"}}),a("span",{staticClass:"level-list-value"},[t._v(t._s(t.getLevelValue(e-1)))])],1)})),0)])],1)},Ct=[],xt=a("ac07"),_t=a("fc09"),Rt=i["default"].extend({name:"ItemInput",props:{index:{type:Number,required:!0},setting:{type:xt["a"],required:!0}},data:function(){return{allLevel:0}},computed:{typeName:function(){if(this.index>=0){var t=this.setting.planeInitialLevels[this.index].id,e=ft["i"].ITEM_API_TYPE.find((function(e){return e.id===t}));return e?e.name:""}return"一括変更"},typeId:function(){return this.index>=0?this.setting.planeInitialLevels[this.index].id:0},level:function(){return this.index>=0?this.setting.planeInitialLevels[this.index].level:this.allLevel},levelValue:function(){return _t["a"].getProfLevel(this.level)}},methods:{setLevel:function(t){if(this.index>=0)this.setting.planeInitialLevels[this.index].level=ft["i"].PROF_LEVEL_BORDER[t];else for(var e=0;e<this.setting.planeInitialLevels.length;e+=1)this.setting.planeInitialLevels[e].level=ft["i"].PROF_LEVEL_BORDER[t]},getLevelValue:function(t){return ft["i"].PROF_LEVEL_BORDER[t]}}}),Tt=Rt,Pt=(a("8dba"),a("e449")),Bt=Object(S["a"])(Tt,It,Ct,!1,null,"7dc1b445",null),Et=Bt.exports;I()(Bt,{VCard:E["a"],VImg:x["a"],VMenu:Pt["a"]}),q()(Bt,{Ripple:V["a"]});var Mt=a("dc58"),Ot=i["default"].extend({name:"App",components:{SaveDataView:Y,SaveDataTab:st,ShareDialog:ht,SettingInitialLevel:Et,UploadSaveData:Dt},data:function(){return{saveData:new p["a"],mainSaveData:new p["a"],drawer:!1,configDialog:!1,loading:!0,somethingText:"",textareaHasError:!1,readState:!1,readInform:!1,readInformText:"",readResultColor:"success",setting:new xt["a"],editDialog:!1,editedName:"",editedRemarks:"",shareDialog:!1,urlParameters:{},urlFragments:{},unsubscribe:void 0,rules:{simulationCountRange:function(t){return!(t<100||t>1e5)||"100 ～ 100000で指定してください。"}},readOnlyMode:!1,disabledUpload:!0,saveDialogTab:"save",enabledFixDrawer:!1,backupString:void 0,fileValue:void 0,disabledIndexedDB:!1,fleetSelectDialog:!1,selectableFleets:[],tempManager:void 0}},computed:{getCompletedAll:function(){return this.$store.getters.getCompletedAll},isTempStockMode:function(){return this.$store.getters.getExistsTempStock},getTextareaColor:function(){return this.somethingText&&this.textareaHasError?"red darken-4":"primary"},enabledUndo:function(){var t=this.mainSaveData;return!!t&&t.tempIndex>0},enabledRedo:function(){var t=this.mainSaveData;return!!t&&t.tempIndex<t.tempData.length-1},isNameEmpty:function(){return this.editedName.length<=0},isManagerPage:function(){return this.$route.path.endsWith("/manager")},isAirCalcPage:function(){return this.$route.path.endsWith("/aircalc")},isLight:function(){return"light"===this.setting.themeDetail},isIce:function(){return"ice"===this.setting.themeDetail},isPink:function(){return"pink"===this.setting.themeDetail},isGreen:function(){return"green"===this.setting.themeDetail},isDark:function(){return"dark"===this.setting.themeDetail},isDeepSea:function(){return"deep-sea"===this.setting.themeDetail},hasItemUIBorder:function(){return this.setting.itemUI.border},isItemUIBold:function(){return this.setting.itemUI.bold},isItemUIRadius:function(){return this.setting.itemUI.radius},showFooterBtn:function(){return this.isAirCalcPage&&this.setting.visibleAirCalcMenuButton},drawerFixed:function(){return this.enabledFixDrawer&&this.setting.fixedDrawer},routerViewClass:function(){return this.showFooterBtn&&this.drawerFixed?"pl-2 pl-md-4 pr-12 pr-xl-4":this.showFooterBtn&&!this.drawerFixed?"pl-2 pl-md-4 pr-12 pr-lg-4":"px-2 px-md-4"},selectedAnyFleet:function(){return this.selectableFleets.some((function(t){return t.selected}))}},watch:{getCompletedAll:function(t){this.loading=!t,t&&this.loadURLInformation(),this.disabledIndexedDB=this.$store.state.disabledDatabase},isTempStockMode:function(t){this.readOnlyMode=!!t}},created:function(){var t=this;this.setting=this.$store.state.siteSetting,this.saveData=this.$store.state.saveData,this.unsubscribe=this.$store.subscribe((function(e,a){"updateSaveData"===e.type?t.saveData=a.saveData:"setMainSaveData"===e.type?t.mainSaveData=a.mainSaveData:"updateSetting"===e.type&&(t.setting=a.siteSetting,t.setting.themeDetail?t.changeSiteTheme(t.setting.themeDetail):t.changeSiteTheme("dark"),t.setting.fixedDrawer||(t.drawer=!1),t.onResize())}));var e=document.location,a=e.search,i=e.hash;(a||i)&&(this.getUrlParams(a),this.setUrlFragments(i),this.loading||this.loadURLInformation())},mounted:function(){var t=window;t.loadShipData=this.setShipStock,t.loadItemData=this.setItemStock,t.loadDeckBuilder=this.loadAndOpenFromDeckBuilder,document.addEventListener("keyup",this.keyupHandler)},methods:{closeSideBar:function(){this.drawer=!1},loadURLInformation:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a,i,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Object.keys(t.urlParameters).length){e.next=25;break}if(!t.urlParameters.data){e.next=10;break}a=p["a"].decodeURLSaveData(t.urlParameters.data),a.isMain=!0,a.isActive=!0,t.saveData.childItems.push(a),t.$store.dispatch("setMainSaveData",a),t.isAirCalcPage||t.$router.push("aircalc"),e.next=22;break;case 10:if(!t.urlParameters.predeck||!t.loadAndOpenFromDeckBuilder(t.urlParameters.predeck)){e.next=14;break}t.inform("編成の読み込みが完了しました。"),e.next=22;break;case 14:if(!t.urlParameters.stockid){e.next=22;break}return e.next=17,ot["a"].getAndRestoreStockData(t.urlParameters.stockid);case 17:i=e.sent,s=!1,i.shipStocks.length&&(t.$store.dispatch("updateTempShipStock",i.shipStocks),s=!0),i.itemStocks.length&&(t.$store.dispatch("updateTempItemStock",i.itemStocks),s=!0),s?t.$route.path.endsWith("/manager")||t.$router.push("manager"):t.inform("所持情報の読み取りに失敗しました。",!0);case 22:t.urlParameters={},e.next=26;break;case 25:Object.keys(t.urlFragments).length&&(r=[],t.urlFragments.ships&&t.urlFragments.ships.length&&(r.push("在籍艦娘の更新"),t.setting.isStockOnlyForShipList=!0,t.$store.dispatch("updateSetting",t.setting),t.$store.dispatch("updateShipStock",t.urlFragments.ships)),t.urlFragments.items&&t.urlFragments.items.length&&(r.push("所持装備の更新"),t.setting.isStockOnlyForItemList=!0,t.$store.dispatch("updateSetting",t.setting),t.$store.dispatch("updateItemStock",t.urlFragments.items)),t.urlFragments.predeck&&t.loadAndOpenFromDeckBuilder(t.urlFragments.predeck)&&r.push("編成の読み込み"),r.length&&t.inform("URL fragmentより、".concat(r.join(", "),"が実行されました。")),t.urlFragments={});case 26:case"end":return e.stop()}}),e)})))()},readSomethingText:function(){this.readState="primary",this.loadAndConfirmDeckBuilder(this.somethingText)?this.inform("デッキビルダー形式編成データを読み込みました。"):this.setShipStock(this.somethingText)?this.inform("在籍艦娘データの更新が完了しました。"):this.setItemStock(this.somethingText)?this.inform("所持装備データの更新が完了しました。"):this.inform("データの読み込みに失敗しました。正しいデータではない可能性があります。",!0),this.somethingText="",this.readState=!1},loadAndConfirmDeckBuilder:function(t){var e=t.indexOf("predeck=")>=0?t.split("predeck=")[1]:t;if(this.setting.importAllDeck)return this.loadAndOpenFromDeckBuilder(e);try{var a=new m["a"](this.$store.state.items,this.$store.state.ships),i=a.loadDeckBuilder(e);if(!i)return!1;this.selectableFleets=[];for(var s=0;s<i.fleetInfo.fleets.length;s+=1){var r=i.fleetInfo.fleets[s];r.ships.some((function(t){return t.data.id>0}))&&this.selectableFleets.push({selected:!0,fleet:r,supportTypeName:r.getSupportTypeName()})}return this.selectableFleets.length>1?(this.fleetSelectDialog=!0,this.tempManager=i,!0):this.loadAndOpenFromDeckBuilder(e)}catch(n){return!1}},loadAndOpenFromDeckBuilder:function(t){try{var e=new m["a"](this.$store.state.items,this.$store.state.ships),a=e.loadDeckBuilder(t);return!!a&&(this.expandCalcManager(a),!0)}catch(i){return!1}},importSelectedFleet:function(){if(this.selectedAnyFleet){var t=this.tempManager;if(t){var e=this.selectableFleets.filter((function(t){return t.selected})).map((function(t){return t.fleet}));t.fleetInfo=new Mt["a"]({info:t.fleetInfo,fleets:e}),this.expandCalcManager(t),this.fleetSelectDialog=!1,this.inform("デッキビルダー形式編成データを読み込みました。")}}},expandCalcManager:function(t){var e=this.saveData.getMainData();e?(t.battleInfo=e.tempData[e.tempIndex].battleInfo,e.tempData.push(t),e.tempIndex+=1):(e=new p["a"],e.name="外部データ",e.isActive=!0,e.isMain=!0,e.tempData=[t],e.tempIndex=0,e.tempSavedIndex=0,this.saveData.childItems.push(e)),this.$store.dispatch("setMainSaveData",e),this.isAirCalcPage||this.$router.push("aircalc")},setShipStock:function(t){try{var e=m["a"].readShipStockJson(t);return 0!==e.length&&(this.loading||(this.setting.isStockOnlyForShipList=!0,this.$store.dispatch("updateSetting",this.setting)),this.$store.dispatch("updateShipStock",e),!0)}catch(a){return console.error(a),!1}},setItemStock:function(t){try{var e=m["a"].readItemStockJson(t);return 0!==e.length&&(this.loading||(this.setting.isStockOnlyForItemList=!0,this.$store.dispatch("updateSetting",this.setting)),this.$store.dispatch("updateItemStock",e),!0)}catch(a){return console.error(a),!1}},saveCurrentData:function(){var t=this.saveData.getMainData();if(t)try{if(t.isUnsaved)return void this.handleSaveAndRenameCurrentData();t.saveManagerData(),this.$store.dispatch("updateSaveData",this.saveData),this.inform("保存しました。")}catch(e){this.inform("保存に失敗しました。",!0)}},handleSaveAndRenameCurrentData:function(){var t=this.saveData.getMainData();t&&(this.editedName=t.name,this.editedRemarks=t.remarks,this.saveDialogTab="save",this.disabledUpload=t.isDirectory,this.editDialog=!0)},saveAndRenameCurrentData:function(){var t=this.saveData.getMainData();if(t)try{var e;t.isUnsaved?(this.saveData.childItems=this.saveData.childItems.filter((function(e){return e!==t})),e=t):(e=new p["a"],e.tempData=[u()(t.tempData[t.tempIndex])],e.tempIndex=0),e.name=this.editedName,e.remarks=this.editedRemarks,e.editedDate=Date.now(),e.isUnsaved=!1,e.saveManagerData();var a=this.saveData.childItems.find((function(t){return t.isDirectory}));if(!a)throw new Error("「保存されたデータ」フォルダーが見つかりませんでした。");a.childItems.push(e),a.sortChild(),e.isActive=!0,this.$store.dispatch("updateSaveData",this.saveData),this.inform("保存しました。")}catch(i){this.inform("保存に失敗しました。",!0)}this.editDialog=!1},closeEditDialog:function(){this.editDialog=!1},undoClicked:function(){var t=this.mainSaveData;t&&(t.tempIndex-=1,this.$store.dispatch("setMainSaveData",t))},redoClicked:function(){var t=this.mainSaveData;t&&(t.tempIndex+=1,this.$store.dispatch("setMainSaveData",t))},changeSiteTheme:function(t){var e="dark"===t||"deep-sea"===t;this.$vuetify.theme.dark=e,this.$vuetify.theme.themes.light.secondary=h["a"].grey.darken2,this.$vuetify.theme.themes.dark.primary=h["a"].blue.base,document.body.classList.remove("deep-sea","ice","pink","green"),"deep-sea"===t&&(this.$vuetify.theme.themes.dark.primary=h["a"].blue.lighten1,document.body.classList.add(t)),"ice"!==t&&"pink"!==t&&"green"!==t||document.body.classList.add(t),this.setting.themeDetail=t,this.updateItemUI()},toggleItemUIHasBorder:function(){this.setting.itemUI.border=!this.setting.itemUI.border,this.updateItemUI()},toggleItemUIIsBold:function(){this.setting.itemUI.bold=!this.setting.itemUI.bold,this.updateItemUI()},toggleItemUIIsRadius:function(){this.setting.itemUI.radius=!this.setting.itemUI.radius,this.updateItemUI()},updateItemUI:function(){this.setting.itemUI&&(document.body.classList.remove("item-ui-border","item-ui-bold","item-ui-radius"),this.setting.itemUI.border&&document.body.classList.add("item-ui-border"),this.setting.itemUI.bold&&document.body.classList.add("item-ui-bold"),this.setting.itemUI.radius&&document.body.classList.add("item-ui-radius"))},toggleConfigDialog:function(){this.configDialog||(this.setting.simulationCount>1e5?this.setting.simulationCount=1e5:this.setting.simulationCount<100&&(this.setting.simulationCount=100),this.$store.dispatch("updateSetting",this.setting))},toggleFleetSelectDialog:function(){this.fleetSelectDialog||(this.tempManager=void 0,this.$store.dispatch("updateSetting",this.setting))},clickedShare:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.shareDialog=!0;case 2:t.$refs.shareDialog.createdURL="";case 3:case"end":return e.stop()}}),e)})))()},closeShareDialog:function(){this.shareDialog=!1},getUrlParams:function(t){if(this.urlParameters={},t){for(var e={},a=t.slice(1).split("&"),i=0;i<a.length;i+=1){var s=a[i],r=s.split("=");e[r[0]]=decodeURIComponent(r[1])}this.urlParameters=Object.freeze(e),window.history.replaceState(null,"","".concat(document.location.pathname,"#/"))}},setUrlFragments:function(t){if(this.urlFragments={},t){var e=t.split("import:");if(e&&!(e.length<2)){this.$router.push({path:"/"});var a,i=decodeURIComponent(e[1]);try{a=JSON.parse(i)}catch(s){return void console.error(s)}try{this.urlFragments.predeck=JSON.stringify(a.predeck)}catch(r){console.error(r)}try{this.urlFragments.ships=m["a"].readShipStockJson(a.ships?JSON.stringify(a.ships):"")}catch(r){console.error(r)}try{this.urlFragments.items=m["a"].readItemStockJson(a.items?JSON.stringify(a.items):"")}catch(r){console.error(r)}}}},inform:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.readInformText=t,this.readInform=!0,this.readResultColor=e?"error":"success"},resetTempData:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$store.dispatch("updateTempShipStock",[]),t.$store.dispatch("updateTempItemStock",[]),t.inform("閲覧モードを終了しました");case 3:case"end":return e.stop()}}),e)})))()},changeUploadTabs:function(t){if("upload"===t){var e=this.$refs.uploadSaveDataComp;e&&e.initControl()}},toggleMenuButton:function(){this.setting.visibleAirCalcMenuButton=!this.setting.visibleAirCalcMenuButton,this.$store.dispatch("updateSetting",this.setting)},clickCommentButton:function(){var t=this.$refs.saveDataTab,e=this.saveData.getMainData();t&&e&&t.showNameEditDialog(e)},onResize:function(){this.enabledFixDrawer&&window.innerWidth<1480?this.enabledFixDrawer=!1:!this.enabledFixDrawer&&window.innerWidth>=1480&&(this.enabledFixDrawer=!0)},downloadBackupFile:function(){var t=JSON.stringify(this.saveData.getMinifyData()),e=bt.a.compressToUTF16(t),a=new Blob([e],{type:"application/octet-stream"});Object(c["saveAs"])(a,"backup_".concat(m["a"].formatDate(new Date,"yyyyMMdd")))},handleFileSelect:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.backupString=void 0,t){a.next=3;break}return a.abrupt("return");case 3:return a.prev=3,a.next=6,t.text();case 6:if(i=a.sent,s=bt.a.decompressFromUTF16(i),!s||!p["a"].IsSaveData(JSON.parse(s))){a.next=12;break}e.backupString=s,a.next=13;break;case 12:throw new Error("復号に失敗");case 13:a.next=19;break;case 15:a.prev=15,a.t0=a["catch"](3),console.error(a.t0),e.inform("読み込み失敗 -バックアップデータが壊れてるか、なんか違うファイルです",!0);case 19:case"end":return a.stop()}}),a,null,[[3,15]])})))()},importBackupData:function(){var t=this.backupString;if(this.backupString=void 0,this.fileValue=void 0,t){this.isAirCalcPage&&this.$router.push("/");var e=p["a"].getInstance(JSON.parse(t));e.isReadonly=!0;for(var a=0;a<e.childItems.length;a+=1){var i=e.childItems[a];i.isDirectory?(i.isOpen=!0,i.isReadonly=!0):(i.isUnsaved=!0,i.isActive=!0)}this.$store.dispatch("updateSaveData",e),this.inform("バックアップデータを復元しました。")}},keyupHandler:function(t){this.isAirCalcPage&&(t.ctrlKey&&"KeyZ"===t.code&&this.enabledUndo?this.undoClicked():t.ctrlKey&&"KeyY"===t.code&&this.enabledRedo&&this.redoClicked())}},beforeDestroy:function(){this.unsubscribe&&this.unsubscribe()},destroyed:function(){document.removeEventListener("keyup",this.keyupHandler)}}),Lt=Ot,Ft=(a("5dfc"),a("b0a0"),a("0798")),Nt=a("7496"),Ut=a("40dc"),qt=a("5bc1"),Ht=a("99d9"),Vt=a("0789"),jt=a("23a7"),$t=a("553a"),Kt=a("f6c4"),Jt=a("f774"),Wt=a("8e36"),Gt=a("2db4"),Yt=a("71a3"),zt=a("c671"),Xt=a("fe57"),Zt=a("aac8"),Qt=a("dc22"),te=Object(S["a"])(Lt,n,o,!1,null,"48981d12",null),ee=te.exports;I()(te,{VAlert:Ft["a"],VApp:Nt["a"],VAppBar:Ut["a"],VAppBarNavIcon:qt["a"],VBtn:B["a"],VCard:E["a"],VCardText:Ht["b"],VCheckbox:at["a"],VDialog:M["a"],VDivider:C["a"],VFabTransition:Vt["c"],VFileInput:jt["a"],VFooter:$t["a"],VIcon:O["a"],VImg:x["a"],VMain:Kt["a"],VNavigationDrawer:Jt["a"],VProgressLinear:Wt["a"],VSnackbar:Gt["a"],VSpacer:dt["a"],VTab:Yt["a"],VTabItem:zt["a"],VTabs:Xt["a"],VTabsItems:Zt["a"],VTextField:L["a"],VTextarea:F["a"],VTooltip:N["a"]}),q()(te,{Resize:Qt["a"],Ripple:V["a"]});a("3ca3"),a("ddb0");var ae=a("8c4f"),ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"site-top-container"},[a("div",{staticClass:"site-title content"},[t._v(" 制空権シミュレータ "),a("span",{staticClass:"body-1"},[t._v("v"+t._s(t.$store.state.siteVersion))])]),a("v-card",{staticClass:"site-body content"},[a("div",{staticClass:"menu-buttons"},[a("div",{staticClass:"my-2 mx-4"},[a("v-btn",{attrs:{"x-large":"",color:"green",dark:""},on:{click:t.goAirCalcPage}},[a("v-icon",[t._v("mdi-calculator")]),a("span",{staticClass:"ml-1"},[t._v("制空権シミュレータ")])],1),a("div",{staticClass:"mt-2 body-2"},[a("div",[t._v("本サイトの主要機能です。")]),a("div",{staticClass:"mt-2"},[t._v(" 基地航空隊や艦隊、敵艦隊を編成することで、道中を含めた全ての戦闘の制空状態や艦載機の損耗、全滅率などのシミュレーションが可能です。 ")])])],1),a("div",{staticClass:"my-2 mx-4"},[a("v-btn",{attrs:{"x-large":"",dark:"",color:"blue"},on:{click:function(e){return t.$router.push("manager")}}},[a("v-icon",[t._v("mdi-database-cog")]),a("span",{staticClass:"ml-1"},[t._v("艦娘 / 装備管理")])],1),a("div",{staticClass:"mt-2 body-2"},[a("div",[t._v("サブの機能です。")]),a("div",{staticClass:"mt-2"},[t._v(" 自分のゲーム内の艦娘、装備情報を登録すると、シミュレータ内で選択できる艦娘や装備に反映され、あの装備持ってた…？と悩む心配がなくなります。 ")])])],1),a("div",{staticClass:"mt-4 mx-4"},[a("v-btn",{attrs:{"x-large":"",dark:"",color:"blue darken-4"},on:{click:function(e){return t.$router.push("list")}}},[a("v-icon",[t._v("mdi-human-greeting-variant")]),a("span",{staticClass:"ml-1"},[t._v("みんなの編成")])],1),a("div",{staticClass:"mt-2 body-2"},[a("div",[t._v("他の人がアップロードした編成データを閲覧できます。")])])],1)]),a("v-divider",{staticClass:"my-4"}),a("div",{staticClass:"ma-2"},[a("div",{staticClass:"ml-2"},[t._v("データ引継ぎ")]),a("div",{staticClass:"ml-4 mt-2 body-2"},[a("a",{attrs:{href:"https://noro6.github.io/kcTools",target:"_blank"}},[t._v("旧制空権シミュレータ")]),t._v(" で作成していた編成データや、登録されていた装備、艦娘情報を引き継ぎます。 ")]),a("div",{staticClass:"d-flex flex-wrap ml-2"},[a("v-btn",{staticClass:"ma-2",attrs:{color:"teal",dark:!t.imported,disabled:t.imported},on:{click:function(e){return t.checkOldData()}}},[t._v("データ引継ぎ(編成)")]),a("v-btn",{staticClass:"ma-2",attrs:{color:"teal",dark:!t.importedStock,disabled:t.importedStock},on:{click:function(e){return t.checkOldStockData()}}},[t._v(" データ引継ぎ(装備/艦娘) ")])],1)]),a("v-divider",{staticClass:"my-4"}),a("div",{staticClass:"ma-2"},[a("div",{staticClass:"ml-2"},[t._v("サイト連携")]),a("div",{staticClass:"ml-4 mt-2 body-2"},[a("div",[t._v("デッキビルダー形式をURLに?predeck=...で埋め込めば編成を読み込めます。")]),a("div",{staticClass:"text--secondary"},[t._v('(e.g.) https://noro6.github.io/kc-web?predeck={"version":4,"hqlv":120,"f1":{"s1":...')])])])],1),a("div",{staticClass:"info-area"},[a("v-divider",{staticClass:"mb-2"}),a("div",{staticClass:"caption"},[t._v(" 著作権法第32条に基づき画像を引用し、著作権は権利者様へ帰属します。権利者様側からの画像等の削除の依頼や警告には速やかに対処いたします。 ")]),a("div",{staticClass:"caption"},[t._v("また、本サイトの情報、計算結果によって受けた利益・損害その他あらゆる事象については一切の責任を負いません。")])],1),a("v-dialog",{attrs:{transition:"scroll-x-transition",width:"500"},model:{value:t.importConfirmDialog,callback:function(e){t.importConfirmDialog=e},expression:"importConfirmDialog"}},[a("v-card",{staticClass:"pa-3"},[a("div",{staticClass:"mx-4 mt-4"},[a("div",{staticClass:"body-2"},[t._v("引き継ぎ対象のデータを格納するフォルダーを作成します。")]),a("div",{staticClass:"mb-5 body-2"},[t._v("フォルダー名を指定し、実行を押すと引き継ぎを開始します。")]),a("v-text-field",{attrs:{dense:"",outlined:"",maxlength:"100",counter:"",label:"フォルダー名"},model:{value:t.importFileName,callback:function(e){t.importFileName=e},expression:"importFileName"}}),a("div",{staticClass:"d-flex mt-3"},[a("v-btn",{staticClass:"ml-auto",attrs:{color:"success",disabled:t.isNameEmpty||t.imported},on:{click:function(e){return e.stopPropagation(),t.importOldData.apply(null,arguments)}}},[t._v("実行")]),a("v-btn",{staticClass:"ml-4",attrs:{color:"secondary"},on:{click:function(e){e.stopPropagation(),t.importConfirmDialog=!1}}},[t._v("戻る")])],1)],1)])],1),a("v-dialog",{attrs:{transition:"scroll-x-transition",width:"440"},model:{value:t.confirmDialog,callback:function(e){t.confirmDialog=e},expression:"confirmDialog"}},[a("v-card",{staticClass:"pa-3"},[a("div",{staticClass:"ma-4"},[a("div",{staticClass:"body-2"},[t._v("既に本サイトで装備 / 艦娘情報が登録されているようです。")]),a("div",{staticClass:"body-2"},[t._v("引き継ぎを行うとこれらのデータは上書きされます。")]),a("div",{staticClass:"body-2 mt-3"},[t._v("本当に引き継ぎを行いますか？")])]),a("v-divider",{staticClass:"my-2"}),a("div",{staticClass:"d-flex"},[a("v-btn",{staticClass:"ml-auto",attrs:{color:"primary",dark:"",disabled:!t.confirmDialog},on:{click:function(e){return e.stopPropagation(),t.importOldStockData()}}},[t._v("実行")]),a("v-btn",{staticClass:"ml-4",attrs:{color:"secondary"},on:{click:function(e){e.stopPropagation(),t.confirmDialog=!1}}},[t._v("戻る")])],1)],1)],1)],1)},se=[],re=i["default"].extend({name:"Home",mounted:function(){var t=this.$store.state.saveData;t.disabledMain()},data:function(){return{imported:!1,importConfirmDialog:!1,importFileName:"引き継ぎデータ",confirmDialog:!1,importedStock:!1}},computed:{isNameEmpty:function(){return this.importFileName.length<=0}},methods:{goAirCalcPage:function(){var t=this.$store.state.saveData;t.disabledMain();var e=new p["a"];e.name=t.getNewSaveDataName(),e.isActive=!0,e.isMain=!0,t.childItems.push(e),this.$store.dispatch("updateSaveData",t),this.$store.dispatch("setMainSaveData",e),this.$router.push("aircalc")},checkOldData:function(){var t=window.localStorage;if(!t)return this.$emit("inform","旧編成データが見つかりませんでした。",!0),void(this.imported=!0);var e=t.getItem("presets"),a=e?JSON.parse(e):void 0;if(!a||!a.length)return this.$emit("inform","旧編成データが見つかりませんでした。",!0),void(this.imported=!0);this.imported=!1,this.importConfirmDialog=!0},checkOldStockData:function(){this.importedStock=!0;var t=window.localStorage;if(t){var e=t.getItem("shipStock"),a=t.getItem("planeStock"),i=e?JSON.parse(e):void 0,s=a?JSON.parse(a):void 0;if(i&&i.length||s&&s.length){var r=!!this.$store.state.shipStock.length||!!this.$store.state.itemStock.length;r?(this.confirmDialog=!0,this.importedStock=!1):this.importOldStockData()}else this.$emit("inform","所持装備 / 艦娘データが見つかりませんでした。",!0)}else this.$emit("inform","所持装備 / 艦娘データが見つかりませんでした。",!0)},importOldStockData:function(){this.importedStock=!0;var t=window.localStorage;if(t){var e=t.getItem("shipStock"),a=t.getItem("planeStock"),i=e?JSON.parse(e):void 0,s=a?JSON.parse(a):void 0;if(i&&i.length||s&&s.length){try{var r=this.$store.state.siteSetting,n=!1;if(i&&i.length){var o=m["a"].restoreShipStock(i,this.$store.state.ships);o.length&&(n=!0,r.isStockOnlyForShipList=!0,this.$store.dispatch("updateShipStock",o))}if(s&&s.length){var l=m["a"].restoreItemStock(s);l.length&&(n=!0,r.isStockOnlyForItemList=!0,this.$store.dispatch("updateItemStock",l))}if(this.$store.dispatch("updateSetting",r),!n)return void this.$emit("inform","データを読み込みましたが、引き継ぎ可能な編成データがありませんでした。",!0);this.$emit("inform","所持装備 / 艦娘データの引き継ぎが完了しました。")}catch(c){this.$emit("inform","データ引継ぎに失敗しました。",!0),console.error(c)}this.confirmDialog=!1}else this.$emit("inform","所持装備 / 艦娘データが見つかりませんでした。",!0)}else this.$emit("inform","所持装備 / 艦娘データが見つかりませんでした。",!0)},importOldData:function(){this.imported=!0;var t=window.localStorage;try{var e=t.getItem("presets"),a=e?JSON.parse(e):void 0;if(!a||!a.length)return;var i=t.getItem("setting"),s=i?JSON.parse(i):void 0,r=new m["a"](this.$store.state.items,this.$store.state.ships,this.$store.state.defaultEnemies),n=r.convertOldSimulatorToSaveData(a,s);if(n&&n.childItems.length){n.name=this.importFileName?this.importFileName:"引き継ぎデータ";var o=this.$store.state.saveData,l=o.childItems.find((function(t){return t.isDirectory}));l&&(l.childItems.push(n),l.sortChild(),this.$store.dispatch("updateSaveData",o),this.$emit("inform","編成データの引き継ぎが完了しました。"),this.$emit("openSidebar"))}else this.$emit("inform","データを読み込みましたが、引き継ぎ可能な編成データがありませんでした。",!0)}catch(c){this.$emit("inform","データ引継ぎに失敗しました。",!0),console.error(c)}this.importConfirmDialog=!1}}}),ne=re,oe=(a("4a34"),Object(S["a"])(ne,ie,se,!1,null,"6f2840fc",null)),le=oe.exports;I()(oe,{VBtn:B["a"],VCard:E["a"],VDialog:M["a"],VDivider:C["a"],VIcon:O["a"],VTextField:L["a"]}),i["default"].use(ae["a"]);var ce=[{path:"/",name:"Home",component:le},{path:"/aircalc",name:"AirCalculator",component:function(){return Promise.all([a.e("chunk-014b0838"),a.e("chunk-71211d12")]).then(a.bind(null,"fbc0"))}},{path:"/manager",name:"FleetManager",component:function(){return Promise.all([a.e("chunk-014b0838"),a.e("chunk-33db05a9")]).then(a.bind(null,"c0e6"))}},{path:"/list",name:"SaveDataList",component:function(){return a.e("chunk-3db176d6").then(a.bind(null,"2192"))}}],de=new ae["a"]({routes:ce}),ue=de,he=a("0613"),me=a("f309");i["default"].use(me["a"]);var ve=new me["a"]({theme:{dark:!0}});i["default"].config.productionTip=!1;var fe={apiKey:"AIzaSyC_rEnvKFFlZv54xvxP8MXPht081xYol4s",authDomain:"development-74af0.firebaseapp.com",databaseURL:"https://development-74af0.firebaseio.com",projectId:"development-74af0",storageBucket:"development-74af0.appspot.com",messagingSenderId:"789701529106",appId:"1:789701529106:web:3498f515937607158592cb",measurementId:"G-90V5M1BZB9"};Object(s["a"])(fe),i["default"].use(r["a"],{config:{id:"UA-152888142-2"}},ue),new i["default"]({router:ue,store:he["a"],vuetify:ve,render:function(t){return t(ee)},created:function(){this.$store.dispatch("loadSetting"),this.$store.dispatch("loadSaveData"),this.$store.dispatch("loadData")}}).$mount("#app")},ce66:function(t,e,a){"use strict";a.d(e,"a",(function(){return m}));var i=a("1da1"),s=a("d4ec"),r=a("bee2"),n=(a("96cf"),a("e9c4"),a("7db0"),a("d3b7"),a("66ce")),o=a("d180"),l=a.n(o),c=a("eb11"),d=a.n(c),u=a("331b"),h=a("01fd"),m=function(){function t(){Object(s["a"])(this,t)}return Object(r["a"])(t,null,[{key:"createFirebaseStockObject",value:function(t,e){var a={ships:"",items:""};if(t&&t.length){for(var i=[],s=function(e){var a=t[e],s=a.improvement,r=[s.fire,s.torpedo,s.antiAir,s.armor,s.luck,s.hp,s.asw],n=a.releaseExpand?1:0,o=i.find((function(t){return t[0]===a.id}));o?o[1].push([a.uniqueId,a.level,a.exp,r,a.area,n]):i.push([a.id,[[a.uniqueId,a.level,a.exp,r,a.area,n]]])},r=0;r<t.length;r+=1)s(r);a.ships=d.a.compressToEncodedURIComponent(JSON.stringify(i))}if(e&&e.length&&e.some((function(t){return t.num.some((function(t){return t>0}))}))){for(var n=[],o=0;o<e.length;o+=1){var c=e[o],u=[c.id,[]],h=l()(c.num);if(h)for(var m=0;m<c.num.length;m+=1){var v=c.num[m];if(h-=v,u[1].push(v),h<=0)break}else u=[c.id];n.push(u)}a.items=d.a.compressToEncodedURIComponent(JSON.stringify(n))}return a}},{key:"getAndRestoreStockData",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={shipStocks:[],itemStocks:[]},s=Object(n["e"])(Object(n["c"])()),e.next=4,Object(n["b"])(Object(n["a"])(s,"stocks/".concat(a))).then((function(e){if(e.exists()){var a=e.val();i=t.restoreStocksFirebaseStockObject(a.ships,a.items)}})).catch((function(t){throw t}));case 4:return e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));function a(t){return e.apply(this,arguments)}return a}()},{key:"restoreStocksFirebaseStockObject",value:function(t,e){var a={shipStocks:[],itemStocks:[]};try{var i=d.a.decompressFromEncodedURIComponent(t);if(i)for(var s=JSON.parse(i),r=0;r<s.length;r+=1)for(var n=s[r],o=n[0],l=0;l<n[1].length;l+=1){var c=n[1][l],m=new u["a"];m.uniqueId=+c[0],m.id=o,m.level=+c[1],m.exp=+c[2],m.area=c[4]?+c[4]:0,m.releaseExpand=!!c[5];var v=c[3];v&&(m.improvement.fire=v[0]?+v[0]:0,m.improvement.torpedo=v[1]?+v[1]:0,m.improvement.antiAir=v[2]?+v[2]:0,m.improvement.armor=v[3]?+v[3]:0,m.improvement.luck=v[4]?+v[4]:0,m.improvement.hp=v[5]?+v[5]:0,m.improvement.asw=v[6]?+v[6]:0),a.shipStocks.push(m)}var f=d.a.decompressFromEncodedURIComponent(e);if(f)for(var p=JSON.parse(f),g=0;g<p.length;g+=1){var b=p[g],A=new h["a"](+b[0]),y=b[1];if(y)for(var k=0;k<=10;k+=1){var w=y[k];w&&(A.num[k]=+w)}a.itemStocks.push(A)}}catch(S){console.error(S)}return a}},{key:"getShortURL",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return","");case 2:return a={longDynamicLink:"https://aircalc.page.link/?link=".concat(e),suffix:{option:"SHORT"}},i="",t.next=6,fetch("https://firebasedynamiclinks.googleapis.com/v1/shortLinks?key=AIzaSyC_rEnvKFFlZv54xvxP8MXPht081xYol4s",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).catch((function(t){return console.error(t)}));case 6:if(s=t.sent,!s){t.next=10;break}return t.next=10,s.json().then((function(t){t.error||!t.shortLink?console.log(t.error):i=t.shortLink}));case 10:return t.abrupt("return",i);case 11:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}()},d606:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var i=a("d4ec"),s=a("bee2"),r=(a("99af"),a("caad"),a("d3b7"),a("4de4"),a("b947")),n=a("522d"),o=a("0f16"),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i["a"])(this,t),this.resultWave1=new r["a"],this.resultWave2=new r["a"],this.needSupply=!1,this.needShootDown=!1,e.airbase?(this.items=void 0!==e.items?e.items:e.airbase.items.concat(),this.mode=void 0!==e.mode?e.mode:e.airbase.mode,this.battleTarget=void 0!==e.battleTarget?e.battleTarget:e.airbase.battleTarget):(this.items=void 0!==e.items?e.items:[],this.mode=void 0!==e.mode?e.mode:n["a"].WAIT,this.battleTarget=void 0!==e.battleTarget?e.battleTarget:[0,0]);var a=this.items.length;if(a<4)for(var s=0;s<4-a;s+=1)this.items.push(new o["a"]);this.range=this.getRange(),this.fullAirPower=0,this.defenseAirPower=0,this.rocketCount=0,this.hasJet=!1,this.reconCorr=1,this.reconCorrDefense=1,this.superHighAirRaidTypeAItemCount=0,this.superHighAirRaidTypeBItemCount=0,this.superHighAirRaidTypeCItemCount=0,this.fuel=0,this.ammo=0,this.steel=0,this.bauxite=0,this.isSeparate=this.battleTarget[0]!==this.battleTarget[1];for(var l=0;l<this.items.length;l+=1){var c=this.items[l];c.fullSlot>0&&(this.fullAirPower+=c.fullAirPower,this.defenseAirPower+=c.defenseAirPower),c.data.isRocket&&(this.rocketCount+=1),!this.hasJet&&c.data.isJet&&(this.hasJet=!0),this.reconCorr<c.reconCorr&&(this.reconCorr=c.reconCorr),this.reconCorrDefense<c.reconCorrDefense&&(this.reconCorrDefense=c.reconCorrDefense),[445,175,177,333].includes(c.data.id)&&(this.superHighAirRaidTypeAItemCount+=1),[263,354].includes(c.data.id)&&(this.superHighAirRaidTypeBItemCount+=1),[334,452,446].includes(c.data.id)&&(this.superHighAirRaidTypeCItemCount+=1),this.fuel+=c.fuel,this.ammo+=c.ammo,this.steel+=c.steel,this.bauxite+=c.bauxite}this.fullAirPower=Math.floor(this.fullAirPower*this.reconCorr),this.defenseAirPower=Math.floor(this.defenseAirPower*this.reconCorrDefense),this.airPower=this.fullAirPower,this.items.some((function(t){return t.data.id>0}))||(this.mode=n["a"].WAIT)}return Object(s["a"])(t,[{key:"enabledItems",get:function(){return this.items.filter((function(t){return t.data.id>0}))}},{key:"getRange",value:function(){for(var t=999,e=1,a=0;a<this.items.length;a+=1){var i=this.items[a];i.data.id&&(t=i.data.radius<t?i.data.radius:t,i.data.isRecon&&(e=e<i.data.radius?i.data.radius:e))}return e<999&&e>t?Math.round(t+Math.min(Math.sqrt(e-t),3)):999===t?0:t}},{key:"getContactRates",value:function(){return o["a"].getContactRates(this.items)}}],[{key:"supply",value:function(t){t.airPower=t.fullAirPower;for(var e=0;e<t.items.length;e+=1)o["a"].supply(t.items[e])}}]),t}()},dc58:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var i=a("d4ec"),s=a("bee2"),r=(a("99af"),a("848d")),n=a("c3af"),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i["a"])(this,t),this.calculated=!1,this.ignoreHistory=!1,e.info?(this.isUnion=void 0!==e.isUnion?e.isUnion:e.info.isUnion,this.admiralLevel=void 0!==e.admiralLevel?e.admiralLevel:e.info.admiralLevel,this.mainFleetIndex=void 0!==e.mainFleetIndex?e.mainFleetIndex:e.info.mainFleetIndex,this.fleets=void 0!==e.fleets?e.fleets:e.info.fleets.concat()):(this.isUnion=void 0!==e.isUnion&&e.isUnion,this.admiralLevel=void 0!==e.admiralLevel?e.admiralLevel:120,this.mainFleetIndex=void 0!==e.mainFleetIndex?e.mainFleetIndex:0,this.fleets=void 0!==e.fleets?e.fleets:[]);var a=this.fleets.length;if(a<5)for(var s=0;s<5-a;s+=1)this.fleets.push(new r["a"]);if(!this.isUnion||0!==this.mainFleetIndex&&1!==this.mainFleetIndex)this.isUnion||(this.fleets[0]=new r["a"]({fleet:this.fleets[0],isUnion:!1}),this.fleets[1]=new r["a"]({fleet:this.fleets[1],isUnion:!1}));else{for(var o=this.fleets[0].ships,l=0;l<o.length;l+=1){var c=o[l];o[l]=new n["a"]({ship:c,isEscort:!1})}for(var d=this.fleets[1].ships,u=0;u<d.length;u+=1){var h=d[u];d[u]=new n["a"]({ship:h,isEscort:!0})}var m={isUnion:!0,ships:this.fleets[0].ships.concat(d),formation:this.fleets[0].formation};this.unionFleet=new r["a"](m),this.unionFleet.airPower=this.fleets[0].fullAirPower,this.unionFleet.escortAirPower=this.fleets[1].fullAirPower}}return Object(s["a"])(t,[{key:"mainFleet",get:function(){var t=this.fleets[this.mainFleetIndex];return this.isUnion&&this.mainFleetIndex<=1&&(t=this.unionFleet),t}}],[{key:"getInfoWithChangedFormation",value:function(e,a){for(var i=[],s=0;s<e.fleets.length;s+=1)i.push(new r["a"]({fleet:e.fleets[s],formation:a}));return new t({info:e,fleets:i})}}]),t}()},f463:function(t,e,a){"use strict";a.d(e,"a",(function(){return u}));var i=a("d4ec"),s=a("bee2"),r=(a("99af"),a("d3b7"),a("7db0"),a("4de4"),a("b0c0"),a("4e827"),a("4715")),n=a("522d"),o=a("0f16"),l=a("fc09"),c=a("aec1"),d=a("ba7d"),u=function(){function t(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i["a"])(this,t),this.needSupply=!1,a.fleet?(this.enemies=a.enemies?a.enemies.concat():a.fleet.enemies.concat(),this.formation=void 0!==a.formation?a.formation:a.fleet.formation,this.mainFleetFormation=void 0!==a.mainFleetFormation?a.mainFleetFormation:a.fleet.mainFleetFormation,this.cellType=void 0!==a.cellType?a.cellType:a.fleet.cellType,this.range=void 0!==a.range?a.range:a.fleet.range,this.area=void 0!==a.area?a.area:a.fleet.area,this.nodeName=void 0!==a.nodeName?a.nodeName:a.fleet.nodeName):(this.enemies=a.enemies?a.enemies.concat():[],this.formation=void 0!==a.formation?a.formation:1,this.mainFleetFormation=void 0!==a.mainFleetFormation?a.mainFleetFormation:1,this.cellType=void 0!==a.cellType?a.cellType:1,this.range=void 0!==a.range?a.range:0,this.area=void 0!==a.area?a.area:0,this.nodeName=void 0!==a.nodeName?a.nodeName:"");var s=this.enemies.length;if(s<6)for(var o=0;o<6-s;o+=1)this.enemies.push(new r["a"]);this.isSkipAerialCombatCell=this.cellType===n["d"].NIGHT,this.isAirRaidCell=this.cellType===n["d"].AIR_RAID,this.isAerialCombatCell=this.cellType===n["d"].AERIAL_COMBAT,this.isSurfaceCell=this.cellType===n["d"].NORMAL||this.cellType===n["d"].GRAND||this.cellType===n["d"].AIR_RAID||this.cellType===n["d"].AERIAL_COMBAT,this.isAllSubmarine=this.enemies.some((function(t){return t.data.id})),this.isAllPT=this.enemies.some((function(t){return t.data.id})),this.hasPlane=!1,this.isUnion=this.cellType===n["d"].GRAND;var u=n["i"].FORMATIONS.find((function(t){return t.value===e.formation}));this.fleetAntiAir=this.getFleetAntiAir(u),this.fullAirPower=0,this.mainAirPower=0,this.escortAirPower=0,this.fullAirbaseAirPower=0,this.mainAirbaseAirPower=0,this.escortAirbaseAirPower=0,this.allPlanes=[],this.mainEnemies=[],this.escortEnemies=[];var h=this.enemies.filter((function(t){return t.data.id>0}));this.allAntiAirCutIn=[],this.existUnknownEnemy=!1;for(var m=0;m<h.length;m+=1){var v=h[m];if(this.fullAirPower+=v.fullAirPower,this.fullAirbaseAirPower+=v.fullLBAirPower,this.allAntiAirCutIn=this.allAntiAirCutIn.concat(v.antiAirCutIn),v.isEscort?(this.escortAirPower+=v.fullAirPower,this.escortAirbaseAirPower+=v.fullLBAirPower,this.escortEnemies.push(v)):(this.mainAirPower+=v.fullAirPower,this.mainAirbaseAirPower+=v.fullLBAirPower,this.mainEnemies.push(v)),this.isAllSubmarine&&!v.isSubmarine&&(this.isAllSubmarine=!1),this.isAllPT&&v.data.name.indexOf("PT")<0&&(this.isAllPT=!1),v.hasPlane){for(var f=v.items.filter((function(t){return t.data.isPlane})),p=0;p<f.length;p+=1)f[p].isEscortItem=this.isUnion&&v.isEscort;this.allPlanes=this.allPlanes.concat(f),!this.hasPlane&&f.find((function(t){return!t.data.isRecon}))&&(this.hasPlane=!0)}!this.existUnknownEnemy&&v.data.isUnknown&&(this.existUnknownEnemy=!0)}this.airPower=this.fullAirPower,this.airbaseAirPower=this.fullAirbaseAirPower,this.fullBorders=l["a"].getAirStatusBorder(this.fullAirPower),this.fullAirbaseBorders=l["a"].getAirStatusBorder(this.fullAirbaseAirPower),this.allAntiAirCutIn.sort((function(t,e){return e.id-t.id})),this.shootDownList=[];for(var g=1,b=0,A=0;A<this.allAntiAirCutIn.length;A+=1){var y=this.allAntiAirCutIn[A],k=g*y.rate;g-=k,b+=k,this.shootDownList.push(new c["a"](h,!0,this.isUnion,y,b,u))}var w=new c["a"](h,!0,this.isUnion,new d["a"],1,u);this.shootDownList.push(w),this.noCutInStage2=w.shootDownStatusList}return Object(s["a"])(t,[{key:"getFleetAntiAir",value:function(t,e){for(var a=0,i=this.enemies.length,s=0;s<i;s+=1)a+=this.enemies[s].antiAirBonus;a=Math.floor(a);var r=Math.floor(a*(t?t.correction:1));return e&&1!==e.c2?2*Math.floor(r*e.c2):2*r}},{key:"getContactRates",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=t?this.allPlanes:this.allPlanes.filter((function(t){return!t.isEscortItem}));return o["a"].getContactRates(e)}}]),t}()},fc09:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var i=a("d4ec"),s=a("bee2"),r=(a("7db0"),a("d3b7"),a("522d")),n=function(){function t(){Object(i["a"])(this,t)}return Object(s["a"])(t,null,[{key:"getAirStatusBorder",value:function(t){return 0===t?[0,0,0,0,0]:[3*t,Math.ceil(1.5*t),Math.floor(t/1.5)+1,Math.floor(t/3)+1,0]}},{key:"getStage1ShootDownValue",value:function(t,e){var a=[1,3,5,7,10][t],i=Math.floor(Math.random()*(a/3*1e3+1))/1e3;return e*(i+a/4)/10}},{key:"getStage1ShootDownValueEnemy",value:function(t,e){var a=[10,8,6,4,1][t],i=Math.floor(Math.random()*(a+1)),s=Math.floor(Math.random()*(a+1));return Math.floor(e*(.65*i+.35*s)/10)}},{key:"getAirState",value:function(e,a){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===a&&0===e)return i?r["b"].KAKUHO:r["b"].NONE;for(var s=t.getAirStatusBorder(a),n=0;n<s.length;n+=1)if(e>=s[n])return e>0?n:r["b"].SOSHITSU;return r["b"].SOSHITSU}},{key:"getProfLevel",value:function(t){for(var e=r["i"].PROF_LEVEL_BORDER.length-2;e>=0;e-=1)if(t>=r["i"].PROF_LEVEL_BORDER[e])return e;return 0}},{key:"softCap",value:function(t,e){return t>e?e+Math.sqrt(t-e):t}},{key:"getDamageDistribution",value:function(t,e,a,i){for(var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=[],n=1/e,o=0;o<e;o+=1)for(var l=.7*e+.6*o,c=function(e){var o=t[e],c=o.power-l>0?Math.floor((o.power-l)*a):0;if(c>=i&&!s)for(var d=1/i,u=function(t){var e=Math.floor(.5*i+.3*t),a=n*o.rate*d,s=r.find((function(t){return t.damage===e}));s?s.rate+=a:r.push({damage:e,rate:a})},h=0;h<i;h+=1)u(h);else{var m=n*o.rate,v=r.find((function(t){return t.damage===c}));v?v.rate+=m:r.push({damage:c,rate:m})}},d=0;d<t.length;d+=1)c(d);return r}},{key:"getGrowSpeedString",value:function(t){switch(t.grow){case 2:return"100 戦";case 3:return"57 ~ 75 戦";case 4:return"39 ~ 47 戦";case 5:return"31 ~ 40 戦";case 6:return"25 ~ 31 戦";case 7:return"20 ~ 28 戦";case 8:return"18 ~ 23 戦";case 9:return"16 ~ 20 戦";default:return"不明"}}}]),t}()}});
//# sourceMappingURL=index.b4c43ebb.js.map