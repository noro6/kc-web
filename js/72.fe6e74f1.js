"use strict";(self["webpackChunkkc_web"]=self["webpackChunkkc_web"]||[]).push([[72],{5072:function(e,t,s){s.r(t),s.d(t,{default:function(){return Z}});var a=s(4562),i=s(9582),l=s(9223),n=s(4324),r=s(5495),o=s(3305),d=s(9481),c=s(3687),h=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"mb-5"},[t("div",{staticClass:"general-container"},[t(i.Z,{staticClass:"pa-3"},[t("div",{staticClass:"mt-2 search-inputs"},[t("div",{staticClass:"world-select-all"},[t(d.Z,{attrs:{dense:"","hide-details":"",items:e.areaItems,label:e.$t("Enemies.海域"),"menu-props":{maxHeight:"600px"}},on:{change:function(t){return e.changedWorld()}},model:{value:e.selectedArea,callback:function(t){e.selectedArea=t},expression:"selectedArea"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isEvent,expression:"isEvent"}]},[t(d.Z,{attrs:{dense:"","hide-details":"",items:e.levelItems,label:e.$t("Difficulty.難易度")},on:{change:function(t){return e.changedWorld()}},model:{value:e.level,callback:function(t){e.level=t},expression:"level"}})],1),t("div",{staticClass:"ml-3"},[t(a.Z,{attrs:{color:"success",disabled:e.isLoading||e.isSameSearchCondition},on:{click:function(t){return e.searchPreset()}}},[e._v(e._s(e.$t("Common.検索")))])],1),e.saveData&&e.saveData.length?t("div",{staticClass:"ml-auto align-self-end caption"},[e._v(e._s(e.saveData.length)+e._s(e.$t("Common.件")))]):e._e()])]),t("div",e._l(e.saveData,(function(s,o){return t(i.Z,{key:`data_${o}`,staticClass:"preset-item"},[t("div",{staticClass:"d-flex"},[t("div",{staticClass:"align-self-end"},[e._v(e._s(s.name))]),t(c.Z),t(a.Z,{attrs:{icon:""},on:{click:function(t){return e.expandPreset(s)}}},[t(n.Z,[e._v("mdi-download")])],1)],1),t(l.Z),t("div",{staticClass:"d-flex flex-wrap my-1"},e._l(s.ships,(function(s,a){return t("div",{key:`ship${o}_${a}`},[s.data.id&&s.isActive?t(r.Z,{attrs:{src:`./img/ship/${s.data.id}.png`,height:"30",width:"120"}}):e._e()],1)})),0),s.ships2&&s.ships2.length?t("div",{staticClass:"d-flex flex-wrap my-1"},e._l(s.ships2,(function(e,s){return t("div",{key:`ship${o}_${s}`},[t(r.Z,{attrs:{src:`./img/ship/${e.data.id}.png`,height:"30",width:"120"}})],1)})),0):e._e(),s.memo?t("div",{staticClass:"preset-memo"},[e._v(e._s(s.memo))]):e._e(),t("div",{staticClass:"d-flex flex-wrap justify-end"},[t("div",{staticClass:"d-flex mx-2"},[t("div",[t(n.Z,{attrs:{small:""}},[e._v("mdi-account")])],1),t("div",{staticClass:"caption align-self-center"},[e._v(e._s(s.user))])]),t("div",{staticClass:"d-flex mx-2"},[t("div",[t(n.Z,{attrs:{small:""}},[e._v("mdi-clock-time-four-outline")])],1),t("div",{staticClass:"caption align-self-center"},[e._v(e._s(s.createdAt))])])])],1)})),1),e.enabledMoreLoad&&!e.isLoading?t("div",{staticClass:"mt-3"},[t(a.Z,{attrs:{color:"primary",block:""},on:{click:function(t){return e.searchPreset()}}},[e._v(e._s(e.$t("Common.さらに読み込む")))])],1):e._e(),e.isLoading?t("div",{staticClass:"py-5"},[t("div",{staticClass:"d-flex justify-center"},[t(o.Z,{attrs:{size:"70",color:"secondary",indeterminate:""}})],1)]):e._e()],1),t("div",{staticClass:"info-area"},[t(l.Z,{staticClass:"mb-2"}),t("div",{staticClass:"caption"},[e._v(" "+e._s(e.$t("Home.著作権法第32条に基づき画像を引用し、著作権は権利者様へ帰属します。権利者様側からの画像等の削除の依頼や警告には速やかに対処いたします。"))+" ")]),t("div",{staticClass:"caption"},[e._v(" "+e._s(e.$t("Home.また、本サイトの情報、計算結果によって受けた利益・損害その他あらゆる事象については一切の責任を負いません。"))+" ")])],1)])},m=[],v=s(144),p=s(6141),u=s(857),f=s(6770),g=s(4045),_=s(6961),D=s.n(_);const C=20;var $=v.ZP.extend({name:"SaveDataList",components:{},data:()=>({areaItems:[],selectedArea:11,level:p.xh.HARD,saveData:[],isLoading:!1,lastMap:0,lastLevel:0,lastDocument:void 0}),mounted(){const e=this.$store.state.saveData;e.disabledMain(),this.initWorlds();const t=this.$store.state.searchedList;t&&t.length&&(this.saveData=t)},computed:{needTrans(){return"ja"!==this.$i18n.locale},levelItems(){if(this.needTrans){const e=[];for(let t=0;t<p.ZP.DIFFICULTY_LEVELS.length;t+=1){const{text:s,value:a}=p.ZP.DIFFICULTY_LEVELS[t];e.push({text:`${this.$t(`Difficulty.${s}`)}`,value:a})}return e}return p.ZP.DIFFICULTY_LEVELS},getCompletedAll(){return this.$store.getters.getCompletedAll},isEvent(){return Math.floor(this.selectedArea/10)>40},isSameSearchCondition(){return this.lastMap===this.selectedArea&&this.lastLevel===this.level},enabledMoreLoad(){return!!this.lastDocument&&this.isSameSearchCondition}},watch:{getCompletedAll(e){e&&this.initWorlds()}},methods:{initWorlds(){const e=[],t=this.$store.state.worlds,s=this.$store.state.maps;if(t&&s)for(let a=0;a<t.length;a+=1){const i=t[a],l=s.filter((e=>Math.floor(e.area/10)===i.world));if(l.length){a>0&&e.push({divider:!0}),e.push({header:i.name});for(let t=0;t<l.length;t+=1){const s=l[t],a=i.world>40?"E":`${i.world}`;e.push({value:s.area,text:`${a}-${s.area%10}：${s.name}`,group:i.name})}}}this.areaItems=e},changedWorld(){this.isLoading=!1},async searchPreset(){this.isLoading=!0,this.enabledMoreLoad||(this.saveData=[]);try{const e=(0,u.ad)(),t=4-this.level;let s;s=this.isEvent?this.lastDocument?(0,u.IO)((0,u.hJ)(e,"presets"),(0,u.ar)("map","==",this.selectedArea),(0,u.ar)("level","==",t),(0,u.Xo)("createdAt","desc"),(0,u.TQ)(this.lastDocument),(0,u.b9)(C)):(0,u.IO)((0,u.hJ)(e,"presets"),(0,u.ar)("map","==",this.selectedArea),(0,u.ar)("level","==",t),(0,u.Xo)("createdAt","desc"),(0,u.b9)(C)):this.lastDocument?(0,u.IO)((0,u.hJ)(e,"presets"),(0,u.ar)("map","==",this.selectedArea),(0,u.ar)("level","==",0),(0,u.Xo)("createdAt","desc"),(0,u.TQ)(this.lastDocument),(0,u.b9)(C)):(0,u.IO)((0,u.hJ)(e,"presets"),(0,u.ar)("map","==",this.selectedArea),(0,u.ar)("level","==",0),(0,u.Xo)("createdAt","desc"),(0,u.b9)(C)),this.lastMap=this.selectedArea,this.lastLevel=this.level;const a=await(0,u.PL)(s),i=[],l=this.$store.state.items,n=this.$store.state.ships,r=this.$store.state.defaultEnemies,o=new f.Z(l,n,r);a.forEach((e=>{const t=e.data();if(2===t.ver){const s=D().decompressFromBase64(e.data().data)||"",a=g.Z.loadSaveDataManagerString(s,l,n,r,!0);a&&(t.ships=a.fleetInfo.fleets[0].ships,a.fleetInfo.isUnion&&(t.ships2=a.fleetInfo.fleets[1].ships.filter((e=>e.data.id))),t.manager=a,t.createdAt=f.Z.formatDate(e.data().createdAt.toDate(),"yyyy/MM/dd HH:mm:ss"),i.push(t))}else{const s=o.restoreOldSaveData(e.data().data);s&&(t.ships=s.fleetInfo.fleets[0].ships,s.fleetInfo.isUnion&&(t.ships2=s.fleetInfo.fleets[1].ships.filter((e=>e.data.id))),t.manager=s,t.createdAt=f.Z.formatDate(e.data().createdAt.toDate(),"yyyy/MM/dd HH:mm:ss"),i.push(t))}})),this.lastDocument&&this.saveData?this.saveData=this.saveData.concat(i):this.saveData=i,a&&a.docs.length>=C?this.lastDocument=a.docs[a.docs.length-1]:this.lastDocument=void 0,this.$store.dispatch("setSearchedList",this.saveData)}catch(e){console.error(e),this.saveData=[],this.$emit("inform","編成データ読み込み中にエラーが発生しました。",!0)}this.isLoading=!1},expandPreset(e){const t=this.$store.state.saveData;t.disabledMain();const s=new g.Z;s.name=e.name,s.remarks=e.memo,s.tempData=[e.manager],s.tempIndex=0,s.isActive=!0,s.isMain=!0,t.childItems.push(s),this.$store.dispatch("updateSaveData",t),this.$store.dispatch("setMainSaveData",s),this.$router.push("aircalc")}}}),x=$,A=s(1001),L=(0,A.Z)(x,h,m,!1,null,"1450a95c",null),Z=L.exports}}]);
//# sourceMappingURL=72.fe6e74f1.js.map