"use strict";(self["webpackChunkkc_web"]=self["webpackChunkkc_web"]||[]).push([[433],{8433:function(e,t,s){s.r(t),s.d(t,{default:function(){return b}});var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mb-5"},[s("div",{staticClass:"general-container"},[s("v-card",{staticClass:"pa-3"},[s("div",{staticClass:"mt-2 search-inputs"},[s("div",{staticClass:"world-select-all"},[s("v-select",{attrs:{dense:"","hide-details":"",items:e.areaItems,label:e.$t("Enemies.海域"),"menu-props":{maxHeight:"600px"}},on:{change:function(t){return e.changedWorld()}},model:{value:e.selectedArea,callback:function(t){e.selectedArea=t},expression:"selectedArea"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isEvent,expression:"isEvent"}]},[s("v-select",{attrs:{dense:"","hide-details":"",items:e.levelItems,label:e.$t("Difficulty.難易度")},on:{change:function(t){return e.changedWorld()}},model:{value:e.level,callback:function(t){e.level=t},expression:"level"}})],1),s("div",{staticClass:"ml-3"},[s("v-btn",{attrs:{color:"success",disabled:e.isLoading||e.isSameSearchCondition},on:{click:function(t){return e.searchPreset()}}},[e._v(e._s(e.$t("Common.検索")))])],1),e.saveData&&e.saveData.length?s("div",{staticClass:"ml-auto align-self-end caption"},[e._v(e._s(e.saveData.length)+e._s(e.$t("Common.件")))]):e._e()])]),s("div",e._l(e.saveData,function(t,a){return s("v-card",{key:"data_"+a,staticClass:"preset-item"},[s("div",{staticClass:"d-flex"},[s("div",{staticClass:"align-self-end"},[e._v(e._s(t.name))]),s("v-spacer"),s("v-btn",{attrs:{icon:""},on:{click:function(s){return e.expandPreset(t)}}},[s("v-icon",[e._v("mdi-download")])],1)],1),s("v-divider"),s("div",{staticClass:"d-flex flex-wrap my-1"},e._l(t.ships,function(t,i){return s("div",{key:"ship"+a+"_"+i},[t.data.id&&t.isActive?s("v-img",{attrs:{src:"./img/ship/banner/"+t.data.id+".png",height:"30",width:"120"}}):e._e()],1)}),0),t.ships2&&t.ships2.length?s("div",{staticClass:"d-flex flex-wrap my-1"},e._l(t.ships2,function(e,t){return s("div",{key:"ship"+a+"_"+t},[s("v-img",{attrs:{src:"./img/ship/banner/"+e.data.id+".png",height:"30",width:"120"}})],1)}),0):e._e(),t.memo?s("div",{staticClass:"preset-memo"},[e._v(e._s(t.memo))]):e._e(),s("div",{staticClass:"d-flex flex-wrap justify-end"},[s("div",{staticClass:"d-flex mx-2"},[s("div",[s("v-icon",{attrs:{small:""}},[e._v("mdi-account")])],1),s("div",{staticClass:"caption align-self-center"},[e._v(e._s(t.user))])]),s("div",{staticClass:"d-flex mx-2"},[s("div",[s("v-icon",{attrs:{small:""}},[e._v("mdi-clock-time-four-outline")])],1),s("div",{staticClass:"caption align-self-center"},[e._v(e._s(t.createdAt))])])])],1)}),1),e.enabledMoreLoad&&!e.isLoading?s("div",{staticClass:"mt-3"},[s("v-btn",{attrs:{color:"primary",block:""},on:{click:function(t){return e.searchPreset()}}},[e._v(e._s(e.$t("Common.さらに読み込む")))])],1):e._e(),e.isLoading?s("div",{staticClass:"py-5"},[s("div",{staticClass:"d-flex justify-center"},[s("v-progress-circular",{attrs:{size:"70",color:"secondary",indeterminate:""}})],1)]):e._e()],1),s("div",{staticClass:"info-area"},[s("v-divider",{staticClass:"mb-2"}),s("div",{staticClass:"caption"},[e._v(" "+e._s(e.$t("Home.著作権法第32条に基づき画像を引用し、著作権は権利者様へ帰属します。権利者様側からの画像等の削除の依頼や警告には速やかに対処いたします。"))+" ")]),s("div",{staticClass:"caption"},[e._v(" "+e._s(e.$t("Home.また、本サイトの情報、計算結果によって受けた利益・損害その他あらゆる事象については一切の責任を負いません。"))+" ")])],1)])},i=[],l=(s(3725),s(5019),s(9838),s(5471)),n=s(3993),r=s(440),d=s(2236),c=s(2557),o=s(2992),h=s.n(o);const v=20;var m=l.A.extend({name:"SaveDataList",components:{},data:()=>({areaItems:[],selectedArea:11,level:n.D7.HARD,saveData:[],isLoading:!1,lastMap:0,lastLevel:0,lastDocument:void 0}),mounted(){const e=this.$store.state.saveData;e.disabledMain(),this.initWorlds();const t=this.$store.state.searchedList;t&&t.length&&(this.saveData=t)},computed:{needTrans(){return"ja"!==this.$i18n.locale},levelItems(){if(this.needTrans){const e=[];for(let t=0;t<n.Ay.DIFFICULTY_LEVELS.length;t+=1){const{text:s,value:a}=n.Ay.DIFFICULTY_LEVELS[t];e.push({text:`${this.$t(`Difficulty.${s}`)}`,value:a})}return e}return n.Ay.DIFFICULTY_LEVELS},getCompletedAll(){return this.$store.getters.getCompletedAll},isEvent(){return Math.floor(this.selectedArea/10)>40},isSameSearchCondition(){return this.lastMap===this.selectedArea&&this.lastLevel===this.level},enabledMoreLoad(){return!!this.lastDocument&&this.isSameSearchCondition}},watch:{getCompletedAll(e){e&&this.initWorlds()}},methods:{initWorlds(){const e=[],t=this.$store.state.worlds,s=this.$store.state.maps;if(t&&s)for(let a=0;a<t.length;a+=1){const i=t[a],l=s.filter(e=>Math.floor(e.area/10)===i.world);if(l.length){a>0&&e.push({divider:!0}),e.push({header:i.name});for(let t=0;t<l.length;t+=1){const s=l[t],a=i.world>40?"E":`${i.world}`;e.push({value:s.area,text:`${a}-${s.area%10}：${s.name}`,group:i.name})}}}this.areaItems=e},changedWorld(){this.isLoading=!1},async searchPreset(){this.isLoading=!0,this.enabledMoreLoad||(this.saveData=[]);try{const e=(0,r.aU)(),t=4-this.level;let s;s=this.isEvent?this.lastDocument?(0,r.P)((0,r.rJ)(e,"presets"),(0,r._M)("map","==",this.selectedArea),(0,r._M)("level","==",t),(0,r.My)("createdAt","desc"),(0,r.HM)(this.lastDocument),(0,r.AB)(v)):(0,r.P)((0,r.rJ)(e,"presets"),(0,r._M)("map","==",this.selectedArea),(0,r._M)("level","==",t),(0,r.My)("createdAt","desc"),(0,r.AB)(v)):this.lastDocument?(0,r.P)((0,r.rJ)(e,"presets"),(0,r._M)("map","==",this.selectedArea),(0,r._M)("level","==",0),(0,r.My)("createdAt","desc"),(0,r.HM)(this.lastDocument),(0,r.AB)(v)):(0,r.P)((0,r.rJ)(e,"presets"),(0,r._M)("map","==",this.selectedArea),(0,r._M)("level","==",0),(0,r.My)("createdAt","desc"),(0,r.AB)(v)),this.lastMap=this.selectedArea,this.lastLevel=this.level;const a=await(0,r.GG)(s),i=[],l=this.$store.state.items,n=this.$store.state.ships,o=this.$store.state.defaultEnemies,m=new d.A(l,n,o);a.forEach(e=>{const t=e.data();if(2===t.ver){const s=h().decompressFromBase64(e.data().data)||"",a=c.A.loadSaveDataManagerString(s,l,n,o,!0);a&&(t.ships=a.fleetInfo.fleets[0].ships,a.fleetInfo.isUnion&&(t.ships2=a.fleetInfo.fleets[1].ships.filter(e=>e.data.id)),t.manager=a,t.createdAt=d.A.formatDate(e.data().createdAt.toDate(),"yyyy/MM/dd HH:mm:ss"),i.push(t))}else{const s=m.restoreOldSaveData(e.data().data);s&&(t.ships=s.fleetInfo.fleets[0].ships,s.fleetInfo.isUnion&&(t.ships2=s.fleetInfo.fleets[1].ships.filter(e=>e.data.id)),t.manager=s,t.createdAt=d.A.formatDate(e.data().createdAt.toDate(),"yyyy/MM/dd HH:mm:ss"),i.push(t))}}),this.lastDocument&&this.saveData?this.saveData=this.saveData.concat(i):this.saveData=i,a&&a.docs.length>=v?this.lastDocument=a.docs[a.docs.length-1]:this.lastDocument=void 0,this.$store.dispatch("setSearchedList",this.saveData)}catch(e){console.error(e),this.saveData=[],this.$emit("inform","編成データ読み込み中にエラーが発生しました。",!0)}this.isLoading=!1},expandPreset(e){const t=this.$store.state.saveData;t.disabledMain();const s=new c.A;s.name=e.name,s.remarks=e.memo,s.tempData=[e.manager],s.tempIndex=0,s.isActive=!0,s.isMain=!0,t.childItems.push(s),this.$store.dispatch("updateSaveData",t),this.$store.dispatch("setMainSaveData",s),this.$router.push("aircalc")}}}),p=m,u=s(1656),f=s(9963),g=s.n(f),_=s(375),A=s(1689),D=s(1770),C=s(9456),M=s(980),$=s(2585),y=s(9555),x=s(7410),L=(0,u.A)(p,a,i,!1,null,"1497d9d0",null),b=L.exports;g()(L,{VBtn:_.A,VCard:A.A,VDivider:D.A,VIcon:C.A,VImg:M.A,VProgressCircular:$.A,VSelect:y.A,VSpacer:x.A})}}]);
//# sourceMappingURL=433.15689eee.js.map