"use strict";(self["webpackChunkkc_web"]=self["webpackChunkkc_web"]||[]).push([[177],{3117:function(t,e,s){s.d(e,{Z:function(){return S}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"pa-2 detail-card"},[s("div",{staticClass:"d-flex pb-1"},[s("div",{staticClass:"align-self-center ml-3"},[t._v(t._s(t.$t("Fleet.艦隊詳細")))]),s("v-spacer"),s("v-btn",{attrs:{icon:""},on:{click:t.close}},[s("v-icon",[t._v("mdi-close")])],1)],1),s("v-divider",{staticClass:"mb-1"}),s("v-tabs",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[s("v-tab",{attrs:{href:"#fleet"}},[t._v(t._s(t.$t("Fleet.艦隊情報")))]),s("v-tab",{attrs:{href:"#stage2"}},[t._v(t._s(t.$t("Fleet.対空砲火")))]),s("v-tab",{attrs:{href:"#contact"}},[t._v(t._s(t.$t("Fleet.触接")))]),s("v-tab-item",{staticClass:"detail-fleet",attrs:{value:"fleet"}},[s("v-divider"),s("div",{staticClass:"ma-1"},[s("div",{staticClass:"d-flex air-power-info flex-wrap"},[s("div",{staticClass:"text--secondary label-text body-2"},[t._v(t._s(t.$t("Common.制空")))]),s("div",{staticClass:"value-text mr-3"},[t._v(t._s(t.fleet.fullAirPower))]),s("div",[s("v-chip",{staticClass:"mr-1",attrs:{color:"green",label:"",outlined:""}},[s("span",[t._v(t._s(t.$t("Common.確保")))]),s("span",{staticClass:"chip-value"},[t._v(t._s(t.fleet.fullBorders[0]))])]),s("v-chip",{staticClass:"mr-1",attrs:{color:"light-green",label:"",outlined:""}},[s("span",[t._v(t._s(t.$t("Common.優勢")))]),s("span",{staticClass:"chip-value"},[t._v(t._s(t.fleet.fullBorders[1]))])]),s("v-chip",{staticClass:"mr-1",attrs:{color:"orange",label:"",outlined:""}},[s("span",[t._v(t._s(t.$t("Common.拮抗")))]),s("span",{staticClass:"chip-value"},[t._v(t._s(t.fleet.fullBorders[2]))])]),s("v-chip",{staticClass:"mr-1",attrs:{color:"deep-orange",label:"",outlined:""}},[s("span",[t._v(t._s(t.$t("Common.劣勢")))]),s("span",{staticClass:"chip-value"},[t._v(t._s(t.fleet.fullBorders[3]))])])],1)]),t.fleet.fullAirPower!==t.fleet.fullAirbaseAirPower?s("div",{staticClass:"mt-1 d-flex air-power-info flex-wrap"},[s("div",{staticClass:"text--secondary label-text body-2"},[t._v(t._s(t.$t("Common.基地制空")))]),s("div",{staticClass:"value-text mr-3"},[t._v(t._s(t.fleet.fullAirbaseAirPower))]),s("div",[s("v-chip",{staticClass:"mr-1",attrs:{color:"green",label:"",outlined:""}},[s("span",[t._v(t._s(t.$t("Common.確保")))]),s("span",{staticClass:"chip-value"},[t._v(t._s(t.fleet.fullAirbaseBorders[0]))])]),s("v-chip",{staticClass:"mr-1",attrs:{color:"light-green",label:"",outlined:""}},[s("span",[t._v(t._s(t.$t("Common.優勢")))]),s("span",{staticClass:"chip-value"},[t._v(t._s(t.fleet.fullAirbaseBorders[1]))])]),s("v-chip",{staticClass:"mr-1",attrs:{color:"orange",label:"",outlined:""}},[s("span",[t._v(t._s(t.$t("Common.拮抗")))]),s("span",{staticClass:"chip-value"},[t._v(t._s(t.fleet.fullAirbaseBorders[2]))])]),s("v-chip",{staticClass:"mr-1",attrs:{color:"deep-orange",label:"",outlined:""}},[s("span",[t._v(t._s(t.$t("Common.劣勢")))]),s("span",{staticClass:"chip-value"},[t._v(t._s(t.fleet.fullAirbaseBorders[3]))])])],1)]):t._e()]),s("v-divider"),s("div",[s("div",{staticClass:"mt-3 mb-5"},[t.fleet.isUnion?s("div",{staticClass:"d-flex"},[s("div",{staticClass:"align-self-center px-2 primary--text"},[t._v(t._s(t.$t("Fleet.第x艦隊",{number:1})))]),s("div",{staticClass:"align-self-center body-2 ml-4 text--secondary"},[t._v(t._s(t.$t("Common.制空値")))]),s("div",{staticClass:"align-self-center body-2 ml-1"},[t._v(t._s(t.fleet.mainAirPower))]),s("div",{staticClass:"align-self-center body-2 ml-4 text--secondary"},[t._v(t._s(t.$t("Common.基地制空")))]),s("div",{staticClass:"align-self-center body-2 ml-1"},[t._v(t._s(t.fleet.mainAirbaseAirPower))])]):t._e(),s("div",{staticClass:"enemy-inputs-container"},t._l(t.fleet.mainEnemies,(function(e,i){return s("enemy-input",{key:i,attrs:{enemy:e,"handle-show-item-list":t.showItemList}})})),1)]),t.fleet.isUnion?s("v-divider"):t._e(),t.fleet.isUnion?s("div",{staticClass:"my-3"},[s("div",{staticClass:"d-flex"},[s("div",{staticClass:"align-self-center px-2 success--text"},[t._v(t._s(t.$t("Fleet.第x艦隊",{number:2})))]),s("div",{staticClass:"align-self-center body-2 ml-4 text--secondary"},[t._v(t._s(t.$t("Common.制空値")))]),s("div",{staticClass:"align-self-center body-2 ml-1"},[t._v(t._s(t.fleet.escortAirPower))]),s("div",{staticClass:"align-self-center body-2 ml-4 text--secondary"},[t._v(t._s(t.$t("Common.基地制空")))]),s("div",{staticClass:"align-self-center body-2 ml-1"},[t._v(t._s(t.fleet.escortAirbaseAirPower))])]),s("div",{staticClass:"enemy-inputs-container"},t._l(t.fleet.escortEnemies,(function(e,i){return s("enemy-input",{key:i,attrs:{enemy:e,"handle-show-item-list":t.showItemList}})})),1)]):t._e()],1)],1),s("v-tab-item",{staticClass:"detail-fleet",attrs:{value:"stage2"}},[s("v-divider"),s("anti-air-calculator",{ref:"antiAirCalculator",attrs:{fleet:t.fleet}})],1),s("v-tab-item",{staticClass:"detail-fleet",attrs:{value:"contact"}},[s("v-divider"),s("contact-rates",{ref:"contactRates",attrs:{fleet:t.fleet}})],1)],1)],1)},a=[],n=s(144),l=s(4691),o=s(1171),r=s(6889),c=s(2981),d=n.Z.extend({components:{EnemyInput:c.Z,AntiAirCalculator:l.Z,ContactRates:o.Z},name:"EnemyDetail",props:{handleShowItemList:{type:Function},fleet:{type:r.Z,required:!0},handleClose:{type:Function,required:!0}},data:()=>({tab:"stage2"}),mounted(){const t=this.$refs.contactRates;t&&t.calculate();const e=this.$refs.antiAirCalculator;e&&e.updateTable()},methods:{showItemList(t,e){this.handleShowItemList(t,e)},close(){this.handleClose()}}}),m=d,u=s(1001),h=s(3453),p=s.n(h),v=s(4562),f=s(9582),g=s(4127),y=s(9223),_=s(4324),x=s(8718),b=s(626),C=s(2165),w=s(7771),k=(0,u.Z)(m,i,a,!1,null,"21ee3be4",null),S=k.exports;p()(k,{VBtn:v.Z,VCard:f.Z,VChip:g.Z,VDivider:y.Z,VIcon:_.Z,VSpacer:x.Z,VTab:b.Z,VTabItem:C.Z,VTabs:w.Z})},2981:function(t,e,s){s.d(e,{Z:function(){return w}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"ma-1 pa-2 enemy-preview"},[s("div",{staticClass:"d-flex"},[s("div",{staticClass:"align-self-center"},[s("v-img",{attrs:{src:"./img/ship/"+t.enemy.data.id+".png",height:"30",width:"120"}})],1),s("div",{staticClass:"flex-grow-1"},[s("div",{staticClass:"d-flex caption flex-wrap"},[s("div",{staticClass:"enemy-id ml-2 primary--text"},[t._v("id "+t._s(t.enemy.data.id))]),s("div",{staticClass:"ml-2"},[s("span",{staticClass:"text--secondary"},[t._v(t._s(t.$t("Common.耐久")))]),s("span",{staticClass:"ml-1 font-weight-medium"},[t._v(t._s(t.enemy.data.hp))]),s("span",{staticClass:"ml-2 text--secondary"},[t._v(t._s(t.$t("Common.装甲")))]),s("span",{staticClass:"ml-1 font-weight-medium"},[t._v(t._s(t.enemy.actualArmor))])])]),s("div",{staticClass:"d-flex"},[s("div",{staticClass:"enemy-name ml-2 text-truncate"},[t._v(t._s(t.getEnemyName(t.enemy.data.name)))])])])]),s("div",{staticClass:"d-flex caption px-1 flex-wrap"},[t.enemy.fullAirPower>0||!t.enemy.fullLBAirPower?s("div",[s("span",{staticClass:"text--secondary"},[t._v(t._s(t.$t("Common.制空")))]),s("span",{staticClass:"ml-1 font-weight-medium"},[t._v(t._s(t.enemy.fullAirPower))]),s("span",{staticClass:"ml-1 mr-2 text--secondary"},[t._v(t._s(t.airPowerDetail))])]):t._e(),t.enemy.fullLBAirPower&&t.enemy.fullLBAirPower!==t.enemy.fullAirPower?s("div",[s("span",{staticClass:"text--secondary"},[t._v(t._s(t.$t("Common.基地制空")))]),s("span",{staticClass:"ml-1 font-weight-medium"},[t._v(t._s(t.enemy.fullLBAirPower))]),s("span",{staticClass:"ml-1 mr-2 text--secondary"},[t._v(t._s(t.airPowerDetailAB))])]):t._e()]),s("div",{staticClass:"caption px-1"},[s("span",{staticClass:"text--secondary"},[t._v(t._s(t.$t("Common.装備命中")))]),s("span",{staticClass:"ml-1 font-weight-medium"},[t._v(t._s(t.enemy.sumItemAccuracy))]),s("span",{staticClass:"ml-3 text--secondary"},[t._v(t._s(t.$t("Common.総搭載数")))]),s("span",{staticClass:"ml-1 font-weight-medium"},[t._v(t._s(t.sumSlot))])]),s("v-divider",{staticClass:"item-input-divider"}),s("div",t._l(t.enemy.items,(function(e,i){return s("div",{key:i,on:{mouseenter:function(s){return t.bootTooltip(e,s)},mouseleave:t.clearTooltip,focus:function(s){return t.bootTooltip(e,s)},blur:t.clearTooltip}},[s("item-input",{attrs:{index:i,max:999,init:t.enemy.data.slots[i],"handle-show-item-list":t.showItemList,"handle-drag-start":t.clearTooltip,readonly:t.readonly,"is-enemy":!0},on:{input:t.updateItem},model:{value:t.enemy.items[i],callback:function(e){t.$set(t.enemy.items,i,e)},expression:"enemy.items[j]"}})],1)})),0),s("v-tooltip",{attrs:{color:"black",bottom:"",right:"",transition:"slide-y-transition","position-x":t.tooltipX,"position-y":t.tooltipY},model:{value:t.enabledTooltip,callback:function(e){t.enabledTooltip=e},expression:"enabledTooltip"}},[s("item-tooltip",{model:{value:t.tooltipItem,callback:function(e){t.tooltipItem=e},expression:"tooltipItem"}})],1)],1)},a=[],n=s(144),l=s(2297),o=s.n(l),r=s(6911),c=s(7487),d=s(5722),m=s(7525),u=s(2399),h=n.Z.extend({components:{ItemInput:r.Z,ItemTooltip:c.Z},name:"EnemyInput",props:{handleShowItemList:{type:Function},enemy:{type:d.Z,required:!0},readonly:{type:Boolean,default:!0}},data:()=>({enabledTooltip:!1,tooltipTimer:void 0,tooltipItem:new m.Z,tooltipX:0,tooltipY:0}),computed:{airPowerDetail(){const t=this.enemy.items.map((t=>t.data.isRecon?0:t.fullAirPower));return t.filter((t=>t>0)).length?`( ${t.join(" | ")} )`:""},airPowerDetailAB(){const t=this.enemy.items.map((t=>t.fullAirPower));return t.filter((t=>t>0)).length?`( ${t.join(" | ")} )`:""},sumSlot(){return o()(this.enemy.items.map((t=>t.fullSlot)))}},methods:{getEnemyName(t){const e=this.$store.state.siteSetting;if(t&&"ja"!==this.$i18n.locale&&!e.nameIsNotTranslate){const e=u.Z.getSuffix(t),s=t=>t?`${this.$t(t)}`:"";return e.map((t=>s(t))).join("")}return t||""},showItemList(t){this.readonly||this.handleShowItemList(t)},updateItem(){this.readonly||this.$emit("input",this.enemy)},bootTooltip(t,e){const s=this.$store.state.siteSetting;if(!t.data.id||s.disabledItemTooltip)return;const i=e.target.getElementsByClassName("item-name")[0];window.clearTimeout(this.tooltipTimer),this.tooltipTimer=window.setTimeout((()=>{const e=i.getBoundingClientRect();this.tooltipX=e.x+e.width/3,this.tooltipY=e.y+e.height,this.tooltipItem=t,this.enabledTooltip=!0}),Math.max(s.popUpCount,10))},clearTooltip(){this.enabledTooltip=!1,window.clearTimeout(this.tooltipTimer)}}}),p=h,v=s(1001),f=s(3453),g=s.n(f),y=s(9582),_=s(9223),x=s(5495),b=s(2082),C=(0,v.Z)(p,i,a,!1,null,"05c69e76",null),w=C.exports;g()(C,{VCard:y.Z,VDivider:_.Z,VImg:x.Z,VTooltip:b.Z})},7804:function(t,e,s){s.d(e,{Z:function(){return T}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-card",[s("div",{staticClass:"d-flex pt-2 pb-1 pr-2"},[s("div",{staticClass:"align-self-center ml-3"},[t._v(t._s(t.$t("Enemies.敵艦選択")))]),s("v-spacer"),s("v-btn",{attrs:{icon:""},on:{click:t.close}},[s("v-icon",[t._v("mdi-close")])],1)],1),s("v-divider"),s("div",{staticClass:"d-flex px-2 pt-2"},[s("div",{staticClass:"align-self-center"},[s("v-text-field",{attrs:{label:t.$t("ItemList.図鑑id 名称検索"),clearable:"","prepend-inner-icon":"mdi-magnify"},on:{input:function(e){return t.filter()}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),s("div",{staticClass:"ml-5 align-self-center"},[s("v-checkbox",{attrs:{label:t.$t("Enemies.地上施設")},on:{change:function(e){return t.filter()}},model:{value:t.isLandBase,callback:function(e){t.isLandBase=e},expression:"isLandBase"}})],1),s("v-spacer")],1),s("div",{staticClass:"d-flex flex-wrap mx-3"},t._l(t.types,(function(e,i){return s("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],key:i,staticClass:"type-selector",class:{active:i===t.type,disabled:t.keyword||t.isLandBase},attrs:{tabindex:"0"},on:{click:function(e){return t.changeType(i)},keypress:function(e){return t.changeType(i)}}},[t._v(" "+t._s(t.isNotJapanese?t.$t("SType."+e.text):e.text)+" ")])})),0),s("v-divider",{staticClass:"mx-3"}),s("div",{staticClass:"enemy-table-container pa-3"},t._l(t.enemies,(function(e,i){return s("div",{key:"type"+i},[s("div",{staticClass:"type-divider"},[s("div",{staticClass:"caption text--secondary"},[t._v(t._s(t.needTrans?t.$t(e.name):e.name))]),s("div",{staticClass:"type-divider-border"})]),s("div",{staticClass:"enemy-table-body"},t._l(e.enemies,(function(e,i){return s("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],key:i,staticClass:"enemy-list",attrs:{tabindex:"0"},on:{click:function(s){return t.clickedEnemy(e)},keypress:function(s){return t.clickedEnemy(e)},mouseenter:function(s){return t.bootTooltip(e,s)},mouseleave:t.clearTooltip,focus:function(s){return t.bootTooltip(e,s)},blur:t.clearTooltip}},[s("div",[s("v-img",{attrs:{src:"./img/ship/"+e.id+".png",height:"30",width:"120"}})],1),s("div",{staticClass:"flex-grow-1 ml-1"},[s("div",{staticClass:"d-flex align-center enemy-caption"},[s("div",{staticClass:"enemy-id primary--text"},[t._v(" id "),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.id))])]),s("div",{staticClass:"ml-1"},[t._v(" "+t._s(t.$t("Common.耐久"))+" "),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.hp))])]),s("div",{staticClass:"ml-1"},[t._v(" "+t._s(t.$t("Common.装甲"))+" "),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.armor))])])]),s("div",{staticClass:"d-flex"},[s("div",{staticClass:"enemy-name text-truncate",class:{"orange--text text--darken-2":e.isUnknown}},[t._v(" "+t._s(t.getEnemyName(e.name))+" ")])])])])})),0)])})),0)],1),s("v-tooltip",{attrs:{color:"black",bottom:"",right:"",transition:"slide-y-transition","position-x":t.tooltipX,"position-y":t.tooltipY},model:{value:t.enabledTooltip,callback:function(e){t.enabledTooltip=e},expression:"enabledTooltip"}},[s("enemy-tooltip",{model:{value:t.tooltipEnemy,callback:function(e){t.tooltipEnemy=e},expression:"tooltipEnemy"}})],1)],1)},a=[],n=s(144),l=s(7488),o=s(2399),r=s(6141),c=s(5722),d=n.Z.extend({name:"EnemyList",components:{EnemyTooltip:l.Z},props:{handleDecideEnemy:{type:Function,required:!0},handleClose:{type:Function,required:!0}},data:()=>({all:[],enemies:[],types:[],type:0,isLandBase:!1,keyword:"",enabledTooltip:!1,tooltipTimer:void 0,tooltipEnemy:new c.Z,tooltipX:0,tooltipY:0}),mounted(){const t=[],e=this.$store.state.defaultEnemies;for(let s=0;s<e.length;s+=1){const i=e[s];this.all.push(i),t.includes(i.type)||t.push(i.type)}for(let s=0;s<r.ZP.SHIP_TYPES_ALT.length;s+=1){const e=r.ZP.SHIP_TYPES_ALT[s];e.types.some((e=>t.includes(e)))&&this.types.push({text:e.text,types:e.types})}this.filter()},computed:{isNotJapanese(){return"ja"!==this.$i18n.locale},needTrans(){const t=this.$store.state.siteSetting;return"ja"!==this.$i18n.locale&&!t.nameIsNotTranslate}},methods:{getEnemyName(t){if(t&&this.needTrans){const e=o.Z.getSuffix(t),s=t=>t?`${this.$t(t)}`:"";return e.map((t=>s(t))).join("")}return t||""},changeType(t=0){this.type=t,this.filter()},filter(){const t=this.keyword;let e=this.all.concat();const s=this.types[this.type];t?e=e.filter((e=>e.id===+t||e.name.indexOf(t)>=0)):this.isLandBase?e=e.filter((t=>t.isLandBase)):s&&(e=e.filter((t=>!t.isLandBase&&s.types.includes(t.type))));const i=[];for(let a=0;a<e.length;a+=1){const t=e[a].name.substring(0,4);i.includes(t)||i.push(t)}this.enemies=[];for(let a=0;a<i.length;a+=1){const t=i[a],s=e.filter((e=>e.name.startsWith(t)));if(s.length){const t=o.Z.getSuffix(s[0].name)[0];this.enemies.push({name:t,enemies:s})}}},clickedEnemy(t){this.clearTooltip(),this.handleDecideEnemy(t)},close(){this.handleClose()},bootTooltip(t,e){if(!t.id)return;const s=this.$store.state.siteSetting,i=e.target.getElementsByClassName("enemy-id")[0];window.clearTimeout(this.tooltipTimer),this.tooltipTimer=window.setTimeout((()=>{const s=i.getBoundingClientRect();this.tooltipX=e.clientX,this.tooltipY=s.y+s.height;const a=this.$store.state.manualEnemies,n=a.find((e=>e.id===t.id));this.tooltipEnemy=n?c.Z.createEnemyFromMaster(n,!1,this.$store.state.items):c.Z.createEnemyFromMaster(t,!1,this.$store.state.items),this.enabledTooltip=!0}),Math.max(s.popUpCount,10))},clearTooltip(){this.enabledTooltip=!1,window.clearTimeout(this.tooltipTimer)}}}),m=d,u=s(1001),h=s(3453),p=s.n(h),v=s(4562),f=s(9582),g=s(3486),y=s(9223),_=s(4324),x=s(5495),b=s(8718),C=s(9780),w=s(2082),k=s(6392),S=s.n(k),I=s(7069),A=(0,u.Z)(m,i,a,!1,null,"3073d011",null),T=A.exports;p()(A,{VBtn:v.Z,VCard:f.Z,VCheckbox:g.Z,VDivider:y.Z,VIcon:_.Z,VImg:x.Z,VSpacer:b.Z,VTextField:C.Z,VTooltip:w.Z}),S()(A,{Ripple:I.Z})},7488:function(t,e,s){s.d(e,{Z:function(){return f}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"py-1"},[s("div",{staticClass:"d-flex"},[s("div",{staticClass:"ml-1"},[s("div",{staticClass:"d-flex"},[s("div",{staticClass:"tooltip-item-text id"},[t._v(" id "),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.value.data.id))])]),s("div",{staticClass:"ml-2 tooltip-item-text"},[t._v(" "+t._s(t.$t("Common.耐久"))+" "),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.value.data.hp))])]),s("div",{staticClass:"ml-2 tooltip-item-text"},[t._v(" "+t._s(t.$t("Common.装甲"))+" "),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.value.data.armor)+" ("+t._s(t.armor)+")")])])]),s("div",{staticClass:"d-flex my-1"},[s("div",[t._v(t._s(t.getEnemyName(t.value.data.name)))]),s("v-spacer"),t.value.antiAirCutIn.length?s("div",{staticClass:"ml-3 anti-air-cutin"},[t._v("対空CI発動可能")]):t._e()],1)])]),s("div",t._l(t.value.items,(function(e,i){return s("div",{key:i},[s("div",{staticClass:"d-flex"},[s("div",{staticClass:"align-self-center item-slot",class:{"orange--text text--darken-2":t.value.data.isUnknown}},[s("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.fullSlot))]),t._v(t._s(t.value.data.isUnknown?"?":"")+" ")]),s("div",[s("v-img",{attrs:{src:"./img/type/icon"+e.data.iconTypeId+".png",height:"30",width:"30"}})],1),s("div",{staticClass:"ml-1 align-self-center tooltip-item-text id"},[t._v(" id "),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.data.id))])]),s("div",{staticClass:"ml-1 align-self-center item-name"},[t._v(t._s(t.needTrans?t.$t(""+e.data.name):e.data.name))])])])})),0)])},a=[],n=s(144),l=s(5722),o=s(2399),r=n.Z.extend({name:"EnemyTooltip",props:{value:{type:l.Z,required:!0}},computed:{armor(){let t=0;for(let e=0;e<this.value.items.length;e+=1)t+=this.value.items[e].data.armor;return this.value.data.armor+t},needTrans(){const t=this.$store.state.siteSetting;return"ja"!==this.$i18n.locale&&!t.nameIsNotTranslate}},methods:{getEnemyName(t){if(t&&this.needTrans){const e=o.Z.getSuffix(t),s=t=>t?`${this.$t(t)}`:"";return e.map((t=>s(t))).join("")}return t||""}}}),c=r,d=s(1001),m=s(3453),u=s.n(m),h=s(5495),p=s(8718),v=(0,d.Z)(c,i,a,!1,null,"0c60d440",null),f=v.exports;u()(v,{VImg:h.Z,VSpacer:p.Z})},5012:function(t,e,s){s.d(e,{Z:function(){return B}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"ma-1 ship-input",class:{disabled:!t.ship.isActive,"py-1":!t.ship.isEmpty},on:{mousedown:t.setDraggable,mouseup:t.resetDraggable,dragstart:function(e){return t.dragStart(e)},dragend:function(e){return t.dragEnd(e)},dragenter:function(e){return t.dragEnter(e)},dragleave:function(e){return t.dragLeave(e)},drop:function(e){return e.stopPropagation(),t.dropShip(e)},dragover:function(t){t.preventDefault()}}},[t.ship.isEmpty?[s("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],staticClass:"empty-ship d-flex",attrs:{tabindex:"0"},on:{click:function(e){return e.stopPropagation(),t.showShipList.apply(null,arguments)},keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.showShipList.apply(null,arguments)}}},[s("div",{staticClass:"align-self-center"},[t._v(t._s(t.shipName))]),t.handleShowTempShipList?s("div",{staticClass:"empty-temp-list"},[s("v-tooltip",{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[s("v-btn",t._g(t._b({attrs:{icon:"",small:"",color:"orange lighten-2"},on:{click:function(e){return e.stopPropagation(),t.showTempShip()}}},"v-btn",a,!1),i),[s("v-icon",{attrs:{small:""}},[t._v("mdi-clipboard-arrow-down")])],1)]}}],null,!1,3999962373)},[s("span",[t._v(t._s(t.$t("Fleet.艦娘クリップボード")))])])],1):t._e()])]:[s("div",{staticClass:"d-flex px-2"},[t.isNoShip?t._e():s("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],staticClass:"align-self-center ship-img-container",attrs:{tabindex:"0"},on:{click:function(e){return e.stopPropagation(),t.showShipList.apply(null,arguments)},keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.showShipList.apply(null,arguments)}}},[s("div",{staticClass:"ship-img",on:{mouseenter:function(e){return t.bootShipTooltip(e)},mouseleave:t.clearTooltip,focus:function(e){return t.bootShipTooltip(e)},blur:t.clearTooltip}},[s("v-img",{attrs:{src:"./img/ship/"+t.ship.data.id+".png",height:"30",width:"120"}})],1),t.ship.area>0&&t.ship.area<=t.maxAreas?s("div",{staticClass:"area-banner"},[s("v-img",{attrs:{src:"https://res.cloudinary.com/aircalc/kc-web/areas/area"+t.ship.area+".webp",height:"40",width:"29"}})],1):t._e()]),s("div",{staticClass:"flex-grow-1"},[s("div",{staticClass:"caption"},[s("v-menu",{attrs:{"close-on-content-click":!1,transition:"slide-y-transition","max-width":"360","min-width":"360",bottom:"",right:""},on:{input:t.onEditStatusMenuToggle},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[s("div",t._g(t._b({directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],staticClass:"pr-2 clickable-status d-flex flex-wrap"},"div",a,!1),i),[s("div",{staticClass:"pl-1 pr-1 primary--text"},[t._v(" Lv"),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.ship.level))])]),s("div",{staticClass:"pl-1 text--secondary"},[t._v(t._s(t.$t("Common.運")))]),s("div",{staticClass:"pl-1 pr-1 font-weight-medium"},[t._v(t._s(t.ship.luck))]),s("div",{staticClass:"pl-1 text--secondary"},[t._v(t._s(t.$t("Common.対空")))]),s("div",{staticClass:"pl-1 font-weight-medium"},[t._v(t._s(t.ship.antiAir))])])]}}]),model:{value:t.editStatusMenu,callback:function(e){t.editStatusMenu=e},expression:"editStatusMenu"}},[s("v-card",{staticClass:"px-5 pt-5 pb-3"},[s("div",{staticClass:"d-flex justify-space-between"},[s("v-btn",{attrs:{small:"",outlined:"",color:"grey"},on:{click:function(e){e.stopPropagation(),t.level=1}}},[t._v("Lv1")]),s("v-btn",{attrs:{small:"",outlined:"",color:"primary"},on:{click:function(e){e.stopPropagation(),t.level=50}}},[t._v("Lv50")]),s("v-btn",{attrs:{small:"",outlined:"",color:"teal"},on:{click:function(e){e.stopPropagation(),t.level=80}}},[t._v("Lv80")]),s("v-btn",{attrs:{small:"",outlined:"",color:"teal"},on:{click:function(e){e.stopPropagation(),t.level=99}}},[t._v("Lv99")]),s("v-btn",{attrs:{small:"",outlined:"",color:"red lighten-2"},on:{click:function(e){e.stopPropagation(),t.level=t.maxLevel}}},[t._v("Lv"+t._s(t.maxLevel))])],1),s("div",{staticClass:"d-flex mt-4 align-center"},[s("div",{staticClass:"edit-status-menu-text"},[s("v-text-field",{staticClass:"pt-0 mt-0",attrs:{label:"Lv",max:t.maxLevel,min:"1","hide-details":"",type:"number"},model:{value:t.level,callback:function(e){t.level=t._n(e)},expression:"level"}})],1),s("div",{staticClass:"flex-grow-1"},[s("v-slider",{attrs:{max:t.maxLevel,min:"1","hide-details":""},model:{value:t.level,callback:function(e){t.level=e},expression:"level"}})],1)]),s("v-divider",{staticClass:"my-3"}),s("div",{staticClass:"edit-status-container"},[s("v-text-field",{attrs:{label:t.$t("Common.耐久"),max:t.value.data.maxHp,min:t.minHP,"hide-details":"",type:"number"},model:{value:t.hp,callback:function(e){t.hp=t._n(e)},expression:"hp"}}),s("v-text-field",{attrs:{label:t.$t("Common.対潜"),max:t.maxAsw,min:t.minAsw,"hide-details":"",type:"number"},model:{value:t.asw,callback:function(e){t.asw=t._n(e)},expression:"asw"}}),s("v-text-field",{attrs:{label:t.$t("Common.運"),max:t.ship.data.maxLuck,min:t.ship.data.luck,"hide-details":"",type:"number"},model:{value:t.luck,callback:function(e){t.luck=t._n(e)},expression:"luck"}}),s("v-text-field",{attrs:{label:t.$t("Common.対空"),max:t.ship.data.antiAir,min:"0","hide-details":"",type:"number"},model:{value:t.antiAir,callback:function(e){t.antiAir=t._n(e)},expression:"antiAir"}})],1),s("v-divider",{staticClass:"my-3"}),s("div",{staticClass:"d-flex"},[s("v-spacer"),s("v-btn",{attrs:{color:"secondary"},on:{click:function(e){return t.closeEditStatusMenu()}}},[t._v(t._s(t.$t("Common.閉じる")))])],1)],1)],1)],1),s("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],staticClass:"d-flex pl-1 clickable-status",attrs:{tabindex:"0"},on:{click:function(e){return e.stopPropagation(),t.showShipList.apply(null,arguments)},keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.showShipList.apply(null,arguments)}}},[s("div",{staticClass:"ship-name text-truncate"},[t._v(t._s(t.shipName))])])]),s("div",{staticClass:"ship-remove mt-1"},[s("v-btn",{attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),t.removeShip.apply(null,arguments)}}},[s("v-icon",[t._v("mdi-close")])],1)],1)]),s("div",{staticClass:"align-self-center caption pl-2"},[s("span",{staticClass:"text--secondary"},[t._v(t._s(t.$t("Fleet.撃墜")))]),s("span",{staticClass:"ml-1 font-weight-medium mr-2"},[t._v(t._s(t.rateDownValue)+"%,"+t._s(t.fixDown)+t._s(t.isNotJapanese?"":"機"))]),t.ship.hunshinRate?[s("span",{staticClass:"text--secondary text-no-wrap"},[t._v(t._s(t.$t("Fleet.噴進")))]),s("span",{staticClass:"ml-1 font-weight-medium mr-2"},[t._v(t._s(t.ship.hunshinRate.toFixed(1))+"%")])]:t._e(),s("span",{staticClass:"text--secondary"},[t._v(t._s(t.$t("Common.射程")))]),s("span",{staticClass:"ml-1 font-weight-medium"},[t._v(t._s(t.$t("Common."+t.rangeText[t.ship.displayStatus.range])))]),t.ship.data.maxAsw||t.ship.enabledTSBK?[s("v-tooltip",{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[s("span",t._g(t._b({staticClass:"asw-view"},"span",a,!1),i),[s("span",{staticClass:"ml-2 text--secondary mr-1"},[t._v(t._s(t.$t("Fleet.先制対潜")))]),t.ship.enabledTSBK?s("span",[t.isNotJapanese?[t._v("✔")]:[t._v(t._s(t.$t("Fleet.可")))]],2):s("span",[t._v("×")])])]}}],null,!1,2584803573)},[s("table",{staticClass:"asw-table"},[s("tr",[s("td",{staticClass:"body-2"},[t._v(t._s(t.$t("Fleet.対潜先制爆雷攻撃")))]),s("td",{staticClass:"text-right pl-2"},[t.ship.enabledTSBK?s("span",{staticClass:"blue--text text--lighten-2"},[t.isNotJapanese?[t._v("✔")]:[t._v(" "+t._s(t.$t("Fleet.可"))+" ")]],2):t.isNotJapanese?s("span",{staticClass:"red--text text--lighten-1"},[t._v("×")]):s("span",{staticClass:"red--text text--lighten-1"},[t._v(" "+t._s(t.$t("Fleet.不可"))+" ")])])]),s("tr",[s("td",{staticClass:"body-2 grey--text text--lighten-2"},[t._v(" "+t._s(t.$t("Common.対潜"))),s("span",{staticClass:"ml-2 caption"},[t._v(t._s(t.$t("Fleet.艦娘")))])]),s("td",{staticClass:"text-right"},[t._v(t._s(t.ship.asw-t.ship.improveAsw))])]),t.ship.improveAsw?s("tr",[s("td",{staticClass:"body-2 grey--text text--lighten-2"},[t._v(" "+t._s(t.$t("Common.対潜"))),s("span",{staticClass:"ml-2 caption"},[t._v(t._s(t.$t("Common.改修")))])]),s("td",{staticClass:"text-right"},[t._v(t._s(t.ship.improveAsw))])]):t._e(),s("tr",[s("td",{staticClass:"body-2 grey--text text--lighten-2"},[t._v(" "+t._s(t.$t("Common.対潜"))),s("span",{staticClass:"ml-2 caption"},[t._v(t._s(t.$t("Fleet.装備")))])]),s("td",{staticClass:"text-right"},[t._v(t._s(t.ship.itemAsw))])]),t.ship.itemBonusStatus.asw?s("tr",[s("td",{staticClass:"body-2 grey--text text--lighten-2"},[t._v(" "+t._s(t.$t("Common.対潜"))),s("span",{staticClass:"ml-2 caption"},[t._v(t._s(t.$t("Fleet.装備ボーナス")))])]),s("td",{staticClass:"text-right"},[t._v(t._s(t.ship.itemBonusStatus.asw))])]):t._e(),s("tr",{staticClass:"border"},[s("td",{attrs:{colspan:"3"}})]),s("tr",[s("td",{staticClass:"body-2 grey--text text--lighten-2 pb-1"},[t._v(" "+t._s(t.$t("Common.対潜"))),s("span",{staticClass:"ml-2 caption"},[t._v(t._s(t.$t("Common.合計")))])]),s("td",{staticClass:"text-right pb-1"},[t._v(t._s(t.ship.displayStatus.asw))])]),!t.ship.enabledTSBK&&t.ship.missingAsw?s("tr",[s("td",{staticClass:"caption grey--text text--lighten-2"},[t._v(t._s(t.$t("Fleet.不足対潜値")))]),s("td",{staticClass:"text-right"},[t._v(t._s(t.ship.missingAsw))])]):t._e(),!t.ship.enabledTSBK&&t.ship.needTSBKLevel?s("tr",[s("td",{staticClass:"caption grey--text text--lighten-2"},[t._v(t._s(t.$t("Fleet.必要艦娘Lv")))]),s("td",{staticClass:"text-right"},[t._v(t._s(t.ship.needTSBKLevel))])]):t._e()])])]:t._e()],2),s("div",{staticClass:"d-flex pr-1 pl-2 flex-wrap"},[s("div",{staticClass:"align-self-center caption"},[s("span",{staticClass:"text--secondary"},[t._v(t._s(t.$t("Common.制空")))]),s("span",{staticClass:"ml-1 font-weight-medium"},[t._v(t._s(t.ship.fullAirPower))]),s("span",{staticClass:"ml-1 text--secondary"},[t._v(t._s(t.airPowerDetail))])]),s("div",{staticClass:"ml-auto ship-buttons"},[t.enabledConvert?s("v-tooltip",{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[s("v-btn",t._g(t._b({attrs:{icon:"",small:"",color:"blue lighten-1"},on:{click:function(e){return e.stopPropagation(),t.toggleVersion()}}},"v-btn",a,!1),i),[s("v-icon",[t._v("mdi-sync")])],1)]}}],null,!1,3381741086)},[s("span",[t._v(t._s(t.$t("Fleet.コンバート改造")))])]):t._e(),t.handleShowTempShipList?s("v-tooltip",{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[s("v-btn",t._g(t._b({attrs:{icon:"",small:"",color:"orange lighten-2"},on:{click:function(e){return e.stopPropagation(),t.showTempShip()}}},"v-btn",a,!1),i),[s("v-icon",[t._v("mdi-clipboard-arrow-up")])],1)]}}],null,!1,3338777121)},[s("span",[t._v(t._s(t.$t("Fleet.艦娘クリップボード")))])]):t._e(),t.handleShowItemPreset?s("v-tooltip",{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[s("v-btn",t._g(t._b({attrs:{icon:"",small:"",color:"deep-orange lighten-1"},on:{click:function(e){return e.stopPropagation(),t.showItemPresets()}}},"v-btn",a,!1),i),[s("v-icon",[t._v("mdi-briefcase-variant")])],1)]}}],null,!1,3852360786)},[s("span",[t._v(t._s(t.$t("Fleet.装備プリセット展開")))])]):t._e(),t.hideActiveButton?t._e():s("v-tooltip",{attrs:{bottom:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[s("v-btn",t._g(t._b({directives:[{name:"show",rawName:"v-show",value:t.ship.isActive,expression:"ship.isActive"}],attrs:{icon:"",small:""},on:{click:function(e){return e.stopPropagation(),t.changeActive(!1)}}},"v-btn",a,!1),i),[s("v-icon",[t._v("mdi-eye")])],1)]}}],null,!1,2150192410)},[s("span",[t._v(t._s(t.$t("Fleet.計算対象から省く")))])]),s("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.ship.isActive&&!t.hideActiveButton,expression:"!ship.isActive && !hideActiveButton"}],attrs:{icon:"",small:""},on:{click:function(e){return e.stopPropagation(),t.changeActive(!0)}}},[s("v-icon",[t._v("mdi-eye-off")])],1),s("div",{staticClass:"btn-item-reset"},[s("v-btn",{attrs:{icon:"",small:""},on:{click:function(e){return e.stopPropagation(),t.resetItems()}}},[s("v-icon",[t._v("mdi-close")])],1),s("div",{staticClass:"close-bar",class:"item-count-"+(t.ship.items.length+1)})],1)],1)]),s("v-divider",{staticClass:"mx-1 item-input-divider"}),t.ship.isEmpty?t._e():s("div",{staticClass:"px-1"},[t._l(t.ship.items,(function(e,i){return s("div",{key:i,on:{mouseenter:function(s){return t.bootTooltip(e,i,s)},mouseleave:t.clearTooltip,focus:function(s){return t.bootTooltip(e,i,s)},blur:t.clearTooltip}},[s("item-input",{attrs:{index:i,max:99,"drag-slot":!1,init:t.ship.data.slots[i],"handle-show-item-list":t.showItemList,"item-parent":t.ship,"handle-drag-start":t.clearTooltip},on:{input:t.updateItem},model:{value:t.ship.items[i],callback:function(e){t.$set(t.ship.items,i,e)},expression:"ship.items[j]"}})],1)})),s("div",{on:{mouseenter:function(e){return t.bootTooltip(t.ship.exItem,-1,e)},mouseleave:t.clearTooltip,focus:function(e){return t.bootTooltip(t.ship.exItem,-1,e)},blur:t.clearTooltip}},[s("item-input",{attrs:{index:99,max:0,init:0,"drag-slot":!1,"handle-show-item-list":t.showItemList,"item-parent":t.ship,"handle-drag-start":t.clearTooltip},on:{input:t.updateItem},model:{value:t.ship.exItem,callback:function(e){t.$set(t.ship,"exItem",e)},expression:"ship.exItem"}})],1)],2)],s("v-tooltip",{attrs:{color:"black",bottom:"",right:"",transition:"slide-y-transition","position-x":t.tooltipX,"position-y":t.tooltipY},model:{value:t.enabledTooltip,callback:function(e){t.enabledTooltip=e},expression:"enabledTooltip"}},[s("item-tooltip",{attrs:{bonus:t.tooltipBonus},model:{value:t.tooltipItem,callback:function(e){t.tooltipItem=e},expression:"tooltipItem"}})],1),s("v-tooltip",{attrs:{color:"black",bottom:"",right:"",transition:"slide-y-transition","position-x":t.tooltipX,"position-y":t.tooltipY},model:{value:t.enabledShipTooltip,callback:function(e){t.enabledShipTooltip=e},expression:"enabledShipTooltip"}},[s("ship-tooltip",{attrs:{"fleet-ros-corr":t.fleetRosCorr,"is-flagship":0===t.index},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)],2)},a=[],n=s(144),l=s(6911),o=s(7487),r=s(3051),c=s(2382),d=s(7525),m=s(5549),u=s(3631),h=s(6486),p=s(47),v=s(6141),f=n.Z.extend({components:{ItemInput:l.Z,ItemTooltip:o.Z,ShipTooltip:r.Z},name:"ShipInput",props:{handleShowItemList:{type:Function,required:!0},handleShowShipList:{type:Function,required:!0},handleCloseShip:{type:Function,required:!0},handleShowTempShipList:{type:Function},handleShowItemPreset:{type:Function},value:{type:c.Z,required:!0},index:{type:Number,required:!0},fixDown:{type:Number,default:0},rateDown:{type:Number,default:0},fleetRosCorr:{type:Number,default:0},isLine2:{type:Boolean,default:!1},hideActiveButton:{type:Boolean,default:!1}},data:()=>({level:99,luck:0,antiAir:0,asw:0,hp:1,editStatusMenu:!1,enabledTooltip:!1,enabledShipTooltip:!1,tooltipTimer:void 0,tooltipItem:new d.Z,tooltipBonus:"",tooltipX:0,tooltipY:0,rangeText:["","短","中","長","超長","超長+","極","極+","極長","極長+"],maxLevel:v.ZP.MAX_LEVEL}),computed:{ship(){return this.value},isNotJapanese(){return"ja"!==this.$i18n.locale},needTrans(){const t=this.$store.state.siteSetting;return!t.nameIsNotTranslate},shipName(){if(this.isNotJapanese){if(!this.value.data.name)return this.$t("Fleet.艦娘選択");if(this.needTrans){const t=m.Z.getSuffix(this.value.data),e=t=>t?`${this.$t(t)}`:"";return t.map((t=>e(t))).join("")}}return this.value.data.name?this.value.data.name:"艦娘選択"},airPowerDetail(){const t=this.ship.items.map((t=>t.fullAirPower&&!t.data.isRecon?t.fullAirPower:0));return t.filter((t=>t>0)).length?`( ${t.join(" | ")} )`:""},isNoShip(){return 0===this.value.data.id},rateDownValue(){return Math.floor(100*this.rateDown)},enabledConvert(){const t=this.$store.state.ships,e=this.value.data;return"宗谷"===e.name||this.value.data.isFinal&&t.filter((t=>t.originalId===e.originalId&&t.isFinal&&t.version>1)).length>=2},maxAreas(){return this.$store.state.areaCount},minHP(){return this.level>99?this.value.data.hp2:this.value.data.hp},minAsw(){if(!this.value.data.minAsw||!this.value.data.maxAsw)return 0;const t=c.Z.getStatusFromLevel(this.level,this.value.data.maxAsw,this.value.data.minAsw);return t},maxAsw(){return this.value.data.minAsw&&this.value.data.maxAsw?this.minAsw+9:200}},watch:{level(t){const e=c.Z.getStatusFromLevel(t,this.ship.data.maxAsw,this.value.data.minAsw);this.asw=e+this.value.improveAsw,this.hp=Math.max(this.hp,t>99?this.value.data.hp2:this.value.data.hp),this.hp=Math.min(this.hp,t<=99?this.value.data.hp:999)}},methods:{updateItem(){this.setShip()},setShip(t){this.clearTooltip(),void 0===t?this.$emit("input",new c.Z({ship:this.ship})):this.$emit("input",t)},onEditStatusMenuToggle(){if(this.editStatusMenu)this.hp=this.ship.hp,this.level=this.ship.level,this.luck=this.ship.luck,this.asw=this.ship.asw,this.antiAir=this.ship.antiAir;else{const t={ship:this.ship,level:this.level,hp:this.hp,luck:this.luck,antiAir:this.antiAir,asw:this.asw};this.setShip(new c.Z(t))}},closeEditStatusMenu(){this.editStatusMenu=!1,this.onEditStatusMenuToggle()},changeActive(t){this.setShip(new c.Z({ship:this.ship,isActive:t}))},resetItems(){this.setShip(new c.Z({ship:this.value,items:[],exItem:new d.Z}))},removeShip(){this.handleCloseShip(this.index)},showItemList(t){this.clearTooltip(),this.handleShowItemList(this.index,t)},showShipList(){this.clearTooltip(),this.handleShowShipList(this.index)},showTempShip(){this.handleShowTempShipList(this.index)},showItemPresets(){this.handleShowItemPreset(this.index)},toggleVersion(){const t=this.$store.state.ships,e=this.value.data;let s=t.filter((t=>t.originalId===e.originalId&&t.isFinal&&t.version>1)).sort(((t,e)=>t.version-e.version));"宗谷"===e.name&&(s=t.filter((t=>"宗谷"===t.name)));const i=s.findIndex((t=>t.id===e.id));let a;a=i<s.length-1?s[i+1]:s[i-i];const{items:n,exItem:l}=this.value,o=[];let r;for(let c=0;c<a.slots.length;c+=1){const t=n[c];t&&u.Z.isValidItem(a,t.data,c)?o.push(new d.Z({item:t,slot:a.slots[c]})):o.push(new d.Z)}r=u.Z.isValidItem(a,l.data)?new d.Z({item:l}):new d.Z;const m=this.value.hp-(this.value.level>99?this.value.data.hp2:this.value.data.hp),h=(this.value.level>99?a.hp2:a.hp)+m,p=c.Z.getStatusFromLevel(this.value.level,a.maxAsw,a.minAsw)+this.value.improveAsw;let{luck:v}=this.value;const f=e.luck,g=v-f;v=g?a.luck+g:a.luck,this.setShip(new c.Z({master:a,level:this.value.level,hp:h,luck:v,asw:p,items:o,exItem:r}))},setDraggable(t){const e=t.target;if(e.closest(".item-input"))return;const s=e.closest(".ship-input");s.setAttribute("draggable","true")},resetDraggable(t){const e=t.target,s=e.closest(".ship-input");s.setAttribute("draggable","false")},dragStart(t){const e=document.getElementById("dragging-item");if(e)return;const s=t.target;if(this.value.isEmpty||!s||!s.classList||!s.classList.contains("ship-input")||!s.draggable)return;s.style.opacity="0.6",s.id="dragging-item",this.$store.dispatch("setDraggingShipData",this.value);const i=document.getElementsByClassName("ship-input");for(let a=0;a<i.length;a+=1)i[a].classList.add("dragging")},dragLeave(t){t.target.style.boxShadow=""},dragEnter(t){const e=document.getElementById("dragging-item"),s=t.target;e&&e.classList.contains("ship-input")&&s&&s.classList.contains("ship-input")&&(s.style.boxShadow="inset 0 0 80px rgba(20, 160, 255, 0.6)")},dropShip(t){t.preventDefault();const e=document.getElementById("dragging-item");if(!e||!e.classList.contains("ship-input"))return;const s=t.target;if(s.style.boxShadow="",s.id)return;const i=this.$store.state.draggingShipData;this.$store.dispatch("setDraggingShipData",this.value),this.setShip(i),e.classList.add("move-ok")},dragEnd(t){const e=document.getElementsByClassName("ship-input");for(let n=0;n<e.length;n+=1)e[n].classList.remove("dragging");const s=document.getElementById("dragging-item");if(!s||!s.draggable||!s.classList.contains("ship-input")){const e=t.target;return void(e&&e.classList.contains("ship-input")&&(e.style.opacity="1",e.id="",e.draggable=!1))}const i=t.target;if(i.style.opacity="1",i.id="",i.draggable=!1,!i.classList.contains("move-ok"))return;i.classList.remove("move-ok");const a=this.$store.state.draggingShipData;a&&this.setShip(a)},bootTooltip(t,e,s){const i=this.$store.state.siteSetting;if(!t.data.id||i.disabledItemTooltip)return;const a=s.target.getElementsByClassName("item-name")[0];window.clearTimeout(this.tooltipTimer),this.tooltipTimer=window.setTimeout((()=>{const s=a.getBoundingClientRect();this.tooltipX=s.x+s.width/3,this.tooltipY=s.y+s.height,this.tooltipItem=t,this.enabledTooltip=!0;const i=this.value.items.concat();i.push(this.value.exItem);const n=(0,h.cloneDeep)(i);n[e<0?n.length-1:e]=new d.Z;const l=c.Z.getItemBonus(this.value.data,n),o=p.Z.getTotalBonus(l),r=p.Z.getTotalBonus(this.value.itemBonuses);r.firePower&&(r.firePower-=o.firePower??0),r.torpedo&&(r.torpedo-=o.torpedo??0),r.antiAir&&(r.antiAir-=o.antiAir??0),r.armor&&(r.armor-=o.armor??0),r.asw&&(r.asw-=o.asw??0),r.avoid&&(r.avoid-=o.avoid??0),r.accuracy&&(r.accuracy-=o.accuracy??0),r.range&&(r.range-=o.range??0),r.bomber&&(r.bomber-=o.bomber??0),r.scout&&(r.scout-=o.scout??0),this.tooltipBonus=JSON.stringify(r)}),Math.max(i.popUpCount,10))},bootShipTooltip(t){const e=this.$store.state.siteSetting;e.disabledShipTooltip||(this.tooltipTimer=window.setTimeout((()=>{this.tooltipX=t.clientX,this.tooltipY=t.clientY,this.enabledShipTooltip=!0}),Math.max(e.popUpCount,10)))},clearTooltip(){this.enabledTooltip=!1,this.enabledShipTooltip=!1,window.clearTimeout(this.tooltipTimer)}}}),g=f,y=s(1001),_=s(3453),x=s.n(_),b=s(4562),C=s(9582),w=s(9223),k=s(4324),S=s(5495),I=s(4568),A=s(9670),T=s(8718),$=s(9780),P=s(2082),Z=s(6392),L=s.n(Z),D=s(7069),E=(0,y.Z)(g,i,a,!1,null,"4fcfc083",null),B=E.exports;x()(E,{VBtn:b.Z,VCard:C.Z,VDivider:w.Z,VIcon:k.Z,VImg:S.Z,VMenu:I.Z,VSlider:A.Z,VSpacer:T.Z,VTextField:$.Z,VTooltip:P.Z}),L()(E,{Ripple:D.Z})},6911:function(t,e,s){s.d(e,{Z:function(){return P}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],class:t.itemClass,attrs:{draggable:t.isDraggable},on:{dragstart:function(e){return e.stopPropagation(),t.dragStart(t.item,e)},dragenter:function(e){return t.dragEnter(e)},dragleave:function(e){return t.dragLeave(e)},drop:function(e){return e.stopPropagation(),t.dropItem(e)},dragend:function(e){return t.dragEnd(e)},dragover:function(t){t.preventDefault()}}},[s("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1,transition:"slide-y-transition",bottom:"",right:"",disabled:!t.item.data.isPlane||t.isExpandSlot||t.readonly||t.draggingNow},on:{input:t.onSlotMenuToggle},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[s("div",t._g(t._b({staticClass:"item-slot"},"div",a,!1),i),[t.isExpandSlot?s("v-icon",[t._v("mdi-wrench")]):s("span",[t._v(t._s(t.item.fullSlot))])],1)]}}]),model:{value:t.slotMenu,callback:function(e){t.slotMenu=e},expression:"slotMenu"}},[s("v-card",{staticClass:"px-2"},[s("div",{staticClass:"d-flex px-2"},[s("v-text-field",{staticClass:"slot-input",attrs:{type:"number",max:t.max,min:"0"},model:{value:t.slotValue,callback:function(e){t.slotValue=t._n(e)},expression:"slotValue"}}),s("v-btn",{staticClass:"ml-2 align-self-center",attrs:{depressed:""},on:{click:function(e){t.slotValue=t.init}}},[t._v(t._s(t.$t("Common.初期値")))])],1),s("v-slider",{attrs:{max:t.max,min:"0"},model:{value:t.slotValue,callback:function(e){t.slotValue=e},expression:"slotValue"}})],1)],1),s("div",{staticClass:"mx-1 item-icon",class:{draggable:t.isDraggable}},[t.item.data.iconTypeId>0?s("img",{attrs:{src:"./img/type/icon"+t.item.data.iconTypeId+".png",alt:"item-icon"}}):t._e()]),s("div",{staticClass:"item-name text-truncate",class:{"text--secondary":t.isNoItem,"is-special":t.item.data.isSpecial},attrs:{tabindex:"0"},on:{click:function(e){return e.stopPropagation(),t.showItemList()},keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.showItemList()}}},[t._v(" "+t._s(t.itemName)+" "),"Saury"===t.bonusText?s("div",{staticClass:"saury-bonus"},[t.$vuetify.theme.dark?s("v-icon",{attrs:{color:"light-blue lighten-3"}},[t._v("mdi-fish mdi-rotate-315")]):s("v-icon",{attrs:{color:"light-blue lighten-2"}},[t._v("mdi-fish mdi-rotate-315")])],1):t.bonusText?s("div",{staticClass:"item-special-text"},[s("div",{staticClass:"align-self-center"},[t._v(t._s(t.bonusText))])]):t._e()]),!t.isNoItem&&(!t.readonly||t.item.remodel>0||t.item.level>0)?[s("v-menu",{attrs:{"offset-y":"",transition:"slide-y-transition",left:"",disabled:t.readonly||t.draggingNow||t.isEnemy},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[s("div",t._g(t._b({staticClass:"item-remodel",class:{"no-remodel":!t.item.data.canRemodel,"value-0":0===t.item.remodel}},"div",a,!1),i),[s("v-icon",{attrs:{small:"",color:t.remodelIconColor}},[t._v("mdi-star")]),s("span",{class:t.remodelLabelColor},[t._v(t._s(t.item.remodel))])],1)]}}],null,!1,3381853348)},[s("v-card",[s("div",{staticClass:"d-flex"},t._l(11,(function(e){return s("div",{key:e,staticClass:"remodel-list-item",attrs:{tabindex:"0"},on:{click:function(s){return t.setRemodel(e-1)},keypress:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.setRemodel(e-1)}}},[s("v-icon",{attrs:{small:"",color:"teal accent-4"}},[t._v("mdi-star")]),s("span",{staticClass:"teal--text text--accent-4"},[t._v(t._s(e-1))])],1)})),0)])],1),s("v-menu",{attrs:{"offset-y":"",transition:"slide-y-transition",left:"",disabled:!t.item.data.isPlane||t.isExpandSlot||t.readonly||t.draggingNow||t.isEnemy},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[s("div",t._g(t._b({staticClass:"item-level"},"div",a,!1),i),[s("v-img",{attrs:{src:"./img/util/prof"+t.item.levelAlt+".png",height:"24",width:"18"}}),s("span",{staticClass:"level-value"},[t._v(t._s(t.item.level))])],1)]}}],null,!1,806240560)},[s("v-card",[s("div",{staticClass:"d-flex"},t._l(9,(function(e){return s("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],key:e-1,staticClass:"level-list-item",attrs:{tabindex:"0"},on:{click:function(s){return t.setLevel(e-1)},keypress:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.setLevel(e-1)}}},[s("v-img",{attrs:{src:"./img/util/prof"+(e-1)+".png",width:"18",height:"24"}}),s("span",{staticClass:"level-list-value"},[t._v(t._s(t.getLevelValue(e-1)))])],1)})),0)])],1),s("div",{staticClass:"ml-1 item-remove align-self-center"},[s("v-tooltip",{attrs:{top:"",color:"black","open-delay":200,disabled:!t.deathIndicatorColor},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[s("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.hover;return[s("v-btn",t._g(t._b({directives:[{name:"show",rawName:"v-show",value:t.isDraggable,expression:"isDraggable"}],attrs:{icon:"","x-small":""},on:{click:function(e){return t.removeItem()}}},"v-btn",a,!1),i),[n?s("v-icon",{attrs:{small:"",color:t.deathIndicatorColor}},[t._v("mdi-close")]):t.deathIndicatorColor?[t.isTriangleIcon?s("v-icon",{attrs:{"x-small":"",color:t.deathIndicatorColor}},[t._v("mdi-triangle")]):s("v-icon",{attrs:{small:"",color:t.deathIndicatorColor}},[t._v("mdi-record")])]:t._e()],2)]}}],null,!0)})]}}],null,!1,2297147381)},[s("span",[t._v(t._s(t.$t("Result.全滅率"))+" "+t._s(t.item.deathRate)+" %")])])],1)]:t._e()],2)},a=[],n=s(144),l=s(7525),o=s(7783),r=s(2382),c=s(6141),d=s(3631),m=s(7777),u=n.Z.extend({name:"ItemInput",props:{handleShowItemList:{type:Function,required:!0},value:{type:l.Z,required:!0},index:{type:Number,required:!0},readonly:{type:Boolean},max:{type:Number,required:!0},init:{type:Number,required:!0},dragSlot:{type:Boolean,default:!0},itemParent:{type:r.Z,default:void 0},handleDragStart:{type:Function},isEnemy:{type:Boolean,default:!1}},data:()=>({slotMenu:!1,slotValue:0,draggingNow:!1}),computed:{item(){return this.value},isExpandSlot(){return this.index===c.ZP.EXPAND_SLOT_INDEX},isNoItem(){return 0===this.value.data.id},setting(){return this.$store.state.siteSetting},needTrans(){return"ja"!==this.$i18n.locale&&!this.setting.nameIsNotTranslate},itemName(){return this.needTrans&&this.value.data.name?this.$t(`${this.value.data.name}`):this.value.data.name||this.$t("Fleet.未装備")},isDraggable(){return this.value.data.id>0&&!this.readonly},remodelIconColor(){return this.item.data.canRemodel?this.$vuetify.theme.dark?this.item.remodel>0?"teal accent-4":"grey":this.item.remodel>0?"teal accent-4":"grey lighten-1":"red lighten-2"},remodelLabelColor(){return this.item.data.canRemodel?this.item.remodel>0?"teal--text text--accent-4":"grey--text text-lighten-1":"red--text text--lighten-2"},itemClass(){const t=["d-flex","item-input",`type-${this.value.data.iconTypeId}`];return this.readonly&&t.push("readonly"),this.isExpandSlot&&t.push("expand"),this.isNoItem&&t.push("no-item"),this.value.data.isPlane||t.push("not-plane"),this.isDraggable||t.push("disabled-draggable"),t.join(" ")},bonusText(){if(!this.value.data.id)return"";const t=this.setting.displayBonusKey,e=this.value.data.bonuses.find((e=>e.key===t));return e?e.text:""},deathIndicatorColor(){return this.value.data.isPlane&&this.value.deathRate&&this.setting.showDeathRateIndicator?this.value.deathRate<10?"amber":this.value.deathRate<20?"orange darken-3":"red darken-2":""},isTriangleIcon(){return this.setting.isGraphicModeDeathRateIndicator&&this.value.deathRate>=10}},methods:{setItem(t){this.$emit("input",t)},onSlotMenuToggle(){if(this.slotMenu)this.slotValue=this.item.fullSlot;else{const t={item:this.item,slot:Math.floor(this.slotValue)};this.setItem(new l.Z(t))}},removeItem(){this.setItem(new l.Z)},setLevel(t){const e={item:this.item,level:c.ZP.PROF_LEVEL_BORDER[t]};this.setItem(new l.Z(e))},setRemodel(t){const e={item:this.item,remodel:t};this.setItem(new l.Z(e))},getLevelValue(t){return c.ZP.PROF_LEVEL_BORDER[t]},showItemList(){this.handleShowItemList(this.index)},dragStart(t,e){const s=e.target;if(!this.isDraggable||!s||!s.classList||!s.classList.contains("item-input")||!s.draggable)return;const i=e.dataTransfer;i.setData("text/plain",JSON.stringify(t)),s.id="dragging-item",s.dataset.itemId=`${this.value.data.id}`,s.dataset.apiType=`${this.value.data.apiTypeId}`,s.dataset.isPlane=""+(this.value.data.isPlane?"true":"");const a=document.getElementsByClassName("item-input");for(let n=0;n<a.length;n+=1)a[n].classList.add("dragging");this.draggingNow=!0,this.handleDragStart()},dragEnter(t){const e=document.getElementById("dragging-item"),s=t.target;if(!e||!s||!s.classList||!s.classList.contains("item-input"))return;if(s.classList.contains("disabled-drop"))return void(s.style.backgroundColor="rgba(255, 128, 128, 0.6)");if(s.classList.contains("enabled-drop"))return void(s.style.backgroundColor="rgba(80, 160, 255, 0.6)");if(!e||!e.dataset.itemId||!e.dataset.apiType)return;const i=new o.Z;i.id=+e.dataset.itemId,i.apiTypeId=+e.dataset.apiType,this.itemParent instanceof r.Z&&!d.Z.isValidItem(this.itemParent.data,i,this.index)||this.itemParent instanceof m.Z&&!e.dataset.isPlane?(s.style.backgroundColor="rgba(255, 128, 128, 0.6)",s.classList.add("disabled-drop")):(s.style.backgroundColor="rgba(80, 160, 255, 0.6)",s.classList.add("enabled-drop"))},dragLeave(t){t.target.style.backgroundColor=""},dropItem(t){const e=document.getElementById("dragging-item");if(!e||!e.classList.contains("item-input"))return;const s=t.target;if(s.style.backgroundColor="",!s.classList.contains("enabled-drop"))return;const i=t.dataTransfer.getData("text/plain");if(!this.isNoItem&&!t.ctrlKey&&e){const t=JSON.stringify(this.item);e.dataset.item=t}if(!t.ctrlKey&&e&&e.classList.add("delete-flg"),i){const t={item:JSON.parse(i)};this.dragSlot||(t.item&&41===t.item.data.apiTypeId?t.slot=1:41===this.value.data.apiTypeId?t.slot=this.init:t.slot=this.value.fullSlot),this.itemParent instanceof m.Z&&t.item,this.setItem(new l.Z(t))}},dragEnd(){const t=document.getElementsByClassName("item-input");for(let l=0;l<t.length;l+=1)t[l].classList.remove("dragging");const e=document.getElementsByClassName("enabled-drop");while(e.length>0)e[0].classList.remove("enabled-drop");const s=document.getElementsByClassName("disabled-drop");while(s.length>0)s[0].classList.remove("disabled-drop");const i=document.getElementById("dragging-item");if(!i||!i.draggable)return;i.id="",delete i.dataset.itemId,delete i.dataset.apiType,delete i.dataset.isPlane;const a={};this.dragSlot||(a.slot=this.value.fullSlot);const n=i.dataset.item;n?(a.item=JSON.parse(n),this.itemParent instanceof r.Z?d.Z.isValidItem(this.itemParent.data,a.item.data,this.index)?(41===a.item.data.apiTypeId?a.slot=1:41===this.value.data.apiTypeId&&(a.slot=this.init),this.setItem(new l.Z(a)),delete i.dataset.item):(a.item=void 0,this.setItem(new l.Z(a)),delete i.dataset.item):a.item&&a.item.data.isPlane?(this.setItem(new l.Z(a)),delete i.dataset.item):(a.item=void 0,this.setItem(new l.Z(a)),delete i.dataset.item)):i.classList.contains("delete-flg")?(i.classList.remove("delete-flg"),this.setItem(new l.Z(a))):this.setItem(new l.Z({item:this.value})),this.draggingNow=!1}}}),h=u,p=s(1001),v=s(3453),f=s.n(v),g=s(4562),y=s(9582),_=s(8224),x=s(4324),b=s(5495),C=s(4568),w=s(9670),k=s(9780),S=s(2082),I=s(6392),A=s.n(I),T=s(7069),$=(0,p.Z)(h,i,a,!1,null,"f41184a2",null),P=$.exports;f()($,{VBtn:g.Z,VCard:y.Z,VHover:_.Z,VIcon:x.Z,VImg:b.Z,VMenu:C.Z,VSlider:w.Z,VTextField:k.Z,VTooltip:S.Z}),A()($,{Ripple:T.Z})},2731:function(t,e,s){s.d(e,{Z:function(){return M}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",[s("div",{staticClass:"d-flex py-2 pr-2"},[s("div",{staticClass:"align-self-center item-search-text ml-5"},[s("v-text-field",{attrs:{placeholder:t.$t("ItemList.図鑑id 名称検索"),clearable:"","hide-details":"",dense:"","prepend-inner-icon":"mdi-magnify"},on:{input:function(e){return t.filter()}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),s("div",{staticClass:"ml-5 align-self-center filter-select"},[s("v-select",{attrs:{dense:"","hide-details":"",items:t.filterStatusItems},on:{change:function(e){return t.changedFilter()}},model:{value:t.filterStatus,callback:function(e){t.filterStatus=e},expression:"filterStatus"}})],1),s("div",{staticClass:"align-self-center filter-value-input"},[s("v-text-field",{attrs:{dense:"","hide-details":"",type:"number",max:"30",min:"0"},on:{input:function(e){return t.changedFilter()}},model:{value:t.filterStatusValue,callback:function(e){t.filterStatusValue=e},expression:"filterStatusValue"}})],1),s("div",{staticClass:"align-self-end caption"},[t._v(t._s(t.$t("ItemList.以上")))]),s("div",{staticClass:"ml-3 align-self-center"},[s("v-btn",{attrs:{color:"secondary",small:""},on:{click:function(e){return t.resetFilter()}}},[t._v(t._s(t.$t("Common.リセット")))])],1),s("v-spacer"),s("div",{staticClass:"d-none d-sm-block mr-5"},[s("v-btn-toggle",{attrs:{dense:"",borderless:"",mandatory:""},model:{value:t.multiLine,callback:function(e){t.multiLine=e},expression:"multiLine"}},[s("v-btn",{class:{primary:!t.multiLine,secondary:t.multiLine},attrs:{value:!1},on:{click:function(e){return e.stopPropagation(),t.changeMultiLine(!1)}}},[s("v-icon",{attrs:{color:"white"}},[t._v("mdi-view-headline")]),s("span",{staticClass:"white--text"},[t._v(t._s(t.$t("ItemList.一列")))])],1),s("v-btn",{class:{primary:t.multiLine,secondary:!t.multiLine},attrs:{value:!0},on:{click:function(e){return e.stopPropagation(),t.changeMultiLine(!0)}}},[s("v-icon",{attrs:{color:"white"}},[t._v("mdi-view-comfy")]),s("span",{staticClass:"white--text"},[t._v(t._s(t.$t("ItemList.複数列")))])],1)],1)],1),s("v-btn",{attrs:{icon:""},on:{click:t.close}},[s("v-icon",[t._v("mdi-close")])],1)],1),s("v-divider"),s("div",{staticClass:"d-flex flex-wrap px-3"},[s("div",{staticClass:"align-self-center my-3"},[s("v-checkbox",{attrs:{"hide-details":"",dense:"",label:t.$t("ItemList.敵装備")},on:{change:function(e){return t.filter()}},model:{value:t.isEnemyMode,callback:function(e){t.isEnemyMode=e},expression:"isEnemyMode"}})],1),t.isAirbaseMode?t._e():s("div",{staticClass:"ml-3 d-flex manual-checkbox"},[s("v-btn",{staticClass:"manual-checkbox-button",attrs:{icon:""},on:{click:function(e){return t.toggleAffectingRangeFilter()}}},[t.onlyAffectingRange?s("v-icon",{staticClass:"manual-icon",attrs:{color:"primary"}},[t._v("mdi-checkbox-marked")]):t.onlyNotAffectingRange?s("v-icon",{staticClass:"manual-icon",attrs:{color:"error"}},[t._v("mdi-close-box")]):s("v-icon",{staticClass:"manual-icon"},[t._v("mdi-minus-box-outline")])],1),s("span",{attrs:{tabindex:"0"},on:{click:function(e){return t.toggleAffectingRangeFilter()},keypress:function(e){return t.toggleAffectingRangeFilter()}}},[t._v(t._s(t.$t("ItemList.射程増加")))])],1),7!==t.type||t.isEnemyMode?t._e():s("div",{staticClass:"ml-3 d-flex manual-checkbox"},[s("v-btn",{staticClass:"manual-checkbox-button",attrs:{icon:""},on:{click:function(e){return t.toggleLandBaseAttackFilter()}}},[t.onlyEnabledLandBaseAttack?s("v-icon",{staticClass:"manual-icon",attrs:{color:"primary"}},[t._v("mdi-checkbox-marked")]):t.onlyDisabledLandBaseAttack?s("v-icon",{staticClass:"manual-icon",attrs:{color:"error"}},[t._v("mdi-close-box")]):s("v-icon",{staticClass:"manual-icon"},[t._v("mdi-minus-box-outline")])],1),s("span",{attrs:{tabindex:"0"},on:{click:function(e){return t.toggleLandBaseAttackFilter()},keypress:function(e){return t.toggleLandBaseAttackFilter()}}},[t._v(t._s(t.$t("ItemList.対地攻撃")))])],1),t.enabledNightAircraftFilter?s("div",{staticClass:"ml-3 d-flex manual-checkbox"},[s("v-checkbox",{attrs:{"hide-details":"",dense:"",label:t.$t("ItemList.夜間機")},on:{click:function(e){return t.filter()}},model:{value:t.onlyNightAircraft,callback:function(e){t.onlyNightAircraft=e},expression:"onlyNightAircraft"}})],1):t._e(),t.enabledAAResistFilter?s("div",{staticClass:"ml-3 d-flex manual-checkbox"},[s("v-checkbox",{attrs:{"hide-details":"",dense:"",label:t.$t("ItemList.射撃回避あり")},on:{click:function(e){return t.filter()}},model:{value:t.onlyAAResistAircraft,callback:function(e){t.onlyAAResistAircraft=e},expression:"onlyAAResistAircraft"}})],1):t._e(),14===t.type?[s("div",{staticClass:"ml-3 align-self-center my-3"},[s("v-checkbox",{attrs:{"hide-details":"",dense:"",label:t.$t("EType.ソナー")},on:{click:function(e){return t.filter()}},model:{value:t.includeSonar,callback:function(e){t.includeSonar=e},expression:"includeSonar"}})],1),s("div",{staticClass:"ml-3 align-self-center my-3"},[s("v-checkbox",{attrs:{"hide-details":"",dense:"",label:t.$t("EType.爆雷")},on:{click:function(e){return t.filter()}},model:{value:t.includeDepthCharge,callback:function(e){t.includeDepthCharge=e},expression:"includeDepthCharge"}})],1),s("div",{staticClass:"ml-3 align-self-center my-3"},[s("v-checkbox",{attrs:{"hide-details":"",dense:"",label:t.$t("EType.爆雷投射機")},on:{click:function(e){return t.filter()}},model:{value:t.includeDepthChargeLauncher,callback:function(e){t.includeDepthChargeLauncher=e},expression:"includeDepthChargeLauncher"}})],1)]:t._e(),!t.isEnemyMode&&t.setting.displayBonusKey?s("div",{staticClass:"ml-3 align-self-center my-3"},[s("v-checkbox",{attrs:{"hide-details":"",dense:"",label:t.$t("ItemList.特効装備")},on:{click:function(e){return t.filter()}},model:{value:t.isSpecialOnly,callback:function(e){t.isSpecialOnly=e},expression:"isSpecialOnly"}})],1):t._e(),t.itemStock.length&&!t.isEnemyMode?s("div",{staticClass:"ml-3 align-self-center my-3"},[s("v-checkbox",{attrs:{"hide-details":"",dense:"",label:t.$t("ItemList.所持装備反映")},on:{click:t.clickedStockOnly},model:{value:t.isStockOnly,callback:function(e){t.isStockOnly=e},expression:"isStockOnly"}})],1):t._e(),t.isStockOnly&&!t.multiLine?s("div",{staticClass:"ml-3 align-self-center my-3"},[s("v-checkbox",{attrs:{"hide-details":"",dense:"",label:t.$t("ItemList.素ステでソート")},on:{click:function(e){return t.filter()}},model:{value:t.sortRawStatus,callback:function(e){t.sortRawStatus=e},expression:"sortRawStatus"}})],1):t._e(),s("v-btn",{staticClass:"ml-auto align-self-center",attrs:{color:"secondary"},on:{click:function(e){return t.showBlacklist()}}},[s("v-icon",[t._v("mdi-eye-off")]),t._v("("+t._s(t.setting.blacklistItemIds.length)+") ")],1)],2),s("div",{staticClass:"d-flex flex-wrap",class:{"ml-3":t.multiLine,"ml-1":!t.multiLine}},[s("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],staticClass:"type-selector d-flex",class:{active:-1===t.type,disabled:t.keyword},attrs:{tabindex:"0"},on:{click:function(e){return t.changeType(-1)},keypress:function(e){return t.changeType(-1)}}},[s("div",{staticClass:"type-all-text"},[t._v("ALL")])]),t._l(t.enabledTypes,(function(e){return s("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],key:e.id,staticClass:"type-selector",class:{active:t.type===e.id,disabled:t.keyword},attrs:{tabindex:"0"},on:{click:function(s){return t.changeType(e.id)},keypress:function(s){return t.changeType(e.id)}}},[s("v-img",{attrs:{src:"./img/type/type"+e.id+".png",height:"32",width:"32"}})],1)}))],2),s("v-divider",{class:{"mx-3":t.multiLine}}),s("div",{staticClass:"pb-2",class:{"ml-3":t.multiLine},attrs:{id:"item-table-body"}},[!t.multiLine&&t.viewItems.length?s("div",{staticClass:"item-status-header"},[s("div",{staticClass:"pl-1"},[s("v-btn",{attrs:{icon:"",small:""},on:{click:function(e){t.sortDialog=!0}}},[s("v-icon",{attrs:{small:""}},[t._v("mdi-sort")])],1)],1),s("div",{staticClass:"item-status text-left flex-grow-1",class:{desc:"name"===t.sortKey&&t.isDesc,asc:"name"===t.sortKey&&!t.isDesc},attrs:{tabindex:"0"},on:{click:function(e){return t.toggleSortKey("name")},keypress:function(e){return t.toggleSortKey("name")}}},[s("div",[s("v-icon",{attrs:{small:""}},[t._v("mdi-chevron-down")]),t._v(t._s(t.$t("Common.装備名称")))],1)]),t._l(t.headerItems,(function(e,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow(e.key,t.viewStatus),expression:"isShow(data.key, viewStatus)"}],key:"item"+i,staticClass:"item-status",class:{desc:t.sortKey===e.key&&t.isDesc,asc:t.sortKey===e.key&&!t.isDesc},attrs:{tabindex:"0"},on:{click:function(s){return t.toggleSortKey(e.key)},keypress:function(s){return t.toggleSortKey(e.key)}}},[s("div",[s("v-icon",{attrs:{small:""}},[t._v("mdi-chevron-down")]),t._v(t._s(t.$t("Common."+e.text)))],1)])})),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow("airPower",t.viewStatus),expression:"isShow('airPower', viewStatus)"}],staticClass:"item-status",class:{desc:"airPower"===t.sortKey&&t.isDesc,asc:"airPower"===t.sortKey&&!t.isDesc},attrs:{tabindex:"0"},on:{click:function(e){return t.toggleSortKey("airPower")},keypress:function(e){return t.toggleSortKey("airPower")}}},[s("div",{staticClass:"d-flex"},[s("div",{staticClass:"align-self-center ml-auto"},[s("v-icon",{attrs:{small:""}},[t._v("mdi-chevron-down")])],1),s("div",[s("div",{staticClass:"mr-1"},[t._v(t._s(t.$t("Common.制空")))]),s("div",[t._v("("+t._s(t.$t("Common.x機",{number:t.slot}))+")")])])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow("defenseAirPower",t.viewStatus),expression:"isShow('defenseAirPower', viewStatus)"}],staticClass:"item-status",class:{desc:"defenseAirPower"===t.sortKey&&t.isDesc,asc:"defenseAirPower"===t.sortKey&&!t.isDesc},attrs:{tabindex:"0"},on:{click:function(e){return t.toggleSortKey("defenseAirPower")},keypress:function(e){return t.toggleSortKey("defenseAirPower")}}},[s("div",{staticClass:"d-flex"},[s("div",{staticClass:"align-self-center ml-auto"},[s("v-icon",{attrs:{small:""}},[t._v("mdi-chevron-down")])],1),s("div",[s("div",[t._v(t._s(t.$t("Common.防空制空")))]),s("div",[t._v("("+t._s(t.$t("Common.x機",{number:t.slot}))+")")])])])])],2):t._e(),t._l(t.itemListData,(function(e,i){return s("div",{key:i},[t.multiLine?s("div",{staticClass:"type-divider"},[s("div",{staticClass:"caption text--secondary"},[t._v(t._s(t.$t("EType."+e.typeName)))]),s("div",{staticClass:"type-divider-border"})]):t._e(),s("div",{staticClass:"type-item-container",class:{multi:t.multiLine}},t._l(e.items,(function(e,i){return s("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:e.count?"info--text":"red--text"},expression:"{ class: v.count ? 'info--text' : 'red--text' }"}],key:i,staticClass:"list-item",class:{single:!t.multiLine,"no-stock":!e.count,"has-bonus":e.sumBonus,"has-bad-bonus":e.sumBonus<0},attrs:{tabindex:"0"},on:{click:function(s){return t.clickedItem(e)},keypress:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.clickedItem(e)},mouseenter:function(s){return t.bootTooltip(e.item,e.bonus,s)},mouseleave:t.clearTooltip,focus:function(s){return t.bootTooltip(e.item,e.bonus,s)},blur:t.clearTooltip}},[s("div",[s("v-img",{attrs:{src:"./img/type/icon"+e.item.data.iconTypeId+".png",height:"30",width:"30"}})],1),s("div",{staticClass:"item-name text-truncate",class:{"is-special":e.item.data.isSpecial}},[t._v(" "+t._s(t.needTrans?t.$t(""+e.item.data.name):e.item.data.name)+" ")]),"Saury"===e.text?s("div",{staticClass:"saury-bonus"},[t.$vuetify.theme.dark?s("v-icon",{attrs:{color:"light-blue lighten-3"}},[t._v("mdi-fish mdi-rotate-315")]):s("v-icon",{attrs:{color:"light-blue lighten-2"}},[t._v("mdi-fish mdi-rotate-315")])],1):e.text?s("div",{staticClass:"item-special-text"},[s("div",{staticClass:"align-self-center"},[t._v(t._s(e.text))])]):t._e(),e.sumBonus?s("div",{staticClass:"bonus-icon"},[e.sumBonus<0?s("v-icon",{attrs:{color:"red lighten-1"}},[t._v("mdi-chevron-double-down")]):e.sumBonus<=2?s("v-icon",{staticClass:"pt-1",attrs:{color:"light-blue"}},[t._v("mdi-chevron-up")]):e.sumBonus<=5?s("v-icon",{attrs:{color:"light-blue"}},[t._v("mdi-chevron-double-up")]):s("v-icon",{attrs:{color:"light-blue"}},[t._v("mdi-chevron-triple-up")])],1):t._e(),t.isStockOnly&&e.remodel>0?s("div",{staticClass:"item-remodel caption mr-1"},[s("v-icon",{attrs:{small:"",color:"teal accent-4"}},[t._v("mdi-star")]),s("span",{staticClass:"teal--text text--accent-4"},[t._v(t._s(e.remodel))])],1):t._e(),t.isStockOnly&&!t.isEnemyMode?s("div",{staticClass:"item-count caption"},[s("span",[t._v("×")]),s("span",[t._v(t._s(e.count))])]):t._e(),t.multiLine?t._e():[t.isShowFire?s("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.actualFire)))]):t._e(),t.isShowDayBattleFire&&t.isAircraftMode?s("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.aircraftDayBattleFirePower)))]):t.isShowDayBattleFire?s("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.dayBattleFirePower)))]):t._e(),t.isShowTorpedo?s("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.actualTorpedo)))]):t._e(),t.isShowBomber?s("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.actualBomber)))]):t._e(),t.isShowAntiAir?s("div",{staticClass:"item-status"},[t._v(t._s(e.item.data.antiAir?e.item.data.antiAir:""))]):t._e(),t.isShowActAntiAir?s("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.actualAntiAir)))]):t._e(),t.isShowDefAntiAir?s("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.actualDefenseAntiAir)))]):t._e(),t.isShowArmor?s("div",{staticClass:"item-status"},[t._v(t._s(e.item.data.armor?e.item.data.armor:""))]):t._e(),t.isShowAsw?s("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.data.asw)))]):t._e(),t.isShowActualAsw?s("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.actualAsw)))]):t._e(),t.isShowAvoid?s("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.actualAvoid)))]):t._e(),t.isShowScout?s("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.actualScout)))]):t._e(),t.isShowAccuracy?s("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.actualAccuracy)))]):t._e(),t.isShowAntiBomber?s("div",{staticClass:"item-status"},[t._v(t._s(e.item.data.antiBomber?e.item.data.antiBomber:""))]):t._e(),t.isShowAntiAirWeight?s("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.antiAirWeight)))]):t._e(),t.isShowAntiAirBonus?s("div",{staticClass:"item-status"},[t._v(t._s(t.formatStatus(e.item.antiAirBonus/100)))]):t._e(),t.isAirbaseMode&&t.isShowRadius?s("div",{staticClass:"item-status"},[t._v(t._s(e.item.data.radius?e.item.data.radius:""))]):t._e(),t.isShowCost?s("div",{staticClass:"item-status"},[t._v(t._s(e.item.data.cost?e.item.data.cost:""))]):t._e(),t.isShowTP?s("div",{staticClass:"item-status"},[t._v(t._s(e.item.tp?e.item.tp:""))]):t._e(),t.isShowAvoidText?s("div",{staticClass:"item-status"},[t._v(" "+t._s(t.avoidTexts[e.item.data.avoidId]?t.$t("Common.回避性能."+t.avoidTexts[e.item.data.avoidId]):"")+" ")]):t._e(),t.isShowAirPower?s("div",{staticClass:"item-status"},[t._v(t._s(e.item.fullAirPower?e.item.fullAirPower:""))]):t._e(),t.isShowDefAirPower?s("div",{staticClass:"item-status"},[t._v(" "+t._s(e.item.defenseAirPower?e.item.defenseAirPower:"")+" ")]):t._e()]],2)})),0)])})),s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.viewItems.length,expression:"viewItems.length === 0"}],staticClass:"body-2 text-center mt-10"},[t._v(t._s(t.$t("Common.探したけど見つからなかったよ"))+"😢")])],2),s("v-tooltip",{attrs:{color:"black",bottom:"",right:"",transition:"slide-y-transition","position-x":t.tooltipX,"position-y":t.tooltipY},model:{value:t.enabledTooltip,callback:function(e){t.enabledTooltip=e},expression:"enabledTooltip"}},[s("item-tooltip",{attrs:{bonus:t.tooltipBonus},model:{value:t.tooltipItem,callback:function(e){t.tooltipItem=e},expression:"tooltipItem"}})],1),s("v-dialog",{attrs:{transition:"scroll-x-transition",width:"400"},model:{value:t.confirmDialog,callback:function(e){t.confirmDialog=e},expression:"confirmDialog"}},[s("v-card",{staticClass:"pa-3"},[s("div",{staticClass:"ma-4"},[s("div",[t._v(t._s(t.$t("Common.既に配備されています。")))]),s("div",{staticClass:"caption mt-2"},[t._v("※ "+t._s(t.$t("Common.配備を押せば無視して配備できます。")))])]),s("v-divider",{staticClass:"my-2"}),s("div",{staticClass:"d-flex"},[s("v-btn",{staticClass:"ml-auto",attrs:{color:"primary",dark:""},on:{click:function(e){return e.stopPropagation(),t.clickedItem(t.confirmItem)}}},[t._v(t._s(t.$t("Common.配備")))]),s("v-btn",{staticClass:"ml-4",attrs:{color:"secondary"},on:{click:function(e){e.stopPropagation(),t.confirmDialog=!1}}},[t._v(t._s(t.$t("Common.戻る")))])],1)],1)],1),s("v-dialog",{attrs:{width:"660"},on:{input:t.toggleBlacklistDialog},model:{value:t.blacklistDialog,callback:function(e){t.blacklistDialog=e},expression:"blacklistDialog"}},[s("blacklist-item-edit",{attrs:{"handle-close":t.closeBlacklist}})],1),s("v-dialog",{attrs:{width:"600"},model:{value:t.sortDialog,callback:function(e){t.sortDialog=e},expression:"sortDialog"}},[s("v-card",{staticClass:"px-3 py-3"},[s("div",{staticClass:"d-flex px-2 align-center"},[s("div",[t._v(t._s(t.$t("Common.ソート")))]),s("v-btn",{staticClass:"ml-auto",attrs:{icon:""},on:{click:function(e){t.sortDialog=!1}}},[s("v-icon",[t._v("mdi-close")])],1)],1),s("v-divider",{staticClass:"mt-2 mb-3"}),s("div",{staticClass:"sort-selector px-2"},t._l(t.sortKeyItems,(function(e,i){return s("div",{key:"key"+i,staticClass:"sort-key"},[s("v-btn",{class:{primary:e.value===t.sortKey},attrs:{block:"",text:""},on:{click:function(s){return t.selectSortKey(e.value)}}},[t._v(" "+t._s(t.$t("Common."+e.text))+" ")])],1)})),0),s("div",{staticClass:"d-flex justify-center"},[s("v-radio-group",{attrs:{row:"","hide-detail":""},on:{change:t.handleSortItem},model:{value:t.isDesc,callback:function(e){t.isDesc=e},expression:"isDesc"}},[s("v-radio",{staticClass:"mx-10",attrs:{label:t.$t("Common.昇順"),value:!1}}),s("v-radio",{staticClass:"mx-10",attrs:{label:t.$t("Common.降順"),value:!0}})],1)],1),s("v-divider"),s("div",{staticClass:"d-flex mt-3 justify-end"},[s("v-btn",{attrs:{color:"secondary"},on:{click:t.resetOrdering}},[t._v(t._s(t.$t("Common.リセット")))])],1)],1)],1)],1)},a=[],n=s(144),l=s(7487),o=s(9286),r=s(7777),c=s(5722),d=s(2382),m=s(6141),u=s(7525),h=s(9575),p=s(3631),v=s(6486),f=s(47),g=n.Z.extend({name:"ItemList",components:{ItemTooltip:l.Z,BlacklistItemEdit:o.Z},props:{handleEquipItem:{type:Function,required:!0},handleClose:{type:Function,required:!0},handleChangeWidth:{type:Function,required:!0}},data:()=>({itemParent:void 0,slotIndex:-1,all:[],baseItems:[],types:[],avoids:m.ZP.AVOID_TYPE,type:0,multiLine:!0,keyword:"",isEnemyMode:!1,isStockOnly:!1,isEnabledLandBaseAttack:!1,includeSonar:!0,includeDepthCharge:!0,includeDepthChargeLauncher:!0,onlyEnabledLandBaseAttack:!1,onlyDisabledLandBaseAttack:!1,onlyAffectingRange:!1,onlyNotAffectingRange:!1,onlyNightAircraft:!1,onlyAAResistAircraft:!1,isSpecialOnly:!1,sortRawStatus:!1,slot:0,avoidTexts:m.ZP.AVOID_TYPE.map((t=>t.text)),viewStatus:m.ZP.ITEM_TYPES_ALT[0].viewStatus,setting:new h.Z,sortKey:"",isDesc:!1,viewItems:[],itemStock:[],usedItems:[],confirmDialog:!1,confirmItem:{item:new u.Z,count:0},headerItems:[{text:"火力",key:"actualFire"},{text:"砲戦火力",key:"dayBattleFirePower"},{text:"雷装",key:"actualTorpedo"},{text:"爆装",key:"actualBomber"},{text:"対空",key:"antiAir"},{text:"出撃対空",key:"actualAntiAir"},{text:"防空対空",key:"actualDefenseAntiAir"},{text:"装甲",key:"armor"},{text:"対潜",key:"asw"},{text:"対潜",key:"actualAsw"},{text:"回避",key:"actualAvoid"},{text:"索敵",key:"actualScout"},{text:"命中",key:"actualAccuracy"},{text:"対爆",key:"antiBomber"},{text:"加重対空",key:"antiAirWeight"},{text:"艦隊防空",key:"antiAirBonus"},{text:"半径",key:"radius"},{text:"コスト",key:"cost"},{text:"TP",key:"tp"},{text:"射撃回避",key:"avoidId"},{text:"射程",key:"range"}],enabledTooltip:!1,tooltipTimer:void 0,tooltipItem:new u.Z,tooltipBonus:"",tooltipX:0,tooltipY:0,filterStatus:"radius",filterStatusItems:[],filterStatusValue:0,sortKeyItems:[],blacklistDialog:!1,blacklistItems:[],sortDialog:!1,decidedItem:!1}),mounted(){this.types=[];for(let e=0;e<m.ZP.ITEM_TYPES_ALT.length;e+=1){const t=m.ZP.ITEM_TYPES_ALT[e];this.types.push({id:t.id,text:t.text,viewStatus:t.viewStatus,types:t.types,sortKey:"",isDesc:!1})}const t=this.$store.state.items;for(let e=0;e<t.length;e+=1)this.all.push(t[e]);this.all.sort(((t,e)=>t.apiTypeId-e.apiTypeId)),this.avoidTexts[0]="",this.setting=this.$store.state.siteSetting,this.changeMultiLine(this.setting.isMultiLineForItemList),this.sortKeyItems.push({text:"図鑑ID",value:"id"});for(let e=0;e<this.headerItems.length;e+=1){const{text:t,key:s}=this.headerItems[e];"対潜"===t&&this.filterStatusItems.find((t=>t.text===this.$t("Common.対潜")))||(this.filterStatusItems.push({text:`${this.$t(`Common.${t}`)}`,value:s}),this.sortKeyItems.push({text:t,value:s}))}},computed:{isAirbaseMode(){return this.itemParent instanceof r.Z},isAircraftMode(){return this.itemParent instanceof d.Z&&(this.itemParent.data.isCV||[352,717].includes(this.itemParent.data.id))},itemListData(){const t=this.viewItems;if(this.multiLine){const e={id:1700,name:"爆雷投射機",sortKey:[]},s=m.ZP.ITEM_API_TYPE.concat();s.splice(22,0,e);const i=[];for(let a=0;a<s.length;a+=1){const n=s[a];let l=[];l=15===n.id?t.filter((t=>t.item.data.isStrictDepthCharge)):n.id===e.id?t.filter((t=>15===t.item.data.apiTypeId&&!t.item.data.isStrictDepthCharge)):t.filter((t=>t.item.data.apiTypeId===n.id)),l.length&&i.push({typeName:n.name,items:l})}return i}return[{typeName:"",items:t}]},enabledTypes(){const t=this.baseItems.map((t=>t.apiTypeId)),e=[];for(let s=0;s<this.types.length;s+=1){const i=this.types[s].types;t.find((t=>i.includes(t)))&&e.push(this.types[s])}return e},selectedType(){const t=this.types.find((t=>t.id===this.type));if(t)return t},isShow(){return(t,e)=>e.includes(t)},isShowFire(){return this.viewStatus.includes("actualFire")},isShowDayBattleFire(){return this.viewStatus.includes("dayBattleFirePower")},isShowTorpedo(){return this.viewStatus.includes("actualTorpedo")},isShowBomber(){return this.viewStatus.includes("actualBomber")},isShowAntiAir(){return this.viewStatus.includes("antiAir")},isShowActAntiAir(){return this.viewStatus.includes("actualAntiAir")},isShowDefAntiAir(){return this.viewStatus.includes("actualDefenseAntiAir")},isShowArmor(){return this.viewStatus.includes("armor")},isShowAsw(){return this.viewStatus.includes("asw")},isShowActualAsw(){return this.viewStatus.includes("actualAsw")},isShowAvoid(){return this.viewStatus.includes("actualAvoid")},isShowScout(){return this.viewStatus.includes("actualScout")},isShowAccuracy(){return this.viewStatus.includes("actualAccuracy")},isShowAntiBomber(){return this.viewStatus.includes("antiBomber")},isShowAntiAirWeight(){return this.viewStatus.includes("antiAirWeight")},isShowAntiAirBonus(){return this.viewStatus.includes("antiAirBonus")},isShowRadius(){return this.viewStatus.includes("radius")},isShowCost(){return this.viewStatus.includes("cost")},isShowTP(){return this.viewStatus.includes("tp")},isShowAvoidText(){return this.viewStatus.includes("avoidId")},isShowAirPower(){return this.viewStatus.includes("airPower")},isShowDefAirPower(){return this.viewStatus.includes("defenseAirPower")},formatStatus(){return t=>t?""+Math.floor(10*t)/10:""},needTrans(){const t=this.$store.state.siteSetting;return"ja"!==this.$i18n.locale&&!t.nameIsNotTranslate},enabledNightAircraftFilter(){return-1===this.type||6===this.type||7===this.type||8===this.type},enabledAAResistFilter(){return m.ZP.ATTACKERS.includes(this.type)||-1===this.type||1100===this.type}},methods:{changeType(t=0){this.type=t,this.selectedType&&this.selectedType.sortKey?(this.isDesc=this.selectedType.isDesc,this.sortKey=this.selectedType.sortKey):(this.sortKey="",this.isDesc=!1),this.filter()},clickedStockOnly(){this.setting.isStockOnlyForItemList=this.isStockOnly,this.$store.dispatch("updateSetting",this.setting),this.filter()},resetFilter(){this.keyword="",this.filterStatusValue=0,this.changedFilter()},initialFilter(t,e=0,s=[]){this.decidedItem=!1,this.itemParent=t,this.slotIndex=e,this.isEnemyMode=!1,this.filterStatus="radius",this.filterStatusValue=0,this.itemStock=this.$store.state.itemStock,this.setting=this.$store.state.siteSetting,this.isStockOnly=this.setting.isStockOnlyForItemList,this.$store.getters.getExistsTempStock&&(this.itemStock=this.$store.state.tempItemStock,this.isStockOnly=!0);const i=e===m.ZP.EXPAND_SLOT_INDEX;if(this.slot=i?0:t.items[e]?t.items[e].fullSlot:0,this.usedItems=[],s.length)this.usedItems=s;else{const t=this.$store.state.mainSaveData;if(t){const e=t.tempData[t.tempIndex];if(e){let t=[];for(let i=0;i<e.fleetInfo.fleets.length;i+=1){const{ships:s}=e.fleetInfo.fleets[i];for(let e=0;e<s.length;e+=1)t=t.concat(s[e].items.filter((t=>t.data.id>0))),s[e].exItem.data.id>0&&t.push(s[e].exItem)}const{airbases:s}=e.airbaseInfo;for(let e=0;e<s.length;e+=1)t=t.concat(s[e].items.filter((t=>t.data.id>0)));this.usedItems=t}}}let a=[];if(t instanceof d.Z&&t.data.id){this.baseItems=this.all.filter((s=>p.Z.isValidItem(t.data,s,e))),this.enabledTypes.length&&-1!==this.type&&!this.enabledTypes.find((t=>t.id===this.type))&&(this.type=this.enabledTypes[0].id);const s=this.setting.savedItemListFilter.find((t=>"ship"===t.parent));return s&&s.key&&(this.filterStatus=s.key),s&&s.value&&(this.filterStatusValue=s.value),void this.filter()}if(t instanceof d.Z)for(let n=1;n<=60;n+=1)m.ZP.AB_PLANE_TYPES.includes(n)||a.push(n);else if(t instanceof r.Z){a=m.ZP.PLANE_TYPES.concat(),-1===this.type||a.includes(this.type)||(this.type=47),this.slot=18;const t=this.setting.savedItemListFilter.find((t=>"airbase"===t.parent));t&&t.key&&(this.filterStatus=t.key),t&&t.value&&(this.filterStatusValue=t.value)}else if(t instanceof c.Z){a=m.ZP.ITEM_API_TYPE.map((t=>t.id));const t=this.all.filter((t=>t.isEnemyItem));a=a.filter((e=>t.some((t=>t.apiTypeId===e)))),this.isEnemyMode=!0,a.includes(this.type)||(this.type=+a[0])}if(i){const t=m.ZP.EXPANDED_ITEM_TYPE;a=a.filter((e=>t.includes(e)))}this.baseItems=this.all.filter((t=>a.includes(t.apiTypeId))),this.filter()},changedFilter(){const t={parent:"ship",key:this.filterStatus,value:this.filterStatusValue};if(this.itemParent instanceof d.Z)t.parent="ship";else{if(!this.isAirbaseMode)return void this.filter();t.parent="airbase"}if(!this.setting.savedItemListFilter)return void this.filter();const e=this.setting.savedItemListFilter.findIndex((e=>e.parent===t.parent));e>=0&&(this.setting.savedItemListFilter[e]=t,this.$store.dispatch("updateSetting",this.setting)),this.filter()},toggleAffectingRangeFilter(){this.onlyAffectingRange?(this.onlyAffectingRange=!1,this.onlyNotAffectingRange=!0):this.onlyNotAffectingRange?this.onlyNotAffectingRange=!1:this.onlyAffectingRange=!0,this.filter()},toggleLandBaseAttackFilter(){this.onlyEnabledLandBaseAttack?(this.onlyEnabledLandBaseAttack=!1,this.onlyDisabledLandBaseAttack=!0):this.onlyDisabledLandBaseAttack?this.onlyDisabledLandBaseAttack=!1:this.onlyEnabledLandBaseAttack=!0,this.filter()},filter(){const t=this.keyword?this.keyword.toUpperCase():"";let e=this.baseItems.concat();const s=this.setting.displayBonusKey;if(e=this.isEnemyMode?e.filter((t=>t.isEnemyItem)):e.filter((t=>!t.isEnemyItem)),7===this.type&&(this.onlyEnabledLandBaseAttack?e=e.filter((t=>m.ZP.ENABLED_LAND_BASE_ATTACK.includes(t.id))):this.onlyDisabledLandBaseAttack&&(e=e.filter((t=>!m.ZP.ENABLED_LAND_BASE_ATTACK.includes(t.id))))),14===this.type&&(this.includeSonar||(e=e.filter((t=>14!==t.apiTypeId))),this.includeDepthCharge||(e=e.filter((t=>1700!==t.iconTypeId))),this.includeDepthChargeLauncher||(e=e.filter((t=>17!==t.iconTypeId)))),this.enabledNightAircraftFilter&&this.onlyNightAircraft&&(e=e.filter((t=>t.isNightAircraftItem))),this.enabledAAResistFilter&&this.onlyAAResistAircraft&&(e=e.filter((t=>t.avoidId))),this.isSpecialOnly&&s&&(e=e.filter((t=>t.bonuses.find((t=>t.key===s))))),this.setting.blacklistItemIds.length){const t=this.setting.blacklistItemIds;e=e.filter((e=>!t.includes(e.id)))}t&&(e=e.filter((e=>e.id===+t||e.name.toUpperCase().indexOf(t)>=0)));const i=this.types.find((t=>t.id===this.type));!t&&this.type&&i?(this.viewStatus=i.viewStatus.concat(),this.isAirbaseMode||(this.viewStatus.includes("radius")&&(this.viewStatus[this.viewStatus.indexOf("radius")]="dayBattleFirePower"),this.viewStatus.includes("cost")&&(this.viewStatus[this.viewStatus.indexOf("cost")]="actualAvoid")),e=e.filter((t=>i.types.includes(t.apiTypeId)))):t||-1!==this.type||(this.itemParent instanceof d.Z?this.viewStatus=["dayBattleFirePower","antiAir","actualAccuracy","actualScout","actualTorpedo","actualAsw"]:this.isAirbaseMode?this.viewStatus=["actualTorpedo","actualBomber","actualAntiAir","radius","airPower","defenseAirPower"]:this.viewStatus=["actualFire","actualAntiAir","actualAccuracy","actualScout","actualAvoid","armor"]);let a=this.usedItems.concat();const n=this.sortRawStatus&&this.isStockOnly,l=[],o=this.setting.planeInitialLevels,{slot:r}=this;if(!this.isEnemyMode&&this.isStockOnly){const t=this.itemStock;for(let i=0;i<e.length;i+=1){const c=e[i],d=o.find((t=>t.id===c.apiTypeId)),m=t.find((t=>t.id===c.id));if(!m)continue;const h=d?d.level:0,p=s?c.bonuses.find((t=>t.key===s)):null;for(let t=10;t>=0;t-=1){let e=m.num[t];if(!e)continue;const s=new u.Z({master:c,slot:r,remodel:n?0:t,level:h}),i=a.filter((e=>e.data.id===c.id&&e.remodel===t)).length;e-=i,a=a.filter((e=>e.data.id!==c.id||e.remodel!==t)),l.push({item:s,count:Math.max(e,0),remodel:t,sumBonus:0,bonus:{},text:p?p.text:"",dayBattleFirePower:s.dayBattleFirePower,aircraftDayBattleFirePower:s.aircraftDayBattleFirePower})}}}else for(let d=0;d<e.length;d+=1){const t=e[d],i=o.find((e=>e.id===t.apiTypeId)),a=i?i.level:0,n=s?t.bonuses.find((t=>t.key===s)):null,c=new u.Z({master:t,slot:r,level:a});l.push({item:c,count:1,sumBonus:0,remodel:0,bonus:{},text:n?n.text:"",dayBattleFirePower:c.dayBattleFirePower,aircraftDayBattleFirePower:c.aircraftDayBattleFirePower})}if(this.viewItems=l,this.itemParent instanceof d.Z){const t=this.itemParent.items.concat();t.push(this.itemParent.exItem),this.slotIndex===m.ZP.EXPAND_SLOT_INDEX&&(this.slotIndex=t.length-1);const e=(0,v.cloneDeep)(t);e[this.slotIndex]=new u.Z;const s=d.Z.getItemBonus(this.itemParent.data,e),i=f.Z.getTotalBonus(s);for(let o=0;o<l.length;o+=1){const e=l[o],a=(0,v.cloneDeep)(t);a[this.slotIndex]=e.item;const r=d.Z.getItemBonus(this.itemParent.data,a);if(r.length>s.length){const t=f.Z.getTotalBonus(r);let s=0;t.firePower&&(t.firePower-=i.firePower??0,s+=t.firePower),t.torpedo&&(t.torpedo-=i.torpedo??0,s+=t.torpedo),t.antiAir&&(t.antiAir-=i.antiAir??0,s+=t.antiAir),t.armor&&(t.armor-=i.armor??0,s+=t.armor),t.asw&&(t.asw-=i.asw??0,s+=t.asw),t.avoid&&(t.avoid-=i.avoid??0,s+=t.avoid),t.accuracy&&(t.accuracy-=i.accuracy??0,s+=t.accuracy),t.range&&(t.range-=i.range??0,s+=t.range),t.bomber&&(t.bomber-=i.bomber??0,s+=t.bomber),t.scout&&(t.scout-=i.scout??0,s+=t.scout),e.sumBonus=s,e.bonus=t,n||(e.item.actualFire+=t.firePower??0,e.item.actualTorpedo+=t.torpedo??0,e.item.actualAsw+=t.asw??0,e.item.actualAccuracy+=t.accuracy??0,e.item.actualScout+=t.scout??0,e.item.actualAvoid+=t.avoid??0,e.item.data.isPlane&&!e.item.data.isSPPlane?(e.dayBattleFirePower+=t.firePower??0,e.aircraftDayBattleFirePower+=1.5*((t.firePower??0)+(t.torpedo??0)+(t.bomber??0))):(e.dayBattleFirePower+=t.firePower??0,e.aircraftDayBattleFirePower+=t.firePower??0))}}const a=this.itemParent.displayStatus.range;this.onlyAffectingRange?this.viewItems=this.viewItems.filter((t=>t.bonus.range||a<t.item.data.range)):this.onlyNotAffectingRange&&(this.viewItems=this.viewItems.filter((t=>!t.bonus.range&&a>=t.item.data.range)))}const c=this.filterStatusValue?+this.filterStatusValue:0;if(this.filterStatus&&c){let t=this.filterStatus;n&&t.startsWith("actual")&&(t=t.replace("actual",""));const e=t.indexOf("actual")>=0||"tp"===t||"airPower"===t||"defenseAirPower"===t||"antiAirWeight"===t||"antiAirBonus"===t;this.viewItems=this.viewItems.filter((s=>e?s.item[t]>=c:s.item.data[t]>=c))}this.sortKey&&this.sortItems()},clickedItem(t){this.decidedItem||(this.clearTooltip(),t.count||this.confirmDialog?(this.decidedItem=!0,this.confirmDialog=!1,this.handleEquipItem(new u.Z({item:t.item,remodel:t.remodel}))):(this.confirmItem=t,this.confirmDialog=!0))},changeMultiLine(t){this.handleChangeWidth(t?1200:900),this.multiLine=t,this.setting.isMultiLineForItemList=t,this.$store.dispatch("updateSetting",this.setting)},close(){this.handleClose()},toggleSortKey(t){this.sortKey!==t?(this.isDesc=!0,this.sortKey=t,this.sortItems()):this.sortKey===t&&this.isDesc?(this.isDesc=!1,this.sortItems()):this.sortKey!==t||this.isDesc||(this.sortKey="",this.filter()),this.selectedType&&(this.selectedType.isDesc=this.isDesc,this.selectedType.sortKey=this.sortKey)},selectSortKey(t){this.sortKey!==t&&(this.isDesc="id"!==t,this.sortKey=t,this.handleSortItem())},handleSortItem(){this.sortItems(),this.selectedType&&(this.selectedType.isDesc=this.isDesc,this.selectedType.sortKey=this.sortKey)},resetOrdering(){this.sortKey="",this.filter(),this.selectedType&&(this.selectedType.isDesc=this.isDesc,this.selectedType.sortKey=this.sortKey)},sortItems(){const t=this.sortKey,e=this.isDesc?1:-1;if("dayBattleFirePower"===t)return this.isAircraftMode?void this.viewItems.sort(((t,s)=>e*(s.aircraftDayBattleFirePower-t.aircraftDayBattleFirePower))):void this.viewItems.sort(((t,s)=>e*(s.dayBattleFirePower-t.dayBattleFirePower)));const s="name"===t,i=t.indexOf("actual")>=0||"tp"===t||"airPower"===t||"defenseAirPower"===t||"antiAirWeight"===t||"antiAirBonus"===t;this.viewItems.sort(((a,n)=>{if(i)return e*(n.item[t]-a.item[t]);if(s){const t=String(a.item.data.name).replace(/(\d+)/g,(t=>t.padStart(10,"0"))),s=String(n.item.data.name).replace(/(\d+)/g,(t=>t.padStart(10,"0")));return-e*(t<s?-1:t>s?1:0)}return e*(n.item.data[t]-a.item.data[t])}))},bootTooltip(t,e,s){const i=this.$store.state.siteSetting;if(i.disabledItemTooltip)return;const a=s.target.getElementsByClassName("item-name")[0];window.clearTimeout(this.tooltipTimer),this.tooltipTimer=window.setTimeout((()=>{const i=a.getBoundingClientRect();s instanceof FocusEvent?this.tooltipX=this.multiLine?i.x+i.width/3:i.left:this.tooltipX=this.multiLine?i.x+i.width/3:s.clientX,this.tooltipY=i.y+i.height,this.tooltipItem=t,this.tooltipBonus=e?JSON.stringify(e):"",this.enabledTooltip=!0}),Math.max(i.popUpCount,10))},clearTooltip(){this.enabledTooltip=!1,window.clearTimeout(this.tooltipTimer)},showBlacklist(){this.blacklistDialog=!0},closeBlacklist(){this.blacklistDialog=!1,this.toggleBlacklistDialog()},toggleBlacklistDialog(){this.blacklistDialog||this.filter()}}}),y=g,_=s(1001),x=s(3453),b=s.n(x),C=s(4562),w=s(2016),k=s(9582),S=s(3486),I=s(4061),A=s(9223),T=s(4324),$=s(5495),P=s(8419),Z=s(6379),L=s(9481),D=s(8718),E=s(9780),B=s(2082),F=s(6392),N=s.n(F),V=s(7069),R=(0,_.Z)(y,i,a,!1,null,"a42904c4",null),M=R.exports;b()(R,{VBtn:C.Z,VBtnToggle:w.Z,VCard:k.Z,VCheckbox:S.Z,VDialog:I.Z,VDivider:A.Z,VIcon:T.Z,VImg:$.Z,VRadio:P.Z,VRadioGroup:Z.Z,VSelect:L.Z,VSpacer:D.Z,VTextField:E.Z,VTooltip:B.Z}),N()(R,{Ripple:V.Z})},4944:function(t,e,s){s.d(e,{Z:function(){return E}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",[s("div",{staticClass:"d-flex pt-2 pb-1 pr-2"},[s("div",{staticClass:"align-self-center ml-3"},[t._v(t._s(t.$t("ItemList.装備プリセット")))]),s("v-spacer"),s("v-btn",{attrs:{icon:""},on:{click:t.handleClose}},[s("v-icon",[t._v("mdi-close")])],1)],1),s("v-divider"),s("div",{staticClass:"px-3 pt-3"},[s("v-btn",{attrs:{color:"teal",dark:!t.disabledCommit,disabled:t.disabledCommit},on:{click:function(e){return t.readyPreset()}}},[t._v(" "+t._s(t.$t("ItemList.現在の装備構成で新規登録"))+" ")]),s("v-divider",{staticClass:"mt-3"}),s("div",{staticClass:"preset-container py-1"},[s("div",{staticClass:"preset-list"},[s("draggable",{attrs:{handle:".preset-id",animation:"150"},on:{end:function(e){return t.sortEnd()}},model:{value:t.presets,callback:function(e){t.presets=e},expression:"presets"}},t._l(t.presets,(function(e,i){return s("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"info--text"},expression:"{ class: 'info--text' }"}],key:"preset"+i,staticClass:"preset-item",class:{selected:i===t.selectedIndex},attrs:{tabindex:"0"},on:{click:function(e){return t.clickedPreset(i)},dblclick:function(e){return t.expandPreset()},keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.clickedPreset(i)}}},[s("div",{staticClass:"preset-id primary--text"},[t._v(t._s(e.id)+".")]),s("div",{staticClass:"preset-name text-truncate"},[t._v(t._s(e.name))])])})),0)],1),s("div",{staticClass:"preset-view pl-2"},[t.isPresetItemEmpty?t._e():s("div",{staticClass:"mt-5 d-flex"},[s("div",[s("v-text-field",{attrs:{label:t.$t("ItemList.名称"),outlined:"",counter:"",clearable:"",dense:"",maxlength:"100"},model:{value:t.selectedPreset.name,callback:function(e){t.$set(t.selectedPreset,"name","string"===typeof e?e.trim():e)},expression:"selectedPreset.name"}})],1),s("div",[s("v-btn",{staticClass:"ml-1",attrs:{color:"success",disabled:!t.selectedPreset.name},on:{click:function(e){return t.savePreset()}}},[t._v(" "+t._s(t.selectedIndex>=0?t.$t("Common.更新"):t.$t("Common.保存"))+" ")])],1)]),t.isPresetItemEmpty?t._e():s("div",{staticClass:"items-container pa-2"},[t._l(t.itemView,(function(e,i){return s("div",{key:"view"+i,staticClass:"view-item"},[s("div",{staticClass:"caption"},[t._v(t._s(i+1)+".")]),s("div",{staticClass:"ml-1"},[e.data.iconTypeId>0?s("v-img",{attrs:{src:"./img/type/icon"+e.data.iconTypeId+".png",width:"30",height:"30"}}):t._e()],1),s("div",{staticClass:"ml-1 body-2 text-truncate preset-item-name"},[t._v(t._s(t.needTrans?t.$t(""+e.data.name):e.data.name))]),e.remodel?s("div",{staticClass:"ml-1 body-2"},[s("v-icon",{attrs:{small:"",color:"teal accent-4"}},[t._v("mdi-star")]),s("span",{staticClass:"teal--text text--accent-4"},[t._v(t._s(e.remodel))])],1):t._e()])})),t.exItemView.data.id?s("div",{staticClass:"mt-4 d-flex ml-1"},[s("div",{staticClass:"caption"},[t._v(t._s(t.$t("ItemList.補強増設")))]),s("div",{staticClass:"divider-line"})]):t._e(),t.exItemView.data.id?s("div",{staticClass:"view-item"},[s("div",{staticClass:"ml-2"},[t.exItemView.data.iconTypeId>0?s("v-img",{attrs:{src:"./img/type/icon"+t.exItemView.data.iconTypeId+".png",width:"24",height:"24"}}):t._e()],1),s("div",{staticClass:"ml-2 body-2 text-truncate preset-item-name"},[t._v(t._s(t.needTrans?t.$t(""+t.exItemView.data.name):t.exItemView.data.name))]),t.exItemView.remodel?s("div",{staticClass:"ml-1 body-2"},[s("v-icon",{attrs:{small:"",color:"teal accent-4"}},[t._v("mdi-star")]),s("span",{staticClass:"teal--text text--accent-4"},[t._v(t._s(t.exItemView.remodel))])],1):t._e()]):t._e()],2),t.isPresetItemEmpty?t._e():s("div",{staticClass:"d-flex my-3 justify-end"},[t.selectedIndex>=0?s("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.expandPreset()}}},[t._v(t._s(t.$t("Common.展開")))]):t._e(),s("v-btn",{staticClass:"ml-3",attrs:{color:"error",disabled:t.selectedIndex<0},on:{click:function(e){return t.deletePreset()}}},[t._v(t._s(t.$t("Common.削除")))])],1)])])],1),s("v-snackbar",{attrs:{color:"success",top:t.snackbar},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[s("v-btn",t._b({attrs:{icon:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",i,!1),[s("v-icon",[t._v("mdi-close")])],1)]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.infoText?t.$t("ItemList."+t.infoText):t.infoText)+" ")])],1)},a=[],n=s(144),l=s(9980),o=s.n(l),r=s(6162),c=s.n(r),d=s(361),m=s.n(d),u=s(2382),h=s(7327);class p{constructor(){(0,h.Z)(this,"id",0),(0,h.Z)(this,"name",""),(0,h.Z)(this,"items",[]),(0,h.Z)(this,"exItem",{id:0,remodel:0})}static convertOldItemPresets(t){if(!t||!t.length)return[];const e=[];for(let s=0;s<t.length;s+=1){const i=t[s];if("items"in i&&"exItem"in i)e.push(i);else if("itemIds"in i&&"exItemId"in i){const t=new p;t.id=i.id,t.name=i.name;for(let e=0;e<i.itemIds.length;e+=1)t.items.push({id:i.itemIds[e],remodel:0});t.exItem={id:i.exItemId,remodel:0},e.push(t)}}return e}}var v=s(7777),f=s(7525),g=n.Z.extend({name:"ItemPreset",components:{draggable:o()},props:{value:{type:[u.Z,v.Z],required:!0},handleExpandItemPreset:{type:Function,required:!0},handleClose:{type:Function,required:!0}},data:()=>({items:[],presets:[],selectedIndex:-1,selectedPreset:new p,snackbar:!1,infoText:""}),mounted(){this.presets=[];const t=this.$store.state.itemPresets;this.presets=p.convertOldItemPresets(t),this.items=this.$store.state.items},computed:{needTrans(){const t=this.$store.state.siteSetting;return"ja"!==this.$i18n.locale&&!t.nameIsNotTranslate},disabledCommit(){return this.value instanceof v.Z?0===this.value.items.filter((t=>t.data.id>0)).length:0===this.value.items.concat(this.value.exItem).filter((t=>t.data.id>0)).length},itemView(){const t=[];for(let e=0;e<this.selectedPreset.items.length;e+=1){const s=this.items.find((t=>t.id===this.selectedPreset.items[e].id));s?t.push(new f.Z({master:s,remodel:this.selectedPreset.items[e].remodel})):t.push(new f.Z)}return t},exItemView(){const t=this.items.find((t=>t.id===this.selectedPreset.exItem.id));return new f.Z({master:t,remodel:this.selectedPreset.exItem.remodel})},isPresetItemEmpty(){return!this.selectedPreset.items.some((t=>t.id>0))&&0===this.selectedPreset.exItem.id}},methods:{clickedPreset(t){t<this.presets.length&&(this.selectedIndex=t,this.selectedPreset=m()(this.presets[t]))},readyPreset(){const t=new p,e=c()(this.presets.map((t=>t.id)));e&&(t.id=e),t.id+=1,"ja"!==this.$i18n.locale?t.name=`${this.$t("ItemList.プリセット")} ${t.id}`:t.name=`装備プリセット${t.id}`;for(let s=0;s<this.value.items.length;s+=1){const e=this.value.items[s];t.items.push({id:e.data.id,remodel:e.remodel})}this.value instanceof u.Z&&(t.exItem={id:this.value.exItem.data.id,remodel:this.value.exItem.remodel}),this.selectedIndex=-1,this.selectedPreset=t},savePreset(){this.selectedIndex>=0?this.presets[this.selectedIndex]=this.selectedPreset:this.presets.push(this.selectedPreset),this.$store.dispatch("updateItemPresets",this.presets),this.infoText="保存しました。",this.snackbar=!0,this.selectedIndex=-1,this.selectedPreset=new p},deletePreset(){this.presets=this.presets.filter(((t,e)=>e!==this.selectedIndex)),this.$store.dispatch("updateItemPresets",this.presets),this.snackbar=!0,this.infoText="削除しました。",this.selectedIndex=-1,this.selectedPreset=new p},expandPreset(){this.selectedPreset&&(this.handleExpandItemPreset(this.selectedPreset),this.handleClose())},sortEnd(){for(let t=0;t<this.presets.length;t+=1)this.presets[t].id=t+1;this.$store.dispatch("updateItemPresets",this.presets)}}}),y=g,_=s(1001),x=s(3453),b=s.n(x),C=s(4562),w=s(9582),k=s(9223),S=s(4324),I=s(5495),A=s(9258),T=s(8718),$=s(9780),P=s(6392),Z=s.n(P),L=s(7069),D=(0,_.Z)(y,i,a,!1,null,"a9f68ae4",null),E=D.exports;b()(D,{VBtn:C.Z,VCard:w.Z,VDivider:k.Z,VIcon:S.Z,VImg:I.Z,VSnackbar:A.Z,VSpacer:T.Z,VTextField:$.Z}),Z()(D,{Ripple:L.Z})},4691:function(t,e,s){s.d(e,{Z:function(){return I}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mt-2"},[s("div",{staticClass:"d-flex flex-wrap"},[s("div",{staticClass:"form-control"},[s("v-select",{attrs:{label:t.$t("Common.陣形"),items:t.formations,"hide-details":"",outlined:"",dense:""},on:{change:t.updateTable},model:{value:t.formation,callback:function(e){t.formation=e},expression:"formation"}})],1),s("div",{staticClass:"form-control"},[s("v-select",{attrs:{label:t.$t("Fleet.対空CI"),items:t.antiAirItems,"hide-details":"",outlined:"",dense:""},on:{change:t.updateTable},model:{value:t.cutInId,callback:function(e){t.cutInId=e},expression:"cutInId"}})],1),s("div",{staticClass:"form-control"},[s("v-text-field",{attrs:{type:"number",min:"0",max:"999",label:t.$t("Fleet.攻撃機搭載数"),"hide-details":"",outlined:"",dense:""},on:{input:t.updateTable},model:{value:t.attackerSlot,callback:function(e){t.attackerSlot=t._n(e)},expression:"attackerSlot"}})],1),s("div",{staticClass:"form-control"},[s("v-select",{attrs:{label:t.$t("Fleet.対空射撃回避"),items:t.avoids,"hide-details":"",outlined:"",dense:""},on:{change:t.updateTable},model:{value:t.avoid,callback:function(e){t.avoid=e},expression:"avoid"}})],1),s("div",{staticClass:"form-control"},[s("v-text-field",{attrs:{type:"number",min:"0",max:"2",step:"0.1",label:t.$t("Fleet.加重対空補正"),"hide-details":"",outlined:"",dense:"",disabled:!t.isManual},on:{input:t.updateTable},model:{value:t.adj1,callback:function(e){t.adj1=t._n(e)},expression:"adj1"}})],1),s("div",{staticClass:"form-control"},[s("v-text-field",{attrs:{type:"number",min:"0",max:"2",step:"0.1",label:t.$t("Fleet.艦隊防空補正"),"hide-details":"",outlined:"",dense:"",disabled:!t.isManual},on:{input:t.updateTable},model:{value:t.adj2,callback:function(e){t.adj2=t._n(e)},expression:"adj2"}})],1)]),s("div",{staticClass:"mb-1 d-flex px-1"},[s("div",{staticClass:"align-self-end"},[s("span",{staticClass:"body-2 text--secondary mr-2"},[t._v(t._s(t.$t("Common.艦隊防空値")))]),s("span",[t._v(t._s(t.fleetAntiAir))])]),s("div",{staticClass:"ml-auto d-flex"},[s("v-checkbox",{staticClass:"mr-3",attrs:{label:t.$t("Fleet.空襲マス"),dense:"","hide-details":""},on:{change:t.updateTable},model:{value:t.isAirRaid,callback:function(e){t.isAirRaid=e},expression:"isAirRaid"}}),s("v-checkbox",{attrs:{label:t.$t("Fleet.敵側式"),dense:"","hide-details":""},on:{change:t.updateTable},model:{value:t.isEnemy,callback:function(e){t.isEnemy=e},expression:"isEnemy"}})],1)]),s("v-divider"),s("v-simple-table",{attrs:{"fixed-header":"",height:"54vh"},scopedSlots:t._u([{key:"default",fn:function(){return[s("thead",[s("tr",[s("th",{staticClass:"pl-2"},[t._v(t._s(t.$t("Fleet.艦娘")))]),s("th",{staticClass:"pr-1 text-right"},[t._v(t._s(t.$t("Common.加重対空")))]),s("th",{staticClass:"pr-1 text-right"},[t._v(t._s(t.$t("Fleet.割合撃墜")))]),s("th",{staticClass:"pr-1 text-right"},[t._v(t._s(t.$t("Fleet.固定撃墜")))]),s("th",{staticClass:"pr-1 text-right"},[t._v(t._s(t.$t("Fleet.最低保証")))]),s("th",{staticClass:"pr-1 text-right"},[t._v(t._s(t.$t("Fleet.両成功")))])])]),s("tbody",t._l(t.stage2Data,(function(e,i){return s("tr",{key:i,staticClass:"stage2-row pl-1",class:{warn:e.sum>=t.attackerSlot/2,danger:e.sum>=t.attackerSlot}},[s("td",{staticClass:"d-flex pl-1"},[s("div",{staticClass:"align-self-center mr-2"},[s("v-img",{attrs:{src:"./img/ship/"+e.id+".png",height:"30",width:"120"}})],1),s("div",{staticClass:"align-self-center d-none d-sm-block flex-grow-1"},[e.isEnemy?s("div",{staticClass:"stage2-id primary--text"},[t._v("id "+t._s(e.id))]):t._e(),s("div",{staticClass:"d-flex"},[s("div",{staticClass:"stage2-name text-truncate"},[t._v(t._s(t.getShipName(e.data)))])])])]),s("td",{staticClass:"pr-1 text-right"},[t._v(t._s(e.antiAirWeight))]),s("td",{staticClass:"pr-1 text-right"},[t._v(t._s(e.rate)+" ( "+t._s(t.$t("Common.x機",{number:e.rateDown}))+" )")]),s("td",{staticClass:"pr-1 text-right"},[t._v(t._s(e.fix))]),s("td",{staticClass:"pr-1 text-right"},[t._v(t._s(e.min))]),s("td",{staticClass:"pr-1 text-right"},[t._v(t._s(e.sum))])])})),0)]},proxy:!0}])})],1)},a=[],n=s(144),l=s(6889),o=s(6141),r=s(1715),c=s(3403),d=s(5722),m=s(4026),u=s(5549),h=s(2399),p=n.Z.extend({name:"AntiAirCalculator",props:{fleet:{type:[m.Z,l.Z],required:!0}},data:()=>({formation:1,avoid:0,attackerSlot:18,adj1:1,adj2:1,fleetAntiAir:"0.00",cutInId:0,isEnemy:!1,isAirRaid:!1,stage2Data:[],colorTable:["255, 64, 64","64, 255, 64","64, 64, 255","255, 255, 64","255, 64, 255"]}),computed:{isNotJapanese(){return"ja"!==this.$i18n.locale},needTrans(){const t=this.$store.state.siteSetting;return"ja"!==this.$i18n.locale&&!t.nameIsNotTranslate},ships(){return this.fleet instanceof l.Z?this.fleet.enemies.filter((t=>t.data.id>0)):this.fleet.ships.filter((t=>t.isActive&&!t.isEmpty))},formations(){if(this.isNotJapanese){const t=[];for(let e=0;e<o.ZP.FORMATIONS.length;e+=1){const{text:s,value:i,correction:a}=o.ZP.FORMATIONS[e];t.push({text:`${this.$t(`Common.${s}`)}`,value:i,correction:a})}return t}return o.ZP.FORMATIONS},avoids(){if(this.isNotJapanese){const t=[];for(let e=0;e<o.ZP.AVOID_TYPE.length;e+=1){const{text:s,value:i,c1:a,c2:n,c3:l,c4:r}=o.ZP.AVOID_TYPE[e];t.push({text:`${this.$t(`Common.回避性能.${s}`)}`,value:i,c1:a,c2:n,c3:l,c4:r})}return t}return o.ZP.AVOID_TYPE},isManual(){return this.avoid===o.ZP.MANUAL_AVOID},antiAirItems(){const t=[{text:"不発",value:0,rate:0,detail:""}],e=this.fleet.allAntiAirCutIn,s=this.fleet.shootDownList.map((t=>t.border));let i=0;for(let n=0;n<s.length;n+=1){const a=s[n];if(1===a)break;const{id:l}=e[n],r=o.ZP.ANTI_AIR_CUTIN.find((t=>t.id===l)),c=100*a-i;i+=c;const d=t.find((t=>t.value===l));r&&d?d.rate+=c:r&&t.push({text:r.text,value:r.id,rate:c,detail:`[ ${r.remarks} ]`})}t[0].rate=100-i;const a=[];for(let n=0;n<t.length;n+=1){const e=t[n];a.push({text:`${e.text}(${Math.floor(10*e.rate)/10}%) ${e.detail}`,value:e.value})}return a}},mounted(){this.isEnemy=this.ships[0]instanceof d.Z,this.formation=this.fleet.formation,this.updateTable()},methods:{updateTable(){let t=1,e=1;const s=o.ZP.AVOID_TYPE.find((t=>t.value===this.avoid));this.avoid!==o.ZP.MANUAL_AVOID&&s?(this.adj1=s.c1,this.adj2=s.c2,t=s.c3,e=s.c4):(this.adj1=Math.min(Math.abs(this.adj1),2),this.adj2=Math.min(Math.abs(this.adj2),2));let i=o.ZP.FORMATIONS.find((t=>t.value===this.formation));i||(i=o.ZP.FORMATIONS.find((()=>!0)));const a={text:"",value:0,c1:this.adj1,c2:this.adj2,c3:t,c4:e};let n=new c.Z;const l=o.ZP.ANTI_AIR_CUTIN.find((t=>t.id===this.cutInId));l&&(n=new c.Z(l.id,l.rateBonus,l.c1,l.c2,l.rate));const m=r.Z.getStage2(this.ships,this.isEnemy,this.fleet.isUnion,i,n,this.isAirRaid,a),u=m[m.length-1];this.stage2Data=[];for(let o=0;o<this.ships.length;o+=1){const t=this.ships[o],e=u.antiAirWeightList[o],s=u.rateDownList[o],i=Math.floor(this.attackerSlot*s),a=u.fixDownList[o],n=u.minimumDownList[o],l=t instanceof d.Z;this.stage2Data.push({id:t.data.id,data:t.data,name:t.data.name,rate:`${(100*s).toFixed(2)}%`,rateDown:i,fix:a,min:n,sum:i+a+n,antiAirWeight:e,isEnemy:l})}this.fleetAntiAir=this.fleet.getFleetAntiAir(i,a).toFixed(2)},getShipName(t){if(this.needTrans&&t instanceof u.Z){const e=u.Z.getSuffix(t),s=t=>t?`${this.$t(t)}`:"";return e.map((t=>s(t))).join("")}if(this.needTrans&&t.name){const e=h.Z.getSuffix(t.name),s=t=>t?`${this.$t(t)}`:"";return e.map((t=>s(t))).join("")}return t.name||""}}}),v=p,f=s(1001),g=s(3453),y=s.n(g),_=s(3486),x=s(9223),b=s(5495),C=s(9481),w=s(9449),k=s(9780),S=(0,f.Z)(v,i,a,!1,null,"1ecc6397",null),I=S.exports;y()(S,{VCheckbox:_.Z,VDivider:x.Z,VImg:b.Z,VSelect:C.Z,VSimpleTable:w.Z,VTextField:k.Z})},1171:function(t,e,s){s.d(e,{Z:function(){return P}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ma-2"},[s("div",{staticClass:"d-flex ml-5 align-center"},[s("div",[t._v(t._s(t.$t("Result.制空状態")))]),s("div",{staticClass:"ml-5"},[s("v-radio-group",{attrs:{row:""},on:{change:t.changeAirState},model:{value:t.airState,callback:function(e){t.airState=e},expression:"airState"}},[s("v-radio",{attrs:{label:t.$t("Common.制空権確保"),value:0}}),s("v-radio",{attrs:{label:t.$t("Common.航空優勢"),value:1}}),s("v-radio",{attrs:{label:t.$t("Common.航空劣勢"),value:2}})],1)],1)]),s("div",{staticClass:"graph-area"},[s("div",{staticClass:"contact-graph"},[s("doughnut-chart",{attrs:{data:t.graphData,options:t.options,"title-text":t.$t("Result.対敵通常艦隊")}})],1),s("div",{staticClass:"contact-graph"},[s("doughnut-chart",{attrs:{data:t.unionGraphData,options:t.unionOptions,"title-text":t.$t("Result.対敵連合艦隊")}})],1),s("div",{staticClass:"total-contact"},[s("div",[t._v(t._s(t.$t("Result.合計触接率")))]),s("div",[t._v(t._s(t.rates[t.airState].sumRate.toFixed(1))+" %")])]),s("div",{staticClass:"total-contact-union"},[s("div",[t._v(t._s(t.$t("Result.合計触接率")))]),s("div",[t._v(t._s(t.unionRates[t.airState].sumRate.toFixed(1))+" %")])])]),s("div",{staticClass:"contact-legends"},t._l(t.graphLegends,(function(e,i){return s("div",{key:"legend"+i,staticClass:"d-flex"},[s("div",{staticClass:"legend-color-label",style:"background-color: "+e.color}),s("div",{staticClass:"ml-2"},[t._v(t._s(e.text))])])})),0),s("div",[t._v(t._s(t.$t("Result.対敵通常艦隊")))]),s("div",{staticClass:"contact-row header-row"},[s("div",{staticClass:"text-left"},[t._v(t._s(t.$t("Result.制空状態")))]),s("div",[t._v(t._s(t.$t("Result.触接開始率")))]),s("div",[t._v("×1.2"+t._s(t.$t("Result.触接率")))]),s("div",[t._v("×1.17"+t._s(t.$t("Result.触接率")))]),s("div",[t._v("×1.12"+t._s(t.$t("Result.触接率")))]),s("div",[t._v(t._s(t.$t("Result.合計触接率")))])]),t._l(t.rates,(function(e,i){return s("div",{key:i,staticClass:"contact-row",class:{selected:i===t.airState}},[s("div",{staticClass:"text-left"},[t._v(t._s(t.$t("Common."+t.airStatus[i])))]),s("div",[t._v(t._s(e.startRate.toFixed(1))+" %")]),s("div",[t._v(t._s(e.contact120.toFixed(1))+" %")]),s("div",[t._v(t._s(e.contact117.toFixed(1))+" %")]),s("div",[t._v(t._s(e.contact112.toFixed(1))+" %")]),s("div",[t._v(t._s(e.sumRate.toFixed(1))+" %")])])})),s("div",{staticClass:"mt-2"},[t._v(t._s(t.$t("Result.対敵連合艦隊")))]),s("div",{staticClass:"contact-row header-row"},[s("div",{staticClass:"text-left"},[t._v(t._s(t.$t("Result.制空状態")))]),s("div",[t._v(t._s(t.$t("Result.触接開始率")))]),s("div",[t._v("×1.2"+t._s(t.$t("Result.触接率")))]),s("div",[t._v("×1.17"+t._s(t.$t("Result.触接率")))]),s("div",[t._v("×1.12"+t._s(t.$t("Result.触接率")))]),s("div",[t._v(t._s(t.$t("Result.合計触接率")))])]),t._l(t.unionRates,(function(e,i){return s("div",{key:"s"+i,staticClass:"contact-row",class:{selected:i===t.airState}},[s("div",{staticClass:"text-left"},[t._v(t._s(t.$t("Common."+t.airStatus[i])))]),s("div",[t._v(t._s(e.startRate.toFixed(1))+" %")]),s("div",[t._v(t._s(e.contact120.toFixed(1))+" %")]),s("div",[t._v(t._s(e.contact117.toFixed(1))+" %")]),s("div",[t._v(t._s(e.contact112.toFixed(1))+" %")]),s("div",[t._v(t._s(e.sumRate.toFixed(1))+" %")])])}))],2)},a=[],n=s(144),l=s(4026),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chart-container"},[s("DoughnutChart",{ref:"doughnutRef",attrs:{"chart-data":t.actualData,options:t.actualOptions,plugins:t.plugins}})],1)},r=[],c=s(5706),d=s(6775),m=s(9231),u=s(6429);d.kL.register(u.Z,...d.zX);var h=n.Z.use(c.ZP).extend({components:{DoughnutChart:m.LD},props:{data:{type:Object,required:!0},options:{type:Object},titleText:{type:String}},data:()=>({doughnutRef:{},plugins:[u.Z]}),computed:{actualData(){return this.$vuetify.theme.dark&&(this.data.datasets[0].borderColor="#222"),this.data},actualOptions(){return this.$vuetify.theme.dark&&(this.options.plugins.datalabels.color="#fff",this.options.plugins.title.color="#ccc"),this.titleText&&(this.options.plugins.title.text=this.titleText),this.options}}}),p=h,v=s(1001),f=(0,v.Z)(p,o,r,!1,null,"6bb4af6a",null),g=f.exports,y=s(6889),_=s(7777);const x=["x12触接","x117触接","x112触接","触接不発"],b=["rgba(100, 180, 255, 0.7)","rgba(80, 220, 120, 0.7)","rgba(255, 160, 100, 0.7)","rgba(128, 128, 128, 0.5)"],C=t=>`${t.dataset.labels[t.dataIndex]}: ${t.parsed.toFixed(1)} %`;var w=n.Z.extend({name:"ContactRates",components:{DoughnutChart:g},props:{fleet:{type:[l.Z,y.Z,_.Z],required:!0}},data:()=>({airState:0,airStatus:["制空権確保","航空優勢","航空劣勢"],graphData:{},unionGraphData:{},rates:[],unionRates:[],options:{plugins:{legend:{display:!1},title:{display:!0,text:""},tooltip:{callbacks:{label:C}},datalabels:{formatter:t=>t>0?`${t.toFixed(1)}%`:""}}},unionOptions:{plugins:{legend:{display:!1},title:{display:!0,text:""},tooltip:{callbacks:{label:C}},datalabels:{formatter:t=>t>0?`${t.toFixed(1)}%`:""}}},graphLegends:[]}),created(){this.calculate()},methods:{calculate(){this.rates=this.fleet.getContactRates(),this.unionRates=this.fleet.getContactRates(!0),this.graphData=this.getGraphData(this.rates[this.airState]),this.unionGraphData=this.getGraphData(this.unionRates[this.airState]),this.graphLegends=[];for(let t=0;t<4;t+=1)this.graphLegends.push({text:`${this.$t(`Result.${x[t]}`)}`,color:b[t]})},changeAirState(){this.graphData=this.getGraphData(this.rates[this.airState]),this.unionGraphData=this.getGraphData(this.unionRates[this.airState])},getGraphData(t){const e={labels:x,datasets:[{data:[0,0,0,100],backgroundColor:b,borderColor:"#fff",labels:x}]};return t&&(e.datasets[0].data=[t.contact120,t.contact117,t.contact112,100-t.sumRate]),e}}}),k=w,S=s(3453),I=s.n(S),A=s(8419),T=s(6379),$=(0,v.Z)(k,i,a,!1,null,"68c3a088",null),P=$.exports;I()($,{VRadio:A.Z,VRadioGroup:T.Z})}}]);
//# sourceMappingURL=177.c1732186.js.map